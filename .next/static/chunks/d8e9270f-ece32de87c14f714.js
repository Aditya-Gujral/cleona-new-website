"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6744],{88477:function(e,t,n){let i,a,r,o,s;n.d(t,{$AP:function(){return iU},$G7:function(){return i1},$rW:function(){return su},AJ_:function(){return Pj},AOL:function(){return rQ},Ahg:function(){return cm},B_:function(){return Ee},BoV:function(){return ij},Bwn:function(){return aW},C8M:function(){return _Q},CVH:function(){return aJ},CbY:function(){return sV},Cnp:function(){return qO},Cr6:function(){return Sq},Cw0:function(){return aU},Dab:function(){return Cb},Dqo:function(){return CP},Dr7:function(){return rz},E6V:function(){return Bl},EM1:function(){return SV},EZo:function(){return pM},EyJ:function(){return kX},FMn:function(){return IC},GWp:function(){return _4},HD0:function(){return iP},H__:function(){return Cz},Hdz:function(){return jT},IIC:function(){return CF},I_y:function(){return NQ},K4Y:function(){return zM},LPT:function(){return F0},LZ8:function(){return iI},L_b:function(){return vu},Lky:function(){return AU},LvP:function(){return aQ},LxO:function(){return Bg},MUX:function(){return iv},NEx:function(){return Bn},NFh:function(){return dq},NuZ:function(){return iN},Or8:function(){return LP},P08:function(){return Cx},P9l:function(){return Al},PtK:function(){return rx},Q3k:function(){return Ph},QMc:function(){return oA},QRq:function(){return k8},RgL:function(){return iE},Ses:function(){return mT},Sis:function(){return _5},UMU:function(){return jY},Uy$:function(){return iO},WEl:function(){return ri},X$R:function(){return Dp},XNc:function(){return Ah},YG6:function(){return qI},YtX:function(){return oP},Z7x:function(){return function e(t,n,i=[]){if(n(t,i)){if("array"===t.type){"unchanged"!==t.action&&t.items.forEach(t=>{let a="object"===t.diff.type&&t.diff.toValue?._key,r=a?{_key:a}:typeof t.toIndex>"u"?t.fromIndex||0:t.toIndex;e(t.diff,n,i.concat(r))});return}if("object"===t.type){"unchanged"!==t.action&&Object.keys(t.fields).forEach(a=>{e(t.fields[a],n,i.concat(a))});return}"string"===t.type&&"unchanged"!==t.action&&t.segments.forEach(t=>{e(t,n,i)})}}},ZDM:function(){return aV},_2T:function(){return y3},_mO:function(){return BE},a3k:function(){return IE},aAo:function(){return cM},aQ3:function(){return lD},ap5:function(){return C$},cFj:function(){return dR},cWh:function(){return AK},clL:function(){return _J},d9t:function(){return Bs},duV:function(){return BR},e8h:function(){return aN},eLL:function(){return vc},ek8:function(){return iC},euX:function(){return cT},f31:function(){return iA},fm0:function(){return sG},g7N:function(){return Sv},hHf:function(){return jz},iWf:function(){return k5},iav:function(){return Bc},jbM:function(){return av},jr5:function(){return qP},kJL:function(){return i$},kNp:function(){return oT},kwM:function(){return kJ},l$t:function(){return at},lXN:function(){return aI},m85:function(){return Bi},mEJ:function(){return oI},mPO:function(){return iL},mju:function(){return dy},nqf:function(){return Pf},nuD:function(){return Bw},oUE:function(){return BZ},ofl:function(){return Bv},ogX:function(){return bU},ooN:function(){return LF},pt$:function(){return _q},q$K:function(){return Ec},qGk:function(){return o_},quP:function(){return br},qyu:function(){return i_},r8Q:function(){return lR},rq_:function(){return CI},s8v:function(){return F_},sr_:function(){return a8},t2O:function(){return jA},t8m:function(){return sU},tJW:function(){return CO},uwK:function(){return aL},v0Z:function(){return a6},vNl:function(){return rm},vSY:function(){return jP},vsM:function(){return iS},wBu:function(){return da},x$p:function(){return Fw},x$w:function(){return iD},xJ:function(){return vh},xMr:function(){return qz},ytj:function(){return ca},z1O:function(){return Br},zEW:function(){return Bk},zNf:function(){return sZ}});var l=n(57437),c=n(28748),d=n(2265),u=n(20450),p=n(97806),m=n(22170),h=n(31031),f=n(54111),g=n(95954),x=n(3870),y=n(90089),b=n(87325),v=n(72979),j=n(89183),C=n(60229),w=n(17245),k=n(69729),T=n(31631),A=n(48527),_=n(16144),S=n(51420),E=n(62896),M=n(74875),N=n(8450),I=n(16628),z=n(74222),$=n(27196),O=n(96059),P=n(65690),F=n(78699),D=n(69944),R=n(3609),L=n(5730),B=n(61125),q=n(9043),V=n(59023),K=n(59638),U=n(88864),Z=n(12758),G=n(75086),H=n(70394),W=n(72943),Y=n(76598),J=n(24218),X=n(45715),Q=n(1228),ee=n(30112),et=n(25575),en=n(80450),ei=n(48209),ea=n(39864),er=n(14998),eo=n(18952),es=n(75302),el=n(2127),ec=n(79375),ed=n(50476),eu=n(54196),ep=n(1537),em=n(50054),eh=n(71134),ef=n(47127),eg=n(82376),ex=n(31755),ey=n(82980),eb=n(16586),ev=n(29809),ej=n(22238),eC=n(18195),ew=n(13956),ek=n(33081),eT=n(2502),eA=n(88581),e_=n(25167),eS=n(21977),eE=n(75814),eM=n(32026),eN=n(45683),eI=n(43182),ez=n(61132),e$=n(57287),eO=n(99095),eP=n(2294),eF=n(12916),eD=n(89830),eR=n(27025),eL=n(84034),eB=n(56800),eq=n(35180),eV=n(97277),eK=n(90374),eU=n(37153),eZ=n(36103),eG=n(10462),eH=n(28227),eW=n(67655),eY=n(75080),eJ=n(42764),eX=n(80566),eQ=n(1770),e0=n(72417),e1=n(29717),e2=n(79742),e3=n(95063),e4=n(438),e5=n(95492),e8=n(62332),e6=n(13232),e7=n(97019),e9=n(61010),te=n(50104),tt=n(90195),tn=n(32999),ti=n(76287),ta=n(75149),tr=n(95565),to=n(85392),ts=n(15554),tl=n(37063),tc=n(49998),td=n(13906),tu=n(57420),tp=n(18633),tm=n(18012),th=n(69559),tf=n(48560),tg=n(82732),tx=n(86234),ty=n(71279),tb=n(77486),tv=n(66089),tj=n(99752),tC=n(52294),tw=n(23177),tk=n(74423),tT=n(91090),tA=n(62191),t_=n(97923),tS=n(50902),tE=n(38127),tM=n(51461),tN=n(18146),tI=n(36294),tz=n(30211),t$=n(91635),tO=n(32656),tP=n(12314),tF=n(66764),tD=n(36811),tR=n(85017),tL=n(38793),tB=n(6258),tq=n(88009),tV=n(79214),tK=n(98014),tU=n(70613),tZ=n(84835),tG=n(76131),tH=n(36426),tW=n(12272),tY=n(37105),tJ=n(96579),tX=n(88477),tQ=n(53556),t0=n(34071),t1=n(92535),t2=n(58855),t3=n(85727),t4=n(67424),t5=n(66345),t8=n(95127),t6=n(88262),t7=n(24735),t9=n(86927),ne=n(37656),nt=n(11128),nn=n(46027),ni=n(35694),na=n(49530),nr=n(2419),no=n(3746),ns=n(55022),nl=n(21872),nc=n(60128),nd=n(74780),nu=n(20753),np=n(10554),nm=n(4572),nh=n(91116),nf=n(94021),ng=n(79801),nx=n(88906),ny=n(83826),nb=n(80233),nv=n(29271),nj=n(19752),nC=n(45859),nw=n(73261),nk=n(97532),nT=n(84251),nA=n(19644),n_=n(36501),nS=n(31189),nE=n(90215),nM=n(62079),nN=n(85756),nI=n(78414),nz=n(25217),n$=n(19233),nO=n(72778),nP=n(63559),nF=n(33323),nD=n(54459),nR=n(6183),nL=n(63493),nB=n(37632),nq=n(67183),nV=n(38544),nK=n(77794),nU=n(13839),nZ=n(6351),nG=n(89367),nH=n(69056),nW=n(24255),nY=n(54820),nJ=n(38665),nX=n(71519),nQ=n(73823),n0=n(72144),n1=n(62637),n2=n(15502),n3=n(29488),n4=n(80106),n5=n(34641),n8=n(70745),n6=n(25616),n7=n(71503),n9=n(96458),ie=n(8829),it=n(98453),ii=n(1359),ia=n(34532),ir=n(45127),io=n(80203),is=n(11030),il=n(63117),ic=n(5759),id=n(9488),iu=n(50833);n(34040);var ip=n(25566);function im(){let[e]=(0,d.useState)(()=>new Map),[t,n]=(0,d.useReducer)(()=>Array.from(e.entries()),[]),i=(0,d.useMemo)(()=>m(n,10,{trailing:!0}),[]);return{store:(0,d.useMemo)(()=>({add:function(t,n){e.has(t),e.set(t,n),i()},remove:function(t){e.has(t),e.delete(t),i()},update:function(t,n){e.has(t),e.set(t,n),i()}}),[i,e]),snapshot:t}}function ih(e,t,n,i=Object.is){let a=(0,d.useRef)(null),r=(0,d.useRef)(null);(0,d.useLayoutEffect)(()=>{if(null===t||null===e)return;let i=n();return e.add(t,i),a.current=t,r.current=i,()=>{e.remove(t),a.current=null,r.current=null}},[t,e,n]),(0,d.useLayoutEffect)(()=>{if(null===t||null===a.current||null===e||t!==a.current)return;let o=n();i(r.current,o)||(e.update(t,o),r.current=o)})}let ig=(0,d.memo)(function(e){let{children:t}=e,{store:n,snapshot:i}=im();return(0,l.jsx)(p.jm.Provider,{value:n,children:(0,l.jsx)(p.L2.Provider,{value:i,children:t})})}),ix=[];function iy(){let e=(0,d.useContext)(p.L2);return null===e?(console.warn(Error('No context provided for reporter. Make sure that the component calling "useChangeIndicatorsReportedValues()", is wrapped inside a <ChangeIndicatorsTracker> element')),ix):e}let ib=(e,t,n)=>{let i=(0,d.useContext)(p.jm);null===i&&console.warn(Error('No context provided for reporter. Make sure that the component calling "useChangeIndicatorsReporter()", is wrapped inside a <ChangeIndicatorsTracker> element')),ih(i,e,t,n)},iv=e=>{let{path:t,hasHover:n}=e,{onSetFocus:i}=(0,d.useContext)(p.In),[a,r]=(0,d.useState)(!1),o=(0,d.useCallback)(()=>{r(!0)},[]),s=(0,d.useCallback)(()=>{r(!1)},[]),[m,h]=(0,d.useState)(null);ib((0,d.useMemo)(()=>m?`change-${c.BB(t)}`:null,[m,t]),(0,d.useCallback)(()=>({element:m,path:t,isChanged:!0,hasFocus:!1,hasHover:a,hasRevertHover:n}),[m,a,n,t]),u);let f=(0,d.useCallback)(e=>{e.stopPropagation(),i(t)},[i,t]);return(0,l.jsx)("div",{ref:h,onClick:f,onMouseLeave:s,onMouseEnter:o,children:e.children})};function ij(e){let t=(0,d.useRef)(e);return eF(t.current,e)||(t.current=e),t.current}function iC(e,t){let n=[t,!0],i={type:"tuple",tuple:n};return function(t){let a=ij(t),r=(0,d.useMemo)(()=>(0,N.of)(a).pipe((0,ec.w)(t=>(0,I.z)((0,N.of)({type:"loading"}),e(t).pipe((0,P.U)(e=>({type:"value",value:e}))))),(0,ep.R)(([e],t)=>"loading"===t.type?[e,!0]:[t.value,!1],n),(0,ea.x)(([e,t],[n,i])=>!(e!==n||t!==i)),(0,P.U)(e=>({type:"tuple",tuple:e})),(0,F.K)(e=>(0,N.of)({type:"error",error:e}))),[a]),o=(0,eR.m)(r,i);if("error"===o.type)throw o.error;return o.tuple}}function iw(e){return null!=e}let ik="drafts.";function iT(e){return e.startsWith(ik)}function iA(e){return{draftId:i_(e),publishedId:iS(e)}}function i_(e){return iT(e)?e:ik+e}function iS(e){return iT(e)?e.slice(ik.length):e}function iE(e){return Array.from(e.reduce((e,t)=>{let n=iS(t._id),i=e.get(n);return i||(i={id:n,type:t._type,published:void 0,draft:void 0},e.set(n,i)),i[n===t._id?"published":"draft"]=t,e},new Map).values())}function iM(e){return iE(e).map(e=>e.draft||e.published).filter(iw)}let iN=Object.freeze({}),iI=Object.freeze([]),iz=function(){if("u">typeof globalThis)return globalThis;if("u">typeof window)return window;if("u">typeof self)return self;if("u">typeof global)return global;throw Error("@sanity/ui: could not locate global scope")}();function i$(e){return Array.isArray(e)}function iO(e){return!!e&&"object"==typeof e&&!Array.isArray(e)}function iP(e){return"string"==typeof e}let iF="object"==typeof document&&"object"==typeof window&&window.ResizeObserver?window.ResizeObserver:f.do,iD=(()=>{let e=(0,g.Z)(),t=new iF(t=>e.publish(t));return{observe:(n,i,a)=>{let r=e.subscribe(e=>{let t=e.find(e=>e.target===n);t&&i(t)});return t.observe(n,a),()=>{r(),t.unobserve(n)}},unobserve:e=>t.unobserve(e)}})(),iR=["sanity.imageAsset","sanity.fileAsset"];function iL(e){return"document"===e.type&&!("document"===e.type&&iR.includes(e.name))}let iB=["match","in","asc","desc","true","false","null"],iq=/^[a-zA-Z_][a-zA-Z0-9_]*$/,iV=e=>!iq.test(e)||iB.includes(e),iK=e=>`["${e}"]`,iU=!(typeof window>"u")&&("ontouchstart"in window||navigator.maxTouchPoints>0||navigator.msMaxTouchPoints>0),iZ="object"==typeof Intl&&"Segmenter"in Intl?new Intl.Segmenter:void 0;function iG(e,t){let n=function(e,t,n){if(n<0)throw Error("End must be greater than start, use `String.prototype.slice()` for negative values");if(!iZ)return e.slice(0,n);let i=0,a="";for(let t of iZ.segment(e)){if(i===n)break;a+=t.segment,i++}return a}(e,0,t);return n===e?n:`${n}\u2026`}let iH={isLoading:!0,value:void 0,error:null};function iW(e,t){let n=(0,d.useMemo)(()=>e.pipe(e=>e.pipe((0,P.U)(e=>({isLoading:!1,value:e,error:null})),(0,F.K)(e=>(0,N.of)({isLoading:!1,value:void 0,error:e})))),[e]);return(0,eR.m)(n,typeof t>"u"?iH:{isLoading:!1,value:t,error:null})}function iY(e,t){return null!==e&&e.roles.some(e=>e.name===t)}let iJ=!(typeof ip>"u")&&ip?.env?.SANITY_STUDIO_DEBUG_I18N,iX={reverse:e=>`\u202E${e}`,triangles:e=>`\u25E4 ${e} \u25E2`};function iQ(e){let t="reverse"===iJ||"triangles"===iJ?iX[iJ]:null;return t?(...n)=>t(e(...n)):e}let i0={bindI18n:!1};function i1(e,t){let{t:n}=(0,y.$G)(e,t?{keyPrefix:t.keyPrefix,lng:t.lng,...i0}:i0);return{t:iQ(n)}}let i2=j.zo.div(({$changed:e,$disabled:t,$hasFocus:n,$isReviewChangeOpen:i})=>t?(0,j.iv)`
        ${i5}:after {
          display: none;
        }
      `:(0,j.iv)`
      --change-bar-offset: 4px;

      display: flex;
      position: relative;

      ${i5}:after {
        opacity: 0.5;
      }

      @media (hover: hover) {
        &:hover {
          z-index: 10;
          ${i5}:after {
            opacity: 1;
          }
        }
      }

      /* hide when field is not changed */
      ${n&&(0,j.iv)`
        ${i5}:after {
          opacity: 1;
        }
      `}

      /* hide when field is not changed */
      ${!e&&(0,j.iv)`
        ${i5}:after {
          opacity: 0;
          pointer-events: none;
        }
      `}

      /* hide hover effect when review changes is open */
      ${i&&(0,j.iv)`
        ${i8} {
          opacity: 0;
        }
      `}
    `),i3=j.zo.div`
  flex-grow: 1;
  min-width: 0;
`,i4=j.zo.div`
  position: relative;
  opacity: 1;
  transition: opacity 100ms;
  z-index: ${({$zIndex:e})=>e};
`,i5=j.zo.div(e=>{let{media:t}=(0,b.aQ)(e.theme);return(0,j.iv)`
    position: absolute;
    top: -1px;
    left: var(--change-bar-offset);
    width: 1px;
    bottom: -1px;
    background-color: var(--card-bg-color);

    @media (min-width: ${t[0]}px) {
      display: unset;
    }

    &:after {
      content: '';
      display: block;
      position: absolute;
      top: 1px;
      left: 0;
      width: 1px;
      bottom: 1px;
      background-color: var(--card-badge-caution-dot-color);
      border-radius: 0.5px;
    }
  `}),i8=j.zo.button(e=>{let{$withHoverEffect:t}=e;return(0,j.iv)`
    appearance: none;
    border: 0;
    outline: 0;
    display: block;
    padding: 0;
    background: transparent;
    opacity: 0;
    position: absolute;
    height: 100%;
    cursor: pointer;
    pointer-events: all;
    left: calc(-0.25rem + var(--change-bar-offset));
    width: calc(1rem - 1px);
    transition: opacity ${250}ms;

    &:focus {
      border: 0;
      outline: 0;
    }

    &:focus {
      border: 0;
      outline: 0;
    }

    ${t&&(0,j.iv)`
      @media (hover: hover) {
        &:hover {
          opacity: 0.2;
        }
      }
    `}
  `});function i6(e){let{children:t,disabled:n,hasFocus:i,isChanged:a,withHoverEffect:r=!0}=e,{onOpenReviewChanges:o,isReviewChangesOpen:s}=(0,d.useContext)(p.In),{zIndex:c}=(0,h.sJ)(),{t:u}=i1(),m=(0,d.useMemo)(()=>n||!a?null:(0,l.jsxs)(i4,{"data-testid":"change-bar",$zIndex:c,children:[(0,l.jsx)(i5,{"data-testid":"change-bar__marker"}),(0,l.jsx)(x.u,{content:u("changes.change-bar.aria-label"),portal:!0,children:(0,l.jsx)(i8,{"aria-label":u("changes.change-bar.aria-label"),"data-testid":"change-bar__button",onClick:s?void 0:o,tabIndex:-1,type:"button",$withHoverEffect:r})})]}),[n,a,s,o,u,r,c]);return(0,l.jsxs)(i2,{"data-testid":"change-bar-wrapper",$changed:a,$disabled:n,$hasFocus:i,$isReviewChangeOpen:s,children:[(0,l.jsx)(i3,{"data-testid":"change-bar__field-wrapper",children:t}),m]})}let i7=(0,d.memo)(function(e){let{children:t,disabled:n,hasFocus:i,isChanged:a,onMouseEnter:r,onMouseLeave:o,path:s=iI,withHoverEffect:p,...m}=e,f=(0,h.sJ)(),[g,x]=(0,d.useState)(!1),y=(0,d.useCallback)(e=>{r?.(e),x(!0)},[r]),b=(0,d.useCallback)(e=>{o?.(e),x(!1)},[o]),[v,j]=(0,d.useState)(null);return ib((0,d.useMemo)(()=>n||!v?null:`field-${c.BB(s)}`,[n,v,s]),(0,d.useCallback)(()=>({element:v,path:s,isChanged:a,hasFocus:i,hasHover:g,zIndex:f.zIndex}),[v,i,g,a,f.zIndex,s]),u),(0,l.jsx)("div",{...m,ref:j,onMouseEnter:y,onMouseLeave:b,children:(0,l.jsx)(i6,{hasFocus:i,isChanged:a,disabled:n,withHoverEffect:p,children:t})})});function i9(e){let{children:t,hasFocus:n,isChanged:i,path:a,withHoverEffect:r,...o}=e;return(0,l.jsx)(i7,{...o,path:a,hasFocus:n,isChanged:i,withHoverEffect:r,children:t})}let ae=()=>{},at=(0,d.forwardRef)(function(e,t){let{as:n="div",onScroll:i,...a}=e,r=(0,d.useRef)(null);(0,d.useImperativeHandle)(t,()=>r.current);let o=(0,d.useContext)(p.$C),s=(0,d.useMemo)(()=>(0,g.Z)(),[]);return(0,d.useEffect)(()=>i?s.subscribe(i):ae,[s,i]),(0,d.useEffect)(()=>o?s.subscribe(o.publish):ae,[o,s]),(0,d.useEffect)(()=>{let e=e=>{s.publish(e)},t=r.current;if(t)return t.addEventListener("scroll",e,{passive:!0,capture:!0}),()=>{t.removeEventListener("scroll",e)}},[s,r]),(0,l.jsx)(p.$C.Provider,{value:s,children:(0,d.createElement)(n,{ref:r,"data-testid":"scroll-container",...a})})});function an({onScroll:e,children:t}){return function(e){let t=(0,d.useContext)(p.$C);(0,d.useEffect)(()=>t?.subscribe(e),[e,t])}(e),(0,l.jsx)(l.Fragment,{children:t})}function ai(e,t,n){let i;let a=t.slice(t.indexOf("-")+1)||"[]",r=c.mL(a),o=`${e}-${c.BB(r)}`;if(n.has(o))return n.get(o);for(let[t,a]of n){if(!("path"in a)||!t.startsWith(e))continue;let n=c.eh(r,a.path),o=a.path[a.path.length-1],s=n===a.path.length-1&&(0,w.fU)(o);if(0!==n&&!(n!==a.path.length&&!s)&&(i=a,n===r.length))break}return i}function aa(e){let t=getComputedStyle(e).overflow;return t.includes("auto")||t.includes("scroll")}let ar=(e,t)=>{let n={top:0,left:0,height:t.offsetHeight,width:t.offsetWidth},i={top:0,left:0,height:e.offsetHeight,width:e.offsetWidth},a=!1,r=e;for(;r&&r!==t&&t.contains(r);)a&&(n.top+=r.offsetTop,n.left+=r.offsetLeft),aa(r)&&(n.top=r.offsetTop,n.height=r.offsetHeight,n.left=r.offsetLeft,n.width=r.offsetWidth,a=!0),i.top+=r.offsetTop-r.scrollTop,i.left+=r.offsetLeft-r.scrollLeft,r=r.offsetParent;return{rect:i,bounds:n}};function ao(e){var t;let n=e.element;if(!n)return;let i=n;for(;!(((t=i).scrollHeight!==t.offsetHeight||t.scrollWidth!==t.offsetWidth)&&aa(t));)if(!(i=i.parentElement))return;i.scroll({top:i.scrollTop+e.rect.top-e.bounds.top+-15,left:0,behavior:"smooth"})}j.zo.rect`
  stroke: #ccc;
  fill: none;
  pointer-events: none;
  stroke-linecap: round;
`;let as=j.zo.path`
  fill: none;
  pointer-events: none;
  stroke-linejoin: round;
  stroke: var(--card-badge-caution-dot-color);
`,al=j.zo.path`
  fill: none;
  pointer-events: stroke;
  stroke: transparent;
  cursor: pointer;
  stroke-linecap: round;
  stroke-linejoin: round;
  opacity: 0;

  &:hover {
    opacity: 0.2;
  }
`,ac=(0,j.zo)(function(e){let{bounds:t,...n}=e,i=Math.max(t.left,e.left),a=Math.max(e.top,t.top),r=Math.max(0,e.height-(a-e.top)),o=Math.max(0,e.width-(i-e.left));return(0,l.jsx)("rect",{...n,x:i,y:a,height:r,width:o})})`
  stroke: none;
  pointer-events: none;
  fill: var(--card-badge-caution-dot-color);
`;function ad(e,t,n){return`M ${e-4} ${t-4*n} L ${e} ${t}L ${e+4} ${t-4*n}`}function au(e,t){return`M${e} ${t}`}function ap(e,t){return`L${e} ${t}`}function am(e,t,n,i){return`Q${e} ${t} ${n} ${i}`}function ah(e,t){let n=e.top+e.height/2,i=e.top+e.height<t.top+2,a=e.top>t.top+t.height-2;return{bounds:t,left:e.left,top:n,centerY:n,startY:e.top+8,endY:e.top+e.height-8,isAbove:i,isBelow:a,outOfBounds:i||a}}let af=(0,d.memo)(function({from:e,to:t}){let n=function(e){let t={top:e.from.bounds.top+12,bottom:e.from.bounds.top+e.from.bounds.height-12,left:e.from.bounds.left,right:e.from.bounds.left+e.from.bounds.width,width:e.from.bounds.width,height:e.from.bounds.height-24},n=ah(e.from.rect,t);n.left=e.from.rect.left+e.from.rect.width+1;let i={top:e.to.bounds.top+12,bottom:e.to.bounds.top+e.to.bounds.height-12,left:e.to.bounds.left,right:e.to.bounds.left+e.to.bounds.width,width:e.to.bounds.width,height:e.to.bounds.height-24},a=ah(e.to.rect,i),r=Math.max(a.startY,n.startY);return n.top=Math.min(r,n.endY),n.top<i.top?n.top=Math.min(i.top,n.endY):n.top>i.bottom&&(n.top=Math.max(i.bottom,n.startY)),a.top=Math.min(r,a.endY),a.top<t.top?a.top=Math.min(t.top,a.endY):a.top>t.bottom&&(a.top=Math.max(t.bottom,a.startY)),n.top=Math.min(Math.max(n.top,t.top),t.bottom),a.top=Math.min(Math.max(a.top,i.top),i.bottom),{from:n,to:a}}({from:e,to:t});if(n.from.outOfBounds&&n.to.outOfBounds)return null;let i=function(e){let{from:t,to:n}=e,{left:i,top:a}=t,{left:r,top:o}=n,s=[],l=Math.min(4,Math.abs(a-o)/2);return t.isAbove?s.push(au(i+8,a-12+2),ap(i+8,a-4),am(i+8,a,i+8+4,a)):t.isBelow?s.push(au(i+8,a+12-2),ap(i+8,a+4),am(i+8,a,i+8+4,a)):s.push(au(i,a)),n.isAbove?a<n.bounds.top?s.push(ap(n.bounds.left-8-l,a),am(n.bounds.left-8,a,n.bounds.left-8,a+l),ap(n.bounds.left-8,o-l),am(n.bounds.left-8,o,n.bounds.left-8+l,o),ap(n.bounds.left+8-4,o),am(n.bounds.left+8,o,n.bounds.left+8,o-4),ap(n.bounds.left+8,o-12+2)):s.push(ap(n.bounds.left+8-4,a),am(n.bounds.left+8,a,n.bounds.left+8,a-4),ap(n.bounds.left+8,o-12+2)):n.isBelow?a>n.bounds.top+n.bounds.height?s.push(ap(n.bounds.left-8-l,a),am(n.bounds.left-8,a,n.bounds.left-8,a-l),ap(n.bounds.left-8,o+l),am(n.bounds.left-8,o,n.bounds.left-8+l,o),ap(n.bounds.left+8-4,o),am(n.bounds.left+8,o,n.bounds.left+8,o+4),ap(n.bounds.left+8,o+12-2)):s.push(ap(n.bounds.left+8-4,a),am(n.bounds.left+8,a,n.bounds.left+8,a+4),ap(n.bounds.left+8,o+12-2)):a<o?s.push(ap(n.bounds.left+8-l,a),am(n.bounds.left+8,a,n.bounds.left+8,a+l),ap(n.bounds.left+8,o-l),am(n.bounds.left+8,o,n.bounds.left+8+l,o),ap(r,o)):s.push(ap(n.bounds.left+8-l,a),am(n.bounds.left+8,a,n.bounds.left+8,a-l),ap(n.bounds.left+8,o+l),am(n.bounds.left+8,o,n.bounds.left+8+l,o),ap(r,o)),function(e,t=""){return e.join(t)}(s)}(n);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(al,{d:i,strokeWidth:16}),(0,l.jsx)(as,{d:i,strokeWidth:1}),(0,l.jsx)(ac,{top:t.rect.top,left:t.rect.left-.5,height:t.rect.height,width:1,bounds:t.bounds}),n.from.isAbove&&(0,l.jsx)(as,{d:ad(n.from.left+8,n.from.bounds.top-12+2,-1),strokeWidth:1}),n.from.isBelow&&(0,l.jsx)(as,{d:ad(n.from.left+8,n.from.bounds.top+n.from.bounds.height+12-2,1),strokeWidth:1}),n.to.isAbove&&(0,l.jsx)(as,{d:ad(n.to.bounds.left+8,n.to.bounds.top-12+2,-1),strokeWidth:1}),n.to.isBelow&&(0,l.jsx)(as,{d:ad(n.to.bounds.left+8,n.to.bounds.top+n.to.bounds.height+12-2,1),strokeWidth:1}),!1]})}),ag=j.zo.svg`
  pointer-events: none;
  position: absolute;
  left: 0;
  top: 0;
  right: 0;
  bottom: 0;
  width: 100%;
  height: 100%;
`;function ax(e,t,n,i){let a=[],r=[];for(let n of e){if(!("changePanel"!==n[0])||!n[1].isChanged)continue;let[e,i]=n;if(e===t||i.hasHover){a.push(n);continue}if(i.hasFocus){r.push(n);continue}}let o=a.length>0;return{connectors:(o?a:r).map(([e])=>{let t=ai("field",e,n),i=ai("change",e,n);return t&&i?{field:{id:e,...t},change:{id:e,...i}}:null}).filter(e=>!!e?.field.element&&!!e?.change.element).map(({field:e,change:t})=>({hasHover:e.hasHover||t.hasHover,hasFocus:e.hasFocus,hasRevertHover:t.hasRevertHover,field:{...e,...ar(e.element,i)},change:{...t,...ar(t.element,i)}})),isHoverConnector:o}}function ay(e){let{rootElement:t,onSetFocus:n}=e,[i,a]=(0,d.useState)(null),r=iy(),o=(0,d.useMemo)(()=>new Map(r),[r]),[{connectors:s},c]=(0,d.useState)(()=>ax(r,i,o,t)),u=(0,d.useMemo)(()=>C(s,e=>0-e.field.path.length).slice(0,1),[s]),p=(0,d.useCallback)(()=>{c(ax(r,i,o,t))},[o,r,i,t]);return(0,d.useEffect)(()=>iD.observe(t,p),[t,p]),(0,l.jsx)(an,{onScroll:p,children:(0,l.jsx)(ag,{style:{zIndex:u[0]&&u[0].field.zIndex},children:u.map(({field:e,change:t})=>t?(0,l.jsx)(ab,{field:e,change:t,onSetFocus:n,setHovered:a},e.id):null)})})}function ab(e){let{change:t,field:n,onSetFocus:i,setHovered:a}=e,r=(0,d.useCallback)(()=>{ao(n),ao(t),i(n.path)},[n,t,i]),o=(0,d.useCallback)(()=>a(n.id),[n,a]),s=(0,d.useCallback)(()=>a(null),[a]),c=(0,d.useMemo)(()=>({rect:{...n.rect,left:n.rect.left+3},bounds:n.bounds}),[n.bounds,n.rect]),u=(0,d.useMemo)(()=>({rect:{...t.rect,left:t.rect.left+1},bounds:t.bounds}),[t.bounds,t.rect]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("g",{onClick:r,onMouseEnter:o,onMouseLeave:s,children:(0,l.jsx)(af,{from:c,to:u})}),!1]})}function av({children:e,className:t,isReviewChangesOpen:n,onOpenReviewChanges:i,onSetFocus:a,...r}){let[o,s]=(0,d.useState)(),c=(0,d.useMemo)(()=>({isReviewChangesOpen:n,onOpenReviewChanges:i,onSetFocus:a}),[n,i,a]);return(0,l.jsx)(p.In.Provider,{value:c,children:(0,l.jsx)(ig,{children:(0,l.jsxs)(at,{...r,ref:s,className:t,children:[e,o&&(0,l.jsx)(ay,{rootElement:o,onSetFocus:a})]})})})}let aj=(0,l.jsx)(h.xv,{muted:!0,children:(0,l.jsx)(_.XCv,{})}),aC=(e,t)=>(0,l.jsx)(h.xu,{as:"li",children:(0,l.jsx)(h.xv,{textOverflow:"ellipsis",size:1,weight:"medium",children:e})},`${e}-${t}`);function aw(e){let{titlePath:t,maxLength:n}=e,i=(0,d.useMemo)(()=>{let e=t.length,i=Math.ceil(n/2),a=Math.floor(n/2);return n&&e>n?[...t.slice(0,i-1),t.slice(i-1,e-a),...t.slice(e-a)]:t},[n,t]),a=(0,d.useMemo)(()=>i.map((e,t)=>{let n=`${e}-${t}`,a=t<i.length-1;return Array.isArray(e)?(0,l.jsxs)(d.Fragment,{children:[(0,l.jsx)(x.u,{content:(0,l.jsx)(h.Kq,{space:2,padding:2,children:e.map(aC)}),children:(0,l.jsx)(h.xu,{children:aC("...",t)})}),a&&aj]},n):(0,l.jsxs)(d.Fragment,{children:[aC(e,t),a&&aj]},n)}),[i]);return(0,l.jsx)(h.kC,{align:"center",as:"ol",gap:2,children:a})}let ak=(0,j.zo)(h.rj)`
  align-items: flex-end;
`;function aT(e){let{base:t,border:n,focusRing:i}=e,a=i.offset+i.width,r=0-i.offset,o=t?t.bg:"var(--card-bg-color)";return[r>0&&`inset 0 0 0 ${r}px var(--card-focus-ring-color)`,n&&`inset 0 0 0 ${n.width}px ${n.color}`,r<0&&`0 0 0 ${0-r}px ${o}`,a>0&&`0 0 0 ${a}px var(--card-focus-ring-color)`].filter(Boolean).join(",")}let aA="a,button",a_=j.zo.div(({theme:e,offset:t})=>(0,j.iv)`
    bottom: ${-t}px;
    border-radius: ${(0,h.hO)(e.sanity.radius[1])};
    left: ${-t}px;
    pointer-events: none;
    position: absolute;
    right: ${-t}px;
    top: ${-t}px;
    z-index: 2;

    ${aE}:focus-visible & {
      box-shadow: ${aT({base:e.sanity.color.base,focusRing:e.sanity.focusRing})};
    }
  `),aS=j.zo.div`
  bottom: 0;
  display: none;
  left: 0;
  position: absolute;
  right: 0;
  top: 0;
  z-index: 1;

  @media (hover: hover) {
    &[data-enabled='true'] {
      display: block;
    }
  }
`,aE=(0,j.zo)(h.xu)`
  height: 100%;
  outline: none;
  overflow-x: hidden;
  overflow-y: auto;
  overscroll-behavior: contain;
  width: 100%;
`,aM=(0,j.zo)(h.xu).attrs(({$height:e})=>({style:{height:`${e}px`}}))`
  position: relative;
  width: 100%;
`,aN=(0,d.forwardRef)(function({activeItemDataAttr:e="data-active",ariaLabel:t,ariaMultiselectable:n=!1,autoFocus:i,canReceiveFocus:a,fixedHeight:r,focusRingOffset:o=0,getItemDisabled:s,getItemKey:c,getItemSelected:u,initialIndex:p,initialScrollAlign:m="start",inputElement:f,itemHeight:g,items:x,onEndReached:y,onEndReachedIndexOffset:b=0,onlyShowSelectionWhenActive:v,overscan:j,renderItem:C,wrapAround:w=!0,...T},_){let S=(0,d.useRef)(!1),E=(0,d.useRef)((0,d.useId)()),M=(0,d.useRef)(p??0),[N,I]=(0,d.useState)(null),[z,$]=(0,d.useState)(!1),[O,P]=(0,d.useState)(null),[F,D]=(0,d.useState)(null),R=(0,d.useCallback)(e=>{if(!y)return;let[t]=[...e.getVirtualItems()].reverse();t&&t.index>=x.length-b-1&&S.current&&y()},[y,x.length,b]),L=(0,k.MG)({count:x.length,getItemKey:c,getScrollElement:()=>F,estimateSize:()=>g,onChange:R,overscan:j}),B=(0,d.useMemo)(()=>{let e=-1;return x.reduce((t,n,i)=>{let a=s?.(i)??!1,r=u?.(i)??!1;return a||(e+=1),t[i]={activeIndex:a?null:e,disabled:a,selected:r},t},[])},[s,u,x]),q=(0,d.useMemo)(()=>B.filter(e=>!e.disabled).length,[B]),V=(0,d.useCallback)(e=>O?.setAttribute("data-enabled",(!e).toString()),[O]),K=(0,d.useCallback)(e=>`${E.current}-item-${e}`,[]),U=(0,d.useCallback)(()=>`${E.current}-children`,[]),Z=(0,d.useCallback)(()=>{let t=[f,F].some(e=>document.activeElement===e);(!v||t||z)&&Array.from(N?.children||[])?.forEach(t=>{let n=Number(t.dataset?.index),i=B[n]?.activeIndex;t.querySelector(aA)?.toggleAttribute(e,i===M.current)})},[e,N?.children,z,f,B,v,F]),G=(0,d.useCallback)(()=>{Array.from(N?.children||[])?.forEach(t=>{t.querySelector(aA)?.toggleAttribute(e,!1)})},[e,N?.children]),H=(0,d.useMemo)(()=>A(Z,200),[Z]),W=(0,d.useCallback)(()=>{let e=M?.current;x.length>0?(f?.setAttribute("aria-activedescendant",K(e)),F?.setAttribute("aria-activedescendant",K(e))):(f?.removeAttribute("aria-activedescendant"),F?.removeAttribute("aria-activedescendant"))},[K,f,x.length,F]),Y=(0,d.useCallback)(()=>{let e=N?.parentElement;if(N&&e){let t=e.getBoundingClientRect().top-N.getBoundingClientRect().top;return L.getVirtualItemForOffset(t)?.index??-1}return -1},[N,L]),J=(0,d.useCallback)(({index:e,scrollAlign:t,scrollIntoView:n=!0})=>{if(M.current=e,W(),Z(),n){let n=B.findIndex(t=>t.activeIndex===e);n>-1&&L.scrollToIndex(n,t?{align:t}:{})}},[W,B,Z,L]),X=(0,d.useCallback)(e=>{let t=-1,n=q-1;"next"===e&&(t=M.current<q-1?M.current+1:w?0:n),"previous"===e&&(t=M.current>0?M.current-1:w?n:0),J({index:t,scrollIntoView:!0}),V(!1)},[q,V,J,w]),Q=(0,d.useCallback)(e=>{switch(e){case"input":f?.focus();break;case"list":F?.focus()}},[f,F]),ee=(0,d.useCallback)(()=>{f?.focus()},[f]),et=(0,d.useCallback)(()=>{F?.focus()},[F]),en=(0,d.useCallback)(e=>()=>{J({index:e,scrollIntoView:!1})},[J]),ei=(0,d.useCallback)(()=>{Z()},[Z]),ea=(0,d.useCallback)(e=>t=>{let n=Array.from(N?.children||[]);if(n.length&&("ArrowDown"===t.key&&(t.preventDefault(),Q(e),X("next")),"ArrowUp"===t.key&&(t.preventDefault(),Q(e),X("previous")),"Enter"===t.key)){t.preventDefault(),Q(e);let i=n.find(e=>Number(e.dataset.index)===B.findIndex(e=>e.activeIndex===M.current));i&&i?.querySelector(aA)?.click()}},[N?.children,Q,B,X]),er=(0,d.useCallback)(e=>ea("input")(e),[ea]),eo=(0,d.useCallback)(e=>ea("list")(e),[ea]),es=(0,d.useCallback)(()=>{v&&(Z(),$(!0))},[v,Z]),el=(0,d.useCallback)(()=>{v&&(G(),$(!1))},[G,v]);(0,d.useImperativeHandle)(_,()=>({focusInputElement(){ee()},focusListElement(){et()},getTopIndex:()=>Y(),scrollToIndex(e){J({index:e}),V(!0)}}),[V,ee,et,Y,J]),(0,d.useEffect)(()=>{"u">typeof p&&!S.current&&J({index:p,scrollAlign:m,scrollIntoView:!0}),S.current=!0},[p,m,v,J]),(0,d.useEffect)(()=>{function e(){V(!0)}return F?.addEventListener("mousemove",e),F?.addEventListener("wheel",e,{passive:!0}),()=>{F?.removeEventListener("mousemove",e),F?.removeEventListener("wheel",e)}},[V,F]),(0,d.useEffect)(()=>(f?.addEventListener("focus",ei),f?.addEventListener("keydown",er),F?.addEventListener("focus",ei),F?.addEventListener("keydown",eo),()=>{f?.removeEventListener("focus",ei),f?.removeEventListener("keydown",er),F?.removeEventListener("focus",ei),F?.removeEventListener("keydown",eo)}),[a,ei,ea,er,eo,G,f,Z,F]),(0,d.useEffect)(()=>{W()},[W,x]),(0,d.useEffect)(()=>{let e=new MutationObserver(H);return N&&e.observe(N,{childList:!0,subtree:!0}),()=>{e.disconnect()}},[N,H]),(0,d.useEffect)(()=>{f?.setAttribute("aria-autocomplete","list"),f?.setAttribute("aria-expanded","true"),f?.setAttribute("aria-controls",U()),f?.setAttribute("role","combobox")},[U,f]),(0,d.useEffect)(()=>{i&&Q(i)},[i,a,et,ee,Q]);let ec=a?0:-1;return(0,l.jsxs)(aE,{id:U(),onMouseEnter:es,onMouseLeave:el,ref:D,sizing:"border",tabIndex:ec,...T,children:[a&&(0,l.jsx)(a_,{offset:o}),(0,l.jsx)(aS,{"aria-hidden":"true","data-enabled":!0,ref:P}),L&&(0,l.jsx)(aM,{forwardedAs:"ul",$height:L.getTotalSize(),"aria-label":t,"aria-multiselectable":n,flex:1,ref:I,role:"listbox",children:L.getVirtualItems().map(e=>{let t=e.index,{activeIndex:i,disabled:a,selected:o}=B[t],s=C(x[t],{activeIndex:i,disabled:a,selected:o,virtualIndex:t}),c=(0,d.cloneElement)(s,{tabIndex:-1}),u="number"!=typeof i||a?{}:{"aria-posinset":i+1,...n?{"aria-selected":o.toString()}:{},"aria-setsize":q,id:K(i),role:"option",onMouseEnter:en(i)};return(0,l.jsx)(h.Kq,{as:"li","data-index":t,ref:r?void 0:L.measureElement,style:{flex:1,...r?{height:`${e.size}px`}:{},left:0,position:"absolute",top:0,transform:`translateY(${e.start}px)`,width:"100%"},tabIndex:-1,...u,children:c},e.key)})})]})}),aI=(0,d.forwardRef)(function(e,t){let{mode:n="bleed",tooltipProps:i,tone:a,...r}=e,{t:o}=i1();return(0,l.jsx)(x.zx,{...r,icon:_.xXb,mode:n,ref:t,tone:a,tooltipProps:{...i,content:i?.content||o("common.context-menu-button.tooltip")}})});function az({name:e,title:t},n){return"string"==typeof e&&e.trim().length>0?e:a$(t,n)}function a$(e,t){let n="string"==typeof e&&e.trim().length>0?` (titled "${e}")`:"";return`at index ${t}${n}`}function aO(){let e=(0,d.useContext)(p.zZ);if(!e)throw Error("Could not find `workspaces` context");return e}class aP extends Error{index;identifier;constructor(e,t){super(e),this.name="WorkspaceValidationError",this.index=t?.index,this.identifier=t?.workspace&&az(t.workspace,t.index)}}function aF(e,t){let{name:n,basePath:i}=e;if(i&&"string"==typeof i)return!0;throw typeof i>"u"?new aP(`If more than one workspace is defined, every workspace must have a \`basePath\` defined. Workspace \`${n}\` is missing a \`basePath\``,{workspace:e,index:t}):new aP(`If more than one workspace is defined, every workspace must have a \`basePath\` defined. Workspace \`${n}\` has an invalid \`basePath\` (must be a non-empty string)`,{workspace:e,index:t})}function aD(e,t){let{name:n,basePath:i}=e;if(!(!i||"/"===i)&&!/^\/[a-z0-9/_-]*[a-z0-9_-]+$/i.test(i))throw new aP(`All workspace \`basePath\`s must start with a leading \`/\`, consist of only URL safe characters, and cannot end with a trailing \`/\`. Workspace \`${n}\`'s basePath is \`${i}\``,{workspace:e,index:t})}let aR=()=>(0,d.createElement)(d.Fragment);function aL(e){let{options:t}=AU().__internal,{defaultComponent:n,pick:i}=e;return(0,d.useMemo)(()=>{let e=[...Tt(t,[])];e.reverse();let a=e.map(({config:e})=>i(e)).filter(Boolean);return e=>{let t=e=>(0,d.createElement)(n,e);for(let e of a){let n=t;t=t=>(0,d.createElement)(e,{...t,renderDefault:n})}return t({...e,renderDefault:aR})}},[n,t,i])}class aB extends Error{propertyName;path;cause;constructor({propertyName:e,path:t,cause:n}){super(`An error occurred while resolving \`${e}\` from ${t.join(" > ")}${iO(n)&&"string"==typeof n?.message?`: ${n.message}`:""}`),this.name="ConfigPropertyError",this.propertyName=e,this.cause=n,this.path=t}}class aq extends Error{name;type;causes;constructor({causes:e,name:t,type:n}){super(`Could not resolve ${n}${t?` \`${t}\``:""}:
${e.filter(Boolean).map(e=>iO(e)&&"string"==typeof e?.message?e.message:String(e)).map(e=>`	- ${e}`).join(`
`)}

`),this.name=t,this.causes=e,this.type=n}}function aV(e){return e}function aK(e){let t=["projectId"in e&&"`projectId` not allowed in plugin configuration","dataset"in e&&"`dataset` not allowed in plugin configuration"].filter(nX);if(t.length)throw Error(`Invalid plugin configuration:
${t.map(e=>`	${e}`).join(`
`)}`)}function aU(e){return"function"==typeof e?t=>{let n=e(t);return aK(n),n}:(aK(e),()=>e)}let aZ=(0,j.zo)(h.Zb)(({$fill:e})=>(0,j.iv)`
    align-items: center;
    box-sizing: border-box;
    display: flex;
    flex-direction: column;
    justify-content: center;

    ${e?(0,j.iv)`
          bottom: 0;
          height: 100%;
          left: 0;
          position: absolute;
          right: 0;
          top: 0;
          width: 100%;
        `:(0,j.iv)`
          min-height: 75px;
          height: stretch;
          height: -webkit-fill-available;
          width: stretch;
          width: -webkit-fill-available;
        `}

    ${!1}

    > * {
      position: absolute;
    }
  `),aG=(0,j.zo)(h.$j)(({$animatePosition:e=!0})=>(0,j.iv)`
    @keyframes fadeIn {
      from {
        opacity: 0;
      }
      to {
        opacity: 1;
      }
    }
    @keyframes slideUp {
      from {
        transform: translateY(0);
      }
      to {
        transform: translateY(-15px);
      }
    }
    animation: ${e?"500ms ease-out 750ms 1 normal both running fadeIn, 750ms ease-out 2000ms 1 normal both running slideUp":"500ms ease-out 750ms 1 normal both running fadeIn"};
  `),aH=(0,j.zo)(h.xv)`
  @keyframes fadeIn {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }
  @keyframes slideDown {
    from {
      transform: translateY(0);
    }
    to {
      transform: translateY(15px);
    }
  }
  animation:
    1500ms ease-out ${2e3}ms 1 normal both running fadeIn,
    750ms ease-out ${2e3}ms 1 normal both running slideDown;
`;function aW({fill:e,showText:t,title:n}){return(0,l.jsxs)(aZ,{$fill:e,as:e?h.mh:"div",children:[(0,l.jsx)(aG,{$animatePosition:!!t,muted:!0}),t&&(0,l.jsx)(aY,{title:n})]})}function aY({title:e}){let{t}=i1();return(0,l.jsx)(aH,{muted:!0,size:1,children:e||t("common.loading")})}function aJ(e){return e}function aX(e){return!("then"in e.resources&&"function"==typeof e.resources.then)}function aQ(e,t){return t}let a0="studio",a1={id:"en-US",title:"English (US)",bundles:[{locale:"en-US",namespace:a0,resources:{"asset-source.asset-list.menu.delete":"Delete","asset-source.asset-list.menu.show-usage":"Show usage","asset-source.asset-usage-dialog.header_file":"Documents using file","asset-source.asset-usage-dialog.header_image":"Documents using image","asset-source.asset-usage-dialog.loading":"Loading…","asset-source.delete-dialog.action.cancel":"Cancel","asset-source.delete-dialog.action.delete":"Delete","asset-source.delete-dialog.header_file":"Delete file","asset-source.delete-dialog.header_image":"Delete image","asset-source.delete-dialog.loading":"Loading…","asset-source.delete-dialog.usage-list.confirm-delete-file_named":"You are about to delete the file <strong>{{filename}}</strong> and its metadata. Are you sure?","asset-source.delete-dialog.usage-list.confirm-delete-file_unnamed":"You are about to delete the file and its metadata. Are you sure?","asset-source.delete-dialog.usage-list.confirm-delete-image_named":"You are about to delete the image <strong>{{filename}}</strong> and its metadata. Are you sure?","asset-source.delete-dialog.usage-list.confirm-delete-image_unnamed":"You are about to delete the image and its metadata. Are you sure?","asset-source.delete-dialog.usage-list.image-preview-alt":"Preview of image","asset-source.delete-dialog.usage-list.warning-file-is-in-use_named":"{{filename}} cannot be deleted because it's being used. In order to delete this file, you first need to remove all uses of it.","asset-source.delete-dialog.usage-list.warning-file-is-in-use_unnamed":"This file cannot be deleted because it's being used. In order to delete it, you first need to remove all uses of it.","asset-source.delete-dialog.usage-list.warning-image-is-in-use_named":"{{filename}} cannot be deleted because it's being used. In order to delete this image, you first need to remove all uses of it.","asset-source.delete-dialog.usage-list.warning-image-is-in-use_unnamed":"This image cannot be deleted because it's being used. In order to delete it, you first need to remove all uses of it.","asset-source.dialog.accept-message":"Only showing assets of accepted types: <strong>{{acceptTypes}}</strong>","asset-source.dialog.default-title_file":"Select file","asset-source.dialog.default-title_image":"Select image","asset-source.dialog.load-more":"Load more","asset-source.dialog.no-assets_file":"No files","asset-source.dialog.no-assets_image":"No images","asset-source.file.asset-list.action.delete.disabled-cannot-delete-current-file":"Cannot delete currently selected file","asset-source.file.asset-list.action.delete.text":"Delete","asset-source.file.asset-list.action.delete.title":"Delete file","asset-source.file.asset-list.action.select-file.title":"Select the file {{filename}}","asset-source.file.asset-list.action.show-usage.title":"Show usage","asset-source.file.asset-list.delete-failed":"File could not be deleted","asset-source.file.asset-list.delete-successful":"File was deleted","asset-source.file.asset-list.header.date-added":"Date added","asset-source.file.asset-list.header.filename":"Filename","asset-source.file.asset-list.header.size":"Size","asset-source.file.asset-list.header.type":"Type","asset-source.file.title":"Uploaded files","asset-source.image.asset-list.delete-failed":"Image could not be deleted","asset-source.image.asset-list.delete-successful":"Image was deleted","asset-source.image.title":"Uploaded images","asset-source.usage-list.documents-using-file_named_one":"One document is using file <code>{{filename}}</code>","asset-source.usage-list.documents-using-file_named_other":"{{count}} documents are using file <code>{{filename}}</code>","asset-source.usage-list.documents-using-file_named_zero":"No documents are using file <code>{{filename}}</code>","asset-source.usage-list.documents-using-file_unnamed_one":"One document is using this file","asset-source.usage-list.documents-using-file_unnamed_other":"{{count}} documents are using this file","asset-source.usage-list.documents-using-file_unnamed_zero":"No documents are using this file","asset-source.usage-list.documents-using-image_named_one":"One document is using image <code>{{filename}}</code>","asset-source.usage-list.documents-using-image_named_other":"{{count}} documents are using image <code>{{filename}}</code>","asset-source.usage-list.documents-using-image_named_zero":"No documents are using image <code>{{filename}}</code>","asset-source.usage-list.documents-using-image_unnamed_one":"One document is using this image","asset-source.usage-list.documents-using-image_unnamed_other":"{{count}} documents are using this image","asset-source.usage-list.documents-using-image_unnamed_zero":"No documents are using this image","calendar.action.go-to-next-month":"Go to next month","calendar.action.go-to-next-year":"Go to next year","calendar.action.go-to-previous-month":"Go to previous month","calendar.action.go-to-previous-year":"Go to previous year","calendar.action.go-to-today":"Today","calendar.action.go-to-today-aria-label":"Go to today","calendar.action.go-to-tomorrow":"Tomorrow","calendar.action.go-to-yesterday":"Yesterday","calendar.action.include-time-label":"Include time","calendar.action.select-hour":"Select hour","calendar.action.select-minute":"Select minute","calendar.action.set-to-current-time":"Set to current time","calendar.action.set-to-time-preset":"{{time}} on {{date, datetime}}","calendar.button.aria-label":"Open calendar","calendar.button.tooltip-text":"Select date","calendar.error.must-be-in-format":"Must be in the format: {{exampleDate}}","calendar.month-names.april":"April","calendar.month-names.august":"August","calendar.month-names.december":"December","calendar.month-names.february":"February","calendar.month-names.january":"January","calendar.month-names.july":"July","calendar.month-names.june":"June","calendar.month-names.march":"March","calendar.month-names.may":"May","calendar.month-names.november":"November","calendar.month-names.october":"October","calendar.month-names.september":"September","calendar.weekday-names.short.friday":"Fri","calendar.weekday-names.short.monday":"Mon","calendar.weekday-names.short.saturday":"Sat","calendar.weekday-names.short.sunday":"Sun","calendar.weekday-names.short.thursday":"Thu","calendar.weekday-names.short.tuesday":"Tue","calendar.weekday-names.short.wednesday":"Wed","changes.action.close-label":"Close review changes","changes.action.revert-all-cancel":"Cancel","changes.action.revert-all-confirm":"Revert all","changes.action.revert-all-description":"Are you sure you want to revert all {{count}} changes?","changes.action.revert-changes-confirm-change_one":"Revert change","changes.action.revert-changes-confirm-change_other":"Revert changes","changes.action.revert-changes-description":"Are you sure you want to revert the changes?","changes.action.revert-changes-description_one":"Are you sure you want to revert the change?","changes.added-label":"Added","changes.array.item-added-in-position":"Added in position {{position}}","changes.array.item-moved_down_one":"Moved {{count}} position down","changes.array.item-moved_down_other":"Moved {{count}} positions down","changes.array.item-moved_up_one":"Moved {{count}} position up","changes.array.item-moved_up_other":"Moved {{count}} positions up","changes.array.item-removed-from-position":"Removed from position {{position}}","changes.change-bar.aria-label":"Review changes","changes.changed-label":"Changed","changes.changes-by-author":"Changes by","changes.error-boundary.developer-info":"Check the developer console for more information","changes.error-boundary.title":"Rendering the changes to this field caused an error","changes.error.incorrect-type-message":'Value error: Value is of type "<code>{{actualType}}</code>", expected "<code>{{expectedType}}</code>"',"changes.file.meta-info-fallback-title":"Untitled","changes.image.crop-changed":"Crop changed","changes.image.deleted":"Image deleted","changes.image.error-loading-image":"Error loading image","changes.image.hotspot-changed":"Hotspot changed","changes.image.meta-info-fallback-title":"Untitled","changes.image.no-asset-set":"Image not set","changes.image.no-image-placeholder":"(no image)","changes.inspector.from-label":"From","changes.inspector.meta-label":"Meta","changes.inspector.to-label":"To","changes.loading-author":"Loading…","changes.loading-changes":"Loading changes…","changes.no-changes-description":"Edit the document or select an older version in the timeline to see a list of changes appear in this panel.","changes.no-changes-title":"There are no changes","changes.portable-text.annotation_added":"Added annotation","changes.portable-text.annotation_changed":"Changed annotation","changes.portable-text.annotation_removed":"Removed annotation","changes.portable-text.annotation_unchanged":"Unchanged annotation","changes.portable-text.block-style-changed":'Changed block style from "{{fromStyle}}" to "{{toStyle}}"',"changes.portable-text.changed-formatting":"Changed formatting","changes.portable-text.empty-inline-object":"Empty {{inlineObjectType}}","changes.portable-text.empty-object-annotation":"Empty {{annotationType}}","changes.portable-text.empty-text_added":"Added empty text","changes.portable-text.empty-text_changed":"Changed empty text","changes.portable-text.empty-text_removed":"Removed empty text","changes.portable-text.inline-object_added":"Added inline object","changes.portable-text.inline-object_changed":"Changed inline object","changes.portable-text.inline-object_removed":"Removed inline object","changes.portable-text.inline-object_unchanged":"Unchanged inline object","changes.portable-text.text_added":"Added text","changes.portable-text.text_removed":"Removed text","changes.portable-text.unknown-annotation-schema-type":"Unknown schema type","changes.portable-text.unknown-inline-object-schema-type":"Unknown schema type","changes.removed-label":"Removed","changes.title":"Review changes","common.context-menu-button.tooltip":"Show more","common.dialog.cancel-button.text":"Cancel","common.dialog.confirm-button.text":"Confirm","common.loading":"Loading","configuration-issues.button.label":"Configuration issues","configuration-issues.button.tooltip":"Found configuration issues","default-menu-item.fallback-title":"Sort by {{title}}","default-orderings.caption":"Sort by Caption","default-orderings.description":"Sort by Description","default-orderings.header":"Sort by Header","default-orderings.heading":"Sort by Heading","default-orderings.label":"Sort by Label","default-orderings.name":"Sort by Name","default-orderings.title":"Sort by Title","document-status.edited":"Edited {{date}}","document-status.not-published":"Not published","document-status.published":"Published {{date}}","form.error.duplicate-keys-alert.details.additional-description":"The value of the <code>_key</code> property must be a unique string.","form.error.duplicate-keys-alert.details.description":"This usually happens when items are created using an API client, and the <code>_key</code> property of each elements has been generated non-uniquely.","form.error.duplicate-keys-alert.details.title":"Developer info","form.error.duplicate-keys-alert.generate-button.text":"Generate unique keys","form.error.duplicate-keys-alert.summary":"Several items in this list share the same identifier (key). Every item must have an unique identifier.","form.error.duplicate-keys-alert.title":"Non-unique keys","form.error.field-not-found":'Field "{{fieldName}}" not found among members – verify that it is defined in the schema and that it has not been conditionally hidden.',"form.error.missing-keys-alert.add-button.text":"Add missing keys","form.error.missing-keys-alert.details.additional-description":"The value of the <code>_key</code> property must be a unique string.","form.error.missing-keys-alert.details.description":"This usually happens when items are created using an API client, and the <code>_key</code> property has not been included.","form.error.missing-keys-alert.details.title":"Developer info","form.error.missing-keys-alert.summary":"Some items in the list are missing their keys. This must be fixed in order to edit the list.","form.error.missing-keys-alert.title":"Missing keys","form.error.mixed-array-alert.details.description":"This usually happens when items are created using an API client, or when a custom input component has added invalid data to the list.","form.error.mixed-array-alert.details.title":"Developer info","form.error.mixed-array-alert.remove-button.text":"Remove non-object values","form.error.mixed-array-alert.summary":"Some items in this list are not objects. This must be fixed in order to edit the list.","form.error.mixed-array-alert.title":"Invalid list values","form.error.no-array-item-at-index":"No array item at index <code>{{index}}</code> found at path <code>{{path}}</code>","form.error.no-array-item-at-key":'No array item with `_key` <code>"{{key}}"</code> found at path <code>{{path}}</code>',"form.error.unhandled-runtime-error.call-stack.title":"Call Stack:","form.error.unhandled-runtime-error.component-stack.title":"Component Stack:","form.error.unhandled-runtime-error.error-message":"Error: {{message}}","form.error.unhandled-runtime-error.title":"Unhandled Runtime Error","form.field.deprecated-label":"deprecated","form.field.untitled-field-label":"Untitled","form.validation.has-error-aria-label":"Has error","form.validation.has-info-aria-label":"Has information","form.validation.has-warning-aria-label":"Has warning","form.validation.summary.errors-count_one":"{{count}} error","form.validation.summary.errors-count_other":"{{count}} errors","form.validation.summary.warnings-count_one":"{{count}} warning","form.validation.summary.warnings-count_other":"{{count}} warnings","free-trial.tooltip.days-count_one":"{{count}} day left in trial","free-trial.tooltip.days-count_other":"{{count}} days left in trial","free-trial.tooltip.trial-finished":"Upgrade your project","help-resources.action.contact-sales":"Contact sales","help-resources.action.help-and-support":"Help and support","help-resources.action.join-our-community":"Join our community","help-resources.latest-sanity-version":"Latest version is {{latestVersion}}","help-resources.studio-version":"Sanity Studio version {{studioVersion}}","help-resources.title":"Help and resources","input.files.common.cancel-upload":"Cancel","input.files.common.upload-placeholder.file-input-button.text":"Upload","input.files.common.upload-progress":"Uploading <FileName/>","input.reference.document-cannot-be-opened.failed-to-resolve-url":"This document cannot be opened (unable to resolve URL to Studio)","inputs.array.action.add-after":"Add item after","inputs.array.action.add-before":"Add item before","inputs.array.action.add-item":"Add item","inputs.array.action.add-item-select-type":"Add item...","inputs.array.action.copy":"Copy","inputs.array.action.drag.tooltip":"Drag to re-order","inputs.array.action.duplicate":"Duplicate","inputs.array.action.edit":"Edit {{itemTypeTitle}}","inputs.array.action.remove":"Remove","inputs.array.action.remove-invalid-item":"Remove","inputs.array.action.view":"View {{itemTypeTitle}}","inputs.array.error.can-delete-but-no-edit-description":"You can still move or delete this item, but it cannot be edited since the schema definition for its type is nowhere to be found.","inputs.array.error.cannot-resolve-initial-value-title":"Unable to resolve initial value for type: {{schemaTypeTitle}}: {{errorMessage}}.","inputs.array.error.cannot-upload-unable-to-convert_one":"The following item can't be uploaded because there's no known conversion from content type to array item:","inputs.array.error.cannot-upload-unable-to-convert_other":"The following items can't be uploaded because there's no known conversion from content types to array item:","inputs.array.error.current-schema-not-declare-description":"The current schema does not declare items of type <code>{{typeName}}</code> as valid for this list. This could mean that the type has been removed as a valid item type, or that someone else has added it to their own local schema that is not yet deployed.","inputs.array.error.json-representation-description":"JSON representation of this item:","inputs.array.error.type-is-incompatible-prompt":"Item of type <code>{{typeName}}</code> not valid for this list","inputs.array.error.type-is-incompatible-title":"Why is this happening?","inputs.array.error.unexpected-error":"Unexpected Error: {{error}}","inputs.array.insert-menu.filter.all-items":"All","inputs.array.insert-menu.search.no-results":"No items found","inputs.array.insert-menu.search.placeholder":"Search","inputs.array.insert-menu.toggle-grid-view.tooltip":"Toggle grid view","inputs.array.insert-menu.toggle-list-view.tooltip":"Toggle list view","inputs.array.no-items-label":"No items","inputs.array.read-only-label":"This field is read-only","inputs.array.resolving-initial-value":"Resolving initial value…","inputs.boolean.disabled":"Disabled","inputs.datetime.placeholder":"e.g. {{example}}","inputs.file.actions-menu.file-options.aria-label":"Open file options menu","inputs.file.browse-button.text":"Browse","inputs.file.dialog.title":"Select file","inputs.file.error.unknown-member-kind":"Unknown member kind: {{kind}}","inputs.file.invalid-file-warning.description":"The value of this field is not a valid file. Resetting this field will let you choose a new file.","inputs.file.invalid-file-warning.reset-button.text":"Reset value","inputs.file.invalid-file-warning.title":"Invalid file value","inputs.file.multi-browse-button.text":"Select","inputs.file.upload-failed.description":"The upload could not be completed at this time.","inputs.file.upload-failed.title":"Upload failed","inputs.files.common.actions-menu.clear-field.label":"Clear field","inputs.files.common.actions-menu.copy-url.label":"Copy URL","inputs.files.common.actions-menu.download.label":"Download","inputs.files.common.actions-menu.notification.url-copied":"The URL is copied to the clipboard","inputs.files.common.actions-menu.replace.label":"Replace","inputs.files.common.actions-menu.upload.label":"Upload","inputs.files.common.drop-message.drop-to-upload":"Drop to upload","inputs.files.common.drop-message.drop-to-upload-multi_one":"Drop to upload {{count}} file","inputs.files.common.drop-message.drop-to-upload-multi_other":"Drop to upload {{count}} files","inputs.files.common.drop-message.drop-to-upload.no-accepted-file-message_one":"Can't upload this file here","inputs.files.common.drop-message.drop-to-upload.no-accepted-file-message_other":"Can't upload any of these files here","inputs.files.common.drop-message.drop-to-upload.rejected-file-message_one":"{{count}} file can't be uploaded here","inputs.files.common.drop-message.drop-to-upload.rejected-file-message_other":"{{count}} files can't be uploaded here","inputs.files.common.placeholder.cannot-upload-some-files_one":"Cannot upload file","inputs.files.common.placeholder.cannot-upload-some-files_other":"Cannot upload {{count}} files","inputs.files.common.placeholder.drag-or-paste-to-upload_file":"Drag or paste file here","inputs.files.common.placeholder.drag-or-paste-to-upload_image":"Drag or paste image here","inputs.files.common.placeholder.drop-to-upload_file":"Drop to upload file","inputs.files.common.placeholder.drop-to-upload_image":"Drop to upload image","inputs.files.common.placeholder.read-only":"Read only","inputs.files.common.placeholder.upload-not-supported":"Can't upload files here","inputs.files.common.stale-upload-warning.clear":"Clear upload","inputs.files.common.stale-upload-warning.description":"An upload has made no progress for at least {{staleThresholdMinutes}} minutes and likely got interrupted. You can safely clear the incomplete upload and try uploading again.","inputs.files.common.stale-upload-warning.title":"Incomplete upload","inputs.image.actions-menu.crop-image-tooltip":"Crop image","inputs.image.actions-menu.edit-details.aria-label":"Open image edit dialog","inputs.image.actions-menu.options.aria-label":"Open image options menu","inputs.image.browse-menu.text":"Select","inputs.image.drag-overlay.cannot-upload-here":"Cannot upload this file here","inputs.image.drag-overlay.drop-to-upload-image":"Drop image to upload","inputs.image.drag-overlay.this-field-is-read-only":"This field is read only","inputs.image.error.unknown-member-kind":"Unknown member kind: {{kind}}","inputs.image.hotspot-dialog.title":"Edit hotspot and crop","inputs.image.invalid-image-warning.description":"The value of this field is not a valid image. Resetting this field will let you choose a new image.","inputs.image.invalid-image-warning.reset-button.text":"Reset value","inputs.image.invalid-image-warning.title":"Invalid image value","inputs.image.preview-uploaded-image":"Preview of uploaded image","inputs.image.upload-error.description":"The upload could not be completed at this time.","inputs.image.upload-error.title":"Upload failed","inputs.imagetool.description":"Adjust the rectangle to crop image. Adjust the circle to specify the area that should always be visible.","inputs.imagetool.load-error":"Error: {{errorMessage}}","inputs.imagetool.title":"Hotspot & Crop","inputs.invalid-value.convert-button.text":"Convert to {{targetType}}","inputs.invalid-value.current-type":"The current value (<code>{{actualType}}</code>)","inputs.invalid-value.description":"The property value is stored as a value type that does not match the expected type.","inputs.invalid-value.details.description":"The value of this property must be of type <code>{{validType}}</code> according to the schema.","inputs.invalid-value.details.multi-type-description":"Only the following types are valid here according to schema:","inputs.invalid-value.details.possible-reason":"Mismatching value types typically occur when the schema has recently been changed.","inputs.invalid-value.details.title":"Developer info","inputs.invalid-value.reset-button.text":"Reset value","inputs.invalid-value.title":"Invalid property value","inputs.object.field-group-tabs.all-fields-title":"All fields","inputs.object.field-group-tabs.aria-label":"Field groups","inputs.object.unknown-fields.read-only.description":"This field is <strong>read only</strong> according to the document’s schema and cannot be unset. If you want to be able to unset this in Studio, make sure you remove the <code>readOnly</code> field from the enclosing type in the schema.","inputs.object.unknown-fields.remove-field-button.text":"Remove field","inputs.object.unknown-fields.warning.description_one":"Encountered a field that is not defined in the schema.","inputs.object.unknown-fields.warning.description_other":"Encountered {{count}} fields that are not defined in the schema.","inputs.object.unknown-fields.warning.details.description_one":"This field is not defined in the schema, which could mean that the field definition has been removed or that someone else has added it to their own local project and have not deployed their changes yet.","inputs.object.unknown-fields.warning.details.description_other":"These fields are not defined in the document’s schema, which could mean that the field definitions have been removed or that someone else has added them to their own local project and have not deployed their changes yet.","inputs.object.unknown-fields.warning.details.title":"Developer info","inputs.object.unknown-fields.warning.title_one":"Unknown field found","inputs.object.unknown-fields.warning.title_other":"Unknown fields found","inputs.portable-text.action.collapse-editor":"Collapse editor","inputs.portable-text.action.edit-annotation-aria-label":"Edit annotation","inputs.portable-text.action.expand-editor":"Expand editor","inputs.portable-text.action.insert-block":"Insert {{typeName}}","inputs.portable-text.action.insert-block-aria-label":"Insert {{typeName}} (block)","inputs.portable-text.action.insert-inline-object":"Insert {{typeName}}","inputs.portable-text.action.insert-inline-object-aria-label":"Insert {{typeName}} (inline)","inputs.portable-text.action.remove-annotation-aria-label":"Remove annotation","inputs.portable-text.activate-on-focus-message_click":"Click to activate","inputs.portable-text.activate-on-focus-message_click-focused":"Click or press space to activate","inputs.portable-text.activate-on-focus-message_tap":"Tap to activate","inputs.portable-text.annotation-aria-label":"Annotation object","inputs.portable-text.annotation-editor.title":"Edit {{schemaType}}","inputs.portable-text.annotation.link":"Link","inputs.portable-text.block.aria-label":"Block object","inputs.portable-text.block.edit":"Edit","inputs.portable-text.block.open-menu-aria-label":"Open menu","inputs.portable-text.block.open-reference":"Open reference","inputs.portable-text.block.remove":"Remove","inputs.portable-text.block.view":"View","inputs.portable-text.decorator.code":"Code","inputs.portable-text.decorator.emphasis":"Italic","inputs.portable-text.decorator.strike-through":"Strike","inputs.portable-text.decorator.strong":"Strong","inputs.portable-text.decorator.underline":"Underline","inputs.portable-text.empty-placeholder":"Empty","inputs.portable-text.inline-block.aria-label":"Inline object","inputs.portable-text.inline-object.edit":"Edit object","inputs.portable-text.inline-object.edit-aria-label":"Edit object","inputs.portable-text.inline-object.remove":"Remove object","inputs.portable-text.inline-object.remove-aria-label":"Remove object","inputs.portable-text.invalid-value.action-disclaimer":"NOTE: It’s generally safe to perform the action above, but if you are in doubt, get in touch with those responsible for configuring your studio.","inputs.portable-text.invalid-value.disallowed-child-type.action":"Remove the object","inputs.portable-text.invalid-value.disallowed-child-type.description":"Child with key {{childKey}} of block with key <code>{{key}}</code> is of type <code>{{childType}}</code>, which is not allowed by the schema.","inputs.portable-text.invalid-value.disallowed-type.action":"Remove the block","inputs.portable-text.invalid-value.disallowed-type.description":"Block with key <code>{{key}}</code> is of type <code>{{typeName}}</code>, which is not allowed by the schema.","inputs.portable-text.invalid-value.empty-children.action":"Insert empty text span","inputs.portable-text.invalid-value.empty-children.description":"Text block with key <code>{{key}}</code> has no text spans.","inputs.portable-text.invalid-value.ignore-button.text":"Ignore","inputs.portable-text.invalid-value.incorrect-block-type.action":"Use type <code>{{expectedTypeName}}</code>","inputs.portable-text.invalid-value.incorrect-block-type.description":"Block with key <code>{{key}}</code> has an invalid type name. According to the schema, it should be <code>{{expectedTypeName}}</code>.","inputs.portable-text.invalid-value.invalid-span-text.action":"Set empty text value","inputs.portable-text.invalid-value.invalid-span-text.description":"Span with key {{childKey}} of block with key <code>{{key}}</code> has a missing or invalid <code>text</code> property.","inputs.portable-text.invalid-value.missing-block-type.action":"Use type <code>{{expectedTypeName}}</code>","inputs.portable-text.invalid-value.missing-block-type.description":"Block with key <code>{{key}}</code> is missing a type name. According to the schema, it should be <code>{{expectedTypeName}}</code>.","inputs.portable-text.invalid-value.missing-child-key.action":"Assign random key","inputs.portable-text.invalid-value.missing-child-key.description":"Child at index <code>{{index}}</code> of block with key <code>{{key}}</code> is missing <code>_key</code> property.","inputs.portable-text.invalid-value.missing-child-type.action":"Remove the object","inputs.portable-text.invalid-value.missing-child-type.description":"Child with key {{childKey}} of block with key <code>{{key}}</code> is missing <code>_type</code> property.","inputs.portable-text.invalid-value.missing-key.action":"Assign random key","inputs.portable-text.invalid-value.missing-key.description":"Block at index <code>{{index}}</code> is missing required <code>_key</code> property.","inputs.portable-text.invalid-value.missing-or-invalid-children.action":"Remove the block","inputs.portable-text.invalid-value.missing-or-invalid-children.description":"Text block with key <code>{{key}}</code> has an invalid or missing `children` property.","inputs.portable-text.invalid-value.missing-or-invalid-markdefs.action":"Add property","inputs.portable-text.invalid-value.missing-or-invalid-markdefs.description":"Text block with key <code>{{key}}</code> has an invalid or missing `markDefs` property.","inputs.portable-text.invalid-value.missing-type.action":"Remove the block","inputs.portable-text.invalid-value.missing-type.description":"Block with key <code>{{key}}</code> is missing a type name.","inputs.portable-text.invalid-value.non-object-child.action":"Remove the item","inputs.portable-text.invalid-value.non-object-child.description":"Child at index <code>{{index}}</code> of block with key <code>{{key}}</code> is not an object.","inputs.portable-text.invalid-value.not-an-array.action":"Unset the value","inputs.portable-text.invalid-value.not-an-array.description":"Value must be an array of Portable Text blocks, or undefined.","inputs.portable-text.invalid-value.not-an-object.action":"Remove item","inputs.portable-text.invalid-value.not-an-object.description":"Item at <code>{{index}}</code> is not an object,.","inputs.portable-text.invalid-value.orphaned-marks.action":"Remove disallowed marks","inputs.portable-text.invalid-value.orphaned-marks.description":"Text block with key <code>{{key}}</code> contains marks <code>({{orphanedMarks, list}})</code> that are not allowed by the schema.","inputs.portable-text.invalid-value.title":"Invalid Portable Text value","inputs.portable-text.list-type.bullet":"Bulleted list","inputs.portable-text.list-type.number":"Numbered list","inputs.portable-text.style.h1":"Heading 1","inputs.portable-text.style.h2":"Heading 2","inputs.portable-text.style.h3":"Heading 3","inputs.portable-text.style.h4":"Heading 4","inputs.portable-text.style.h5":"Heading 5","inputs.portable-text.style.h6":"Heading 6","inputs.portable-text.style.multiple":"Multiple","inputs.portable-text.style.none":"No style","inputs.portable-text.style.normal":"Normal","inputs.portable-text.style.quote":"Quote","inputs.reference.action.clear":"Clear","inputs.reference.action.copy":"Copy","inputs.reference.action.create-new-document":"Create","inputs.reference.action.create-new-document-select":"Create…","inputs.reference.action.duplicate":"Duplicate","inputs.reference.action.open-in-new-tab":"Open in new tab","inputs.reference.action.remove":"Remove","inputs.reference.action.replace":"Replace","inputs.reference.action.replace-cancel":"Cancel replace","inputs.reference.cross-dataset.feature-disabled-actions":"You can still clear this field's existing reference, but it cannot be changed to a different document as long as the feature is disabled.","inputs.reference.cross-dataset.feature-disabled-description":"This feature has been disabled. Read how to enable it in <DocumentationLink>the documentation</DocumentationLink>.","inputs.reference.cross-dataset.feature-unavailable-title":"Unavailable feature: Cross dataset reference","inputs.reference.cross-dataset.invalid-type":"The referenced document is of invalid type ({{typeName}}) <JsonValue/>","inputs.reference.document-opens-in-new-tab":"This document opens in a new tab","inputs.reference.error.document-unavailable-title":"Document unavailable","inputs.reference.error.failed-to-load-document-title":"Failed to load referenced document","inputs.reference.error.invalid-search-result-type-title":'Search returned a type that\'s not valid for this reference: "{{returnedType}}"',"inputs.reference.error.invalid-type-description":"Referenced document (<code>{{documentId}}</code>) is of type <code>{{actualType}}</code>. According to the schema, referenced documents can only be of type <AllowedTypes />.","inputs.reference.error.invalid-type-title":"Document of invalid type","inputs.reference.error.missing-read-permissions-description":"The referenced document could not be accessed due to insufficient permissions","inputs.reference.error.missing-read-permissions-title":"Insufficient permissions","inputs.reference.error.nonexistent-document-description":"The referenced document does not exist (ID: <code>{{documentId}}</code>). You can either remove the reference or replace it with another document.","inputs.reference.error.nonexistent-document-title":"Not found","inputs.reference.error.nonexistent-document.clear-button-label":"Clear","inputs.reference.error.search-failed-title":"Reference search failed","inputs.reference.image-preview-alt-text":"Image preview of referenced document","inputs.reference.incomplete-reference.finalize-action-description":"<strong>{{referencedDocument}}</strong> is published and this reference should now be finalized.","inputs.reference.incomplete-reference.finalize-action-title":"Finalize reference","inputs.reference.incomplete-reference.strengthen-action-description":"<strong>{{referencedDocument}}</strong> is published and this reference should now be converted to a strong reference.","inputs.reference.incomplete-reference.strengthen-action-title":"Convert to strong reference","inputs.reference.incomplete-reference.strengthen-button-label":"Convert to strong reference","inputs.reference.metadata-error.retry-button-label":"Retry","inputs.reference.metadata-error.title":"Unable to load reference metadata","inputs.reference.no-results-for-query":"No results for <strong>“{{searchTerm}}”</strong>","inputs.reference.preview.edited-at-time":"Edited <RelativeTime/>","inputs.reference.preview.has-no-unpublished-changes-aria-label":"No unpublished edits","inputs.reference.preview.has-unpublished-changes-aria-label":"Edited","inputs.reference.preview.is-not-published-aria-label":"Not published","inputs.reference.preview.is-published-aria-label":"Published","inputs.reference.preview.no-unpublished-edits":"No unpublished edits","inputs.reference.preview.not-published":"Not published","inputs.reference.preview.published-at-time":"Published <RelativeTime/>","inputs.reference.referenced-document-does-not-exist":"The referenced document no longer exist and might have been deleted (document ID: <code>{{documentId}}</code>).","inputs.reference.referenced-document-insufficient-permissions":"The referenced document could not be accessed due to insufficient permissions","inputs.reference.resolving-initial-value":"Resolving initial value…","inputs.reference.search-placeholder":"Type to search","inputs.reference.strength-mismatch.is-strong-consquences":"It will not be possible to delete the reference document without first removing this reference or converting it to weak.","inputs.reference.strength-mismatch.is-strong-description":"This reference is <em>strong</em>, but according to the current schema it should be <em>weak</em>.","inputs.reference.strength-mismatch.is-weak-consquences":"This makes it possible to delete the referenced document without first deleting this reference, leaving this field referencing a nonexisting document.","inputs.reference.strength-mismatch.is-weak-description":"This reference is <em>weak</em>, but according to the current schema it should be <em>strong</em>.","inputs.reference.strength-mismatch.strengthen-button-label":"Convert to strong reference","inputs.reference.strength-mismatch.title":"Reference strength mismatch","inputs.reference.strength-mismatch.weaken-button-label":"Convert to weak reference","inputs.slug.action.generate":"Generate","inputs.slug.action.generating":"Generating…","inputs.slug.error.missing-source":"Source is missing. Check source on type {{schemaType}} in schema","inputs.tags.placeholder":"Enter tag and press ENTER…","inputs.tags.placeholder_touch":"Enter tag…","inputs.untyped-value.convert-button.text":"Convert to {{targetType}}","inputs.untyped-value.description":"Encountered an object value without a <code>_type</code> property.","inputs.untyped-value.details.description":"Either remove the <code>name</code> property of the object declaration, or set <code>_type</code> property on items.","inputs.untyped-value.details.json-dump-prefix":"Current value (<code>object</code>):","inputs.untyped-value.details.multi-type-description":"The following types are valid here according to schema:","inputs.untyped-value.details.title":"Developer info","inputs.untyped-value.title":"Property value missing <code>_type</code>","inputs.untyped-value.unset-item-button.text":"Unset value","insufficient-permissions-message.not-authorized-explanation":"You do not have permission to access this feature.","insufficient-permissions-message.not-authorized-explanation_create-any-document":"You do not have permission to create a document.","insufficient-permissions-message.not-authorized-explanation_create-document":"You do not have permission to create this document.","insufficient-permissions-message.not-authorized-explanation_create-document-type":"You do not have permission to create this kind of document.","insufficient-permissions-message.not-authorized-explanation_create-new-reference":"You do not have permission to create a new reference.","insufficient-permissions-message.not-authorized-explanation_delete-document":"You do not have permission to delete this document.","insufficient-permissions-message.not-authorized-explanation_delete-schedules":"You do not have permission to delete schedules.","insufficient-permissions-message.not-authorized-explanation_discard-changes":"You do not have permission to discard changes in this document.","insufficient-permissions-message.not-authorized-explanation_duplicate-document":"You do not have permission to duplicate this document.","insufficient-permissions-message.not-authorized-explanation_edit-schedules":"You do not have permission to edit schedules.","insufficient-permissions-message.not-authorized-explanation_execute-schedules":"You do not have permission to execute schedules.","insufficient-permissions-message.not-authorized-explanation_publish-document":"You do not have permission to publish this document.","insufficient-permissions-message.not-authorized-explanation_unpublish-document":"You do not have permission to unpublish this document.","insufficient-permissions-message.roles":"Your roles: <Roles/>","insufficient-permissions-message.title":"Insufficient permissions","member-field-error.unexpected-error":"Unexpected error: {{error}}","new-document.button":"Create","new-document.create-new-document-label":"New document…","new-document.filter-placeholder":"Search document types","new-document.loading":"Loading…","new-document.new-document-aria-label":"New document","new-document.no-document-types-found":"No document types found","new-document.no-document-types-label":"No document types","new-document.no-results":"No results for <strong>{{searchQuery}}</strong>","new-document.open-dialog-aria-label":"Create new document","new-document.title":"Create new document","package-version.new-package-available.reload-button":"Push to reload","package-version.new-package-available.title":"Sanity Studio is ready to update!","presence.action.manage-members":"Invite members","presence.aria-label":"Global presence","presence.no-one-else-description":"Invite people to the project to see their online status.","presence.no-one-else-title":"No one else is here","presence.not-in-a-document":"Not in a document","presence.tooltip-content":"Who is here","preview.default.title-fallback":"Untitled","preview.fallback.no-value":"(no value)","preview.image.file-is-being-uploaded.alt-text":"The image currently being uploaded","relative-time.just-now":"just now","search.action-open-aria-label":"Open search","search.action.add-filter":"Add filter","search.action.clear-filters":"Clear filters","search.action.clear-recent-searches":"Clear recent searches","search.action.clear-type-filters-aria-label":"Clear checked filters","search.action.clear-type-filters-label":"Clear","search.action.close-search-aria-label":"Close search","search.action.filter-by-document-type-aria-label":"Filter by document type","search.action.remove-filter-aria-label":"Remove filter","search.action.search-all-types":"Search all documents","search.action.search-specific-types":"Search for {{types, list}}","search.action.search-specific-types-truncated":"Search for {{types, list}} +{{count}} more","search.action.select-asset":"Select asset","search.action.select-asset_file":"Select file","search.action.select-asset_image":"Select image","search.action.toggle-filters-aria-label_hide":"Hide filters","search.action.toggle-filters-aria-label_show":"Show filters","search.action.toggle-filters-label_hide":"Hide filters","search.action.toggle-filters-label_show":"Show filters","search.button.tooltip":"Search","search.document-type-list":"{{types, list}}","search.document-type-list-all-types":"All types","search.document-type-list-truncated":"{{types, list}} +{{count}} more","search.document-types-aria-label":"Document types","search.document-types-no-matches-found":"No matches for {{filter}}","search.error.display-filter-description":"This may indicate invalid options defined in your schema.","search.error.display-filter-title":"An error occurred whilst displaying this filter.","search.error.no-valid-asset-source-check-config-description":"Please ensure it's enabled in your studio configuration file.","search.error.no-valid-asset-source-only-default-description":"Currently, only the default asset source is supported.","search.error.no-valid-asset-source-title":"No valid asset sources found.","search.error.unspecified-error-help-description":"Please try again or check your connection","search.error.unspecified-error-title":"Something went wrong while searching","search.filter-all-fields-header":"All fields","search.filter-asset-change_file":"Change file","search.filter-asset-change_image":"Change image","search.filter-asset-clear":"Clear","search.filter-asset-select_file":"Select file","search.filter-asset-select_image":"Select image","search.filter-boolean-false":"False","search.filter-boolean-true":"True","search.filter-by-title-aria-label":"Filter by title","search.filter-date-aria-label":"Date","search.filter-date-range-end-date-aria-label":"End date","search.filter-date-range-start-date-aria-label":"Start date","search.filter-date-unit-aria-label":"Select unit","search.filter-date-unit_days":"Days","search.filter-date-unit_months":"Months","search.filter-date-unit_years":"Years","search.filter-date-value-aria-label":"Unit value","search.filter-field-tooltip-description":"Field description","search.filter-field-tooltip-name":"Field name","search.filter-field-tooltip-used-in-document-types":"Used in document types","search.filter-no-matches-found":"No matches for {{filter}}","search.filter-number-max-value-placeholder":"Max value","search.filter-number-min-value-placeholder":"Min value","search.filter-number-value-placeholder":"Value","search.filter-placeholder":"Filter","search.filter-reference-clear":"Clear","search.filter-shared-fields-header":"Shared fields","search.filter-string-value-placeholder":"Value","search.filter-string-value-select-predefined-value":"Select…","search.filters-aria-label_one":"Filter","search.filters-aria-label_other":"Filters","search.instructions":"Use <ControlsIcon/> to refine your search","search.no-results-help-description":"Try another keyword or adjust your filters","search.no-results-title":"No results found","search.operator.array-count-equal.description_one":"<Field/> <Operator>has</Operator> <Value>{{count}} item</Value>","search.operator.array-count-equal.description_other":"<Field/> <Operator>has</Operator> <Value>{{count}} items</Value>","search.operator.array-count-equal.name":"quantity is","search.operator.array-count-gt.description_one":"<Field/> <Operator>has ></Operator> <Value>{{count}} item</Value>","search.operator.array-count-gt.description_other":"<Field/> <Operator>has ></Operator> <Value>{{count}} items</Value>","search.operator.array-count-gt.name":"quantity greater than","search.operator.array-count-gte.description_one":"<Field/> <Operator>has ≥</Operator> <Value>{{count}} item</Value>","search.operator.array-count-gte.description_other":"<Field/> <Operator>has ≥</Operator> <Value>{{count}} items</Value>","search.operator.array-count-gte.name":"quantity greater than or equal to","search.operator.array-count-lt.description_one":"<Field/> <Operator>has <</Operator> <Value>{{count}} item</Value>","search.operator.array-count-lt.description_other":"<Field/> <Operator>has <</Operator> <Value>{{count}} items</Value>","search.operator.array-count-lt.name":"quantity less than","search.operator.array-count-lte.description_one":"<Field/> <Operator>has ≤</Operator> <Value>{{count}} item</Value>","search.operator.array-count-lte.description_other":"<Field/> <Operator>has ≤</Operator> <Value>{{count}} items</Value>","search.operator.array-count-lte.name":"quantity less than or equal to","search.operator.array-count-not-equal.description_one":"<Field/> <Operator>does not have</Operator> <Value>{{count}} item</Value>","search.operator.array-count-not-equal.description_other":"<Field/> <Operator>does not have</Operator> <Value>{{count}} items</Value>","search.operator.array-count-not-equal.name":"quantity is not","search.operator.array-count-range.description":"<Field/> <Operator>has between</Operator> <Value>{{from}} → {{to}} items</Value>","search.operator.array-count-range.name":"quantity is between","search.operator.array-list-includes.description":"<Field/> <Operator>includes</Operator> <Value>{{value}}</Value>","search.operator.array-list-includes.name":"includes","search.operator.array-list-not-includes.description":"<Field/> <Operator>does not include</Operator> <Value>{{value}}</Value>","search.operator.array-list-not-includes.name":"does not include","search.operator.array-reference-includes.description":"<Field/> <Operator>includes</Operator> <Value>{{value}}</Value>","search.operator.array-reference-includes.name":"includes","search.operator.array-reference-not-includes.description":"<Field/> <Operator>does not include</Operator> <Value>{{value}}</Value>","search.operator.array-reference-not-includes.name":"does not include","search.operator.asset-file-equal.description":"<Field/> <Operator>is</Operator> <Value>{{value}}</Value>","search.operator.asset-file-equal.name":"is","search.operator.asset-file-not-equal.description":"<Field/> <Operator>is not</Operator> <Value>{{value}}</Value>","search.operator.asset-file-not-equal.name":"is not","search.operator.asset-image-equal.description":"<Field/> <Operator>is</Operator> <Value>{{value}}</Value>","search.operator.asset-image-equal.name":"is","search.operator.asset-image-not-equal.description":"<Field/> <Operator>is not</Operator> <Value>{{value}}</Value>","search.operator.asset-image-not-equal.name":"is not","search.operator.boolean-equal.description":"<Field/> <Operator>is</Operator> <Value>{{value}}</Value>","search.operator.boolean-equal.name":"is","search.operator.date-after.description":"<Field/> <Operator>is after</Operator> <Value>{{value}}</Value>","search.operator.date-after.name":"after","search.operator.date-before.description":"<Field/> <Operator>is before</Operator> <Value>{{value}}</Value>","search.operator.date-before.name":"before","search.operator.date-equal.description":"<Field/> <Operator>is</Operator> <Value>{{value}}</Value>","search.operator.date-equal.name":"is","search.operator.date-last.description":"<Field/> <Operator>is in the last</Operator> <Value>{{value}}</Value>","search.operator.date-last.name":"last","search.operator.date-not-equal.description":"<Field/> <Operator>is not</Operator> <Value>{{value}}</Value>","search.operator.date-not-equal.name":"is not","search.operator.date-range.description":"<Field/> <Operator>is between</Operator> <Value/>","search.operator.date-range.name":"is between","search.operator.date-time-after.description":"<Field/> <Operator>is after</Operator> <Value>{{value}}</Value>","search.operator.date-time-after.name":"after","search.operator.date-time-before.description":"<Field/> <Operator>is before</Operator> <Value>{{value}}</Value>","search.operator.date-time-before.name":"before","search.operator.date-time-equal.description":"<Field/> <Operator>is</Operator> <Value>{{value}}</Value>","search.operator.date-time-equal.name":"is","search.operator.date-time-last.description":"<Field/> <Operator>is in the last</Operator> <Value>{{value}}</Value>","search.operator.date-time-last.name":"last","search.operator.date-time-not-equal.description":"<Field/> <Operator>is not</Operator> <Value>{{value}}</Value>","search.operator.date-time-not-equal.name":"is not","search.operator.date-time-range.description":"<Field/> <Operator>is between</Operator> <Value/>","search.operator.date-time-range.name":"is between","search.operator.defined.description":"<Field/> <Operator>is</Operator> <Value>not empty</Value>","search.operator.defined.name":"not empty","search.operator.not-defined.description":"<Field/> <Operator>is</Operator> <Value>empty</Value>","search.operator.not-defined.name":"empty","search.operator.number-equal.description":"<Field/> <Operator>is</Operator> <Value>{{value}}</Value>","search.operator.number-equal.name":"is","search.operator.number-gt.description":"<Field/> <Operator>></Operator> <Value>{{value}}</Value>","search.operator.number-gt.name":"greater than","search.operator.number-gte.description":"<Field/> <Operator>≥</Operator> <Value>{{value}}</Value>","search.operator.number-gte.name":"greater than or equal to","search.operator.number-lt.description":"<Field/> <Operator><</Operator> <Value>{{value}}</Value>","search.operator.number-lt.name":"less than","search.operator.number-lte.description":"<Field/> <Operator>≤</Operator> <Value>{{value}}</Value>","search.operator.number-lte.name":"less than or equal to","search.operator.number-not-equal.description":"<Field/> <Operator>is not</Operator> <Value>{{value}}</Value>","search.operator.number-not-equal.name":"is not","search.operator.number-range.description":"<Field/> <Operator>is between</Operator> <Value>{{from}} → {{to}}</Value>","search.operator.number-range.name":"is between","search.operator.portable-text-contains.description":"<Field/> <Operator>contains</Operator> <Value>{{value}}</Value>","search.operator.portable-text-contains.name":"contains","search.operator.portable-text-equal.description":"<Field/> <Operator>is</Operator> <Value>{{value}}</Value>","search.operator.portable-text-equal.name":"is","search.operator.portable-text-not-contains.description":"<Field/> <Operator>does not contain</Operator> <Value>{{value}}</Value>","search.operator.portable-text-not-contains.name":"does not contain","search.operator.portable-text-not-equal.description":"<Field/> <Operator>is not</Operator> <Value>{{value}}</Value>","search.operator.portable-text-not-equal.name":"is not","search.operator.reference-asset-file.description":"<Field/> <Operator>→</Operator> <Value>{{value}}</Value>","search.operator.reference-asset-file.name":"file","search.operator.reference-asset-image.description":"<Field/> <Operator>→</Operator> <Value>{{value}}</Value>","search.operator.reference-asset-image.name":"image","search.operator.reference-document.description":"<Field/> <Operator>→</Operator> <Value>{{value}}</Value>","search.operator.reference-document.name":"document","search.operator.reference-equal.description":"<Field/> <Operator>is</Operator> <Value>{{value}}</Value>","search.operator.reference-equal.name":"is","search.operator.reference-not-equal.description":"<Field/> <Operator>is not</Operator> <Value>{{value}}</Value>","search.operator.reference-not-equal.name":"is not","search.operator.slug-contains.description":"<Field/> <Operator>contains</Operator> <Value>{{value}}</Value>","search.operator.slug-contains.name":"contains","search.operator.slug-equal.description":"<Field/> <Operator>is</Operator> <Value>{{value}}</Value>","search.operator.slug-equal.name":"is","search.operator.slug-not-contains.description":"<Field/> <Operator>does not contain</Operator> <Value>{{value}}</Value>","search.operator.slug-not-contains.name":"does not contain","search.operator.slug-not-equal.description":"<Field/> <Operator>is not</Operator> <Value>{{value}}</Value>","search.operator.slug-not-equal.name":"is not","search.operator.string-contains.description":"<Field/> <Operator>contains</Operator> <Value>{{value}}</Value>","search.operator.string-contains.name":"contains","search.operator.string-equal.description":"<Field/> <Operator>is</Operator> <Value>{{value}}</Value>","search.operator.string-equal.name":"is","search.operator.string-list-equal.description":"<Field/> <Operator>is</Operator> <Value>{{value}}</Value>","search.operator.string-list-equal.name":"is","search.operator.string-list-not-equal.description":"<Field/> <Operator>is not</Operator> <Value>{{value}}</Value>","search.operator.string-list-not-equal.name":"is not","search.operator.string-not-contains.description":"<Field/> <Operator>does not contain</Operator> <Value>{{value}}</Value>","search.operator.string-not-contains.name":"does not contain","search.operator.string-not-equal.description":"<Field/> <Operator>is not</Operator> <Value>{{value}}</Value>","search.operator.string-not-equal.name":"is not","search.ordering.best-match-label":"Best match","search.ordering.created-ascending-label":"Created: Oldest first","search.ordering.created-descending-label":"Created: Newest first","search.ordering.updated-ascending-label":"Updated: Oldest first","search.ordering.updated-descending-label":"Updated: Newest first","search.placeholder":"Search","search.recent-searches-aria-label":"Recent searches","search.recent-searches-label":"Recent searches","search.search-results-aria-label":"Search results","sheet-list.edit-columns":"Edit columns","sheet-list.hide-field":"Remove from table","sheet-list.reset-columns":"Reset columns","sheet-list.select-fields":"Select up to 5 field types","status-button.aria-label":"Configuration status","timeline.error.load-document-changes-description":"Document history transactions have not been affected.","timeline.error.load-document-changes-title":"An error occurred whilst retrieving document changes.","timeline.error.no-document-history-description":"When changing the content of the document, the document versions will appear in this menu.","timeline.error.no-document-history-title":"No document history","timeline.error.unable-to-load-revision":"Unable to load revision","timeline.latest":"Latest","timeline.latest-revision":"Latest revision","timeline.latest-version":"Latest revision","timeline.list.aria-label":"Document revisions","timeline.loading-history":"Loading history…","timeline.operation.created":"Created","timeline.operation.created-initial":"Created","timeline.operation.created-initial_timestamp":"Created: {{timestamp, datetime}}","timeline.operation.created_timestamp":"Created: {{timestamp, datetime}}","timeline.operation.deleted":"Deleted","timeline.operation.deleted_timestamp":"Deleted: {{timestamp, datetime}}","timeline.operation.draft-discarded":"Discarded draft","timeline.operation.draft-discarded_timestamp":"Discarded draft: {{timestamp, datetime}}","timeline.operation.edited-draft":"Edited","timeline.operation.edited-draft_timestamp":"Edited: {{timestamp, datetime}}","timeline.operation.edited-live":"Live edited","timeline.operation.edited-live_timestamp":"Live edited: {{timestamp, datetime}}","timeline.operation.published":"Published","timeline.operation.published_timestamp":"Published: {{timestamp, datetime}}","timeline.operation.unpublished":"Unpublished","timeline.operation.unpublished_timestamp":"Unpublished: {{timestamp, datetime}}","timeline.since":"Since: {{timestamp, datetime}}","timeline.since-version-missing":"Since: unknown version","toolbar.portable-text.action-button-aria-label":"{{action}}","tree-editing-dialog.breadcrumbs.menu":"Breadcrumb menu","tree-editing-dialog.search-placeholder":"Search","tree-editing-dialog.search.menu-label":"Search menu","tree-editing-dialog.search.no-results-title":"No results found","tree-editing-dialog.sidebar.action.close":"Close sidebar","tree-editing-dialog.sidebar.action.collapse":"Collapse","tree-editing-dialog.sidebar.action.done":"Done","tree-editing-dialog.sidebar.action.expand":"Expand","tree-editing-dialog.sidebar.action.open":"Open sidebar","user-menu.action.free-trial-finished":"Upgrade from free","user-menu.action.free-trial_one":"{{count}} day left in trial","user-menu.action.free-trial_other":"{{count}} days left in trial","user-menu.action.invite-members":"Invite members","user-menu.action.invite-members-aria-label":"Invite members","user-menu.action.manage-project":"Manage project","user-menu.action.manage-project-aria-label":"Manage project","user-menu.action.portable-text.annotation-disabled_empty-block":"Cannot apply {{name}} to empty block","user-menu.action.portable-text.annotation-disabled_multiple-blocks":"Cannot apply {{name}} to multiple blocks","user-menu.action.sign-out":"Sign out","user-menu.appearance-title":"Appearance","user-menu.close-menu":"Close menu","user-menu.color-scheme.dark-description":"Use dark appearance","user-menu.color-scheme.dark-title":"Dark","user-menu.color-scheme.light-description":"Use light appearance","user-menu.color-scheme.light-title":"Light","user-menu.color-scheme.system-description":"Use system appearance","user-menu.color-scheme.system-title":"System","user-menu.locale-title":"Language","user-menu.login-provider":"Signed in with {{providerTitle}}","user-menu.open-menu":"Open menu","workspaces.action.add-workspace":"Add workspace","workspaces.action.choose-another-workspace":"Choose another workspace","workspaces.choose-your-workspace-label":"Choose your workspace","workspaces.select-workspace-aria-label":"Select workspace","workspaces.select-workspace-label":"Select workspace","workspaces.select-workspace-tooltip":"Select workspace","workspaces.title":"Workspaces"}},{locale:"en-US",namespace:"validation",resources:{"array.exact-length":"Must have exactly {{wantedLength}} items","array.exact-length_blocks":"Must have exactly {{wantedLength}} blocks","array.item-duplicate":"Can't be a duplicate","array.maximum-length":"Must have at most {{maxLength}} items","array.maximum-length_blocks":"Must have at most {{maxLength}} blocks","array.minimum-length":"Must have at least {{minLength}} items","array.minimum-length_blocks":"Must have at least {{minLength}} blocks","date.invalid-format":"Must be a valid ISO-8601 formatted date string","date.maximum":"Must be at or before {{maxDate}}","date.minimum":"Must be at or after {{minDate}}","generic.incorrect-type":'Expected type "{{expectedType}}", got "{{actualType}}"',"generic.not-allowed":"Value did not match any allowed values","generic.not-allowed_hint":'Value "{{hint}}" did not match any allowed values',"generic.required":"Required","number.greater-than":"Must be greater than {{threshold}}","number.less-than":"Must be less than {{threshold}}","number.maximum":"Must be lower than or equal to {{maxNumber}}","number.maximum-precision":"Max precision is {{limit}}","number.minimum":"Must be greater than or equal to {{minNumber}}","number.non-integer":"Must be an integer","object.asset-required":"Asset is required","object.asset-required_file":"File is required","object.asset-required_image":"Image is required","object.not-reference":"Must be a reference to a document","object.reference-not-published":"Referenced document must be published","panel.close-button-aria-label":"Close validation","panel.no-errors-message":"No validation errors","panel.title":"Validation","slug.missing-current":"Slug must have a value","slug.not-object":"Slug must be an object","slug.not-unique":"Slug is already in use","string.email":"Must be a valid email address","string.exact-length":"Must be exactly {{wantedLength}} characters long","string.lowercase":"Must be all lowercase characters","string.maximum-length":"Must be at most {{maxLength}} characters long","string.minimum-length":"Must be at least {{minLength}} characters long","string.regex-does-not-match":'Does not match "{{name}}"-pattern',"string.regex-match":'Should not match "{{name}}"-pattern',"string.uppercase":"Must be all uppercase characters","string.url.disallowed-scheme":"Does not match allowed protocols/schemes","string.url.includes-credentials":"Username/password not allowed","string.url.invalid":"Not a valid URL","string.url.not-absolute":"Relative URLs are not allowed","string.url.not-relative":"Only relative URLs are allowed"}},{locale:"en-US",namespace:"copy-paste",resources:{"copy-paste.field-action-copy-button.document.title":"Copy document","copy-paste.field-action-copy-button.field.title":"Copy field","copy-paste.field-action-paste-button.document.title":"Paste document","copy-paste.field-action-paste-button.field.title":"Paste field","copy-paste.on-paste.validation.read-only-target.description":"The target is read-only","copy-paste.on-paste.validation.schema-type-incompatible.description":"Source and target schema types are not compatible","copy-paste.on-paste.validation.reference-type-incompatible.description":'References of type "{{sourceReferenceType}}" is not allowed in reference field that accepts types "{{targetReferenceTypes}}"',"copy-paste.on-paste.validation.reference-filter-incompatible.description":"Reference is not allowed in reference field according to filter","copy-paste.on-paste.validation.reference-validation-failed.description":'The referenced document "{{ref}}" does not exist',"copy-paste.on-paste.validation.image-file-incompatible.description":'A "{{sourceSchemaType}}" is not allowed in a "{{targetSchemaType}}"',"copy-paste.on-paste.validation.array-type-incompatible.description":'Value of type "{{type}}" is not allowed in this array field',"copy-paste.on-paste.validation.array-value-incompatible.description":'Value of type "{{type}}" is not allowed in this array field',"copy-paste.on-paste.validation.string-value-incompatible.description":'Value "{{value}}" is not allowed in "{{allowedStrings}}"',"copy-paste.on-paste.validation.primitive-type-incompatible.description":'Value of type "{{type}}" is not allowed in this field',"copy-paste.on-paste.validation.clipboard-empty.title":"Nothing to paste","copy-paste.on-paste.validation.clipboard-invalid.title":"Invalid clipboard item","copy-paste.on-paste.validation.schema-type-incompatible.title":"Could not resolve schema type for path: {{path}}","copy-paste.on-paste.validation.partial-warning.title":"Could not paste all values","copy-paste.on-paste.validation.document-paste-success.title":'Document "{{fieldNames}}" updated',"copy-paste.on-paste.validation.field_one-paste-success.title":'Field "{{fieldName}}" updated',"copy-paste.on-paste.validation.mime-type-incompatible.description":'MIME type "{{mimeType}}" is not accepted for this field',"copy-paste.on-paste.validation.mime-type-validation-failed.description":"MIME type validation failed","copy-paste.on-copy.validation.schema-type-incompatible.title":"Could not resolve schema type for path: {{path}}","copy-paste.on-copy.validation.no-value.title":"Empty value, nothing to copy","copy-paste.on-copy.validation.clipboard-not-supported.title":"Your browser does not support this action","copy-paste.on-copy.validation.copy-document-success.title":'Document "{{fieldNames}}" copied',"copy-paste.on-copy.validation.copy-field_one-success.title":'Field "{{fieldName}}" copied',"copy-paste.on-copy.validation.copy-item_one-success.title":'Item "{{typeName}}" copied'}}],weekInfo:{firstDay:7,weekend:[6,7],minimalDays:1}},a2=(()=>{let e="__tmp_supports_local_storage";try{return!(typeof localStorage>"u")&&(localStorage.setItem(e,"---"),localStorage.removeItem(e),!0)}catch{return!1}})();function a3(e,t){return["sanity-locale",e,t].join(":")}function a4(e){let{projectId:t,name:n,i18n:{locales:i},__internal:{i18next:a}}=AU();return(0,l.jsx)(a5,{...e,projectId:t,sourceId:n,locales:i,i18next:a})}function a5({projectId:e,sourceId:t,locales:n,i18next:i,children:a}){let r=(0,d.useCallback)(e=>(i.on("languageChanged",e),()=>i.off("languageChanged",e)),[i]),o=(0,d.useSyncExternalStore)(r,()=>n.find(e=>i.language===e.id)||a1),s=(0,d.useMemo)(()=>({locales:n,currentLocale:o,__internal:{i18next:i},changeLocale:async n=>{a2&&localStorage.setItem(a3(e,t),n),await i.changeLanguage(n)}}),[o,i,n,e,t]);return(0,l.jsx)(d.Suspense,{fallback:(0,l.jsx)(aW,{}),children:(0,l.jsx)(y.a3,{i18n:i,children:(0,l.jsx)(p.RD.Provider,{value:s,children:a},o.id)})})}function a8(e){let t=JSON.stringify((Array.isArray(e)?e:[e]).flatMap(e=>e?.i18n?Object.values(e.i18n).map(({ns:e})=>e):[]).filter(iw).sort()),{t:n}=i1((0,d.useMemo)(()=>JSON.parse(t),[t]));return(0,d.useCallback)(function(e){let{i18n:t}=e;return t?new Proxy(e,{get:(e,i)=>{let a=e[i];if("string"==typeof i&&i in t){let{key:e,ns:r}=t[i];return n(e,{ns:r,..."string"==typeof a&&{defaultValue:a}})}return a}}):e},[n])}function a6(e){let{t}=i1((0,d.useMemo)(()=>e.i18n?Array.from(new Set(Object.values(e.i18n).map(({ns:e})=>e))).sort():[],[e.i18n]));return(0,d.useMemo)(()=>{let{i18n:n}=e;return n?new Proxy(e,{get:(e,i)=>{let a=e[i];if("string"==typeof i&&i in n){let{key:e,ns:r}=n[i];return t(e,{ns:r,..."string"==typeof a&&{defaultValue:a}})}return a}}):e},[e,t])}function a7(){return a9().currentLocale}function a9(){let e=(0,d.useContext)(p.RD);if(!e)throw Error("Sanity LocaleContext value missing. Is this hook being used outside LocaleContext.Provider?");return e}let re=(()=>{let e={dateTimeFormat:rt(),listFormat:rt(),numberFormat:rt(),relativeTimeFormat:rt()};return{dateTimeFormat:function(t,n){let i=rn(t,n),a=e.dateTimeFormat[i];return a||(a=new Intl.DateTimeFormat(t,n),e.dateTimeFormat[i]=a,a)},listFormat:function(t,n){let i=rn(t,n),a=e.listFormat[i];return a||(a=new Intl.ListFormat(t,n),e.listFormat[i]=a,a)},numberFormat:function(t,n){let i=rn(t,n),a=e.numberFormat[i];return a||(a=new Intl.NumberFormat(t,n),e.numberFormat[i]=a,a)},relativeTimeFormat:function(t,n){let i=rn(t,n),a=e.relativeTimeFormat[i];return a||(a=new Intl.RelativeTimeFormat(t,n),e.relativeTimeFormat[i]=a,a)}}})();function rt(){return Object.create(null)}function rn(e,t){return`${e}-${JSON.stringify(function(e){let t=[];for(let[n,i]of Object.entries(e))t.push(`${n}=${JSON.stringify(i)}`);return t.sort().join(`
`)}(t))}`}function ri(e={}){let t=d.useContext(p.RD)?.currentLocale.id;return t?re.listFormat(t,e):re.listFormat("en-US",{...e,style:"narrow"})}let ra=/^<(?<tag>[^\s\d<][^/?><]+)\/?>/,rr=/<\/(?<tag>[^>]+)>/,ro=/<[^>]+\/>/,rs=/^[A-Z][A-Za-z0-9]+$/,rl=/^[a-z]+$/,rc=/{{\s*?([^}]+)\s*?}}/g;function rd(e){let t=[],n=e.matchAll(rc),i=0;for(let a of n){if(typeof a.index>"u")continue;let n=e.slice(i,a.index);n.length>0&&t.push({type:"text",text:n}),t.push(function(e){let[t,...n]=e.replace(/^\{\{|\}\}$/g,"").trim().split(/\s*,\s*/);if(1===n.length&&"list"===n[0])return{type:"interpolation",variable:t,formatters:n};if(n.length>0)throw Error(`Interpolations with formatters are not supported when using <Translate>. Found "${e}". Utilize "useTranslation" instead, or format the values passed to <Translate> ahead of time.`);return{type:"interpolation",variable:t}}(a[0])),i+=n.length+a[0].length}return i<e.length&&t.push({type:"text",text:e.slice(i)}),t}let ru=/^[A-Z]/,rp=["abbr","address","cite","code","del","em","ins","kbd","q","samp","strong","sub","sup"];function rm(e){let t=e.t(e.i18nKey,{context:e.context,skipInterpolation:!0,count:e.values&&"count"in e.values&&"number"==typeof e.values.count?e.values.count:void 0}),n=(0,d.useMemo)(()=>(function(e){let t=[],n="",i="",a=e;for(;a.length>0;)if(i||"<"!==a[0]){if(i&&"<"===a[0]&&"<"!==a[1]){let e=a.match(rr);if(e){let r=e.groups.tag;if("/"!==a[1])throw Error(`Expected closing tag for <${i}>, but found new opening tag <${r}>. Nested tags is not supported.`);if(r!==i)throw Error(`Expected closing tag for <${i}>, but found closing tag </${r}> instead. Make sure each opening tag has a matching closing tag.`);n&&(t.push(...rd(n)),n=""),t.push({type:"tagClose",name:r}),i="",a=a.slice(e[0].length)}else n+=a[0],a=a.slice(1)}else n+=a[0],a=a.slice(1)}else{let e=a.match(ra);if(e){var r;let o=e.groups.tag;(function(e){if(!(rs.test(e)||rl.test(e)))throw Error(e.trim()===e?`Invalid tag "<${e}>". Tag names must be lowercase HTML tags or start with an uppercase letter and can only include letters and numbers.`:`Invalid tag "<${e}>". No whitespace allowed in tags.`)})(o),n&&(t.push(...rd(n)),n=""),(r=e[0],ro.test(r))?t.push({type:"tagOpen",selfClosing:!0,name:o}):(t.push({type:"tagOpen",name:o}),i=o),a=a.slice(e[0].length)}else n+=a[0],a=a.slice(1)}if(i)throw Error(`No matching closing tag for <${i}> found. Either make it self closing (e.g. "<${i}/>") or close it (e.g "<${i}>...</${i}>").`);return n&&t.push(...rd(n)),t})(t),[t]),i=ri();return(0,l.jsx)(l.Fragment,{children:function e(t,n,i,a){let[r,...o]=t;if(!r)return null;if("interpolation"===r.type){let t=n?n[r.variable]:void 0;if(typeof t>"u")return`{{${r.variable}}}`;let s=function(e,t,n){let i=e;for(let a of t)if("list"===a){if(Array.isArray(e))i=n.list(e);else throw Error("List formatter used on non-array value")}return`${i}`}(t,r.formatters||[],a);return(0,l.jsxs)(l.Fragment,{children:[s,e(o,n,i,a)]})}if("text"===r.type)return(0,l.jsxs)(l.Fragment,{children:[r.text,e(o,n,i,a)]});if("tagOpen"===r.type&&r.selfClosing){let t=i[r.name];if(!t)throw Error(`Component not found: ${r.name}`);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(t,{}),e(o,n,i,a)]})}if("tagOpen"===r.type&&!r.selfClosing){let t=o.findIndex(e=>"tagClose"===e.type),s=o[t];if(s&&r.name!==s.name)throw Error("Nested tags is not allowed");let c=i[r.name];if(!c&&ru.test(r.name))throw Error(`Component not defined: ${r.name}`);if(!c&&!rp.includes(r.name))throw Error(`HTML tag "${r.name}" is not allowed`);let u=o.slice(0,t),p=o.slice(t+1);return c?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(c,{children:e(u,n,i,a)}),e(p,n,i,a)]}):(0,l.jsxs)(l.Fragment,{children:[(0,d.createElement)(r.name,{},e(u,n,i,a)),e(p,n,i,a)]})}return null}(n,e.values,e.components||{},{list:e=>i.format(e)})})}let rh=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,rf=/_key\s*==\s*['"](.*)['"]/;function rg(e){if(!Array.isArray(e))throw Error("Path is not an array");return e.reduce((e,t,n)=>{if((0,w.dw)(t))return`${e}[${t}]`;if((0,w.Fd)(t)&&t._key)return`${e}[_key=="${t._key}"]`;if((0,w.lo)(t)){let[n,i]=t;return`${e}[${n}:${i}]`}if("string"==typeof t)return`${e}${0===n?"":"."}${t}`;throw Error(`Unsupported path segment \`${JSON.stringify(t)}\``)},"")}function rx(e,t){let n=t[0];if(typeof n>"u")return e;let i=t.slice(1);if((0,w.dw)(n))return rx(Array.isArray(e)?e[n]:void 0,i);if((0,w.Fd)(n))return rx(Array.isArray(e)?e.find(e=>e._key===n._key):void 0,i);if("string"==typeof n)return rx(iO(e)?e[n]:void 0,i);throw Error(`Unknown segment type ${JSON.stringify(n)}`)}function ry(e){return(0,w.dw)(e)?Number(e.replace(/[^\d]/g,"")):(0,w.Fd)(e)?function(e){let t=e.match(rf);if(!t)throw Error("Invalid key segment");return{_key:t[1]}}(e):(0,w.lo)(e)?function(e){let[t,n]=e.split(":").map(e=>""===e?e:Number(e));return[t,n]}(e):e}function rb(e,t){return e.length===t.length&&e.every((e,n)=>{let i=t[n];return(0,w.Fd)(e)&&(0,w.Fd)(i)?e._key===i._key:(0,w.dw)(e)?Number(e)===Number(i):(0,w.lo)(e)&&(0,w.lo)(i)?e[0]===i[0]&&e[1]===i[1]:e===i})}function rv(e){return(0,w.fU)(e)?e._key:void 0}function rj(e){let t=rv(e);return t?{_key:t}:void 0}function rC(e,t){return e.get(t?.author||null)}function rw(e,t){return function(e,t){let n=function e(t,n,i=[]){if(0===n.length)return t;let a=n[0],r=n.slice(1);if((0,w.lo)(a))throw Error("Index tuples are not supported in diff paths");if((0,w.dw)(a)||(0,w.Fd)(a)){if((0,w.dw)(a)||a._key,"array"!==t.type){rg(i);return}let n=t.items.find((0,w.dw)(a)?e=>e.toIndex===a:e=>(function(e,t){let n=e.diff;return"object"===n.type&&!!n.toValue&&n.toValue._key===t})(e,a));if(!n){rg(i);return}return e(n.diff,r,i.concat(a))}if("object"!==t.type){rg(i);return}let o=t.fields[a];if(typeof o>"u"){rg(i);return}return e(o,r,i.concat(a))}(e,t);if(n&&"unchanged"!==n.action)return n.annotation||void 0}(e,Array.isArray(t)?t:function(e){let t=e.match(rh);if(!t)throw Error("Invalid path string");return t.map(ry)}(t))}function rk(){let e=(0,d.useContext)(p.sc);if(!e)throw Error("UserColorManager: missing context value");return e}function rT(e){let t=rk(),n=(0,d.useMemo)(()=>e?t.listen(e):z.E,[t,e]);return(0,eR.m)(n,t.get(null))}let rA=["green","red","gray"],r_=M.mE.filter(e=>!rA.includes(e)),rS=e=>{let t="dark"===e;return{background:t?"900":"100",border:t?"700":"300",text:t?"200":"700"}},rE=e=>{let{background:t,border:n,text:i}=rS(e);return r_.reduce((e,a)=>(e[a]={name:a,background:M.VG[a][t].hex,border:M.VG[a][n].hex,text:M.VG[a][i].hex,tints:M.VG[a]},e),{})},rM=e=>{let{background:t,border:n,text:i}=rS(e);return{name:"gray",background:M.VG.gray[t].hex,border:M.VG.gray[n].hex,text:M.VG.gray[i].hex,tints:M.VG.gray}};function rN({children:e,manager:t}){let n=PO(),i=(0,d.useMemo)(()=>t||function(e){let t;let{anonymousColor:n,colors:i,currentUserColor:a,scheme:r}=e,o=i||rE(r),s=n||rM(r),l=a||"purple";if(!o.hasOwnProperty(l))throw Error(`'colors' must contain 'currentUserColor' (${l})`);let c=Object.keys(o),d=new Map,u=new Map,p=c.reduce((e,t)=>(e[t]=0,e),{}),m=new Map;return e?.userStore&&e.userStore.me.subscribe(e=>{var n;t=n=e?e.id:null,p[l]+=n?1:-1}),{get:function(e){return e?o[h(e)]:s},listen:function(e){let t=d.get(e);if(t)return t;let n=h(e);return t=new $.y(t=>{let i=o[n];return t.next(i),()=>{d.delete(e),m.delete(e),p[n]--}}).pipe((0,em.d)({refCount:!0})),d.set(e,t),t}};function h(e){let n,i;if(e===t)return l;let a=m.get(e);if(a)return a;let r=u.get(e);if(r&&(0===p[r]||!c.find(e=>0===p[e])))return f(e,r);let o=function(e){let t=0;for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n)|0;return c[Math.abs(t)%c.length]}(e);return 0===p[o]?f(e,o):f(e,(n=1/0,i=[],c.forEach(e=>{let t=p[e];t===n?i.push(e):t<n&&(n=t,i=[e])}),r&&i.includes(r)?r:i[0]))}function f(e,t){return m.set(e,t),u.set(e,t),p[t]++,t}}({scheme:n}),[t,n]);return(0,l.jsx)(p.sc.Provider,{value:i,children:e})}function rI(e,t=[]){let n=rk(),i=(0,d.useMemo)(()=>rw(e,t),[e,t]);return(0,d.useMemo)(()=>rC(n,i),[i,n])}let rz={apiVersion:"2024-05-28"};class r$ extends Error{projectId;constructor({projectId:e}){super("CorsOriginError"),this.name="CorsOriginError",this.projectId=e}}let rO={};function rP(e,t){a2?localStorage[e]=t:rO[e]=t}function rF(e){a2?localStorage.removeItem(e):delete rO[e]}let rD=j.zo.svg(({theme:e})=>{let{fg:t}=e.sanity.color.base;return(0,j.iv)`
    fill: ${t};
  `}),rR=j.zo.img`
  height: 19px;
  width: 19px;
  object-fit: contain;
`;function rL(e){let{provider:t}=e;return t.logo?(0,l.jsx)(rR,{src:t.logo,alt:`Logo for ${t.name}`}):void 0}let rB={google:()=>(0,l.jsxs)("svg",{width:"1em",height:"1em",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",children:[(0,l.jsx)("path",{d:"M11 24a13 13 0 0 1 .66-4.08l-7.4-5.66a22.18 22.18 0 0 0 0 19.49l7.4-5.67A13 13 0 0 1 11 24z",fill:"#fbbc05"}),(0,l.jsx)("path",{d:"M24 11a12.72 12.72 0 0 1 8.1 2.9l6.4-6.4a22 22 0 0 0-34.24 6.75l7.4 5.66A13 13 0 0 1 24 11z",fill:"#ea4335"}),(0,l.jsx)("path",{d:"M24 37a13 13 0 0 1-12.34-8.92l-7.4 5.66A21.93 21.93 0 0 0 24 46a21 21 0 0 0 14.33-5.48l-7-5.44A13.59 13.59 0 0 1 24 37zm-12.35-8.93l-7.4 5.67 7.4-5.66z",fill:"#34a853"}),(0,l.jsx)("path",{d:"M44.5 20H24v8.5h11.8a9.91 9.91 0 0 1-4.49 6.58l7 5.44C42.37 36.76 45 31.17 45 24a18.25 18.25 0 0 0-.5-4z",fill:"#4285f4"})]}),github:()=>(0,l.jsx)(rD,{width:"1em",height:"1em",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 438.55 438.55",children:(0,l.jsx)("path",{d:"M409.13 114.57a218.32 218.32 0 0 0-79.8-79.8Q278.94 5.36 219.27 5.36T109.21 34.77a218.29 218.29 0 0 0-79.8 79.8Q0 165 0 224.63q0 71.67 41.83 128.91t108.06 79.23q7.71 1.43 11.42-2a11.17 11.17 0 0 0 3.69-8.57q0-.86-.14-15.42t-.14-25.41l-6.57 1.14a83.77 83.77 0 0 1-15.85 1 120.73 120.73 0 0 1-19.84-2 44.34 44.34 0 0 1-19.11-8.51 36.23 36.23 0 0 1-12.56-17.6l-2.86-6.57a71.34 71.34 0 0 0-9-14.56q-6.14-8-12.42-10.85l-2-1.43a21 21 0 0 1-3.71-3.43 15.66 15.66 0 0 1-2.57-4q-.86-2 1.43-3.29C61.2 310.42 64 310 68 310l5.71.85q5.71 1.14 14.13 6.85a46.08 46.08 0 0 1 13.85 14.84q6.57 11.71 15.85 17.85t18.7 6.14a81.19 81.19 0 0 0 16.27-1.42 56.78 56.78 0 0 0 12.85-4.29q2.57-19.14 14-29.41a195.49 195.49 0 0 1-29.36-5.13 116.52 116.52 0 0 1-26.83-11.14 76.86 76.86 0 0 1-23-19.13q-9.14-11.42-15-30t-5.8-42.81q0-34.55 22.56-58.82-10.57-26 2-58.24 8.28-2.57 24.55 3.85t23.84 11q7.57 4.56 12.13 7.71a206.2 206.2 0 0 1 109.64 0l10.85-6.85a153.65 153.65 0 0 1 26.26-12.56q15.13-5.71 23.13-3.14 12.84 32.26 2.28 58.24 22.55 24.27 22.56 58.82 0 24.27-5.85 43t-15.12 30a79.82 79.82 0 0 1-23.13 19 116.74 116.74 0 0 1-26.84 11.14 195.29 195.29 0 0 1-29.23 5.07q14.8 12.84 14.81 40.58v60.2a11.37 11.37 0 0 0 3.57 8.56q3.57 3.42 11.28 2 66.24-22 108.07-79.23t41.83-128.91q-.03-59.62-29.43-110.05z"})})};async function rq({client:e,mode:t,providers:n=[]}){if("replace"===t&&Array.isArray(n))return n;let{providers:i}=await e.request({uri:"/auth/providers"});return"function"==typeof n?n(i):0===n.length?i:"replace"===t?n:i.filter(e=>n.some(t=>t.url!==e.url)).concat(n)}function rV({loginMethod:e="dual",projectId:t,url:n,redirectPath:i}){let a=new URLSearchParams;return a.set("origin",`${window.location.origin}${i}`),a.set("projectId",t),"token"===e?a.set("withSid","true"):a.set("type",e),`${n}?${a}`}let rK=/sid=([^&]{20,})&?/,rU=function(){if(typeof window>"u"||"object"!=typeof window.location)return null;let e=window.location.hash,[,t]=e.match(rK)||[];if(!t)return null;let n=e.replace(rK,""),i=new URL(window.location.href);return i.hash=n.length>1?n:"",history.replaceState(null,"",i),t}(),rZ=()=>{let e=rU;return e&&(rU=null),e},rG=e=>{if(!e)throw Error("Invalid project id");return`__studio_auth_token_${e}`},rH=e=>{try{var t;let n=(t=rG(e),a2?localStorage[t]:rO[t]);if(n){let{token:e}=JSON.parse(n);if(e&&"string"==typeof e)return e}}catch(e){console.error(e)}return null},rW=e=>{try{rF(rG(e))}catch(e){console.error(e)}},rY=({token:e,projectId:t})=>{try{rP(rG(t),JSON.stringify({token:e,time:new Date().toISOString()}))}catch(e){console.error(e)}},rJ=async(e,t)=>{try{let t=await e.request({uri:"/users/me",withCredentials:!0,tag:"users.get-current"});return"string"==typeof t?.id?t:null}catch(n){if(401===n.statusCode)return rW(e.config().projectId||""),t(null),null;if(await e.request({uri:"/ping",withCredentials:!1,tag:"cors-check"}).then(()=>!0,()=>!1))throw new r$({projectId:e.config()?.projectId});if(n.isNetworkError&&!n.message&&n.request&&n.request.url){let e=new URL(n.request.url).host;throw Error(`Unknown network error attempting to reach ${e}`)}throw n}},rX=eD(function({clientFactory:e,projectId:t,dataset:n,apiHost:i,loginMethod:a="dual",...r}){let{broadcast:o,messages:s}=function(e){let t=typeof window>"u"?(0,N.of)():(0,L.R)(window,"storage"),n=`__studio_local_storage_messaging_${e}`,i=new D.x;return{messages:(0,R.T)(i,t.pipe((0,eh.h)(e=>e.key===n),(0,P.U)(e=>e.newValue),(0,eh.h)(iw),(0,P.U)(e=>JSON.parse(e)))).pipe((0,em.d)(1)),broadcast:function(e){try{rP(n,JSON.stringify(e)),rF(n),i.next(e)}catch{}}}}(`dual_mode_auth_${t}`),c=e??eP.eI,u=s.pipe((0,ef.O)(["dual","token"].includes(a)?rH(t):null)),p={};i?p.apiHost=i:"u">typeof __SANITY_STAGING__&&!0===__SANITY_STAGING__&&(p.apiHost="https://api.sanity.work");let m=u.pipe((0,P.U)(e=>c({projectId:t,dataset:n,apiVersion:"2021-06-07",useCdn:!1,...e&&{token:e},withCredentials:!0,requestTagPrefix:"sanity.studio",ignoreBrowserTokenWarning:!0,allowReconfigure:!1,...p})),(0,ec.w)(e=>(0,B.P)(async()=>{let t=await rJ(e,o);return{currentUser:t,client:e,authenticated:!!t}})),(0,ea.x)((e,t)=>eF(e.currentUser,t.currentUser)),(0,em.d)(1));async function f(){let e;let i=rZ();if(!i){o("cookie"===a?null:rH(t));return}let r=c({projectId:t,dataset:n,useCdn:!0,withCredentials:!0,apiVersion:"2021-06-07",requestTagPrefix:"sanity.studio",...p});if(("dual"===a||"cookie"===a)&&(e=await rJ(r,o)),e||"cookie"===a){o(null);return}o(await g(r,i)??null)}async function g(e,n){let{token:i}=await e.request({method:"GET",uri:"/auth/fetch",query:{sid:n},tag:"auth.fetch-token"});return rY({token:i,projectId:t}),i}async function y(){let e=c({projectId:t,dataset:n,useCdn:!0,withCredentials:!0,token:rH(t)??void 0,apiVersion:"2021-06-07",requestTagPrefix:"sanity.studio",...p});rW(t),await e.request({uri:"/auth/logout",method:"POST"}),o(null)}let b=function({getClient:e,loginMethod:t,redirectOnSingle:n,...i}){let a=iC(e);return function({projectId:e,...r}){let o=r.redirectPath||r.basePath||"/",[s,c]=(0,d.useState)(null),[u,p]=(0,d.useState)(null);if(u)throw u;let[m]=a();(0,d.useEffect)(()=>{m&&rq({client:m,...i}).then(c).catch(p)},[m]);let f=n&&s?.length===1&&s?.[0]&&rV({loginMethod:t,projectId:e,url:s[0].url,redirectPath:o}),g=!s||f;return(0,d.useEffect)(()=>{f&&(window.location.href=f)},[f]),g?(0,l.jsx)(aW,{showText:!0}):(0,l.jsxs)(h.Kq,{space:4,children:[(0,l.jsx)(h.X6,{align:"center",size:1,children:"Choose login provider"}),(0,l.jsx)(h.Kq,{space:2,children:s.map((n,i)=>(0,l.jsx)(x.zx,{as:"a",icon:rB[n.name]||(0,l.jsx)(rL,{provider:n}),href:rV({loginMethod:t,projectId:e,url:n.url,redirectPath:o}),mode:"ghost",size:"large",text:n.title},`${n.url}_${i}`))})]})}}({...r,getClient:()=>m.pipe((0,P.U)(e=>e.client)),loginMethod:a});return{handleCallbackUrl:f,token:u,state:m,LoginComponent:b,logout:y}},function e(t){return"object"!=typeof t||null===t?`${t}`:JSON.stringify(Object.fromEntries(Object.entries(t).sort(([e],[t])=>e.localeCompare(t,"en")).map(([t,n])=>[t,e(n)])))});function rQ(e){return"google"===e?"Google":"github"===e?"GitHub":"sanity"===e?"Sanity":e?.startsWith("saml-")?"SAML/SSO":void 0}let r0=typeof window>"u"?(0,N.of)({}):(0,L.R)(window,"online"),r1=typeof window>"u"?(0,N.of)({}):(0,L.R)(window,"offline"),r2=e=>100*Math.pow(2,e),r3={type:"connecting"},r4=(0,eL.E)(),r5=r4[0],r8=(r4[1],({error:e,isOffline:t,attemptNo:n,retryAt:i})=>({type:"error",error:e,attemptNo:n,isOffline:t,retryAt:i}));function r6(e){return e.type?r6(e.type):"block"===e.name}function r7(e){return"field"===e.kind&&"array"===e.field.schemaType.jsonType}let r9=["_key","_type","_weak"];function oe(e){return Object.keys(e).every(e=>r9.includes(e))}function ot(e,t){return function e(t,n,i){if(t===n)return t;if(i.has(n))return i.get(n);if(null==t||null==n||typeof t!=typeof n)return n;if(Array.isArray(n)){let a=t.length===n.length,r=[];i.set(n,r);for(let o=0;o<n.length;o++){let s=e(t[o],n[o],i);s!==t[o]&&(a=!1),r[o]=s}return i.set(n,a?t:r),a?t:r}if("object"==typeof n){let a=Object.getOwnPropertyNames(n),r=Object.getOwnPropertyNames(t).length===a.length,o={};for(let s of(i.set(n,o),a)){let a=e(t[s],n[s],i);a!==t[s]&&(r=!1),o[s]=a}return i.set(n,r?t:o),r?t:o}return n}(e,t,new WeakMap)}function on(e){return(0,l.jsx)(p.Oy.Provider,{value:e.presence,children:e.children})}function oi(){let e=(0,d.useContext)(p.Oy);if(!e)throw Error("Form context not provided");return e}function oa(e,t){let n=oi(),i=(0,d.useRef)(n),a=ot(i.current,n.filter(n=>(0,c.Ny)(e,n.path)&&t));return i.current=a,a}function or(){let e=(0,d.useContext)(p.rR);if(!e)throw Error("FormBuilder: missing context value");return e}let oo=e=>"error"===e?(0,l.jsx)(_.uIy,{}):"warning"===e?(0,l.jsx)(_.foC,{}):(0,l.jsx)(_.hQ6,{}),os=(0,j.zo)(h.xv)(({theme:e})=>(0,j.iv)`
    &[data-info] {
      color: ${e.sanity.color.muted.primary.enabled.fg};
    }

    &[data-warning] {
      color: ${e.sanity.color.muted.caution.enabled.fg};
    }

    &[data-error] {
      color: ${e.sanity.color.muted.critical.enabled.fg};
    }
  `);function ol(e){let{markers:t,validation:n,renderCustomMarkers:i}=e,{CustomMarkers:a}=or().__internal.components;return 0===t.length&&0===n.length?null:(0,l.jsxs)(h.Kq,{space:1,children:[n.length>0&&n.map(({message:e,level:t},i)=>(0,l.jsxs)(h.kC,{children:[(0,l.jsx)(h.xu,{marginRight:2,marginBottom:i+1===n.length?0:2,children:(0,l.jsx)(os,{size:1,"data-error":"error"===t?"":void 0,"data-warning":"warning"===t?"":void 0,"data-info":"info"===t?"":void 0,children:oo(t)})}),(0,l.jsx)(h.xu,{children:(0,l.jsx)(h.xv,{size:1,children:e||"Error"})})]},`validationItem-${i}`)),t.length>0&&(0,l.jsxs)(h.xu,{marginTop:n.length>0?3:0,children:[i&&i(t),!i&&(0,l.jsx)(a,{markers:t})]})]})}function oc(e){return(0,l.jsx)(p._t.Provider,{value:e.validation,children:e.children})}function od(e,t=!1){let n=function(){let e=(0,d.useContext)(p._t);if(!e)throw Error("Form context not provided");return e}();return(0,d.useMemo)(()=>n.filter(n=>(0,c.Ny)(e,n.path)&&(t||!(0,c.Xy)(e,n.path))).map(e=>({message:e.message,level:e.level,path:e.path})),[t,e,n])}let ou=["@@_NONEXISTENT_PATH_@@"];function op(e){let t=(0,d.useRef)(null),n=e?.validation&&e.validation.length>0?e.validation:iI,i=od(e?.path||ou),a=(0,d.useMemo)(()=>e?.schemaType&&r6(e?.schemaType)?n:n.concat(i),[i,e,n]),[r,o,s]=(0,d.useMemo)(()=>[a.filter(e=>"error"===e.level).length>0,a.filter(e=>"warning"===e.level).length>0,a.filter(e=>"info"===e.level).length>0],[a]),l=ot(t.current,a);return t.current=l,(0,d.useMemo)(()=>({validation:l,hasError:r,hasWarning:o,hasInfo:s}),[l,r,o,s])}function om(e){let t=(0,d.useContext)(p.Nj);if(!t)throw Error("Form context not provided");return(0,d.useMemo)(()=>t.filter(t=>(0,c.Xy)(t.path,e)),[t,e])}let oh={placement:"right",fallbackPlacements:["top","bottom"]};function of(e){let{group:t}=e,{title:n}=a6(t);return t.expanded?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(h.xu,{padding:2,paddingTop:3,children:(0,l.jsx)(h.xv,{muted:!0,size:1,weight:"medium",children:n})}),t.children.map((e,n)=>(0,l.jsx)(ox,{action:e,isFirst:0===n,prevIsGroup:t.children[n-1]?.type==="group"},n))]}):(0,l.jsx)(x.kS,{icon:t.icon,popover:oh,text:n,tone:t.tone,children:t.children.map((e,n)=>(0,l.jsx)(ox,{action:e,isFirst:0===n,prevIsGroup:t.children[n-1]?.type==="group"},n))})}function og(e){let{action:t}=e,{title:n}=a6(t),i=(0,d.useCallback)(()=>{t.onAction()},[t]),a="object"==typeof t.disabled&&(0,l.jsx)(h.xv,{size:1,children:t.disabled.reason});return(0,l.jsx)(qz,{content:a,placement:"left",children:(0,l.jsx)(x.sN,{disabled:!!t.disabled,icon:t.icon,iconRight:t.iconRight||(t.selected?_.KML:void 0),onClick:i,pressed:t.selected,text:n,tone:t.tone})})}function ox(e){let{action:t,isFirst:n,prevIsGroup:i}=e;return"divider"===t.type?(0,l.jsx)(h.R,{}):"group"===t.type?(0,l.jsxs)(l.Fragment,{children:[!n&&(0,l.jsx)(h.R,{}),(0,l.jsx)(of,{group:t})]}):(0,l.jsxs)(l.Fragment,{children:[i&&(0,l.jsx)(h.R,{}),(0,l.jsx)(og,{action:t})]})}let oy={placement:"top"};function ob(e){return"renderAsButton"in e&&e.renderAsButton}let ov=(0,d.memo)(function(e){let{nodes:t,onMenuOpenChange:n}=e,[i,a]=(0,d.useState)(!1),r=(0,d.useCallback)(()=>{n(!0),a(!0)},[n]),o=(0,d.useCallback)(()=>{n(!1),a(!1)},[n]),s=(0,d.useMemo)(()=>t.filter(ob),[t]),c=(0,d.useMemo)(()=>t.filter(e=>!ob(e)),[t]),u=(0,d.useMemo)(()=>{let e=c.length;if(0===e||e>1)return c;let t=c[0];return"group"===t.type?[{...t,expanded:!0}]:c},[c]),p=(0,d.useMemo)(()=>[...u.length?[{type:"group",children:u,icon:_.xXb,title:"Field actions"}]:[],...s],[s,u]);return(0,l.jsx)(l.Fragment,{children:p.map((e,t)=>(0,l.jsx)(oj,{node:e,onOpen:r,onClose:o,open:i},t))})}),oj=(0,d.memo)(function(e){let{node:t,onOpen:n,onClose:i,open:a}=e;return"divider"===t.type?(0,l.jsx)(h.Zb,{borderLeft:!0,flex:"none"}):"action"===t.type?(0,l.jsx)(x.zx,{icon:t.icon,mode:"bleed",onClick:t.onAction,tooltipProps:{...oy,content:t.title}}):(0,l.jsx)(ow,{node:t,onOpen:n,onClose:i,open:a})}),oC={constrainSize:!0,placement:"right",portal:!0,fallbackPlacements:["top","bottom"]};function ow(e){let{node:t,onOpen:n,onClose:i,open:a}=e,{title:r}=a6(t);return(0,l.jsx)(x.j2,{button:(0,l.jsx)(x.zx,{icon:t.icon,"aria-label":a?void 0:r,"data-testid":"field-actions-trigger",mode:"bleed",tooltipProps:{...oy,content:t.title}}),id:(0,d.useId)(),menu:(0,l.jsx)(h.v2,{children:t.children.map((e,n)=>(0,l.jsx)(ox,{action:e,isFirst:0===n,prevIsGroup:t.children[n-1]?.type==="group"},n))}),onOpen:n,onClose:i,popover:oC})}function ok(){return(0,d.useContext)(p.NZ)}function oT(e){let{actions:t,children:n,path:i,focused:a}=e,{onMouseEnter:r,onMouseLeave:o}=ok(),s=ok().hoveredStack[0],c=iU||!!s&&rg(i)===s,u=(0,d.useCallback)(()=>{r(i)},[r,i]),m=(0,d.useCallback)(()=>{o(i)},[o,i]),h=(0,d.useMemo)(()=>({actions:t,focused:a,hovered:c,onMouseEnter:u,onMouseLeave:m}),[t,a,u,m,c]);return(0,l.jsx)(p.sO.Provider,{value:h,children:n})}let oA=(0,d.memo)(function(e){let{actions:t,documentId:n,documentType:i,onActions:a,path:r,schemaType:o}=e,s=t.length,c=(0,d.useRef)(s),[u,p]=(0,d.useState)(()=>Array.from(Array(s))),m=(0,d.useRef)(u),h=(0,d.useCallback)((e,t)=>{p(n=>{let i=[...n];return i[e]=t,i})},[]);(0,d.useEffect)(()=>{m.current!==u&&(m.current=u,a(function e(t){return t.filter(Boolean).filter(e=>!("hidden"in e)||!0!==e.hidden).map(t=>"group"===t.type?{...t,children:e(t.children)}:t)}(u)))},[u,a]),(0,d.useEffect)(()=>{if(c.current!==s){let e=Array.from(Array(s));for(let t=0;t<s;t++)e[t]=m.current[t];c.current=s,p(e),m.current=e}},[s]);let f=(0,d.useMemo)(()=>t.map((e,t)=>(function({action:e,documentId:t,documentType:n,index:i,path:a,schemaType:r,setFieldAction:o}){let{useAction:s}=e;return(0,d.memo)(function(){let e=ij(s({documentId:t,documentType:n,path:a,schemaType:r}));return(0,d.useEffect)(()=>{o(i,e)},[e]),null})})({action:e,documentId:n,documentType:i,index:t,path:r,schemaType:o,setFieldAction:h})),[t,n,i,r,o,h]);return(0,l.jsx)(l.Fragment,{children:f.map((e,t)=>(0,l.jsx)(e,{},t))})});function o_(){return(0,d.useContext)(p.sO)}let oS=(0,d.memo)(function(e){let{children:t}=e,[n,i]=(0,d.useState)([]),a=(0,d.useCallback)(e=>{let t=rg(e);i(e=>e.includes(t)?e:[t,...e])},[]),r=(0,d.useCallback)(e=>{let t=rg(e);i(e=>e.includes(t)?e.filter(e=>e!==t):e)},[]),o=(0,d.useMemo)(()=>({hoveredStack:n,onMouseEnter:a,onMouseLeave:r}),[a,r,n]);return(0,l.jsx)(p.NZ.Provider,{value:o,children:t})}),oE={portal:!0},oM=j.zo.div(e=>{let{space:t}=(0,b.aQ)(e.theme);return(0,j.iv)`
    margin: ${0-t[1]}px;
  `}),oN=e=>1===e.length?`${e[0].user.displayName} is editing this document`:e.length>1?`${e.length} people are editing this document right now`:void 0;function oI(e){let{presence:t}=e,n=(0,d.useMemo)(()=>Array.from(new Set(t.map(e=>e.user.id))).map(e=>t.find(t=>t.user.id===e)).filter(iw),[t]),i=(0,d.useMemo)(()=>oN(n),[n]);return(0,l.jsx)(x.u,{content:i,...oE,children:(0,l.jsx)(oM,{children:(0,l.jsx)(h.Jh,{maxLength:2,"aria-label":oN(n),size:0,children:n.map(e=>(0,l.jsx)(oP,{size:0,user:e.user},e.user.id))})})})}let oz=/[^\p{Alpha}\p{White_Space}]/gu,o$=RegExp("\\p{White_Space}+","u"),oO={small:0,medium:1,large:2};function oP(e){let{user:t,withTooltip:n,...i}=e;return iO(t)?n?(0,l.jsx)(oF,{...i,user:t}):(0,l.jsx)(oD,{...i,user:t}):(0,l.jsx)(oR,{...e,user:t})}function oF(e){let{user:{displayName:t}}=e;return(0,l.jsx)(x.u,{content:t,placement:"top",portal:!0,children:(0,l.jsx)("div",{style:{display:"inline-block"},children:(0,l.jsx)(oD,{...e})})})}let oD=(0,d.forwardRef)(function(e,t){let{user:n,animateArrowFrom:i,position:a,size:r,status:o,tone:s,...c}=e,[u,p]=(0,d.useState)(null),m=rT(n.id),f=u?void 0:n?.imageUrl;return(0,l.jsx)(h.qE,{__unstable_hideInnerStroke:!0,animateArrowFrom:i,arrowPosition:a,color:m.name,"data-legacy-tone":s,initials:n?.displayName&&function(e){let t=e.replace(oz,"").split(o$);return 1===t.length?`${t[0].charAt(0)}`.toUpperCase():`${t[0].charAt(0)}${t[t.length-1].charAt(0)}`}(n.displayName),src:f,onImageLoadError:p,ref:t,size:"string"==typeof r?oO[r]:r,status:o,title:n?.displayName,...c})});function oR({user:e,...t}){let[n]=vm(e);return n?(0,l.jsx)(oP,{...t,user:n}):null}let oL=[0,.25,.75,1],oB=(0,j.zo)(h.kC)`
  & > div:first-child {
    flex: 1;
    min-width: 0;
  }
`,oq=(0,j.zo)(h.kC)`
  height: ${25}px;
  min-width: 23px;
  vertical-align: top;
`,oV=(0,d.memo)(function(e){let{children:t}=e,{store:n,snapshot:i}=im();return(0,l.jsx)(p.dx.Provider,{value:n,children:(0,l.jsx)(p.KT.Provider,{value:i,children:t})})}),oK=[],oU=(e,t,n)=>{let i=(0,d.useContext)(p.dx);null===i&&console.warn(Error('No context provided for reporter. Make sure that the component calling "usePresenceReporter()", is wrapped inside a <PresenceTracker> element')),ih(i,e,t,n)};function oZ(e){let{children:t,items:n}=e,i=(0,d.useMemo)(()=>(0,l.jsx)(h.Kq,{sizing:"border",children:n.map(e=>(0,l.jsxs)(h.kC,{align:"center",gap:2,children:[(0,l.jsx)("div",{children:(0,l.jsx)(oP,{user:e.user,status:"online"})}),(0,l.jsx)(h.xv,{size:1,children:e.user.displayName})]},e.user.id))}),[n]);return(0,l.jsx)(x.u,{content:i,placement:"top",portal:"documentScrollElement",children:t})}let oG=(e,t)=>{let n=e.length>t?t-1:t,i=Math.max(0,e.length-n);return[e.slice(0,i),e.slice(i)]},oH=(0,d.memo)(function({presence:e,position:t="inside",animateArrowFrom:n="inside",maxAvatars:i=3,stack:a=!0}){let r=C(eK(e||[],e=>e.user.id),e=>e.lastActiveAt),[o,s]=a?oG(r,i):[[],r],c=[...s.reverse().map(e=>({key:e.user.id,element:(0,l.jsx)(oP,{animateArrowFrom:n,position:t,status:"online",user:e.user})})),o.length>=2?{key:"counter",element:(0,l.jsx)(h.p2,{count:o.length})}:null].filter(Boolean);return(0,l.jsxs)(oB,{children:[(0,l.jsx)("div",{}),(0,l.jsx)(oq,{direction:"row-reverse",children:c.map((e,t)=>e&&(0,l.jsx)("div",{style:{position:"absolute",transform:`translate3d(${-(21*t)}px, 0px, 0px)`,transitionProperty:"transform",transitionDuration:"200ms",transitionTimingFunction:"cubic-bezier(0.85, 0, 0.15, 1)",zIndex:100-t},children:e.element},e.key))})]})});function oW(e){let t=(0,d.useContext)(p.L1),{presence:n=t,maxAvatars:i=3}=e,[a,r]=(0,d.useState)(null),o=(0,d.useId)(),s=(0,d.useCallback)(()=>({presence:n,element:a,maxAvatars:i}),[a,i,n]);oU(a?o:null,s);let c=(0,d.useMemo)(()=>eK(n||[],e=>e.user.id),[n]);return(0,l.jsx)(oZ,{items:c,children:(0,l.jsx)(oB,{ref:r,style:{minHeight:25,minWidth:25}})})}let oY=e=>{let t=new D.x,n=new IntersectionObserver(e=>{e.forEach(e=>{t.next(e)})},e);return{observe:e=>new $.y(i=>{let a=t.pipe((0,eh.h)(t=>t.target===e)).subscribe(i);return n.observe(e),()=>{a.unsubscribe(),n.unobserve(e)}})}},oJ=e=>{let{onIntersection:t,io:n,id:i,...a}=e,r=(0,d.useRef)(null);return(0,d.useEffect)(()=>{let e=r.current;if(!e)return;let a=n.observe(e).pipe((0,H.b)(e=>t(i,e))).subscribe();return()=>a.unsubscribe()},[n,i,t]),(0,l.jsx)("div",{...a,ref:r})},oX=j.zo.div`
  position: relative;
`,oQ=j.zo.div`
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  pointer-events: none;
  z-index: 13;
`,o0=(0,j.iv)`
  overflow: hidden;
  overflow: clip;
  pointer-events: none;
  position: absolute;
`,o1=(0,j.zo)(oJ)(({$debug:e,margins:t})=>(0,j.iv)`
    ${o0}

    z-index: 100;
    position: sticky;
    height: 1px;
    top: ${t?`${t[0]-1}px`:void 0};
    background-color: ${e?"red":"none"};
  `),o2=(0,j.zo)(oJ)(({$debug:e})=>(0,j.iv)`
    ${o0}

    visibility: none;

    ${e&&(0,j.iv)`
      background: rgba(255, 0, 0, 0.25);
      outline: 1px solid #00b;
      visibility: visible;
    `}
  `),o3=(0,j.zo)(oJ)(({$debug:e})=>(0,j.iv)`
    ${o0}

    position: sticky;
    bottom: -1px;
    height: 1px;
    background-color: ${e?"blue":"transparent"};
  `),o4=e=>`${e}px`,o5=e=>0-e,o8=(0,d.forwardRef)(function(e,t){let{regions:n,render:i,children:a,margins:[r,o,s,c]}=e,u=(0,d.useRef)(null),p=(0,d.useMemo)(()=>[r,o,s,c],[r,o,s,c]),m=(0,d.useMemo)(()=>oY({rootMargin:p.map(o5).map(o4).join(" "),threshold:oL}),[p]),[h,f]=(0,d.useState)({}),g=(0,d.useCallback)((e,t)=>{f(n=>({...n,[e]:t}))},[]),x=h["::top"],y=h["::bottom"],b=(0,d.useMemo)(()=>x&&y?n.filter(e=>e.presence?.length>0).map(e=>{let t=h[e.id];if(!t)return null;let{bottom:n,top:i}=t.boundingClientRect,a=t.boundingClientRect.top<x.boundingClientRect.bottom,r=t.boundingClientRect.top<y.boundingClientRect.top,o=t.isIntersecting?i-(t.intersectionRect.top-23):a?-x.boundingClientRect.bottom:y.boundingClientRect.top,s=t.isIntersecting?-(n-(t.intersectionRect.bottom+23)):r?y.boundingClientRect.top:-x.boundingClientRect.bottom;return{distanceTop:o,distanceBottom:s,region:e,position:o<=8?"top":s<=8?"bottom":"inside"}}).filter(Boolean):[],[y,h,n,x]);return(0,l.jsxs)(oX,{ref:t,children:[(0,l.jsx)(o1,{$debug:!1,io:m,id:"::top",onIntersection:g,margins:p}),(0,l.jsx)("div",{children:a}),(0,l.jsx)(oQ,{ref:u,children:u.current&&i(b,u.current.offsetWidth)}),n.map(e=>{let t=0===e.rect.width;return(0,l.jsx)(o2,{$debug:!1,io:m,onIntersection:g,id:e.id,style:{width:t?1:e.rect.width,left:e.rect.left-(t?1:0),top:e.rect.top-23,height:e.rect.height+46}},e.id)}),(0,l.jsx)(o3,{$debug:!1,id:"::bottom",io:m,onIntersection:g})]})}),o6={transitionProperty:"transform",transitionDuration:"200ms",transitionTimingFunction:"cubic-bezier(0.85, 0, 0.15, 1)"},o7=e=>e.top+e.height,o9=e=>eW(e,e=>e.region.rect.top),se=(e,t)=>e+t,st=e=>e.reduce(se,0),sn=({height:e,...t})=>(0,l.jsx)("div",{style:{height:Math.max(0,e),...t?.style}}),si=[0,0,0,0],sa=(e,t)=>{let n=e,i=-n.scrollTop,a=0;for(;n&&n!==t;)i+=n.offsetTop-n.scrollTop,a+=n.offsetLeft,n=n.offsetParent instanceof HTMLElement?n.offsetParent:null;return{top:i,left:a}};function sr(e){let{children:t,margins:n=si}=e,i=function(){let e=(0,d.useContext)(p.KT);return null===e?(console.warn(Error('No context provided for reporter. Make sure that the component calling "usePresenceReportedValues()", is wrapped inside a <PresenceTracker> element')),oK):e}(),[a,r]=(0,d.useState)(null),o=(0,d.useMemo)(()=>a?i.map(([e,t])=>{var n;return t.element?{...t,id:e,rect:{...sa(n=t.element,a),width:n.offsetWidth,height:n.offsetHeight}}:null}).filter(Boolean):so,[a,i]),s=(0,d.useCallback)((e,t)=>{let i=function(e){let t={top:[],inside:[],bottom:[],...eH(o9(e).map((e,t,n)=>{let i=n[t-1]?.region.rect,a=i?o7(i):0;return{...e,spacerHeight:e.region.rect.top-a}}),e=>e.position)};return{top:o9(t.top).map((e,t,n)=>({...e,indent:n.slice(t+1).reduce((e,t)=>e+t.region.rect.width,0)})),inside:o9(t.inside).map(e=>({...e,indent:0})),bottom:o9(t.bottom).map((e,t,n)=>({...e,indent:n.slice(0,t).reduce((e,t)=>e+t.region.rect.width,0)}))}}(e.filter(e=>e.region.presence.length>0)),a=st(i.top.map(e=>e.region.rect.height+e.spacerHeight)),r=st([...i.inside,...i.bottom].map(e=>e.region.rect.height+e.spacerHeight)),o=i.inside.reduce((e,t)=>{let{distanceTop:n,distanceBottom:i}=t;return{nearTop:e.nearTop+(n<=20?t.region.presence.length:0),nearBottom:e.nearBottom+(i<=20?t.region.presence.length:0)}},{nearTop:0,nearBottom:0});return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(ss,{closeCount:o.nearTop,margins:n,position:"top",regionsWithIntersectionDetails:i.top}),(0,l.jsx)(sn,{height:a}),(0,l.jsx)(sl,{containerWidth:t,regionsWithIntersectionDetails:i.inside}),(0,l.jsx)(sn,{height:r}),(0,l.jsx)(ss,{closeCount:o.nearBottom,margins:n,position:"bottom",regionsWithIntersectionDetails:i.bottom})]})},[n]);return(0,l.jsx)(o8,{ref:r,margins:n,regions:o,render:s,children:t})}let so=[],ss=(0,d.memo)(function(e){let{closeCount:t,margins:n,position:i,regionsWithIntersectionDetails:a}=e,r="top"===i?1:-1,o=(0,d.useMemo)(()=>a.length?eG(C(a,e=>e.region.rect.top*r).map(e=>e.region.presence||so)):so,[r,a]),[s,c,u,p]=n,m=(p||0)+(o.length>0?-(21*t):0)-c,h="top"===i?s:u,f=(0,d.useMemo)(()=>({zIndex:2,position:"sticky",display:"flex",flexDirection:"column",alignItems:"flex-end",...o6,transform:`translate3d(${m}px, 0px, 0px)`,top:5+h,bottom:5+h}),[m,h]);return(0,l.jsx)("div",{"data-dock":i,style:f,children:(0,l.jsx)(oH,{position:i,maxAvatars:3,presence:o})},`sticky-${i}`)});function sl(e){let{regionsWithIntersectionDetails:t,containerWidth:n}=e;return(0,l.jsx)(l.Fragment,{children:t.map(e=>{let t=e.region.rect.left,{distanceTop:i,distanceBottom:a}=e,r=i<=20,o=a<=20,s=n-t-e.region.rect.width,{presence:c,maxAvatars:u}=e.region;return(0,l.jsx)(d.Fragment,{children:(0,l.jsx)("div",{style:{zIndex:2,position:"absolute",...o6,left:t,transform:`translate3d(${r||o?s:0}px, 0px, 0px)`,height:e.region.rect.height,top:e.region.rect.top},children:(0,l.jsx)(sc,{value:()=>`\u2912${i} | ${a}\u2913`,children:(0,l.jsx)(oH,{stack:!r&&!o,position:r?"top":o?"bottom":"inside",maxAvatars:u,presence:c})})})},e.region.id)})})}let sc=e=>e.children,sd=[0,0,0,0];function su({children:e,margins:t}){return(0,l.jsx)(oV,{children:(0,l.jsx)(sr,{margins:t||sd,children:e})})}let sp=(0,j.zo)(h.kC)(({theme:e,$floatingCardWidth:t,$slotWidth:n,$floatingCardVisible:i})=>{let{space:a}=e.sanity;return(0,j.iv)`
    /* Prevent buttons from taking up extra vertical space */
    line-height: 1;
    width: 100%;
    /* For floating actions menu */
    position: relative;

    [data-ui='PresenceBox'] {
      position: absolute;
      bottom: 0;
      right: ${n+t+a[1]}px;
    }
    @media (hover: hover) {
      // If hover is supported, we hide the floating card by default, so only add space for it when it's visible.
      [data-ui='PresenceBox'] {
        position: absolute;
        bottom: 0;
        right: ${n+(i?t:0)+a[1]}px;
      }
    }
  `}),sm=(0,j.zo)(h.xu)(({theme:e,$presenceMaxWidth:t})=>{let{space:n}=e.sanity;return(0,j.iv)`
    max-width: calc(100% - ${t+n[1]}px);
    min-width: 75%;
  `}),sh=(0,j.zo)(h.xu)(({theme:e,$right:t,$fieldActionsVisible:n})=>{let{space:i}=e.sanity,a=n?t+i[1]:t;return(0,j.iv)`
    position: absolute;
    bottom: 0;
    right: ${a}px;
  `}),sf=(0,j.zo)(h.Zb)`
  align-items: center;
  bottom: 0;
  position: absolute;
  right: 0;
  transition: opacity 150ms ease;
  line-height: 1;

  @media (hover: hover) {
    // If hover is supported, we hide the floating card by default
    // and only show it when it has focus within or when the field is hovered or focused.
    opacity: 0;
    pointer-events: none;

    [data-ui='FieldActionsFlex'] {
      opacity: 0;
    }

    &[data-actions-visible='false']:not(:focus-within) {
      // Remove the shadow when the field actions are not visible
      box-shadow: none;

      // Since the field actions always will be present in the DOM (to make them focusable) –
      // they will always affect the width of the floating card, even when they are not visible.
      // Therefore, we remove the background of the floating card when the field actions are not visible.
      background: transparent;
    }

    // Remove the shadow when the field has comments but no actions
    &[data-has-comments='true']:not([data-has-actions='true']) {
      box-shadow: none;
    }

    // Show the floating card when it has focus within (ie when field actions are focused).
    &:focus-within {
      opacity: 1;
      pointer-events: auto;
      width: max-content;

      [data-ui='FieldActionsFlex'] {
        opacity: 1;
        pointer-events: auto;
        width: max-content;
      }
    }
  }

  &[data-visible='true'] {
    opacity: 1;
    pointer-events: auto;
    width: max-content;
  }

  &[data-actions-visible='true'] {
    [data-ui='FieldActionsFlex'] {
      opacity: 1;
      pointer-events: auto;
      width: max-content;
    }
  }
`,sg=(0,j.zo)(h.kC)`
  gap: inherit;
  transition: opacity 150ms ease;
`;function sx(e){let{__internal_comments:t,__internal_slot:n,actions:i,content:a,fieldFocused:r,fieldHovered:o,presence:s,inputId:c}=e,[u,p]=(0,d.useState)(!1),[m,f]=(0,d.useState)(!1),[g,y]=(0,d.useState)(null),[b,v]=(0,d.useState)(0),[j,C]=(0,d.useState)(null),[w,k]=(0,d.useState)(0),{hasComments:T=!1,button:A=null,isAddingComment:_=!1}=t||{},S=i&&i.length>0,E=r||o||m||_,M=t?.button||S,N=u||E||T,I=(0,d.useCallback)(()=>{if(g){let{width:e}=g.getBoundingClientRect();v(e||0)}},[g]),z=(0,d.useCallback)(()=>{I(),p(!0)},[I]),$=(0,d.useCallback)(()=>{I(),p(!1)},[I]);(0,d.useEffect)(()=>{I()},[I,E]),(0,d.useEffect)(()=>{if(j){let{width:e}=j.getBoundingClientRect();k(e||0)}},[j]);let O=(0,d.useMemo)(()=>n?(0,l.jsx)(sh,{$fieldActionsVisible:!!E,$right:b,ref:C,children:n}):null,[b,E,n]);return(0,l.jsxs)(sp,{align:"flex-end",justify:"space-between",$floatingCardVisible:N,$floatingCardWidth:b,$slotWidth:w,children:[(0,l.jsx)(sm,{"data-ui":"fieldHeaderContentBox",flex:1,paddingY:2,$presenceMaxWidth:88,children:a}),s&&s.length>0&&(0,l.jsx)(h.xu,{"data-ui":"PresenceBox",flex:"none",children:(0,l.jsx)(oW,{maxAvatars:4,presence:s})}),O,(M||T)&&(0,l.jsx)(x.uE,{children:(0,l.jsxs)(sf,{"data-actions-visible":E?"true":"false","data-has-actions":S?"true":"false","data-has-comments":T?"true":"false","data-visible":N?"true":"false",display:"flex",onBlurCapture:$,onFocusCapture:z,ref:y,sizing:"border",children:[S&&(0,l.jsx)(sg,{align:"center","data-ui":"FieldActionsFlex","data-testid":c?`field-actions-menu-${c}`:"field-actions-menu",children:(0,l.jsx)(ov,{nodes:i,onMenuOpenChange:f})}),A]})})]})}function sy(e,t){if(!(!t||!e))return`desc_${e}`}let sb=[],sv={error:function(){let{t:e}=i1();return(0,l.jsx)(_.uIy,{"data-testid":"input-validation-icon-error","aria-label":e("form.validation.has-error-aria-label"),"aria-hidden":!0,role:"presentation"})},warning:function(){let{t:e}=i1();return(0,l.jsx)(_.foC,{"data-testid":"input-validation-icon-warning","aria-label":e("form.validation.has-warning-aria-label"),"aria-hidden":!0,role:"presentation"})},info:function(){let{t:e}=i1();return(0,l.jsx)(_.hQ6,{"data-testid":"input-validation-icon-info","aria-label":e("form.validation.has-info-aria-label"),"aria-hidden":!0,role:"presentation"})}},sj=(0,j.zo)(h.Kq)`
  max-width: 200px;
`,sC=(0,j.zo)(h.xv)(({$status:e})=>"error"===e?{"--card-icon-color":"var(--card-badge-critical-icon-color)"}:"warning"===e?{"--card-icon-color":"var(--card-badge-caution-icon-color)"}:"info"===e?{"--card-icon-color":"var(--card-badge-primary-icon-color)"}:{});function sw(e){let{validation:t=sb,__unstable_showSummary:n,fontSize:i,placement:a}=e,r=t.some(e=>"error"===e.level),o=t.some(e=>"warning"===e.level),s=r?"error":o?"warning":"info",c=sv[s];return(0,l.jsx)(x.u,{content:(0,l.jsxs)(sj,{space:3,children:[n&&(0,l.jsx)(sT,{validation:t}),!n&&(0,l.jsx)(l.Fragment,{children:t.map((e,t)=>(0,l.jsx)(sk,{validation:e},t))})]}),portal:!0,placement:a,fallbackPlacements:["bottom","right","left"],children:(0,l.jsx)("div",{children:(0,l.jsx)(sC,{$status:s,size:i,weight:"medium",children:c&&(0,l.jsx)(c,{})})})})}function sk(e){let{validation:t}=e,n=sv[t.level];return(0,l.jsxs)(h.kC,{children:[(0,l.jsx)(h.xu,{marginRight:2,children:(0,l.jsx)(sC,{$status:t.level,size:1,children:n&&(0,l.jsx)(n,{})})}),(0,l.jsx)(h.xu,{flex:1,children:(0,l.jsx)(h.xv,{size:1,children:t.message})})]})}function sT({validation:e}){let{t}=i1(),n=ri(),i=e.reduce((e,t)=>"error"===t.level?e+1:e,0),a=e.reduce((e,t)=>"warning"===t.level?e+1:e,0),r=i>0,o=a>0;if(!r&&!o)return null;let s=r&&t("form.validation.summary.errors-count",{count:i}),c=o&&t("form.validation.summary.warnings-count",{count:a});return s&&c?(0,l.jsx)(h.xv,{size:1,children:n.format([s,c])}):(0,l.jsx)(h.xv,{size:1,children:s||c})}let sA=(0,j.zo)(h.kC)`
  /*
   * Prevent the block size of appended elements (such as the deprecated field badge) affecting
   * the intrinsic block size of the label.
   */
  contain: size;
`,s_=[],sS=(0,d.memo)(function(e){let{description:t,inputId:n,title:i,deprecated:a,validation:r=s_}=e,{t:o}=i1(),s=r.length>0,c=a||s;return(0,l.jsxs)(h.Kq,{space:3,children:[(0,l.jsxs)(h.kC,{align:"center",paddingY:1,children:[(0,l.jsx)(h.xv,{as:"label",htmlFor:n,weight:"medium",size:1,children:i||(0,l.jsx)("span",{style:{color:"var(--card-muted-fg-color)"},children:o("form.field.untitled-field-label")})}),c&&(0,l.jsxs)(sA,{align:"center",flex:1,children:[a&&(0,l.jsx)(h.xu,{marginLeft:2,children:(0,l.jsx)(h.Ct,{"data-testid":`deprecated-badge-${i}`,tone:"caution",children:o("form.field.deprecated-label")})}),s&&(0,l.jsx)(h.xu,{marginLeft:2,children:(0,l.jsx)(sw,{fontSize:1,placement:"top",validation:r})})]})]}),a&&(0,l.jsx)(F0,{"data-testid":`deprecated-message-${i}`,tone:"caution",size:1,children:a.reason}),t&&(0,l.jsx)(h.xv,{muted:!0,size:1,id:sy(n,t),children:t})]})}),sE=[],sM=(0,d.memo)(function(e){let{__unstable_headerActions:t=sE,__unstable_presence:n=sE,__internal_slot:i=null,__internal_comments:a,children:r,description:o,inputId:s,level:c,title:d,validation:u,deprecated:p,...m}=e,{focused:f,hovered:g,onMouseEnter:x,onMouseLeave:y}=o_();return(0,l.jsxs)(h.Kq,{...m,"data-level":c,onMouseEnter:x,onMouseLeave:y,space:2,children:[d&&(0,l.jsx)(sx,{__internal_comments:a,__internal_slot:i,actions:t,fieldFocused:!!f,fieldHovered:g,presence:n,inputId:s,content:(0,l.jsx)(sS,{description:o,inputId:s,title:d,validation:u,deprecated:p})}),(0,l.jsx)("div",{children:r})]})}),sN=j.zo.legend`
  /* See: https://thatemil.com/blog/2015/01/03/reset-your-fieldset/ */
  padding: 0;
  display: table;
`,sI=(0,j.zo)(h.kC).attrs({forwardedAs:"button"})(e=>{let{theme:t}=e,{focusRing:n,radius:i}=t.sanity,{base:a}=t.sanity.color;return(0,j.iv)`
    appearance: none;
    border: 0;
    background: none;
    color: inherit;
    -webkit-font-smoothing: inherit;
    font: inherit;
    outline: none;
    border-radius: ${(0,h.hO)(i[2])};
    position: relative;

    &:not([hidden]) {
      display: flex;
    }

    &:focus {
      box-shadow: ${aT({base:a,focusRing:n})};
    }

    &:focus:not(:focus-visible) {
      box-shadow: none;
    }

    /* Added to increase the hit area of the collapsible fieldset */
    &::after {
      content: '';
      position: absolute;
      top: -10px;
      right: -10px;
      bottom: -10px;
      left: -10px;
    }
  `}),sz=(0,j.zo)(h.xu)`
  width: 9px;
  height: 9px;
  margin-right: 3px;

  & svg {
    transition: transform 100ms;
  }
`,s$=(0,d.memo)(function(e){let{collapsed:t,collapsible:n,onClick:i,title:a}=e,r=(0,l.jsx)(h.xv,{weight:"medium",size:1,children:a});return n?(0,l.jsx)(sN,{children:(0,l.jsxs)(sI,{type:"button",onClick:i,children:[(0,l.jsx)(sz,{children:(0,l.jsx)(h.xv,{muted:!0,size:1,children:(0,l.jsx)(_.tgp,{style:{transform:`rotate(${t?"0":"90deg"}) translate3d(0, 0, 0)`}})})}),r]})}):(0,l.jsx)(sN,{children:r})}),sO=(0,j.zo)(h.Kq).attrs({forwardedAs:"fieldset"})`
  border: none;

  /* See: https://thatemil.com/blog/2015/01/03/reset-your-fieldset/ */
  body:not(:-moz-handler-blocked) & {
    display: table-cell;
  }
`,sP=(0,j.zo)(h.xu)(e=>{let{$borderLeft:t,$focused:n,theme:i}=e,{focusRing:a}=i.sanity,{base:r}=i.sanity.color;return(0,j.iv)`
    outline: none;
    border-left: ${t?"1px solid var(--card-border-color)":void 0};
    transition:
      border-color 0.2s ease-in-out,
      box-shadow 0.2s ease-in-out;

    ${t&&n&&`border-left: 1px solid var(--card-focus-ring-color);
    box-shadow: inset 1px 0 0 var(--card-focus-ring-color);`}

    ${t&&!n&&`
      box-shadow: inset 0 0 0 transparent;
    `}

    &:focus {
      box-shadow: ${aT({base:r,focusRing:{...a,offset:2}})};
    }

    &:focus:not(:focus-visible) {
      box-shadow: none;
    }
  `}),sF=[],sD=(0,d.forwardRef)(function(e,t){let{__internal_comments:n,__internal_slot:i=null,__unstable_headerActions:a=sF,__unstable_presence:r=sF,children:o,collapsed:s,collapsible:c,columns:u,description:p,level:m=0,onCollapse:f,onExpand:g,onFocus:x,tabIndex:y,title:b,validation:v=sF,inputId:j,deprecated:C,...w}=e,{focused:k,hovered:T,onMouseEnter:A,onMouseLeave:_}=o_(),S=v.length>0,E=(0,d.useRef)(null),{t:M}=i1();(0,d.useImperativeHandle)(t,()=>E.current);let N=(0,d.useCallback)(e=>{E.current===e.target&&x&&x(e)},[x]),I=(0,d.useCallback)(()=>s?g?.():f?.(),[s,f,g]),z=(0,d.useMemo)(()=>s?null:(0,l.jsx)(ak,{columns:u,gapX:4,gapY:5,children:"function"==typeof o?o():o}),[o,s,u]);return(0,l.jsxs)(sO,{"data-level":m,...w,onMouseEnter:A,onMouseLeave:_,space:2,children:[(0,l.jsx)(sx,{__internal_comments:n,__internal_slot:i,actions:a,fieldFocused:!!k,fieldHovered:T,presence:r,inputId:j,content:(0,l.jsxs)(h.Kq,{space:3,children:[(0,l.jsxs)(h.kC,{align:"center",children:[b&&(0,l.jsx)(s$,{collapsed:!!s,collapsible:c,onClick:c?I:void 0,title:b}),C&&(0,l.jsx)(h.xu,{marginLeft:2,children:(0,l.jsx)(h.Ct,{"data-testid":`deprecated-badge-${b}`,tone:"caution",children:M("form.field.deprecated-label")})}),S&&(0,l.jsx)(h.xu,{marginLeft:2,children:(0,l.jsx)(sw,{fontSize:1,placement:"top",validation:v})})]}),C&&(0,l.jsx)(F0,{"data-testid":`deprecated-message-${b}`,tone:"caution",size:1,children:C.reason}),p&&(0,l.jsx)(h.xv,{muted:!0,size:1,id:sy(j,p),children:p})]})}),(0,l.jsx)(sP,{$borderLeft:m>0,$focused:!!k,hidden:s,paddingLeft:0===m?0:3,onFocus:"number"==typeof y&&y>-1?N:void 0,ref:E,tabIndex:y,children:!s&&z})]})}),sR=j.zo.div`
  display: flex;
  justify-content: flex-end;
  box-sizing: border-box;
  min-height: var(--avatar-height);
  width: 77px;
  margin-left: var(--small-padding);

  &[data-max-avatars='1'] {
    max-width: 23px;
  }

  &[data-position='top'] {
    align-self: flex-start;
  }

  &[data-position='bottom'] {
    align-self: flex-end;
  }
`;function sL({children:e,maxAvatars:t,position:n="bottom"}){return(0,l.jsx)(sR,{"data-max-avatars":t,"data-position":n,children:e})}function sB(e,t,n=tl){let i=function(e,t){let n=(0,d.useRef)(null);return(0,d.useEffect)(()=>{n.current=e},[e]),n.current}(e);(0,d.useEffect)(()=>{n(i,e)||t(i,e)},[t,e,i,n])}let sq=Symbol.for("sanity.patch");function sV(e,t=[]){return{patchType:sq,type:"setIfMissing",path:t,value:e}}function sK(e,t,n=[]){return{patchType:sq,type:"insert",path:n,position:t,items:e}}function sU(e,t=[]){return{patchType:sq,type:"set",path:t,value:e}}function sZ(e=[]){return{patchType:sq,type:"unset",path:e}}function sG(){let e=[];return{publish(t){for(let n of e)n(t)},subscribe:t=>(e.push(t),()=>{let n=e.indexOf(t);n>-1&&e.splice(n,1)})}}class sH{static from(e){return e instanceof sH?e:new sH(Array.isArray(e)?eG(e):[e])}patches;constructor(e){this.patches=e}prepend(...e){return sH.from([...eG(e),...this.patches])}append(...e){return sH.from([...this.patches,...eG(e)])}prefixAll(e){return sH.from(this.patches.map(t=>({...t,path:[e,...t.path]})))}}let sW=(0,d.memo)(function(e){let t=(0,d.useRef)(e);t.current=e;let n=(0,d.useCallback)(e=>t.current?.transformPatches?.(e)??[],[t]),i=(0,d.useCallback)(e=>{t.current.onChange(e)},[]),a=(0,d.useCallback)((e,n)=>{t.current.onPathFocus(e,n)},[]),r=(0,d.useCallback)(e=>{t.current.onPathBlur(e)},[]),o=(0,d.useCallback)(e=>{t.current.onPathOpen(e)},[]),s=(0,d.useCallback)((e,n)=>{t.current.onSetPathCollapsed(e,n)},[]),c=(0,d.useCallback)((e,n)=>{t.current.onSetFieldSetCollapsed(e,n)},[]),u=(0,d.useCallback)((e,n)=>{t.current.onFieldGroupSelect(e,n)},[]),m=(0,d.useMemo)(()=>({transformPatches:n,onChange:i,onPathFocus:a,onPathBlur:r,onPathOpen:o,onSetPathCollapsed:s,onSetFieldSetCollapsed:c,onFieldGroupSelect:u}),[i,u,r,a,o,c,s,n]);return(0,l.jsx)(p.qE.Provider,{value:m,children:e.children})});function sY(){let e=(0,d.useContext)(p.qE);if(!e)throw Error("Form context not provided");return e}function sJ(e){return(0,w.m$)(e)?"object"===e.name?{}:{_type:e.name}:(0,w.jB)(e)?[]:"string"===e.jsonType?"":"number"===e.jsonType?0:"boolean"!==e.jsonType&&void 0}let sX=()=>{if(i)return i;i=[];for(let e=0;e<256;++e)i[e]=(e+256).toString(16).slice(1);return i};function sQ(e){let t=sX();return(function(e=16){let t=new Uint8Array(e);return(0,td.Z)(t),t})(e).reduce((e,n)=>e+t[n],"").slice(0,e)}function s0(e){return void 0!==e._key?e:{...e,_key:sQ(12)}}let s1=(e,t)=>{let n=(0,e6.wq)(t);return e.of.find(e=>e.name===n)};function s2(e,t,n){return(0,O.D)(e).pipe((0,eu.z)(e=>{let i={_key:e._key};return(0,N.of)(s1(t,e)).pipe((0,eu.z)(e=>e?(0,N.of)(e):z.E),(0,eu.z)(t=>oe(e)&&n?(0,I.z)((0,N.of)({type:"patch",patches:[sU(!0,[i,"_resolvingInitialValue"])]}),(0,B.P)(()=>n(t,e)).pipe((0,eh.h)(iw),(0,P.U)(e=>{var t;return{type:"patch",patches:(t=[i],Object.entries(e).map(([e,n])=>sU(n,[...t,e])))}}),(0,F.K)(n=>(0,N.of)({type:"error",error:n,item:e,schemaType:t}))),(0,N.of)({type:"patch",patches:[sZ([i,"_resolvingInitialValue"])]})):z.E))}))}function s3(e){let t=(0,d.useRef)(),{member:n,renderAnnotation:i,renderBlock:a,renderField:r,renderInlineBlock:o,renderInput:s,renderItem:c,renderPreview:u}=e,{t:p}=i1(),{onPathBlur:m,onPathFocus:f,onChange:g,onPathOpen:x,onSetPathCollapsed:y,onSetFieldSetCollapsed:b,onFieldGroupSelect:v}=sY(),j=jS(),C=k8(),{onCopy:w}=LF();sB(n.item.focused,(e,n)=>{!e&&n&&t.current?.focus()});let k=(0,d.useCallback)(()=>{g(sH.from([sZ([{_key:n.key}])]))},[n.key,g]),T=(0,d.useCallback)(e=>{x(e),y(e,!1)},[x,y]),A=(0,h.pm)(),_=(0,d.useCallback)(e=>{if(0===e.items.length)throw Error("Insert event should include at least one item");let t=e.items.map(e=>s0(e));g(sH.from([sK(t,e.position,[{_key:n.key}])]));let i=t[0]._key,a=[...n.item.path.slice(0,-1),{_key:i}];f(a);let r=!1!==e.open;e.skipInitialValue?r&&T(a):s2(t,n.parentSchemaType,j).pipe((0,H.b)(e=>{"patch"===e.type?g(sH.from(e.patches)):A.push({title:p("inputs.array.error.cannot-resolve-initial-value-title"),description:p("inputs.array.error.cannot-resolve-initial-value-description",{schemaTypeTitle:e.schemaType.title,errorMessage:e.error.message}),status:"error"})})).subscribe({complete:()=>{r&&T(a)}})},[T,n.item.path,n.key,n.parentSchemaType,g,f,j,A,p]),S=(0,d.useCallback)(e=>{let t=C([]);w(n.item.path,t,{context:{source:"arrayItem"},patchType:"append"})},[C,w,n.item.path]),E=(0,d.useCallback)(()=>{m(n.item.path)},[n.item.path,m]),M=(0,d.useCallback)(()=>{f(n.item.path)},[n.item.path,f]),N=(0,d.useCallback)(e=>{f(n.item.path.concat(e))},[n.item.path,f]),I=(0,d.useCallback)(e=>{g(sH.from(e).prepend(sV(sJ(n.item.schemaType))).prefixAll({_key:n.key}))},[g,n.item.schemaType,n.key]),z=(0,d.useCallback)(()=>{y(n.item.path,!0)},[y,n.item.path]),$=(0,d.useCallback)(()=>{y(n.item.path,!1)},[y,n.item.path]),O=(0,d.useCallback)(e=>{y(n.item.path.concat(e),!0)},[y,n.item.path]),P=(0,d.useCallback)(e=>{y(n.item.path.concat(e),!1)},[y,n.item.path]),F=(0,d.useCallback)(()=>{x(n.item.path)},[x,n.item.path]),D=(0,d.useCallback)(e=>{x(n.item.path.concat(e))},[x,n.item.path]),R=(0,d.useCallback)(e=>{b(n.item.path.concat(e),!1)},[b,n.item.path]),L=(0,d.useCallback)(e=>{b(n.item.path.concat(e),!0)},[b,n.item.path]),B=(0,d.useCallback)(()=>{x(n.item.path)},[x,n.item.path]),q=!n.item.value||oe(n.item.value),V=(0,d.useCallback)(()=>{q&&k();let e=n.item.path.slice(0,-1);x(e),f(e)},[q,x,n.item.path,f,k]),K=(0,d.useCallback)(e=>{v(n.item.path,e)},[v,n.item.path]),U=(0,d.useMemo)(()=>({onBlur:E,onFocus:M,id:n.item.id,ref:t,"aria-describedby":sy(n.item.id,n.item.schemaType.description)}),[E,M,n.item.id,n.item.schemaType.description]),Z=(0,d.useMemo)(()=>({changed:n.item.changed,focusPath:n.item.focusPath,focused:n.item.focused,groups:n.item.groups,id:n.item.id,level:n.item.level,members:n.item.members,onChange:I,onFieldClose:F,onFieldCollapse:O,onFieldSetCollapse:L,onFieldExpand:P,onFieldSetExpand:R,onFieldGroupSelect:K,onPathFocus:N,onFieldOpen:D,path:n.item.path,presence:n.item.presence,readOnly:n.item.readOnly,renderAnnotation:i,renderBlock:a,renderField:r,renderInlineBlock:o,renderInput:s,renderItem:c,renderPreview:u,schemaType:n.item.schemaType,validation:n.item.validation,value:n.item.value,elementProps:U}),[U,I,F,O,L,P,R,N,D,K,n.item.changed,n.item.focusPath,n.item.focused,n.item.groups,n.item.id,n.item.level,n.item.members,n.item.path,n.item.presence,n.item.readOnly,n.item.schemaType,n.item.validation,n.item.value,i,a,r,o,s,c,u]),G=(0,d.useMemo)(()=>s(Z),[Z,s]),W=(0,d.useMemo)(()=>({key:n.key,index:n.index,level:n.item.level,value:n.item.value,title:n.item.schemaType.title,description:n.item.schemaType.description,collapsible:n.collapsible,collapsed:n.collapsed,schemaType:n.item.schemaType,parentSchemaType:n.parentSchemaType,onInsert:_,onCopy:S,onRemove:k,presence:n.item.presence,validation:n.item.validation,open:n.open,onOpen:B,onClose:V,onExpand:$,onCollapse:z,readOnly:n.item.readOnly,focused:n.item.focused,onFocus:M,onBlur:E,inputId:n.item.id,path:n.item.path,children:G,changed:n.item.changed,inputProps:Z}),[n.key,n.index,n.item.level,n.item.value,n.item.schemaType,n.item.presence,n.item.validation,n.item.readOnly,n.item.focused,n.item.id,n.item.path,n.item.changed,n.collapsible,n.collapsed,n.parentSchemaType,n.open,_,S,k,B,V,$,z,M,E,G,Z]);return(0,l.jsx)(sW,{onFieldGroupSelect:v,onChange:I,onPathOpen:x,onSetFieldSetCollapsed:b,onSetPathCollapsed:y,onPathBlur:m,onPathFocus:f,children:(0,d.useMemo)(()=>c(W),[W,c])})}let s4=(0,j.zo)(h.Zb)`
  max-width: ${({theme:e})=>e.sanity.container[1]}px;
`;function s5(e){let{value:t,onFocus:n,vertical:i,...a}=e,[r,o]=(0,d.useState)(!1),s=(0,d.useRef)(null),{t:c}=i1();(0,h.Of)(()=>o(!1),()=>[s.current]);let u=(0,d.useCallback)(e=>{("Escape"===e.key||"Tab"===e.key)&&o(!1)},[]),p=(0,d.useCallback)(()=>{o(e=>!e)},[]),m=(0,e6.wq)(t);return(0,l.jsx)(x.J2,{open:r,ref:s,onKeyDown:u,portal:!0,constrainSize:!0,tone:"default",content:(0,l.jsx)(s4,{margin:1,padding:3,onKeyDown:u,tabIndex:0,overflow:"auto",children:(0,l.jsxs)(h.Kq,{space:4,children:[(0,l.jsx)(h.xv,{weight:"medium",children:(0,l.jsx)(rm,{t:c,i18nKey:"inputs.array.error.type-is-incompatible-prompt",values:{typeName:m}})}),(0,l.jsx)(h.xv,{size:1,weight:"medium",children:c("inputs.array.error.type-is-incompatible-title")}),(0,l.jsx)(h.xv,{size:1,children:(0,l.jsx)(rm,{t:c,i18nKey:"inputs.array.error.current-schema-not-declare-description",values:{typeName:m}})}),(0,l.jsx)(h.xu,{children:(0,l.jsxs)(h.xv,{size:1,children:[(0,l.jsx)(_.sLo,{})," ",c("inputs.array.error.can-delete-but-no-edit-description")]})}),(0,l.jsxs)(h.Kq,{space:2,children:[(0,l.jsx)(h.xv,{size:1,weight:"medium",children:c("inputs.array.error.json-representation-description")}),(0,l.jsx)(h.Zb,{padding:2,overflow:"auto",border:!0,children:(0,l.jsx)(h.EK,{size:1,as:"pre",language:"json",children:JSON.stringify(t,null,2)})})]})]})}),children:(0,l.jsx)(h.Zb,{as:"button",type:"button",radius:2,tone:"inherit",paddingX:2,paddingY:3,flex:1,onFocus:n,onClick:p,onKeyDown:u,__unstable_focusRing:!0,...a,children:(0,l.jsxs)(h.kC,{align:"center",children:[(0,l.jsx)(h.xu,{marginRight:3,children:(0,l.jsx)(h.xv,{children:(0,l.jsx)(_.Tzq,{})})}),(0,l.jsx)(h.xu,{flex:1,children:(0,l.jsx)(h.xv,{size:1,textOverflow:"ellipsis",children:(0,l.jsx)(rm,{t:c,i18nKey:"inputs.array.error.type-is-incompatible-prompt",values:{typeName:m}})})})]})})})}function s8(e){let{member:t}=e,{t:n}=i1();return"INVALID_ITEM_TYPE"===t.error.type?(0,l.jsx)(s5,{value:t.error.value}):(0,l.jsx)("div",{children:n("inputs.array.error.unexpected-error",{error:t.error.type})})}function s6(e){switch(e.jsonType){case"string":return"";case"number":return -0;case"boolean":return!1;default:throw Error(`Unable to create value from type "${e.jsonType}"`)}}function s7(e,t,n){return(0,w.J1)(e)&&"string"==typeof n&&Number(n)===t?n:String(t??"")}function s9(e){let t=(0,d.useRef)(),{member:n,renderItem:i,renderInput:a}=e,[r,o]=(0,d.useState)(),{onPathBlur:s,onPathFocus:c,onChange:u}=sY(),p=k8(),{onCopy:m}=LF();sB(n.item.focused,(e,n)=>{!e&&n&&t.current?.focus()});let h=(0,d.useCallback)(e=>{s(n.item.path)},[n.item.path,s]),f=(0,d.useCallback)(e=>{c(n.item.path)},[n.item.path,c]),g=(0,d.useCallback)(e=>{u(sH.from(e).prefixAll(n.index))},[u,n.index]),x=(0,d.useCallback)(e=>{let t=e.currentTarget.value;if((0,w.J1)(n.item.schemaType)){if((t=e.currentTarget.valueAsNumber)>Number.MAX_SAFE_INTEGER||t<Number.MIN_SAFE_INTEGER)return}else(0,w.EG)(n.item.schemaType)&&(t=e.currentTarget.checked);let i=""===t||"number"==typeof t&&isNaN(t);(0,w.J1)(n.item.schemaType)&&o(i?void 0:e.currentTarget.value),g(sU(i?s6(n.item.schemaType):t))},[g,n.item.schemaType]),y=(0,d.useMemo)(()=>{var e,i;return{onBlur:h,onFocus:f,id:n.item.id,ref:t,onChange:x,value:(e=n.item.schemaType,Object.is(i=n.item.value,-0)?"":s7(e,i,r)),readOnly:!!n.item.readOnly,placeholder:n.item.schemaType.placeholder,"aria-describedby":sy(n.item.id,n.item.schemaType.description)}},[h,f,x,n.item.id,n.item.readOnly,n.item.schemaType,n.item.value,r]),b=(0,d.useMemo)(()=>({changed:n.item.changed,level:n.item.level,value:n.item.value,readOnly:n.item.readOnly,schemaType:n.item.schemaType,id:n.item.id,path:n.item.path,focused:n.item.focused,onChange:g,validation:n.item.validation,presence:n.item.presence,elementProps:y}),[n.item.changed,n.item.level,n.item.value,n.item.readOnly,n.item.schemaType,n.item.id,n.item.path,n.item.focused,n.item.validation,n.item.presence,g,y]),v=(0,d.useMemo)(()=>a(b),[b,a]),j=(0,d.useCallback)(()=>{u(sH.from([sZ([n.index])]))},[n.index,u]),C=(0,d.useCallback)(e=>{u(sH.from([sK(e.items,e.position,[n.index])]))},[n.index,u]),k=(0,d.useCallback)(e=>{let t=p([]);m(n.item.path,t,{context:{source:"arrayItem"},patchType:"append"})},[p,n.item.path,m]),T=(0,d.useMemo)(()=>({key:n.key,index:n.index,level:n.item.level,value:n.item.value,title:n.item.schemaType.title,description:n.item.schemaType.description,schemaType:n.item.schemaType,parentSchemaType:n.parentSchemaType,onInsert:C,onCopy:k,onRemove:j,presence:n.item.presence,validation:n.item.validation,readOnly:n.item.readOnly,focused:n.item.focused,onFocus:f,onBlur:h,inputId:n.item.id,path:n.item.path,children:v}),[n.key,n.index,n.item.level,n.item.value,n.item.schemaType,n.item.presence,n.item.validation,n.item.readOnly,n.item.focused,n.item.id,n.item.path,n.parentSchemaType,C,k,j,f,h,v]);return(0,l.jsx)(l.Fragment,{children:(0,d.useMemo)(()=>i(T),[T,i])})}function le(e){if(!(0,w.m$)(e))throw Error(`Invalid item type: "${e.type}". Default array input can only contain objects (for now)`);return{...sJ(e),_key:(0,e6.E2)(12)}}let lt="before",ln="after";function li(...e){return e.reduce((e,t)=>e.concat(t),[])}let la=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),lr={replace:(e,t)=>t,set:(e,t)=>t,setIfMissing:(e,t)=>void 0===e?t:e,unset(e,t){},inc:(e,t)=>e+t,dec:(e,t)=>e-t},lo=Object.keys(lr),ls={replace:(e,t)=>t,set:(e,t)=>t,setIfMissing:(e,t)=>void 0===e?t:e,unset(e,t){},diffMatchPatch(e,t){let[n]=(0,nr.QE)((0,nr.G8)(t),e,{allowExceedingIndices:!0});return n}},ll=Object.keys(ls);function lc(e,t){return t.reduce(function e(t,n){return Array.isArray(t)?function(t,n){let i=t.slice();if(0===n.path.length){if("setIfMissing"===n.type){if(!Array.isArray(n.value))throw Error("Cannot set value of an array to a non-array");return void 0===t?n.value:t}if("set"===n.type){if(!Array.isArray(n.value))throw Error("Cannot set value of an array to a non-array");return n.value}if("unset"===n.type)return;if("move"===n.type){if(!n.value||!la(n.value,"from")||!la(n.value,"to"))throw Error(`Invalid value of 'move' patch. Expected a value with "from" and "to" indexes, instead got: ${JSON.stringify(n.value)}`);return function(e,t,n){let i=e.slice(),a=i[t];return i.splice(t,1),i.splice(n,0,a),i}(i,n.value.from,n.value.to)}throw Error(`Invalid array operation: ${n.type}`)}let[a,...r]=n.path,o=function(e,t){if("number"==typeof t)return t;let n=is(e,t);return -1!==n&&n}(t,a);if(!1===o)return i;if(0===r.length){if("insert"===n.type){let{position:e,items:i}=n;return function(e,t,n,...i){if(t!==lt&&t!==ln)throw Error(`Invalid position "${t}", must be either ${lt} or ${ln}`);let a=li(...i);if(0===e.length)return a;let r=e.length,o=Math.abs((r+n)%r)%r,s=e.slice();return s.splice("after"===t?o+1:o,0,...li(a)),s}(t,e,o,i)}if("unset"===n.type){if("number"!=typeof o)throw Error(`Expected array index to be a number, instead got "${o}"`);return i.splice(o,1),i}}return i[o]=e(i[o],{...n,path:r}),i}(t,n):nX(t)?function(e,t){if(!ll.includes(t.type))throw Error(`Received patch of unsupported type: "${JSON.stringify(t.type)}" for string. This is most likely a bug.`);if(t.path.length>0)throw Error(`Cannot apply deep operations on string values. Received patch with type "${t.type}" and path "${t.path.join(".")} that targeted the value "${JSON.stringify(e)}"`);return ls[t.type](e,t.value)}(t,n):il(t)?function(t,n){let i=ic(t);if(0===n.path.length){if("set"===n.type){if(!il(n.value))throw Error("Cannot set value of an object to a non-object");return n.value}if("unset"===n.type)return;if("setIfMissing"===n.type)return void 0===t?n.value:t;throw Error(`Invalid object operation: ${n.type}`)}let[a,...r]=n.path;if("string"!=typeof a)throw Error(`Expected field name to be a string, instad got: ${a}`);return 0===r.length&&"unset"===n.type?t7(i,a):(i[a]=e(i[a],{...n,path:r}),i)}(t,n):function(e,t){if(!lo.includes(t.type))throw Error(`Received patch of unsupported type "${t.type}" for primitives. This is most likely a bug.`);if(t.path.length>0)throw Error(`Cannot apply deep operations on primitive values. Received patch with type "${t.type}" and path "${t.path.map(e=>JSON.stringify(e)).join(".")} that targeted the value "${JSON.stringify(e)}"`);return lr[t.type](e,t.value)}(t,n)},e)}function ld(e){let t=(0,d.useMemo)(()=>({actions:e.actions||iI}),[e.actions]);return(0,l.jsx)(p.LO.Provider,{value:t,children:e.children})}function lu(){let e=(0,d.useContext)(p.LO);if(!e)throw Error("useDocumentFieldActions must be used within a DocumentFieldActionsProvider");return e.actions}function lp(e,t){return t.name===e||!!(t.type&&lp(e,t.type))}function lm(e,t){if(!e||!t)return!0;let n=Array.isArray(t)?t:t.split(","),i=e.name||"",a=(e.type||"").toLowerCase(),r=a.replace(/\/.*$/,"");return n.some(e=>{let t=e.trim().toLowerCase();return"."===t.charAt(0)?!i||i.toLowerCase().endsWith(t):t.endsWith("/*")?r===t.replace(/\/.*$/,""):a===t})}function lh(e,t){let n=e.indexOf(t);return n>-1&&e.splice(n,1),e}let lf=function(e,t=4){let n=function(e=4){let t=[],n=[],i=new D.x;return function a(r){return new $.y(o=>{if(t.length>=e)return(n.push(r),i.asObservable().pipe((0,ey.P)(e=>e===r))).pipe((0,eu.z)(a)).subscribe(o);let s=r.subscribe(o);return t.push(s),()=>{lh(t,s),lh(n,r),s.unsubscribe(),function(){for(;n.length>0&&t.length<e;)i.next(n.shift())}()}})}}(t);return(...t)=>(0,O.D)(n(e(...t)))}(function(e,t,n,i={}){var a;let r=i.metadata,o=i.storeOriginalFilename,{label:s,title:l,description:c,creditLine:d,source:u}=i;return(a=n,window.crypto&&window.crypto.subtle&&window.FileReader?new $.y(e=>{let t=new FileReader;return t.onload=()=>{e.next(t.result),e.complete()},t.onerror=t=>{e.error(t)},t.readAsArrayBuffer(a),()=>{t.abort()}}).pipe((0,eu.z)(e=>crypto.subtle.digest("SHA-1",e)),(0,P.U)(lb)):(0,N.of)(null)).pipe((0,F.K)(()=>(0,N.of)(null)),(0,eu.z)(n=>{var i;return n?(i=`sanity.${t}Asset`,e.observable.fetch("*[_type == $documentType && sha1hash == $hash][0]",{documentType:i,hash:n},{tag:"asset.find-duplicate"})):(0,N.of)(null)}),(0,eu.z)(i=>i?(0,N.of)({type:"complete",id:i._id,asset:i}):e.observable.assets.upload(t,n,{tag:"asset.upload",extract:r,preserveFilename:o,label:s,title:l,description:c,creditLine:d,source:u}).pipe((0,P.U)(e=>"response"===e.type?{type:"complete",id:e.body.document._id,asset:e.body.document}:e))))},4),lg=(e,t,n)=>lf(e,"image",t,n),lx=(e,t,n)=>lf(e,"file",t,n);function ly(e,t){return e.observePaths({_type:"reference",_ref:t},["originalFilename","url","metadata","label","title","description","creditLine","source","size"]).pipe((0,ec.w)(e=>{if(null===e)throw Error(`No asset found in documentPreviewStore with id: ${t}`);return(0,N.of)(e)}),(0,eb.X)({count:5,delay:1e3}),(0,F.K)(e=>(console.error("Final error after retries, asset not found in documentPreviewStore:",e),(0,N.of)(null))))}function lb(e){return Array.prototype.map.call(new Uint8Array(e),e=>`00${e.toString(16)}`.slice(-2)).join("")}let lv="_upload";function lj(e=[]){return{type:"uploadProgress",patches:e}}let lC=lj([sZ([lv])]);function lw(e){let t=new Date().toISOString();return lj([sU({progress:2,createdAt:t,updatedAt:t,file:{name:e.name,type:e.type}},[lv])])}function lk(e,t,n){let i=lx(e,t,n).pipe((0,P.U)(e=>"complete"===e.type?lj([sU({_type:"reference",_ref:e.asset._id},["asset"]),sU(100,[lv,"progress"]),sU(new Date().toISOString(),[lv,"updated"])]):lj([sU(e.percent,[lv,"progress"]),sU(new Date().toISOString(),[lv,"updated"])])));return(0,I.z)((0,N.of)(lw(t)),i,(0,N.of)(lC))}function lT(e){return[5,6,7,8].indexOf(e)>-1}function lA(e,t,n){let i=e.getContext("2d");i?.translate(t?e.width:0,n?e.height:0),i?.scale(t?-1:1,n?-1:1)}let l_=[{op:"none",degrees:0},{op:"flip-x",degrees:0},{op:"none",degrees:180},{op:"flip-y",degrees:0},{op:"flip-x",degrees:90},{op:"none",degrees:90},{op:"flip-x",degrees:-90},{op:"none",degrees:-90}],lS=["top-left","top-right","bottom-right","bottom-left","left-top","right-top","right-bottom","left-bottom"],lE=/(invalid image format)|(No exif data)/i,lM=[{type:"image",accepts:"image/*",upload:(e,t,n,i)=>(function(e,t,n){let i=lg(e,t,n).pipe((0,eh.h)(e=>"download"!==e.stage),(0,P.U)(e=>({...e,progress:2+e.percent/100*98})),(0,P.U)(e=>"complete"===e.type?lj([sU({_type:"reference",_ref:e.asset._id},["asset"]),sU(100,[lv,"progress"]),sU(new Date().toISOString(),[lv,"updatedAt"])]):lj([sU(e.percent,[lv,"progress"]),sU(new Date().toISOString(),[lv,"updatedAt"])]))),a=(0,O.D)(new $.y(e=>{let n=new window.FileReader;return n.onerror=t=>e.error(t),n.onload=()=>{e.next(n.result),e.complete()},n.readAsArrayBuffer(t.slice(0,128e3)),()=>n.abort()})).pipe((0,P.U)(e=>ir(e)),(0,F.K)(e=>(lE.test(e.message)||console.warn(`Exif read failed, continuing anyway: ${e.message}`),(0,N.of)({})))).pipe((0,eu.z)(e=>{var n,i;return n=e.orientation||"top-left",(i=window.URL.createObjectURL(t),new $.y(e=>{let t=new window.Image;return t.onerror=()=>{e.error(Error(`Could not load image from url "${i}". Image may be of an unsupported format`))},t.onload=()=>{e.next(t),e.complete()},t.src=i,()=>{}})).pipe((0,eu.z)(e=>new $.y(t=>{let i=function(e,t){let n=l_[t-1],i=e.height/e.width;e.width=120/i,e.height=e.width*i;let a=document.createElement("canvas"),r=a.getContext("2d");if(lT(t)?(a.height=e.width,a.width=e.height):(a.width=e.width,a.height=e.height),"flip-x"===n.op&&lA(a,!0,!1),"flip-y"===n.op&&lA(a,!1,!0),n.degrees&&(function(e,t){let n=t.x,i=t.y,a=(t.degrees||0)*(Math.PI/180);e?.translate(n,i),e?.rotate(a),e?.translate(-n,-i)}(r,{degrees:n.degrees,x:a.width/2,y:a.height/2}),lT(t))){let e=a.width-a.height;r?.translate(e/2,-e/2)}return r?.drawImage(e,0,0,e.width,e.height),a}(e,lS.indexOf(n)+1);t.next(i.toDataURL("image/jpeg",.1)),t.complete()})))}),(0,F.K)(e=>(console.warn('Image preprocessing failed for "%s" with the error: %s',t.name,e.message),(0,N.of)(null))),(0,eh.h)(Boolean),(0,P.U)(e=>lj([sU(e,[lv,"previewImage"])])));return(0,I.z)((0,N.of)(lw(t)),(0,R.T)(i,a),(0,N.of)(lC))})(e,t,i)},{type:"string",accepts:"text/*",upload:(e,t,n,i)=>lk(e,t,i).pipe((0,P.U)(e=>({type:"uploadProgress",patches:[sU(e)]})))},{type:"file",accepts:"",upload:(e,t,n,i)=>lk(e,t,i)}].map((e,t)=>({...e,priority:t}));function lN(e,t){return lM.find(n=>lp(n.type,e)&&lm(t,n.accepts)&&lm(t,e.options?.accept||""))||null}function lI(e){let{onPathBlur:t,onPathFocus:n,onChange:i,onSetPathCollapsed:a,onSetFieldSetCollapsed:r,onPathOpen:o,onFieldGroupSelect:s}=sY(),{member:c,renderAnnotation:u,renderBlock:p,renderField:m,renderInlineBlock:f,renderInput:g,renderItem:x,renderPreview:y}=e,b=lu(),v=(0,d.useRef)(),j=(0,d.useRef)({});sB(c.field.focused,(e,t)=>{!e&&t&&v.current?.focus()});let C=(0,d.useCallback)(e=>{e.currentTarget===e.target&&e.currentTarget===v.current&&n(c.field.path)},[c.field.path,n]),w=(0,d.useCallback)(e=>{e.currentTarget===e.target&&e.currentTarget===v.current&&t(c.field.path)},[c.field.path,t]),k=(0,d.useRef)(c.field.value);(0,d.useEffect)(()=>{k.current=c.field.value},[c.field.value]);let T=(0,d.useCallback)(e=>{let t=sH.from(e).patches;if(t.some(e=>"unset"===e.type&&1===e.path.length)&&(k.current=lc(k.current||[],t),Array.isArray(k.current)&&!k.current.length)){i(sH.from(sZ([c.name])));return}i(sH.from(e).prepend(sV([])).prefixAll(c.name))},[i,c.name,k]),A=jS(),_=(0,h.pm)(),S=(0,d.useCallback)(()=>{a(c.field.path,!0)},[a,c.field.path]),E=(0,d.useCallback)(()=>{a(c.field.path,!1)},[a,c.field.path]),M=(0,d.useCallback)(e=>{a(c.field.path.concat({_key:e}),!0)},[a,c.field.path]),N=(0,d.useCallback)(e=>{a(c.field.path.concat({_key:e}),!1)},[a,c.field.path]),I=(0,d.useCallback)(e=>{o(e),a(e,!1)},[o,a]),z=(0,d.useCallback)(()=>{o(c.field.path),a(c.field.path,!0)},[o,c.field.path,a]),$=(0,d.useCallback)(e=>{if(0===e.items.length)throw Error("Insert event should include at least one item");let t=e.items.map(e=>s0(e));T(sH.from([sK(t,e.position,[e.referenceItem])]));let i=t[0]._key,a=[...c.field.path,{_key:i}];n(a);let r=!1!==e.open;e.skipInitialValue?r&&I(a):s2(t,c.field.schemaType,A).pipe((0,H.b)(e=>{"patch"===e.type?T(e.patches):_.push({title:"Could not resolve initial value",description:`Unable to resolve initial value for type: ${e.schemaType.title}: ${e.error.message}.`,status:"error"})})).subscribe({complete:()=>{r&&I(a)}})},[T,I,c.field.path,c.field.schemaType,n,A,_]),O=(0,d.useCallback)(e=>{let t=c.field.value,n=t?.[e.fromIndex],i=t?.[e.toIndex];if(e.fromIndex!==e.toIndex){if(!n?._key||!i?._key){console.error("Neither the item you are moving nor the item you are moving to have a key. Cannot continue.");return}T([sZ([{_key:n._key}]),sK([n],e.fromIndex>e.toIndex?"before":"after",[{_key:i._key}])])}},[T,c.field.value]),F=(0,d.useCallback)(e=>{T([sV([]),sK([s0(e)],"before",[0])])},[T]),D=(0,d.useCallback)(e=>{T([sV([]),sK([s0(e)],"after",[-1])])},[T]),R=(0,d.useCallback)(e=>{j.current[e]&&(j.current[e].unsubscribe(),delete j.current[e]),T([sZ([{_key:e}])])},[T]),L=(0,d.useCallback)((e,t)=>{n(c.field.path.concat(e),t)},[c.field.path,n]),B=(0,d.useMemo)(()=>({onBlur:w,onFocus:C,id:c.field.id,ref:v,"aria-describedby":sy(c.field.id,c.field.schemaType.description)}),[w,C,c.field.id,c.field.schemaType.description]),q=Bi(rz),V=or(),K=V.__internal.image.directUploads,U=V.__internal.file.directUploads,Z=(0,d.useCallback)((e,t)=>lp("image",e)&&!K||lp("file",e)&&!U?null:lN(e,t),[U,K]),G=(0,d.useCallback)(({file:e,schemaType:t,uploader:n})=>{let i=le(t),a=i._key;$({items:[i],position:"after",referenceItem:-1,open:!1});let r={metadata:e7(t,"options.metadata"),storeOriginalFilename:e7(t,"options.storeOriginalFilename")},o=n.upload(q,e,t,r).pipe((0,P.U)(e=>sH.from(e.patches||[]).prefixAll({_key:a})),(0,H.b)(e=>T(e.patches)));j.current={...j.current,[a]:o.subscribe()}},[q,T,$]),W=(0,d.useMemo)(()=>({level:c.field.level,members:c.field.members,value:c.field.value,readOnly:c.field.readOnly,schemaType:c.field.schemaType,changed:c.field.changed,id:c.field.id,onItemExpand:N,onItemCollapse:M,onItemClose:z,onItemOpen:I,focusPath:c.field.focusPath,focused:c.field.focused,path:c.field.path,onChange:T,onInsert:$,onItemMove:O,onItemRemove:R,onItemAppend:D,onItemPrepend:F,onPathFocus:L,resolveInitialValue:A,onUpload:G,resolveUploader:Z,validation:c.field.validation,presence:c.field.presence,renderAnnotation:u,renderBlock:p,renderInlineBlock:f,renderInput:g,renderField:m,renderItem:x,renderPreview:y,elementProps:B}),[c.field.level,c.field.members,c.field.value,c.field.readOnly,c.field.schemaType,c.field.changed,c.field.id,c.field.focusPath,c.field.focused,c.field.path,c.field.validation,c.field.presence,N,M,z,I,T,$,O,R,D,F,L,A,G,Z,u,p,f,g,m,x,y,B]),Y=(0,d.useMemo)(()=>g(W),[W,g]),J=(0,d.useMemo)(()=>({actions:b,name:c.name,index:c.index,level:c.field.level,value:c.field.value,title:c.field.schemaType.title,description:c.field.schemaType.description,collapsible:c.collapsible,collapsed:c.collapsed,changed:c.field.changed,onCollapse:S,onExpand:E,schemaType:c.field.schemaType,inputId:c.field.id,path:c.field.path,presence:c.field.presence,validation:c.field.validation,children:Y,inputProps:W}),[b,c.name,c.index,c.field.level,c.field.value,c.field.schemaType,c.field.changed,c.field.id,c.field.path,c.field.presence,c.field.validation,c.collapsible,c.collapsed,S,E,Y,W]);return(0,l.jsx)(sW,{onFieldGroupSelect:s,onChange:T,onSetFieldSetCollapsed:r,onSetPathCollapsed:a,onPathOpen:o,onPathBlur:t,onPathFocus:n,children:(0,d.useMemo)(()=>m(J),[J,m])})}function lz(e){let{onPathBlur:t,onPathFocus:n,onChange:i,onPathOpen:a,onSetPathCollapsed:r,onSetFieldSetCollapsed:o,onFieldGroupSelect:s}=sY(),{member:c,renderAnnotation:u,renderBlock:p,renderField:m,renderInlineBlock:h,renderInput:f,renderItem:g,renderPreview:x}=e,y=lu(),b=(0,d.useRef)(),v=(0,d.useRef)(),j=Bi(rz);sB(c.field.focused,(e,t)=>{!e&&t&&b.current?.focus()});let C=(0,d.useCallback)(e=>{e.currentTarget===e.target&&e.currentTarget===b.current&&n(c.field.path)},[c.field.path,n]),k=(0,d.useCallback)(e=>{e.currentTarget===e.target&&e.currentTarget===b.current&&t(c.field.path)},[c.field.path,t]),T=(0,d.useCallback)(e=>{let t=sH.from(e).patches;if(t.some(e=>"unset"===e.type&&1===e.path.length)){let e=lc(c.field.value||[],t);if(Array.isArray(e)&&!e.length){i(sH.from(sZ([c.name])));return}}i(sH.from(e).prepend(sV([])).prefixAll(c.name))},[i,c.name,c.field.value]),A=(0,d.useCallback)(e=>{r(c.field.path,e)},[r,c.field.path]),_=(0,d.useCallback)(()=>{r(c.field.path,!0)},[r,c.field.path]),S=(0,d.useCallback)(()=>{r(c.field.path,!1)},[r,c.field.path]),E=(0,d.useCallback)(e=>{T(0===e.length?sZ():sU(e))},[T]),M=(0,d.useCallback)(e=>{let{value:t=[]}=c.field;e.fromIndex!==e.toIndex&&E(function(e,t,n){let i=e.slice(),a=i[t];return i.splice(t,1),i.splice(n,0,a),i}(t,e.fromIndex,e.toIndex))},[c.field,E]),N=(0,d.useCallback)(e=>{let{value:t=[]}=c.field;E(t.concat(e))},[c.field,E]),I=(0,d.useCallback)(e=>{let{value:t=[]}=c.field;E([e].concat(t||[]))},[c.field,E]),z=(0,d.useCallback)(e=>{let{value:t=[]}=c.field;E(function(e,t,n){let i=t.slice();return i.splice(e+1,0,...n),i}(e.referenceIndex+("before"===e.position?-1:0),t,e.items))},[c.field,E]),O=(0,d.useCallback)(e=>{T(sZ([e]))},[T]),F=(0,d.useCallback)(e=>{n(c.field.path.concat([e]))},[c.field.path,n]),D=(0,d.useMemo)(()=>({onBlur:k,onFocus:C,id:c.field.id,ref:b,"aria-describedby":sy(c.field.id,c.field.schemaType.description)}),[k,C,c.field.id,c.field.schemaType.description]),R=(0,d.useMemo)(()=>{var e;return e=c.field.schemaType.of,{priority:0,accepts:"text/*",type:"string",upload:(t,n)=>{var i;return(i="utf-8",new $.y(e=>{let t=new FileReader;return t.onerror=t=>e.error(t),t.onload=()=>{e.next(t.result),e.complete()},t.readAsText(n,i),()=>{t.abort()}})).pipe((0,P.U)(t=>t?.split(/[\n\r]/).map(t=>{let n,i,a;return n=!1,i=!1,a=!1,e.forEach(e=>{(0,w.EG)(e)&&(n=!0),(0,w.aj)(e)&&(a=!0),(0,w.J1)(e)&&(i=!0)}),n&&("true"===t||"false"===t)?"true"===t:i&&/^\d+$/.test(t)?Number(t):a?t:void 0}).filter(e=>void 0!==e)),(0,eh.h)(e=>Array.isArray(e)),(0,P.U)(e=>({type:"uploadProgress",patches:[sK(e,"after",[-1])]})))}}},[c.field.schemaType.of]),L=(0,d.useCallback)((e,t)=>lm(t,"text/*")?R:null,[R]),B=(0,d.useCallback)(({file:e,schemaType:t,uploader:n})=>{let i=n.upload(j,e,t).pipe((0,P.U)(e=>sH.from(e.patches||[])),(0,H.b)(e=>T(e.patches)));v.current&&v.current.unsubscribe(),v.current=i.subscribe()},[j,T]),q=(0,d.useMemo)(()=>({level:c.field.level,members:c.field.members,value:c.field.value,readOnly:c.field.readOnly,onSetCollapsed:A,schemaType:c.field.schemaType,changed:c.field.changed,id:c.field.id,elementProps:D,path:c.field.path,focusPath:c.field.focusPath,focused:c.field.focused,onChange:T,onInsert:z,onMoveItem:M,onItemRemove:O,onItemAppend:N,onItemPrepend:I,validation:c.field.validation,presence:c.field.presence,resolveUploader:L,onUpload:B,renderAnnotation:u,renderBlock:p,renderInlineBlock:h,renderInput:f,renderItem:g,onIndexFocus:F,renderPreview:x}),[c.field.level,c.field.members,c.field.value,c.field.readOnly,c.field.schemaType,c.field.changed,c.field.id,c.field.path,c.field.focusPath,c.field.focused,c.field.validation,c.field.presence,A,D,T,z,M,O,N,I,L,B,u,p,h,f,g,F,x]),V=(0,d.useMemo)(()=>f(q),[q,f]),K=(0,d.useMemo)(()=>({actions:y,name:c.name,index:c.index,level:c.field.level,value:c.field.value,title:c.field.schemaType.title,description:c.field.schemaType.description,collapsible:c.collapsible,collapsed:c.collapsed,onExpand:S,changed:c.field.changed,onCollapse:_,schemaType:c.field.schemaType,inputId:c.field.id,path:c.field.path,presence:c.field.presence,validation:c.field.validation,children:V,inputProps:q}),[y,c.name,c.index,c.field.level,c.field.value,c.field.schemaType,c.field.changed,c.field.id,c.field.path,c.field.presence,c.field.validation,c.collapsible,c.collapsed,S,_,V,q]);return(0,l.jsx)(sW,{onFieldGroupSelect:s,onChange:T,onPathOpen:a,onSetFieldSetCollapsed:o,onSetPathCollapsed:r,onPathBlur:t,onPathFocus:n,children:(0,d.useMemo)(()=>m(K),[K,m])})}function l$(e){return(0,w.m$)(e.field.schemaType)}function lO(e){return(0,w.jB)(e.field.schemaType)&&e.field.schemaType.of.every(e=>(0,w.m$)(e))}let lP=function(e){let{onPathBlur:t,onPathFocus:n,onChange:i,onPathOpen:a,onSetPathCollapsed:r,onSetFieldSetCollapsed:o,onFieldGroupSelect:s}=sY(),{member:c,renderAnnotation:u,renderBlock:p,renderField:m,renderInlineBlock:h,renderInput:f,renderItem:g,renderPreview:x}=e,y=lu(),b=(0,d.useRef)(),v=(0,d.useRef)(c.field.value);(0,d.useEffect)(()=>{v.current=c.field.value},[c.field.value]),sB(c.field.focused,(e,t)=>{!e&&t&&b.current?.focus()});let j=(0,d.useCallback)(()=>{t(c.field.path)},[c.field.path,t]),C=(0,d.useCallback)(()=>{n(c.field.path)},[c.field.path,n]),w=(0,d.useCallback)(e=>{n(c.field.path.concat(e))},[c.field.path,n]),k=(0,d.useCallback)(e=>{if(0!==c.field.path.length){let t=sH.from(e).patches;if(v.current=lc(v.current||{},t),v.current&&(0,e6.Sm)(v.current)){i(sH.from(sZ([c.name])));return}}i(sH.from(e).prepend(sV(sJ(c.field.schemaType))).prefixAll(c.name))},[i,c,v]),T=(0,d.useCallback)(()=>{r(c.field.path,!0)},[r,c.field.path]),A=(0,d.useCallback)(()=>{r(c.field.path,!1)},[r,c.field.path]),_=(0,d.useCallback)(e=>{r(c.field.path.concat(e),!0)},[r,c.field.path]),S=(0,d.useCallback)(e=>{r(c.field.path.concat(e),!1)},[r,c.field.path]),E=(0,d.useCallback)(e=>{a(c.field.path.concat(e))},[a,c.field.path]),M=(0,d.useCallback)(()=>{a(c.field.path)},[a,c.field.path]),N=(0,d.useCallback)(e=>{o(c.field.path.concat(e),!1)},[o,c.field.path]),I=(0,d.useCallback)(e=>{o(c.field.path.concat(e),!0)},[o,c.field.path]),z=(0,d.useCallback)(()=>{a(c.field.path)},[a,c.field.path]),$=(0,d.useCallback)(()=>{a(c.field.path.slice(0,-1))},[a,c.field.path]),O=(0,d.useCallback)(e=>{s(c.field.path,e)},[s,c.field.path]),P=(0,d.useMemo)(()=>({onBlur:j,onFocus:C,id:c.field.id,ref:b,"aria-describedby":sy(c.field.id,c.field.schemaType.description)}),[j,C,c.field.id,c.field.schemaType.description]),F=(0,d.useMemo)(()=>({elementProps:P,level:c.field.level,members:c.field.members,value:c.field.value,readOnly:c.field.readOnly,validation:c.field.validation,presence:c.field.presence,schemaType:c.field.schemaType,changed:c.field.changed,id:c.field.id,onFieldGroupSelect:O,onFieldOpen:E,onFieldClose:M,onFieldCollapse:_,onFieldExpand:S,onFieldSetExpand:N,onFieldSetCollapse:I,onPathFocus:w,path:c.field.path,focusPath:c.field.focusPath,focused:c.field.focused,groups:c.field.groups,onChange:k,renderAnnotation:u,renderBlock:p,renderField:m,renderInlineBlock:h,renderInput:f,renderItem:g,renderPreview:x}),[P,c.field.level,c.field.members,c.field.value,c.field.readOnly,c.field.validation,c.field.presence,c.field.schemaType,c.field.changed,c.field.id,c.field.path,c.field.focusPath,c.field.focused,c.field.groups,O,E,M,_,S,N,I,w,k,u,p,m,h,f,g,x]),D=(0,d.useMemo)(()=>f(F),[F,f]),R=(0,d.useMemo)(()=>({actions:y,name:c.name,index:c.index,level:c.field.level,value:c.field.value,validation:c.field.validation,presence:c.field.presence,title:c.field.schemaType.title,description:c.field.schemaType.description,collapsible:c.collapsible,collapsed:c.collapsed,onCollapse:T,onExpand:A,open:c.open,changed:c.field.changed,onOpen:z,onClose:$,schemaType:c.field.schemaType,inputId:c.field.id,path:c.field.path,children:D,inputProps:F}),[y,c.name,c.index,c.field.level,c.field.value,c.field.validation,c.field.presence,c.field.schemaType,c.field.changed,c.field.id,c.field.path,c.collapsible,c.collapsed,c.open,T,A,z,$,D,F]);return(0,l.jsx)(sW,{onFieldGroupSelect:s,onChange:k,onSetFieldSetCollapsed:o,onPathOpen:a,onSetPathCollapsed:r,onPathBlur:t,onPathFocus:n,children:(0,d.useMemo)(()=>m(R),[R,m])})};function lF(e){let{member:t,renderInput:n,renderField:i}=e,a=lu(),r=(0,d.useRef)(),[o,s]=(0,d.useState)(),{onPathBlur:c,onPathFocus:u,onChange:p}=sY();(0,d.useEffect)(()=>{t.field.focused&&r.current?.focus()},[t.field.focused]);let m=(0,d.useCallback)(()=>{c(t.field.path)},[t.field.path,c]),h=(0,d.useCallback)(()=>{u(t.field.path)},[t.field.path,u]),f=(0,d.useCallback)(e=>{p(sH.from(e).prefixAll(t.name))},[p,t.name]),g=(0,d.useCallback)(e=>{let n=e.currentTarget.value;if((0,w.J1)(t.field.schemaType)){if((n=e.currentTarget.valueAsNumber)>Number.MAX_SAFE_INTEGER||n<Number.MIN_SAFE_INTEGER)return}else(0,w.EG)(t.field.schemaType)&&(n=e.currentTarget.checked);let i=""===n||"number"==typeof n&&isNaN(n);(0,w.J1)(t.field.schemaType)&&s(i?void 0:e.currentTarget.value),p(sH.from(i?sZ():sU(n)).prefixAll(t.name))},[t.name,t.field.schemaType,p]),x=(0,d.useMemo)(()=>t.field.validation.filter(e=>"error"===e.level).map(e=>e.message).join(`
`),[t.field.validation])||void 0,y=(0,d.useMemo)(()=>({onBlur:m,onFocus:h,id:t.field.id,ref:r,onChange:g,value:s7(t.field.schemaType,t.field.value,o),readOnly:!!t.field.readOnly,placeholder:t.field.schemaType.placeholder,"aria-describedby":sy(t.field.id,t.field.schemaType.description)}),[m,h,g,t.field.id,t.field.readOnly,t.field.schemaType,t.field.value,o]),b=(0,d.useMemo)(()=>({value:t.field.value,readOnly:t.field.readOnly,schemaType:t.field.schemaType,changed:t.field.changed,id:t.field.id,path:t.field.path,focused:t.field.focused,level:t.field.level,onChange:f,validation:t.field.validation,presence:t.field.presence,validationError:x,elementProps:y}),[t.field.value,t.field.readOnly,t.field.schemaType,t.field.changed,t.field.id,t.field.path,t.field.focused,t.field.level,t.field.validation,t.field.presence,f,x,y]),v=(0,d.useMemo)(()=>n(b),[b,n]),j=(0,d.useMemo)(()=>({actions:a,changed:t.field.changed,children:v,description:t.field.schemaType.description,index:t.index,inputId:t.field.id,inputProps:b,level:t.field.level,name:t.name,path:t.field.path,presence:t.field.presence,schemaType:t.field.schemaType,title:t.field.schemaType.title,validation:t.field.validation,value:t.field.value}),[a,t.field.level,t.field.value,t.field.schemaType,t.field.id,t.field.path,t.field.validation,t.field.presence,t.field.changed,t.name,t.index,v,b]);return(0,l.jsx)(l.Fragment,{children:i(j)})}let lD=(0,d.memo)(function(e){let{member:t,renderAnnotation:n,renderBlock:i,renderField:a,renderInlineBlock:r,renderInput:o,renderItem:s,renderPreview:c}=e;return l$(t)?(0,l.jsx)(lP,{member:t,renderAnnotation:n,renderBlock:i,renderField:a,renderInlineBlock:r,renderInput:o,renderItem:s,renderPreview:c}):(0,w.jB)(t.field.schemaType)&&t.field.schemaType.of.every(e=>(0,w.jp)(e))?(0,l.jsx)(lz,{member:t,renderAnnotation:n,renderBlock:i,renderField:a,renderInput:o,renderInlineBlock:r,renderItem:s,renderPreview:c}):lO(t)?(0,l.jsx)(lI,{member:t,renderAnnotation:n,renderBlock:i,renderField:a,renderInlineBlock:r,renderInput:o,renderItem:s,renderPreview:c}):(0,l.jsx)(lF,{member:t,renderField:a,renderInput:o})}),lR=!1,lL={warning:"caution",error:"critical"},lB=(0,j.zo)(h.xu)`
  border-top: 1px solid var(--card-border-color);
`;function lq(e){let{children:t,status:n="warning",suffix:i,title:a,...r}=e;return(0,l.jsxs)(h.Zb,{radius:2,tone:lL[n],...r,"data-ui":"Alert",children:[(0,l.jsxs)(h.kC,{padding:4,children:[(0,l.jsx)(h.xu,{children:(0,l.jsxs)(h.xv,{size:1,children:["warning"===n&&(0,l.jsx)(_.foC,{}),"error"===n&&(0,l.jsx)(_.uIy,{})]})}),(0,l.jsxs)(h.xu,{flex:1,marginLeft:3,children:[(0,l.jsx)(h.xv,{size:1,weight:"medium",children:a}),t&&(0,l.jsx)(h.xu,{marginTop:3,children:t})]})]}),i&&(0,l.jsx)(lB,{children:i})]})}let lV=j.zo.button`
  display: block;
  -webkit-font-smoothing: inherit;
  appearance: none;
  font: inherit;
  background: none;
  width: 100%;
  text-align: left;
  border: 0;
  margin: 0;
  padding: 0;
  outline: none;
`,lK=(0,j.zo)(_.tgp)`
  transform: ${e=>e.open?"rotate(90deg)":""};
`,lU=(0,j.zo)(h.kC)`
  cursor: default;
`,lZ=(0,j.zo)(h.xu)`
  & > div > svg {
    transform: rotate(0);
    transition: transform 100ms;
  }

  &[data-open] > div > svg {
    transform: rotate(90deg);
  }
`;function lG(e){let{children:t,open:n,icon:i,title:a="Details",...r}=e,[o,s]=(0,d.useState)(n||!1),c=(0,d.useCallback)(()=>s(e=>!e),[]);return(0,d.useEffect)(()=>s(n||!1),[n]),(0,l.jsxs)(h.xu,{...r,children:[(0,l.jsx)(lV,{type:"button",onClick:c,children:(0,l.jsx)(lU,{align:"center",children:(0,l.jsxs)(h.gF,{children:[(0,l.jsx)(lZ,{"data-open":o?"":void 0,children:(0,l.jsx)(h.xv,{size:1,children:(0,l.jsx)(lK,{open:o})})}),i&&(0,l.jsx)(h.xu,{marginLeft:1,children:i}),(0,l.jsx)(h.xu,{flex:1,marginLeft:1,children:(0,l.jsx)(h.xv,{size:1,weight:"medium",children:a})})]})})}),(0,l.jsx)(h.xu,{hidden:!o,marginTop:3,children:t})]})}let lH=["yes","true","1"],lW=["false","no","false","0","null"],lY=lH.concat(lW),lJ=()=>!0,lX={string:{number:{test:Number,convert:Number},boolean:{test:e=>lY.includes(e.toLowerCase()),convert:e=>lH.includes(e.toLowerCase())||!lW.includes(e.toLowerCase())},richDate:{test:e=>(0,tu.Z)(e),convert:e=>({_type:"richDate",local:(function(e){let t=new Date(e.getTime()+6e4*e.getTimezoneOffset()),n=e.getTimezoneOffset()/60,i=e.getHours();return t.setHours(i-n),t})(new Date(e)).toJSON(),utc:new Date(e).toJSON(),timezone:function(){try{return Intl.DateTimeFormat().resolvedOptions().timeZone}catch{}return null}(),offset:new Date().getTimezoneOffset()})}},date:{richDate:{test:(a="date",e=>(e&&e._type)===a),convert:e=>Object.assign({},e,{_type:"richDate"})}},richDate:{datetime:{test:e=>e&&e.utc,convert:e=>e.utc}},number:{string:{test:lJ,convert:String},boolean:{test:lJ,convert:Number}},boolean:{string:{test:lJ,convert:e=>e?"Yes":"No"},number:{test:lJ,convert:Number}}};function lQ({value:e,targetType:t,onChange:n}){let i=(0,d.useMemo)(()=>({...e,_type:t}),[t,e]),a=(0,d.useCallback)(()=>n(sH.from(sV(t,["_type"])),i),[i,n,t]),{t:r}=i1();return(0,l.jsx)(x.zx,{onClick:a,text:r("inputs.untyped-value.convert-button.text",{targetType:t})})}function l0({value:e,onChange:t,validTypes:n}){let i=(0,d.useMemo)(()=>({...e,_type:n[0]}),[n,e]),a=(0,d.useCallback)(()=>t(sH.from(sZ()),i),[i,t]),{t:r}=i1();return(0,l.jsx)(x.zx,{onClick:a,tone:"critical",text:r("inputs.untyped-value.unset-item-button.text")})}function l1({validTypes:e,value:t,onChange:n}){let i=NQ(),a=1===e.length,r=i.has(e[0]),{t:o}=i1();return(0,l.jsx)(lq,{status:"warning",title:(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(rm,{t:o,i18nKey:"inputs.untyped-value.title"})}),children:(0,l.jsx)(lG,{open:lR,title:o("inputs.untyped-value.details.title"),children:(0,l.jsxs)(h.Kq,{space:3,children:[(0,l.jsx)(h.xv,{as:"p",muted:!0,size:1,children:(0,l.jsx)(rm,{t:o,i18nKey:"inputs.untyped-value.description"})}),a&&!r&&(0,l.jsx)(h.xv,{as:"p",muted:!0,size:1,children:(0,l.jsx)(rm,{t:o,i18nKey:"inputs.untyped-value.details.description"})}),!a&&(0,l.jsx)(h.xv,{as:"p",muted:!0,size:1,children:o("inputs.untyped-value.details.multi-type-description")}),!a&&(0,l.jsx)(h.Kq,{as:"ul",space:2,children:e.map(e=>(0,l.jsx)(h.xv,{as:"li",muted:!0,size:1,children:(0,l.jsx)("code",{children:e})},e))}),(0,l.jsxs)(h.Kq,{space:2,children:[(0,l.jsx)(h.xv,{as:"h4",weight:"medium",size:1,children:o("inputs.untyped-value.details.json-dump-prefix")}),(0,l.jsx)(h.Zb,{border:!0,overflow:"auto",padding:2,radius:2,tone:"inherit",children:(0,l.jsx)(h.EK,{language:"json",children:JSON.stringify(t,null,2)})})]}),(0,l.jsxs)(h.rj,{columns:[1,2,2],gap:1,children:[a&&(0,l.jsx)(lQ,{onChange:n,targetType:e[0],value:t}),(0,l.jsx)(l0,{onChange:n,validTypes:e,value:t})]})]})})})}let l2=(0,d.forwardRef)((e,t)=>{let{value:n,actualType:i,validTypes:a,onChange:r}=e;(0,d.useImperativeHandle)(t,()=>({focus:()=>{}}));let o=(0,d.useCallback)(()=>{r(sH.from(sZ()))},[r]),s=(0,d.useCallback)(e=>{r(sH.from(sU(e)))},[r]),c=(0,d.useMemo)(()=>i in lX?Object.keys(lX[i]).filter(e=>a.includes(e)).map(e=>({from:i,to:e,...lX[i][e]})).filter(e=>e.test(n)):[],[n,i,a]),{t:u}=i1();if(tn(n)&&!("_type"in n))return(0,l.jsx)(l1,{value:n,validTypes:a,onChange:r});let p=(0,l.jsx)(h.Kq,{padding:2,children:(0,l.jsx)(x.zx,{onClick:o,tone:"critical",text:u("inputs.invalid-value.reset-button.text")})});return(0,l.jsxs)(lq,{status:"error",suffix:p,title:u("inputs.invalid-value.title"),children:[(0,l.jsx)(h.xv,{as:"p",muted:!0,size:1,children:u("inputs.invalid-value.description")}),(0,l.jsx)(lG,{marginTop:4,open:lR,title:u("inputs.invalid-value.details.title"),children:(0,l.jsxs)(h.Kq,{space:3,children:[1===a.length&&(0,l.jsx)(h.xv,{as:"p",muted:!0,size:1,children:(0,l.jsx)(rm,{t:u,i18nKey:"inputs.invalid-value.details.description",values:{validType:a[0]}})}),1===a.length&&(0,l.jsx)(h.xv,{as:"p",muted:!0,size:1,children:u("inputs.invalid-value.details.possible-reason")}),1!==a.length&&(0,l.jsx)(h.xv,{as:"p",muted:!0,size:1,children:u("inputs.invalid-value.details.multi-type-description")}),1!==a.length&&(0,l.jsx)(h.Kq,{as:"ul",space:2,children:a.map(e=>(0,l.jsx)(h.xv,{as:"li",children:(0,l.jsx)("code",{children:e})},e))}),(0,l.jsxs)(h.Kq,{marginTop:2,space:2,children:[(0,l.jsx)(h.xv,{size:1,weight:"medium",children:(0,l.jsx)(rm,{t:u,i18nKey:"inputs.invalid-value.current-type",values:{actualType:i}})}),(0,l.jsx)(h.Zb,{border:!0,padding:2,radius:2,tone:"inherit",children:(0,l.jsx)(h.EK,{language:"json",size:1,children:JSON.stringify(n,null,2)})})]}),c.length>0&&(0,l.jsx)(h.Kq,{space:1,children:c.map(e=>(0,l.jsx)(l3,{converter:e,onConvert:s,value:n},`${e.from}-${e.to}`))})]})})]})});function l3({converter:e,onConvert:t,value:n}){let i=(0,d.useCallback)(()=>t(e.convert(n)),[e,t,n]),{t:a}=i1();return(0,l.jsx)(x.zx,{onClick:i,text:a("inputs.invalid-value.convert-button.text",{targetType:e.to})})}function l4(e){let{error:t,onChange:n}=e,i=(0,d.useCallback)(()=>{n(sH.from((t.duplicates||[]).map(([e,t])=>sU(`${t}_deduped_${e}`,[e,"_key"]))))},[t.duplicates,n]),{t:a}=i1();return(0,l.jsx)(sM,{title:t.schemaType.title,description:t.schemaType.description,children:(0,l.jsxs)(lq,{status:"warning",suffix:(0,l.jsx)(h.Kq,{padding:2,children:(0,l.jsx)(x.zx,{onClick:i,text:a("form.error.duplicate-keys-alert.generate-button.text"),tone:"caution"})}),title:a("form.error.duplicate-keys-alert.title"),children:[(0,l.jsx)(h.xv,{as:"p",muted:!0,size:1,children:a("form.error.duplicate-keys-alert.summary")}),(0,l.jsx)(lG,{marginTop:4,open:lR,title:a("form.error.duplicate-keys-alert.details.title"),children:(0,l.jsxs)(h.Kq,{space:3,children:[(0,l.jsx)(h.xv,{as:"p",muted:!0,size:1,children:(0,l.jsx)(rm,{t:a,i18nKey:"form.error.duplicate-keys-alert.details.description"})}),(0,l.jsx)(h.xv,{as:"p",muted:!0,size:1,children:(0,l.jsx)(rm,{t:a,i18nKey:"form.error.duplicate-keys-alert.details.additional-description"})})]})})]})})}function l5(e){let{error:t,onChange:n}=e,i=(0,d.useCallback)(()=>{n(sH.from((t.value||[]).map((e,t)=>sV((0,e6.E2)(),[t,"_key"]))))},[t.value,n]),{t:a}=i1();return(0,l.jsx)(sM,{title:t.schemaType.title,description:t.schemaType.description,children:(0,l.jsxs)(lq,{status:"warning",suffix:(0,l.jsx)(h.Kq,{padding:2,children:(0,l.jsx)(x.zx,{onClick:i,text:a("form.error.missing-keys-alert.add-button.text"),tone:"caution"})}),title:a("form.error.missing-keys-alert.title"),children:[(0,l.jsx)(h.xv,{as:"p",muted:!0,size:1,children:a("form.error.missing-keys-alert.summary")}),(0,l.jsx)(lG,{marginTop:4,open:lR,title:a("form.error.missing-keys-alert.details.title"),children:(0,l.jsxs)(h.Kq,{space:3,children:[(0,l.jsx)(h.xv,{as:"p",muted:!0,size:1,children:(0,l.jsx)(rm,{t:a,i18nKey:"form.error.missing-keys-alert.details.description"})}),(0,l.jsx)(h.xv,{as:"p",muted:!0,size:1,children:(0,l.jsx)(rm,{t:a,i18nKey:"form.error.missing-keys-alert.details.additional-description"})})]})})]})})}function l8(e){let{error:t,onChange:n}=e,{t:i}=i1();return(0,l.jsx)(sM,{title:t.schemaType.title,description:t.schemaType.description,children:(0,l.jsxs)(lq,{status:"error",suffix:(0,l.jsx)(h.Kq,{padding:2,children:(0,l.jsx)(x.zx,{onClick:()=>{let e=(t.value||[]).flatMap((e,t)=>tn(e)?[]:[t]).reverse().map(e=>sZ([e]));n(sH.from(e))},text:i("form.error.mixed-array-alert.remove-button.text"),tone:"critical"})}),title:i("form.error.mixed-array-alert.title"),children:[(0,l.jsx)(h.xv,{as:"p",muted:!0,size:1,children:i("form.error.mixed-array-alert.summary")}),(0,l.jsx)(lG,{marginTop:4,open:lR,title:i("form.error.mixed-array-alert.details.title"),children:(0,l.jsx)(h.Kq,{space:3,children:(0,l.jsx)(h.xv,{as:"p",muted:!0,size:1,children:i("form.error.mixed-array-alert.details.description")})})})]})})}function l6(e){let{member:t}=e,{onChange:n}=sY(),i=(0,d.useCallback)(e=>{n(sH.from(e).prefixAll(t.fieldName))},[n,t.fieldName]),{t:a}=i1();return"INCOMPATIBLE_TYPE"===t.error.type?(0,l.jsx)(l2,{value:t.error.value,onChange:i,actualType:t.error.resolvedValueType,validTypes:[t.error.expectedSchemaType.name]}):"MISSING_KEYS"===t.error.type?(0,l.jsx)(l5,{error:t.error,onChange:i}):"DUPLICATE_KEYS"===t.error.type?(0,l.jsx)(l4,{error:t.error,onChange:i}):"MIXED_ARRAY"===t.error.type?(0,l.jsx)(l8,{onChange:i,error:t.error}):(0,l.jsx)(h.xu,{children:a("member-field-error.unexpected-error",{error:e.member.error.type})})}l2.displayName="ForwardRef(InvalidValueInput)";let l7=(0,d.memo)(function(e){let{member:t,renderAnnotation:n,renderBlock:i,renderField:a,renderInlineBlock:r,renderInput:o,renderItem:s,renderPreview:c}=e,{onSetFieldSetCollapsed:u}=sY(),p=(0,d.useCallback)(()=>{u(t.fieldSet.path,!0)},[t.fieldSet.path,u]),m=(0,d.useCallback)(()=>{u(t.fieldSet.path,!1)},[t.fieldSet.path,u]);return(0,l.jsx)(sD,{title:t.fieldSet.title||ti(t.fieldSet.name),description:t.fieldSet.description,level:t.fieldSet.level,collapsible:t.fieldSet.collapsible,collapsed:t.fieldSet.collapsed,onCollapse:p,onExpand:m,columns:t?.fieldSet?.columns,"data-testid":`fieldset-${t.fieldSet.name}`,inputId:t.fieldSet.name,children:t.fieldSet.members.map(e=>"error"===e.kind?(0,l.jsx)(l6,{member:e},t.key):(0,l.jsx)(lD,{member:e,renderAnnotation:n,renderBlock:i,renderField:a,renderInlineBlock:r,renderInput:o,renderItem:s,renderPreview:c},e.key))})}),l9=(0,d.memo)(function(e){let{member:t,renderAnnotation:n,renderBlock:i,renderInput:a,renderInlineBlock:r,renderField:o,renderItem:s,renderPreview:c}=e;return"field"===t.kind?(0,l.jsx)(lD,{member:t,renderAnnotation:n,renderBlock:i,renderInlineBlock:r,renderInput:a,renderField:o,renderItem:s,renderPreview:c},t.key):"error"===t.kind?(0,l.jsx)(l6,{member:t},t.key):"fieldSet"===t.kind?(0,l.jsx)(l7,{member:t,renderAnnotation:n,renderBlock:i,renderInlineBlock:r,renderInput:a,renderField:o,renderItem:s,renderPreview:c},t.key):(console.warn(Error(`Unhandled member kind ${t.kind}`)),null)});function ce(e){let{members:t,renderAnnotation:n,renderBlock:i,renderInput:a,renderInlineBlock:r,renderField:o,renderItem:s,renderPreview:c}=e,u=(0,d.useMemo)(()=>t.map(e=>(0,l.jsx)(l9,{member:e,renderAnnotation:n,renderBlock:i,renderField:o,renderInlineBlock:r,renderInput:a,renderItem:s,renderPreview:c},e.key)),[t,n,i,o,r,a,s,c]);return(0,l.jsx)(l.Fragment,{children:u})}function ct(e){return(0,w.m$)(e.schemaType)}function cn(e){return(0,w.jB)(e.schemaType)}let ci=({children:e})=>e,ca=(0,d.memo)(function(e){let t=(0,d.useMemo)(()=>"absolutePath"in e?e.absolutePath:e.path.concat(e.relativePath),[e]),n=(0,d.useCallback)(()=>(0,l.jsx)(l.Fragment,{children:"Missing destination render function"}),[]);return(0,l.jsx)(cr,{...e,absolutePath:t,destinationRenderAnnotation:e.renderAnnotation||n,destinationRenderBlock:e.renderBlock||n,destinationRenderField:e.renderField,destinationRenderInlineBlock:e.renderInlineBlock||n,destinationRenderInput:e.renderInput,destinationRenderItem:e.renderItem,destinationRenderPreview:e.renderPreview})}),cr=(0,d.memo)(function e(t){let{absolutePath:n,destinationRenderAnnotation:i,destinationRenderBlock:a,destinationRenderField:r,destinationRenderInlineBlock:o,destinationRenderInput:s,destinationRenderItem:u,destinationRenderPreview:p}=t,{t:m}=i1(),h=(0,d.useCallback)(e=>((0,c.Xy)(n,e.path)?t.includeField:(0,c.Ny)(n,e.path))?r(e):ci(e),[n,r,t.includeField]),f=(0,d.useCallback)(e=>((0,c.Xy)(n,e.path)?t.includeItem:(0,c.Ny)(n,e.path))?u(e):ci(e),[n,u,t.includeItem]),g=(0,d.useCallback)(d=>{if((0,c.Xy)(d.path,n)||(0,c.Ny)(n,d.path))return s(d);if(!ct(d)&&!cn(d))throw Error(`Expected either object input props or array input props for: ${JSON.stringify(d.path)}`);return(0,l.jsx)(e,{...d,includeField:t.includeField,includeItem:t.includeItem,absolutePath:n,destinationRenderAnnotation:i,destinationRenderBlock:a,destinationRenderInput:s,destinationRenderItem:u,destinationRenderField:r,destinationRenderInlineBlock:o,destinationRenderPreview:p})},[n,i,a,r,o,s,u,p,t.includeField,t.includeItem]),x=(0,d.useCallback)(e=>(0,c.Ny)(n,e.path)&&(t.includeItem||!(0,c.Xy)(n,e.path))?a(e):ci(e),[n,a,t.includeItem]),y=(0,d.useCallback)(e=>(0,c.Ny)(n,e.path)&&(t.includeItem||!(0,c.Xy)(n,e.path))?o(e):ci(e),[n,o,t.includeItem]),b=(0,d.useCallback)(e=>(0,c.Ny)(n,e.path)&&(t.includeItem||!(0,c.Xy)(n,e.path))?i(e):ci(e),[n,i,t.includeItem]);if(cn(t)){let e=(0,c.fi)(t.path,n),i=t.members.find(t=>"item"==t.kind&&(0,w.Fd)(e[0])&&t.key===e[0]._key);if(!i){let e=rg(t.path),i=(0,c.fi)(t.path,n);if((0,w.Fd)(i[0])){let t=i[0]._key;return(0,l.jsx)("div",{children:(0,l.jsx)(rm,{t:m,i18nKey:"form.error.no-array-item-at-key",values:{key:t,path:e}})})}let a=(0,w.dw)(i[0])?i[0]:i[0][0];return(0,l.jsx)("div",{children:(0,l.jsx)(rm,{t:m,i18nKey:"form.error.no-array-item-at-index",values:{index:a,path:e}})})}return"error"===i.kind?(0,l.jsx)(s8,{member:i}):(0,l.jsx)(s3,{member:i,renderAnnotation:b,renderBlock:x,renderInput:g,renderField:h,renderInlineBlock:y,renderItem:f,renderPreview:p})}if(ct(t)){let e=(0,c.fi)(t.path,n),i=t.members.find(t=>"field"==t.kind&&e[0]===t.name),a=t.members.filter(e=>"fieldSet"===e.kind).flatMap(e=>"fieldSet"===e.kind&&e.fieldSet?.members||[]).find(t=>"field"===t.kind&&t.name===e[0]),r=i||a;if(!r){let t="string"==typeof e[0]?e[0]:JSON.stringify(e[0]);return(0,l.jsx)("div",{children:m("form.error.field-not-found",{fieldName:t})})}return(0,l.jsx)(lD,{member:r,renderAnnotation:b,renderBlock:x,renderInput:g,renderInlineBlock:y,renderField:h,renderItem:f,renderPreview:p})}throw Error("FormInput can only be used with arrays or objects")});function co(e){let t=(0,d.useContext)(p.bt);if(!t)throw Error("Form context not provided");return t.find(t=>t.key===e)}let cs=j.zo.span(e=>{let{$toneKey:t="default",theme:n}=e;return(0,j.iv)`
      text-decoration: none;
      display: inline;
      background-color: ${n.sanity.color.selectable?.[t].enabled.bg};
      border-bottom: 1px dashed ${n.sanity.color.selectable?.[t].enabled.fg};
      color: ${n.sanity.color.selectable?.[t].enabled.fg};

      &[data-link] {
        border-bottom: 1px solid ${n.sanity.color.selectable?.[t].enabled.fg};
      }

      &[data-custom-markers] {
        background-color: ${n.sanity.color.dark?M.VG.purple[950].hex:M.VG.purple[50].hex};
      }

      &[data-warning] {
        background-color: ${n.sanity.color.muted.caution.hovered.bg};
      }

      &[data-error] {
        background-color: ${n.sanity.color.muted.critical.hovered.bg};
      }
    `}),cl=(0,j.zo)(h.xu).attrs({forwardedAs:"span"})`
  max-width: 250px;
`,cc=["top","bottom"];function cd(e){let{annotationOpen:t,floatingBoundary:n,onOpen:i,onRemove:a,referenceBoundary:r,referenceElement:o,selected:s,title:c}=e,[u,p]=(0,d.useState)(!1),[m,f]=(0,d.useState)(!1),[g,y]=(0,d.useState)(null),b=(0,d.useRef)(null),{sanity:v}=(0,h.Fg)(),{t:j}=i1(),C=(0,d.useRef)(null),w=v.color.dark?"light":"dark",k=(0,d.useCallback)(e=>{p(e),e?(0,d.startTransition)(()=>{f(e)}):f(e)},[]),T=(0,d.useMemo)(()=>g?{getBoundingClientRect:()=>g}:null,[g]);(0,h.qh)((0,d.useCallback)(e=>{m&&"Escape"===e.key&&k(!1)},[k,m]));let A=(0,d.useCallback)(()=>{if(t){k(!1),y(null);return}let e=window.getSelection();if(!e||0===e.rangeCount)return;let n=e.getRangeAt(0);if(!o?.contains(n.commonAncestorContainer)){k(!1),y(null);return}let i=n?.getBoundingClientRect();i&&(y(i),k(!0))},[t,o,k]);(0,d.useEffect)(()=>(document.addEventListener("selectionchange",A,{passive:!0}),()=>{document.removeEventListener("selectionchange",A)}),[A]);let S=(0,d.useCallback)(()=>{k(!1),i()},[i,k]);(0,d.useEffect)(()=>{!t&&s&&g&&k(!0),t&&k(!1)},[t,s,g,k]);let E=(0,d.useCallback)(()=>{k(!1),a()},[a,k]),M=(0,d.useCallback)(()=>{b.current&&y(b.current.getBoundingClientRect())},[]);return(0,d.useEffect)(()=>{let e=window.getSelection();e&&e.rangeCount>0&&(b.current=e.getRangeAt(0))},[m]),(0,d.useEffect)(()=>m&&r?(r.addEventListener("scroll",M),()=>r.removeEventListener("scroll",M)):m?(r?.addEventListener("scroll",M),()=>{r?.removeEventListener("scroll",M)}):void 0,[m,r,M]),u?(0,l.jsx)(x.J2,{open:m,floatingBoundary:n,constrainSize:!0,content:(0,l.jsx)(h.xu,{padding:1,"data-testid":"annotation-toolbar-popover",children:(0,l.jsxs)(h.kC,{gap:1,children:[(0,l.jsx)(h.xu,{padding:2,children:(0,l.jsx)(h.xv,{weight:"medium",size:1,children:c})}),(0,l.jsx)(x.zx,{"aria-label":j("inputs.portable-text.action.edit-annotation-aria-label"),"data-testid":"edit-annotation-button",icon:_.dY8,mode:"bleed",onClick:S,tabIndex:0,tooltipProps:null}),(0,l.jsx)(x.zx,{"aria-label":j("inputs.portable-text.action.remove-annotation-aria-label"),"data-testid":"remove-annotation-button",icon:_.XHJ,mode:"bleed",onClick:E,tabIndex:0,tone:"critical",tooltipProps:null})]})}),fallbackPlacements:cc,placement:"top",portal:!0,preventOverflow:!0,ref:C,referenceBoundary:r,referenceElement:T,scheme:w}):null}let cu=e=>Array.isArray(e)?e.flatMap(cu):"number"==typeof e?[e]:"auto"===e?["auto"]:[],cp=e=>"dialog"===e||"popover"===e?e:void 0;function cm(e){let{scrollElement:t,containerElement:n}=e,i=(0,d.useMemo)(()=>({scrollElement:t,containerElement:n}),[n,t]);return(0,l.jsx)(p.f0.Provider,{value:i,children:e.children})}function ch(e){let{onClose:t,children:n,title:i,width:a=1,autoFocus:r}=e,o=(0,d.useId)(),[s,c]=(0,d.useState)(null),u=(0,d.useRef)(null);return(0,l.jsx)(x.Vq,{header:i,id:o,onClickOutside:t,onClose:t,portal:"default",width:a,contentRef:c,"data-testid":"default-edit-object-dialog",__unstable_autoFocus:r,children:(0,l.jsx)(su,{margins:[0,0,1,0],children:(0,l.jsx)(cm,{scrollElement:s,containerElement:u,children:(0,l.jsx)(h.xu,{ref:u,children:n})})})})}let cf=(0,j.zo)(x.J2)`
  & > div {
    overflow: hidden;
    overflow: clip;
  }
`,cg=(0,j.zo)(h.xu)`
  /* Prevent overflow caused by change indicator */
  overflow-x: hidden;
  overflow-y: auto;
`,cx=(0,j.zo)(h.xu)`
  box-shadow: 0 1px 0 var(--card-shadow-outline-color);
  position: relative;
  z-index: 10;
  min-height: auto;
`,cy=["top","bottom"];function cb(e){let{floatingBoundary:t,referenceBoundary:n,referenceElement:i,width:a=1}=e,[r,o]=(0,d.useState)(!1);return(0,d.useEffect)(()=>{o(!0)},[]),(0,l.jsx)(cf,{content:(0,l.jsx)(cv,{...e}),constrainSize:!0,"data-testid":"popover-edit-dialog","data-ui":"PopoverEditDialog",fallbackPlacements:cy,floatingBoundary:t,open:r,overflow:"auto",placement:"bottom",portal:"default",preventOverflow:!0,referenceBoundary:n,referenceElement:i,width:a})}function cv(e){let{onClose:t,referenceBoundary:n,referenceElement:i,title:a,autoFocus:r}=e;(0,h.qh)((0,d.useCallback)(e=>{"Escape"===e.key&&t()},[t])),(0,h.Of)(t,()=>[i],()=>n);let[o,s]=(0,d.useState)(null),c=(0,d.useRef)(null);return(0,l.jsx)(cm,{scrollElement:o,containerElement:c,children:(0,l.jsxs)(h.kC,{ref:c,direction:"column",height:"fill",children:[(0,l.jsx)(cx,{flex:"none",padding:1,children:(0,l.jsxs)(h.kC,{align:"center",children:[(0,l.jsx)(h.xu,{flex:1,padding:2,children:(0,l.jsx)(h.xv,{weight:"medium",children:a})}),(0,l.jsx)(x.zx,{autoFocus:!!r,icon:_.Two,mode:"bleed",onClick:t,tooltipProps:{content:"Close"}})]})}),(0,l.jsx)(cg,{flex:1,children:(0,l.jsx)(su,{margins:[0,0,1,0],children:(0,l.jsx)(h.xu,{padding:3,ref:s,children:e.children})})})]})})}function cj(e){let{autoFocus:t,defaultType:n,floatingBoundary:i,onClose:a,referenceBoundary:r,referenceElement:o,schemaType:s}=e,{t:c}=i1(),u=(0,d.useMemo)(()=>(function(e){let t=e.options?.modal;return"object"==typeof t&&null!==t?{type:cp(t.type),width:cu(t.width)}:void 0})(s),[s]),p=u?.type||n,m=s.i18nTitleKey?c(s.i18nTitleKey):s.title||s.name,h=c("inputs.portable-text.annotation-editor.title",{schemaType:m}),f=(0,d.useCallback)(()=>{a()},[a]),g=u?.width;return"popover"===p?(0,l.jsx)(cb,{autoFocus:t,floatingBoundary:i,onClose:f,referenceBoundary:r,referenceElement:o,title:(0,l.jsx)(l.Fragment,{children:h}),width:g,children:e.children}):(0,l.jsx)(ch,{onClose:f,title:h,width:g,autoFocus:t,children:e.children})}function cC(e){let{children:t,editorNodeFocused:n,floatingBoundary:i,focused:a,onItemClose:r,onItemOpen:o,onPathFocus:s,path:u,readOnly:p,referenceBoundary:m,renderAnnotation:h,renderBlock:f,renderCustomMarkers:g,renderField:y,renderInlineBlock:b,renderInput:v,renderItem:j,renderPreview:C,schemaType:w,selected:k,value:T}=e,{Markers:A=ol}=or().__internal.components,_=(0,t2._F)(),S=(0,d.useMemo)(()=>u.slice(0,u.length-2).concat(["markDefs",{_key:T._key}]),[u,T._key]),[E,M]=(0,d.useState)(null),N=co(rg(S)),{validation:I}=op(N?.node),z=om(u),$=(0,d.useMemo)(()=>(0,l.jsx)("span",{"data-annotation":"",children:t}),[t]),O=(0,d.useCallback)(()=>{N&&(t2.q$.blur(_),o(N.node.path))},[_,N,o]),P=(0,d.useCallback)(()=>{r(),oe(T)&&t2.q$.removeAnnotation(_,w),t2.q$.focus(_)},[_,r,w,T]),F=(0,d.useCallback)(()=>{t2.q$.removeAnnotation(_,w),t2.q$.focus(_)},[_,w]),D=(0,d.useMemo)(()=>I.length>0||z.length>0?(0,l.jsx)(x.u,{placement:"bottom",portal:"default",content:(0,l.jsx)(cl,{children:(0,l.jsx)(A,{markers:z,renderCustomMarkers:g,validation:I})}),children:$}):void 0,[A,z,g,$,I]),R=oa(u,!0),L=(0,d.useMemo)(()=>R.filter(e=>(0,c.Xy)(e.path,u)),[u,R]),B=!!N?.member.open,q=N?.input,V=N?.node.path||iI,K=(0,d.useMemo)(()=>({__unstable_floatingBoundary:i,__unstable_referenceBoundary:m,__unstable_referenceElement:E,__unstable_textElementFocus:n,children:q,focused:a,markers:z,onClose:P,onOpen:O,onPathFocus:s,onRemove:F,open:B,parentSchemaType:_.schemaTypes.block,path:V,presence:L,readOnly:!!p,renderAnnotation:h,renderBlock:f,renderField:y,renderInlineBlock:b,renderInput:v,renderPreview:C,renderItem:j,renderDefault:cw,schemaType:w,selected:k,textElement:D||$,validation:I,value:T}),[_.schemaTypes.block,n,i,a,q,B,z,D,V,P,O,s,F,p,m,E,h,f,y,b,v,j,C,L,w,k,$,I,T]),U=w.components?.annotation,Z=(0,d.useCallback)(e=>{N?.elementRef&&(N.elementRef.current=e),M(e)},[N]);return(0,d.useMemo)(()=>(0,l.jsx)("span",{ref:Z,style:void 0,children:U?(0,l.jsx)(U,{...K}):(0,l.jsx)(cw,{...K})}),[U,K,Z])}let cw=e=>{let{__unstable_floatingBoundary:t,__unstable_referenceBoundary:n,__unstable_referenceElement:i,children:a,focused:r,markers:o,onClose:s,onOpen:c,onRemove:u,open:p,readOnly:m,selected:h,schemaType:f,textElement:g,validation:x}=e,y="link"===f.name,b=x.some(e=>"error"===e.level),v=x.some(e=>"warning"===e.level),j=o.length>0,{t:C}=i1(),w=(0,d.useMemo)(()=>b?"critical":v?"caution":y?"primary":"default",[y,b,v]);return(0,l.jsxs)(cs,{$toneKey:w,"aria-label":C("inputs.portable-text.annotation-aria-label"),"data-link":y?"":void 0,"data-error":b?"":void 0,"data-warning":v?"":void 0,"data-markers":j||void 0,onClick:m?c:void 0,children:[g,(0,l.jsx)(cd,{annotationOpen:p,floatingBoundary:t,onOpen:c,onRemove:u,referenceBoundary:n,referenceElement:i,selected:h,title:f.i18nTitleKey?C(f.i18nTitleKey):f.title||f.name}),p&&(0,l.jsx)(cj,{defaultType:"popover",floatingBoundary:t,onClose:s,autoFocus:r,referenceBoundary:n,referenceElement:i,schemaType:f,children:a})]})};function ck(){return(0,d.useContext)(p.kp)}function cT(e){let{children:t,activePath:n,EditReferenceLinkComponent:i,onEditReference:a,initialValueTemplateItems:r}=e,o=(0,d.useMemo)(()=>({activePath:n,EditReferenceLinkComponent:i,onEditReference:a,initialValueTemplateItems:r}),[n,i,a,r]);return(0,l.jsx)(p.kp.Provider,{value:o,children:t})}function cA(e){let t=(0,d.useMemo)(()=>({id:e.id}),[e.id]);return(0,l.jsx)(p.fW.Provider,{value:t,children:e.children})}function c_(){return iS(function(){let e=(0,d.useContext)(p.fW);if(!e)throw Error("useDocumentId must be used within a DocumentIdProvider");return e.id}())}function cS(e,t){return sB(t,(0,d.useCallback)((t,n)=>{e.current&&!t&&n&&(0,tc.Z)(e.current,{scrollMode:"always"})},[e]))}let cE=(0,j.zo)(h.xv)`
  &[data-status='edited'] {
    --card-icon-color: var(--card-badge-caution-dot-color);
  }
  &[data-status='unpublished'] {
    --card-icon-color: var(--card-badge-default-dot-color);
    opacity: 0.5 !important;
  }
`;function cM({draft:e,published:t}){let n=!!e,i=!!t,a=(0,d.useMemo)(()=>n&&!i?"unpublished":"edited",[n,i]);return(n||i)&&(n||!i)?(0,l.jsx)(cE,{"data-status":a,size:1,children:(0,l.jsx)(_.ZNd,{})}):null}function cN(e){let{id:t,layout:n,preview:i,refType:a,renderPreview:r,showTypeLabel:o}=e,s=CP(t),c=i.draft?._id||i.published?._id||t,u=(0,d.useMemo)(()=>({_id:c,_type:a.name}),[c,a.name]),{draft:p,published:m}=i;return r((0,d.useMemo)(()=>({children:(0,l.jsx)(h.xu,{paddingLeft:3,children:(0,l.jsxs)(h.gF,{space:3,children:[o&&(0,l.jsx)(h.Ct,{mode:"outline",children:a.title}),s&&s.length>0&&(0,l.jsx)(oI,{presence:s}),(0,l.jsx)(cM,{draft:i.draft,published:i.published})]})}),layout:n,schemaType:a,tooltip:(0,l.jsx)(BE,{draft:p,published:m}),value:u}),[s,p,n,i.draft,i.published,u,m,a,o]))}function cI(e){let{layout:t="default",referenceInfo:n,renderPreview:i,type:a,value:r,showTypeLabel:o}=e,{t:s}=i1();if(n.isLoading||n.error)return(0,l.jsx)(bU,{isPlaceholder:!0,layout:t});if(n.result?.availability.reason==="NOT_FOUND"&&r._strengthenOnPublish){let e=a.to.find(e=>e.name===r?._strengthenOnPublish?.type);if(!e)return(0,l.jsx)(c$,{documentId:r._ref,actualType:r._strengthenOnPublish?.type,declaredTypes:a.to.map(e=>e.name)});let n=r._strengthenOnPublish?.type?{_id:r._ref,_type:r._strengthenOnPublish?.type}:r;return(0,l.jsxs)(h.kC,{align:"center",children:[(0,l.jsx)(h.xu,{flex:1,children:i({layout:t,schemaType:e,value:n,skipVisibilityCheck:!0})}),(0,l.jsx)(h.xu,{children:(0,l.jsx)(h.gF,{space:4,children:o&&(0,l.jsx)(h.Ct,{mode:"outline",children:e.title})})})]})}let c=n.result.availability,d="NOT_FOUND"===c.reason,u="PERMISSION_DENIED"===c.reason;if(u||d)return(0,l.jsxs)(h.gF,{space:2,children:[(0,l.jsx)(h.xu,{padding:1,children:(0,l.jsx)(h.kC,{align:"center",children:(0,l.jsx)(h.xu,{flex:1,paddingY:2,children:(0,l.jsx)(h.xv,{muted:!0,children:s("inputs.reference.error.document-unavailable-title")})})})}),u||d?(0,l.jsx)(h.xu,{children:(0,l.jsx)(x.u,{portal:!0,content:d?(0,l.jsx)(cz,{title:s("inputs.reference.error.nonexistent-document-title"),icon:_.BHU,children:(0,l.jsx)(rm,{i18nKey:"inputs.reference.error.nonexistent-document-description",t:s,values:{documentId:r._ref}})}):(0,l.jsx)(cz,{title:s("inputs.reference.error.missing-read-permissions-title"),icon:_.vaB,children:s("inputs.reference.error.missing-read-permissions-description")}),children:(0,l.jsx)(F0,{tone:"default",children:(0,l.jsx)(_.BHU,{})})})}):null]});let p=n.result?.type,m=a.to.find(e=>e.name===p);return m?(0,l.jsx)(cN,{id:r._ref,layout:t,preview:n.result?.preview,refType:m,renderPreview:i,showTypeLabel:o}):(0,l.jsx)(c$,{documentId:r._ref,actualType:p||"<unknown>",declaredTypes:a.to.map(e=>e.name)})}function cz(e){let t=e.icon;return(0,l.jsxs)(h.kC,{children:[(0,l.jsx)(h.xv,{size:1,children:(0,l.jsx)(t,{})}),(0,l.jsxs)(h.xu,{flex:1,marginLeft:3,children:[(0,l.jsx)(h.xv,{size:1,weight:"medium",children:e.title}),(0,l.jsx)(h.xu,{marginTop:3,children:(0,l.jsx)(h.xv,{as:"p",muted:!0,size:1,children:e.children})})]})]})}function c$({declaredTypes:e,documentId:t,actualType:n}){let{t:i}=i1();return(0,l.jsxs)(h.kC,{align:"center",justify:"flex-start",children:[(0,l.jsx)(h.xu,{padding:1,children:(0,l.jsx)(h.kC,{align:"center",children:(0,l.jsx)(h.xu,{flex:1,paddingY:2,children:(0,l.jsx)(h.xv,{muted:!0,children:i("inputs.reference.error.invalid-type-title")})})})}),(0,l.jsx)(h.xu,{children:(0,l.jsx)(x.u,{portal:!0,content:(0,l.jsx)(h.Kq,{space:3,children:(0,l.jsx)(h.xv,{size:1,children:(0,l.jsx)(rm,{t:i,i18nKey:"inputs.reference.error.invalid-type-description",values:{documentId:t,actualType:n},components:{AllowedTypes:()=>(0,l.jsx)(cO,{values:e})}})})}),children:(0,l.jsx)(h.xu,{padding:2,children:(0,l.jsx)(F0,{tone:"default",children:(0,l.jsx)(_.BHU,{})})})})})]})}function cO(e){let t=ri({type:"disjunction"}).formatToParts(e.values);return(0,l.jsx)(d.Fragment,{children:t.map(e=>"element"===e.type?(0,l.jsx)("code",{children:e.value},e.value):e.value)})}let cP={warning:"caution",error:"critical",info:"positive"},cF={warning:(0,l.jsx)(_.foC,{}),error:(0,l.jsx)(_.uIy,{}),info:(0,l.jsx)(_.hQ6,{})};function cD(e){let{children:t,status:n="warning",title:i,...a}=e;return(0,l.jsx)(h.Zb,{radius:2,tone:cP[n],...a,"data-ui":"Alert",children:(0,l.jsx)(h.kC,{padding:1,children:t&&(0,l.jsx)(h.xu,{flex:1,children:(0,l.jsx)(lG,{icon:cF[n],title:i,children:(0,l.jsx)(h.xu,{marginLeft:3,marginTop:3,children:t})})})})})}function cR({schemaType:e,handleRemoveStrengthenOnPublish:t}){let{t:n}=i1();return(0,l.jsx)(cD,{padding:1,title:n(e.weak?"inputs.reference.incomplete-reference.finalize-action-title":"inputs.reference.incomplete-reference.strengthen-action-title"),status:"info","data-testid":"alert-reference-published",children:(0,l.jsxs)(h.Kq,{space:3,children:[(0,l.jsx)(h.xv,{as:"p",muted:!0,size:1,children:(0,l.jsx)(rm,{t:n,i18nKey:e.weak?"inputs.reference.incomplete-reference.finalize-action-description":"inputs.reference.incomplete-reference.strengthen-action-description"})}),(0,l.jsx)(x.zx,{mode:"ghost",onClick:t,size:"large",text:n("inputs.reference.incomplete-reference.strengthen-button-label"),tone:"positive"})]})})}let cL=(0,j.zo)(h.Zb)`
  /* this is a hack to avoid layout jumps while previews are loading
     there's probably better ways of solving this */
  min-height: 33px;
  position: relative;

  /* TextWithTone uses its own logic to set color, and we therefore need */
  /* to override this logic in order to set the correct color in different states */
  &[data-selected],
  &[data-pressed],
  &:active {
    [data-ui='TextWithTone'] {
      color: inherit;
    }
  }
`,cB=(0,d.forwardRef)(function(e,t){let{as:n,documentId:i,documentType:a,...r}=e;return(0,l.jsx)(cL,{...r,...i&&a&&{"data-as":"a",forwardedAs:n,documentId:i,documentType:a},"data-ui":"ReferenceLinkCard",ref:t})});function cq({errorMessage:e,onHandleRetry:t}){let{t:n}=i1();return(0,l.jsx)(cD,{padding:1,title:n("inputs.reference.metadata-error.title"),status:"warning","data-testid":"alert-reference-info-failed",children:(0,l.jsxs)(h.Kq,{space:3,children:[(0,l.jsx)(h.xv,{as:"p",muted:!0,size:1,children:e}),(0,l.jsx)(x.zx,{mode:"ghost",onClick:t,size:"large",text:n("inputs.reference.metadata-error.retry-button-label"),tone:"primary"})]})})}function cV({actualStrength:e,handleFixStrengthMismatch:t}){let n="weak"===e?"strong":"weak",{t:i}=i1();return(0,l.jsx)(cD,{padding:1,title:i("inputs.reference.strength-mismatch.title"),status:"warning","data-testid":"alert-reference-strength-mismatch",children:(0,l.jsxs)(h.Kq,{space:3,children:[(0,l.jsx)(h.xv,{as:"p",muted:!0,size:1,children:(0,l.jsx)(rm,{t:i,i18nKey:"weak"===e?"inputs.reference.strength-mismatch.is-weak-description":"inputs.reference.strength-mismatch.is-strong-description"})}),(0,l.jsx)(h.xv,{as:"p",muted:!0,size:1,children:i("weak"===n?"inputs.reference.strength-mismatch.is-strong-consquences":"inputs.reference.strength-mismatch.is-weak-consquences")}),(0,l.jsx)(x.zx,{mode:"ghost",onClick:t,size:"large",text:i("weak"===n?"inputs.reference.strength-mismatch.weaken-button-label":"inputs.reference.strength-mismatch.strengthen-button-label"),tone:"caution"})]})})}let cK=()=>{},cU={isLoading:!0,result:void 0,error:void 0,retry:cK},cZ={isLoading:!1,result:void 0,error:void 0,retry:cK};function cG(e,t){let n=(0,d.useMemo)(()=>new D.x,[]),i=(0,d.useMemo)(()=>n.asObservable(),[n]),a=(0,d.useCallback)(()=>{n.next({type:"retry"})},[n]),r=(0,d.useMemo)(()=>(0,I.z)((0,N.of)(null),i).pipe((0,P.U)(()=>e),(0,ev.b)(e=>e?t(e).pipe((0,P.U)(e=>({isLoading:!1,result:e,error:void 0,retry:a})),(0,ef.O)(cU),(0,F.K)(e=>(console.error(e),(0,N.of)({isLoading:!1,result:void 0,error:e,retry:a})))):(0,N.of)(cZ))),[t,e,i,a]);return(0,eR.m)(r,cU)}function cH(e){let t=(0,d.useMemo)(()=>({value:e.value}),[e.value]);return(0,l.jsx)(p.vn.Provider,{value:t,children:e.children})}function cW(e){let t=(0,c.s6)(e),n=(0,d.useContext)(p.vn);if(!n)throw Error("useFormValue must be used within a FormValueProvider");return rx(n?.value,t)}let cY=new WeakMap,cJ={title:10,subtitle:5,description:1.5},cX={_id:{weight:1,type:"string"},_type:{weight:1,type:"string"}},cQ=["reference","crossDatasetReference"],c0=e=>e?[e,...c0(e.type)]:[],c1=e=>e?.jsonType==="array"&&e.of.some(e=>c0(e).some(({name:e})=>"block"===e)),c2=e=>!!e&&e?.jsonType==="string",c3=e=>iO(e)&&"search"in e&&iO(e.search);function c4(e){return"u">typeof e&&"name"in e}function c5(e,t,n){return c4(e)?(function e(i,a,r){if(!i||r>t)return[];let o=c0(i);if(c2(i)||c1(i)){let e=n(i,a);return"number"!=typeof e?[]:[{path:a,weight:e,type:c1(i)?"pt":"string"}]}let s=[];for(let t of o.filter(e=>"object"===e.jsonType&&!!e.fields?.length&&!cQ.includes(e.name)))for(let n of t.fields){let t=(0,c.BB)([a,n.name].filter(Boolean));s.push(...e(n.type,t,r+1))}for(let t of o.filter(e=>"array"===e.jsonType&&!!e.of?.length))for(let n of t.of){let t=`${a}[]`;s.push(...e(n,t,r+1))}return s})(e,"",0).reduce((e,{path:t,weight:n,type:i})=>(e[t]={weight:n,type:i,path:t},e),{}):{}}let c8=e=>{let t=c0(e).map(e=>e.options).find(c3);return"number"==typeof t?.search?.weight?t.search.weight:null},c6=e=>c0(e).some(e=>e.hidden)?0:null,c7=e=>"number"==typeof(c8(e)??c6(e))?null:1,c9=(e,t,n)=>{let i=e?.preview?.select;if(!i)return null;let a=Object.fromEntries(Object.entries(i).map(([e,t])=>[t.replace(/\.\d+/g,"[]"),e])),r=Object.fromEntries(Object.entries(c5(e,t,c7)).map(([e,{type:t}])=>({path:e,type:t})).filter(({path:e})=>a[e]).map(({path:e,type:t})=>[e,{type:t,weight:cJ[a[e]]}]));return n?Object.fromEntries(Object.entries(a).map(([e,t])=>[e,{path:e,type:"string",weight:cJ[t]}])):c5(e,t,(e,t)=>{let n=r[t];return n?n.weight:null})};function de({schemaType:e,maxDepth:t,isCrossDataset:n,processPaths:i=e=>e}){let a=cY.get(e);if(a)return a;let r=c5(e,t,c8),o=c5(e,t,c6),s=c5(e,t,c7),l=c9(e,t,n),c={...cX,...s,...o,...l,...r},d={typeName:c4(e)?e.name:e.type,paths:i(Object.entries(c).map(([e,{type:t,weight:n}])=>({path:e,weight:n,..."pt"===t&&{mapWith:"pt::text"}})))};return cY.set(e,d),d}let dt=e=>!!(e.type&&"document"===e.type.name),dn=e=>"object"===e.jsonType,di=e=>e.name.startsWith("sanity.")&&"sanity.previewUrlSecret"!==e.name,da=(e,t=[])=>e.getTypeNames().map(t=>e.get(t)).filter(iw).filter(e=>dt(e)&&!di(e)||t.includes(e.name)).filter(dn),dr=/(?:[^\s"]+|"[^"]*")+/g;function ds(e){return e.filter(e=>1!==e.weight)}let dl=(e,t,n)=>function(i,a={}){let r="string"==typeof i?{query:i,types:e}:{...i,types:i.types.length?i.types:e},o=["_type in $__types",!1===a.includeDrafts&&"!(_id in path('drafts.**'))",!!n.filter&&`(${n.filter})`,!!r.filter&&`(${r.filter})`].filter(e=>!!e),s={query:{string:function(e,{queryType:t="prefixLast"}){return"prefixLast"===t?function(e){let t=(e.match(dr)??[]).map(e=>e.trim()),n=t.findLastIndex(e=>!("u">typeof e&&"-"===e.trim().at(0))),i=t[n];if(0===t.length)return"*";if("u">typeof i&&"*"===i.trim().at(-1)||typeof i>"u")return t.join(" ");let a=[...t];return a.splice(n,1,`${i}*`),a.join(" ")}(e):e}(r.query,a)},filter:o.join(" && "),params:{__types:r.types.map(e=>"name"in e?e.name:e.type),...n.params,...r.params},types:r.types.map(e=>de({schemaType:e,maxDepth:a.maxDepth||eX.XV,processPaths:ds})).filter(({paths:e})=>e.length).reduce((e,t)=>({...e,[t.typeName]:t.paths.reduce((e,{path:t,weight:n})=>({...e,weights:{...e.weights,[t]:n}}),{})}),{}),...a.sort?{order:function(e=[]){return e.map(({field:e,direction:t})=>({attribute:e,direction:t}),{})}(a.sort)}:{},includeAttributes:["_id","_type"],fromCursor:a.cursor,limit:a.limit??1e3};return t.observable.request({uri:`/data/textsearch/${t.config().dataset}`,method:"POST",json:!0,body:s,tag:n.tag}).pipe((0,P.U)(e=>{let t=e.hits.map(e=>e.attributes);return n.unique&&(t=iM(t)),{type:"text",hits:t.map(e=>({hit:e})),nextCursor:e.nextCursor}}))},dc=(e,t)=>{let{phrases:n,words:i}=function(e){let[t,n]=nx(e5(e.map(e2)),e=>/^".*"$/.test(e));return{phrases:e5(t).map(e2).map(du),words:e5(n.map(e2))}}(e),[a,r]=function(e,t){let n=t.toLowerCase().trim(),i=0,a=0;return e.forEach(e=>{n.includes(e)&&(i+=e.length/n.length,a+=e.length)}),1===i?[1,"[Phrase] Exact match"]:[i/2,`[Phrase] Matched ${a} of ${n.length} characters`]}(n,t),[o,s]=function(e,t){let n=e5(e0(e8(e2(t)))),i=e9(e,n),a=e4(n,e),r=i.length/a.length;return 1===r?[1,"[Word] Exact match"]:[r/2,`[Word] Matched ${i.length} of ${a.length} terms: [${i.join(", ")}]`]}(i,t);return[a+o,[s,r].join(", ")]},dd=e=>"string"==typeof e?e:JSON.stringify(e);function du(e){return e.replace(/^"(.*)"$/,"$1")}let dp=e1([eG,e4,e0]),dm=({mapWith:e,path:t})=>e?`${e}(${t})`:t,dh=/([^!@#$%^&*(),\\/?";:{}|[\]+<>\s-])+/g,df=/(^[.]+)|([.]+$)/,dg=e=>e.reduce((e,t,n)=>(e[`t${n}`]=`${t}*`,e),{}),dx=(e,t,n)=>function(i,a={}){let{query:r,params:o,options:s,searchSpec:l,terms:c}=function(e,t={}){let{filter:n,params:i,tag:a}=t,r=e.types.map(e=>de({schemaType:e,maxDepth:t.maxDepth||eX.XV,isCrossDataset:t.isCrossDataset})).filter(({paths:e})=>e.length),o=function(e){let t=[],n=e.replace(/("[^"]*")/g,e=>e8(e).length>1?(t.push(e),""):e);return[...t.map(e=>e3(e2(e))),...e5(e0((e2(n).match(dh)||[]).map(e=>e.replace(df,""))))]}(e.query),s=["_type in $__types",!1===t.includeDrafts&&"!(_id in path('drafts.**'))",...function(e,t){let n=dp(t.map(e=>(e.paths||[]).map(e=>dm(e))));return e.map((e,t)=>n.map(e=>`${e} match $t${t}`)).filter(e=>e.length>0).map(e=>`(${e.join(" || ")})`)}(o,r),n?`(${n})`:"",e.filter?`(${e.filter})`:""].filter(Boolean),l=r.map(e=>{let t=`_type == "${e.typeName}" => `,n=`{ ${e.paths.map((e,t)=>`"w${t}": ${dm(e)}`)} }`;return`${t}${n}`}),c=(t?.sort||[{field:"_id",direction:"asc"}]).map(e=>[e.mapWith?`${e.mapWith}(${e.field})`:e.field,(e.direction||"").toLowerCase()].map(e=>e.trim()).filter(Boolean).join(" ")).join(","),d=["_type","_id"],u=l.length>0?`...select(${l.join(`,
`)})`:"",p=d.join(", ")+(u?`, ${u}`:""),m=`*[${s.join(" && ")}]| order(${c})[0...$__limit]{${p}}`;if(t?.__unstable_extendedProjection){let e=t?.__unstable_extendedProjection,n=d.concat(e).join(", ");m=`*[${s.join(" && ")}]{${n}}|order(${c})[0...$__limit]{${p}}`}let h=["findability-mvi:4"].concat(t?.comments||[]).map(e=>`// ${e}`).join(`
`),f=h?`${h}
${m}`:m,g=t?.limit??1e3;return{query:f,params:{...dg(o),__types:r.map(e=>e.typeName),__limit:g,...i||{}},options:{tag:a},searchSpec:r,terms:o}}("string"==typeof i?{query:i,types:e}:i.types.length?i:{...i,types:e},{...n,...a});return t.observable.fetch(r,o,s).pipe(n.unique?(0,P.U)(iM):(0,H.b)(),(0,P.U)(e=>(function(e,t,n=[]){let i=nY(e,e=>e.typeName);return t.map((e,a)=>{let r=(i[e._type].paths||[])?.map((t,i)=>{let a=dd(e[`w${i}`]);if(!a)return{path:t.path,score:0,why:"No match"};let[r,o]=dc(n,a);return{path:t.path,score:r*t.weight,why:`${o} (*${t.weight})`}}),o=r.reduce((e,t)=>e+t.score,0);return{hit:e,resultIndex:t.length-a,score:o,stories:r}})})(l,e,c)),a?.skipSortByScore?(0,H.b)():(0,P.U)(e=>C(e,e=>-e.score)),(0,P.U)(e=>({type:"weighted",hits:e})))},dy=(e,t,n)=>(n.enableLegacySearch?dx:dl)(e,t,n),db={available:!0,reason:"READABLE"},dv={available:!1,reason:"PERMISSION_DENIED"},dj={available:!1,reason:"NOT_FOUND"};function dC(e,t,n){let{publishedId:i,draftId:a}=iA(t);return e.unstable_observeDocumentPairAvailability(t).pipe((0,ec.w)(r=>{if(!r.draft.available&&!r.published.available){let e="PERMISSION_DENIED"===r.draft.reason||"PERMISSION_DENIED"===r.published.reason?dv:dj;return(0,N.of)({id:t,type:void 0,availability:e,preview:{draft:void 0,published:void 0}})}let o={_type:"reference",_ref:a},s={_type:"reference",_ref:i};return(0,U.a)([e.observeDocumentTypeFromId(a),e.observeDocumentTypeFromId(i)]).pipe((0,P.U)(([e,t])=>e||t)).pipe((0,ec.w)(l=>{if(!l)return(0,N.of)({id:t,type:void 0,availability:{available:!0,reason:"READABLE"},preview:{draft:void 0,published:void 0}});let c=n.to.find(e=>e.name===l);if(!c)return(0,N.of)({id:t,type:l,availability:{available:!0,reason:"READABLE"},preview:{draft:void 0,published:void 0}});let d=b2(c?.preview)||[],u=e.observePaths(o,d).pipe((0,P.U)(e=>e?{_id:a,...vi(e,c)}:void 0),(0,ef.O)(void 0)),p=e.observePaths(s,d).pipe((0,P.U)(e=>e?{_id:i,...vi(e,c)}:void 0),(0,ef.O)(void 0));return(0,U.a)([u,p]).pipe((0,P.U)(([e,t])=>({draft:e,published:t}))).pipe((0,P.U)(e=>({type:l,id:i,availability:r.draft.available||r.published.available?db:"PERMISSION_DENIED"===r.draft.reason||"PERMISSION_DENIED"===r.published.reason?dv:dj,preview:{draft:iO(e.draft)?e.draft:void 0,published:iO(e.published)?e.published:void 0}})))}))}))}function dw(e){let{path:t,schemaType:n}=e,i=NQ(),a=CI(),{EditReferenceLinkComponent:r,onEditReference:o,activePath:s,initialValueTemplateItems:u}=ck(),p=cW([]),m=function(e){let t=(0,d.useRef)(e);return t.current=e,t}(p).current?._type,h=(0,d.useMemo)(()=>i.get(m)?.liveEdit,[m,i]),f=n.options?.disableNew===!0,g=e.value?._strengthenOnPublish?.template,x=(0,d.useMemo)(()=>(0,d.forwardRef)(function(e,n){return r?(0,l.jsx)(r,{...e,ref:n,parentRefPath:t,template:g}):null}),[r,t,g]),y=(0,d.useCallback)(e=>{o?.({parentRefPath:t,id:e.id,type:e.type,template:e.template})},[o,t]);return{selectedState:c.Ny(t,s?.path||[])?s?.state:"none",isCurrentDocumentLiveEdit:h,handleEditReference:y,EditReferenceLink:x,createOptions:(0,d.useMemo)(()=>f?[]:(u||[]).filter(e=>n.to.some(t=>t.name===e.template?.schemaType)).map(e=>e.template?.schemaType?{id:e.id,title:e.title||`${e.template.schemaType} from template ${e.template.id}`,type:e.template.schemaType,icon:e.icon,template:{id:e.template.id,params:e.parameters},permission:{granted:e.granted,reason:e.reason}}:void 0).filter(iw),[f,u,n.to]),getReferenceInfo:(0,d.useCallback)(e=>dC(a,e,n),[a,n])}}let dk={portal:!0,tone:"default"};function dT(e){let t=(0,d.useRef)(null),{schemaType:n,path:i,open:a,inputId:r,children:o,inputProps:s}=e,{readOnly:c,focused:u,renderPreview:p,onChange:m}=e.inputProps,[f,g]=(0,d.useState)([]),y=c_(),b=(0,d.useCallback)(()=>s.onChange(sZ()),[s]),v=e.value,{EditReferenceLink:j,getReferenceInfo:C,selectedState:w,isCurrentDocumentLiveEdit:k}=dw({path:i,schemaType:n,value:v});cS(t,a),sB(u,(e,n)=>{!e&&n&&t.current&&t.current.focus()});let T=e.validation.some(e=>"error"===e.level),A=e.validation.some(e=>"warning"===e.level),S=cG(v?._ref,C),E=S.result?.type||v?._strengthenOnPublish?.type,M=E?n.to.find(e=>e.name===E):void 0,N="pressed"===w,I="selected"===w,z=v?._ref,$=z&&S.result?.preview?.published?._id,O=(0,d.useCallback)(()=>{m([!0===n.weak?sU(!0,["_weak"]):sZ(["_weak"]),sZ(["_strengthenOnPublish"])])},[m,n.weak]),P=(0,d.useCallback)(()=>{m(!0===n.weak?sU(!0,["_weak"]):sZ(["_weak"]))},[m,n]),F=(0,d.useCallback)(()=>{s.onPathFocus(["_ref"])},[s]),D=v?._weak?"weak":"strong",R=!0===n.weak?"weak":"strong",L=z&&!S.isLoading&&v?._strengthenOnPublish,B=!S.isLoading&&S.result?.availability.available&&z&&D!==R&&!L,q=function({readOnly:e,hasErrors:t,hasWarnings:n}){return e?"transparent":t?"critical":n?"caution":"default"}({readOnly:c,hasErrors:T,hasWarnings:A}),V=!v?._ref||"_ref"===s.focusPath[0],{t:K}=i1(),U=(0,l.jsxs)(l.Fragment,{children:[k&&$&&v._strengthenOnPublish&&(0,l.jsx)(cR,{schemaType:n,handleRemoveStrengthenOnPublish:O}),B&&(0,l.jsx)(cV,{actualStrength:D,handleFixStrengthMismatch:P}),S.error&&(0,l.jsx)(cq,{errorMessage:S.error.message,onHandleRetry:S.retry})]}),Z=(0,d.useMemo)(()=>(0,d.forwardRef)(function(e,t){return(0,l.jsx)(ny.nR,{...e,intent:"edit",params:{id:v?._ref,type:M?.name},target:"_blank",rel:"noopener noreferrer",ref:t})}),[M?.name,v?._ref]),G=(0,d.useMemo)(()=>c?null:(0,l.jsx)(h.xu,{flex:"none",children:(0,l.jsx)(x.j2,{button:(0,l.jsx)(aI,{}),id:`${r}-menuButton`,menu:(0,l.jsxs)(h.v2,{children:[!c&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(x.sN,{text:K("inputs.reference.action.clear"),tone:"critical",icon:_.XHJ,onClick:b}),(0,l.jsx)(x.sN,{text:K("inputs.reference.action.replace"),icon:_.bnu,onClick:F})]}),!c&&v?._ref&&(0,l.jsx)(h.R,{}),v?._ref&&(0,l.jsx)(x.sN,{as:Z,"data-as":"a",text:K("inputs.reference.action.open-in-new-tab"),icon:_.buG})]}),popover:dk})}),[b,F,r,Z,c,K,v?._ref]),H=(0,d.useCallback)(e=>{e.target===t.current&&s.onPathFocus(iI)},[s]);return(0,l.jsxs)(l.Fragment,{children:[y&&e.actions&&e.actions.length>0&&(0,l.jsx)(oA,{actions:e.actions,documentId:y,documentType:n.name,onActions:g,path:i,schemaType:n}),(0,l.jsx)(oT,{actions:f,focused:!!e.inputProps.focused,path:i,children:(0,l.jsx)(sM,{__internal_comments:e.__internal_comments,__internal_slot:e.__internal_slot,__unstable_headerActions:f,__unstable_presence:e.presence,description:e.description,level:e.level,title:e.title,validation:e.validation,deprecated:e.schemaType.deprecated,children:V?(0,l.jsx)(h.xu,{children:o}):(0,l.jsx)(h.Zb,{border:!0,radius:2,padding:1,tone:q,children:(0,l.jsxs)(h.Kq,{space:1,children:[(0,l.jsx)(h.kC,{gap:1,align:"center",style:{lineHeight:0},children:(0,l.jsxs)(x.uE,{children:[(0,l.jsx)(cB,{__unstable_focusRing:!0,as:j,"data-pressed":!!N||void 0,"data-selected":!!I||void 0,documentId:v?._ref,documentType:M?.name,flex:1,pressed:N,radius:2,ref:t,selected:I,tone:"inherit",onFocus:H,children:(0,l.jsx)(cI,{value:v,referenceInfo:S,renderPreview:p,type:n})}),(0,l.jsx)(h.xu,{children:G})]})}),U]})})})})]})}function dA(e,t){return e7(e.options,t)}let d_=["array","file","image","reference","slug"],dS=["asset","crop","hotspot","_ref","_weak"],dE=["tags"],dM=["slug"];function dN(e,t){if(!e||t.has(e))return[];t.add(e);let n=e.type?dN(e.type,t):[];return[e,...n]}let dI=[];function dz(e){return(0,l.jsx)(i9,{hasFocus:!!e.inputProps.focused,isChanged:e.inputProps.changed,path:e.path,children:e.children})}function d$(e){let[t,n]=(0,d.useState)(dI),i=c_(),a=!!e.inputProps.focused;return(0,l.jsxs)(l.Fragment,{children:[i&&e.actions&&e.actions.length>0&&(0,l.jsx)(oA,{actions:e.actions,documentId:i,documentType:e.schemaType.name,onActions:n,path:e.path,schemaType:e.schemaType}),(0,l.jsx)(oT,{actions:t,focused:a,path:e.path,children:(0,l.jsx)(sM,{__internal_slot:e.__internal_slot,__internal_comments:e.__internal_comments,__unstable_headerActions:t,__unstable_presence:e.presence,"data-testid":`field-${e.inputId}`,description:e.description,inputId:e.inputId,level:e.level,title:e.title,validation:e.validation,deprecated:e.schemaType.deprecated,children:(0,l.jsx)(i9,{hasFocus:a,isChanged:e.inputProps.changed,path:e.path,children:e.children})})})]})}function dO(e){let[t,n]=(0,d.useState)(dI),i=c_(),a=!!e.inputProps.focused;return(0,l.jsxs)(l.Fragment,{children:[i&&e.actions&&e.actions.length>0&&(0,l.jsx)(oA,{actions:e.actions,documentId:i,documentType:e.schemaType.name,onActions:n,path:e.path,schemaType:e.schemaType}),(0,l.jsx)(oT,{actions:t,focused:a,path:e.path,children:(0,l.jsx)(sD,{__internal_comments:e.__internal_comments,__internal_slot:e.__internal_slot,__unstable_headerActions:t,__unstable_presence:e.presence,collapsed:e.collapsed,collapsible:e.collapsible,"data-testid":`field-${e.inputId}`,description:e.description,level:e.level,onCollapse:e.onCollapse,onExpand:e.onExpand,title:e.title,validation:e.validation,inputId:e.inputId,deprecated:e.schemaType.deprecated,children:e.children})})]})}function dP(e){let[t,n]=(0,d.useState)(dI),i=c_(),a=!!e.inputProps.focused,r=e.inputProps.members.find(e=>"field"===e.kind&&"hotspot"===e.name),o=r?.open?e.presence:e.presence.concat(r?.field.presence||dI);return(0,l.jsxs)(l.Fragment,{children:[i&&e.actions&&e.actions.length>0&&(0,l.jsx)(oA,{actions:e.actions,documentId:i,documentType:e.schemaType.name,onActions:n,path:e.path,schemaType:e.schemaType}),(0,l.jsx)(oT,{actions:t,focused:a,path:e.path,children:(0,l.jsx)(sD,{__internal_comments:e.__internal_comments,__internal_slot:e.__internal_slot,__unstable_headerActions:t,__unstable_presence:o,collapsed:e.collapsed,collapsible:e.collapsible,description:e.description,level:e.level,onCollapse:e.onCollapse,onExpand:e.onExpand,title:e.title,validation:e.validation,inputId:e.inputId,deprecated:e.schemaType.deprecated,children:e.children})})]})}function dF(e){if(e.components?.field)return e.components.field;if((0,w.EG)(e))return dz;let t=dN(e,new Set);return t.some(e=>"image"===e.name||"file"===e.name)?dP:t.some(e=>(0,w.mz)(e))||t.some(e=>"slug"===e.name)?d$:t.some(e=>(0,w.dD)(e))?dT:"object"!==e.jsonType&&"array"!==e.jsonType?d$:dO}function dD({children:e,workspace:t}){return(0,l.jsx)(p.C5.Provider,{value:t,children:e})}function dR(){let e=(0,d.useContext)(p.C5);if(!e)throw Error("Workspace: missing context value");return e}let dL={isLoading:!0,settings:{partialIndexSettings:{maxFieldDepth:0}}},dB=new Map;function dq(e){let t=dR().search?.unstable_partialIndexing?.enabled,n=Bi(rz),i=(0,d.useMemo)(()=>e||n,[e,n]),a=(0,d.useMemo)(()=>i.config().dataset,[i]);t||dB.set(a,(0,N.of)(dL.settings)),dB.has(a)||dB.set(a,(function({client:e}){let{projectId:t,dataset:n}=e.config();return e.observable.request({uri:`/projects/${t}/datasets/${n}/settings/indexing`,tag:"search.getPartialIndexSettings"})})({client:i}).pipe((0,em.d)()));let r=(0,d.useMemo)(()=>dB.get(a).pipe((0,P.U)(e=>({isLoading:!1,settings:e})),(0,ef.O)(dL),(0,F.K)(e=>(console.error(e),(0,N.of)({isLoading:!1,enabled:!0,settings:{partialIndexSettings:{maxFieldDepth:0}}})))),[a]),o=eR.m(r,dL)?.settings?.partialIndexSettings?.maxFieldDepth;return nJ(o)?Math.min(o,eX.XV):eX.XV}let dV=(0,j.iv)`
  grid-template-columns: minmax(0px, 1fr);
`,dK=(0,j.iv)`
  grid-template-columns: 1fr min-content;
`,dU=(0,j.zo)(h.rj)(e=>e.$narrow?dV:dK),dZ=(0,d.forwardRef)(function(e,t){let[n,i]=(0,d.useState)(null),a=(0,d.useCallback)(e=>{"function"==typeof t?t(e):t&&(t.current=e),i(e)},[t]),r=(0,h.XL)(n);return(0,l.jsx)(dU,{ref:a,gap:1,$narrow:480>(r?.width||0),children:e.children})}),dG={display:"inline-flex"},dH={width:"100%"},dW={portal:!0,tone:"default",constrainSize:!0,fallbackPlacements:["bottom","left","top"],placement:"right",preventOverflow:!0};function dY(e){let{createOptions:t,onCreate:n,id:i,menuRef:a,...r}=e,o=vh(),{t:s}=i1(),c=a8(t);return t.some(e=>e.permission.granted)?t.length>1?(0,l.jsx)(x.j2,{button:(0,l.jsx)(x.zx,{...r,disabled:e.readOnly,text:s("inputs.reference.action.create-new-document-select"),mode:"ghost",icon:_.dtP,size:"large"}),id:i,menu:(0,l.jsx)(h.v2,{ref:a,children:t.map(e=>(0,l.jsx)(x.u,{disabled:e.permission.granted,content:(0,l.jsx)(IC,{currentUser:o,context:"create-document-type"}),portal:!0,children:(0,l.jsx)("div",{children:(0,l.jsx)(x.sN,{disabled:!e.permission.granted,icon:e.icon,text:c(e).title,onClick:()=>n(e)})})},e.id))}),popover:dW}):(0,l.jsx)(x.zx,{...r,text:s("inputs.reference.action.create-new-document-select"),mode:"ghost",disabled:!t[0].permission.granted||e.readOnly,onClick:()=>n(t[0]),icon:_.dtP,size:"large"}):(0,l.jsx)(x.u,{content:(0,l.jsx)(IC,{currentUser:o,context:"create-new-reference"}),children:(0,l.jsx)("div",{style:dG,children:(0,l.jsx)(x.zx,{text:s("inputs.reference.action.create-new-document"),mode:"ghost",disabled:!0,icon:_.dtP,style:dH})})})}function dJ(e){let{getReferenceInfo:t,id:n,renderPreview:i}=e,{isLoading:a,result:r,error:o}=cG(n,t),{t:s}=i1();if(a)return(0,l.jsxs)(h.Kq,{space:2,padding:1,children:[(0,l.jsx)(h.Qr,{style:{maxWidth:320},radius:1,animated:!0}),(0,l.jsx)(h.Qr,{style:{maxWidth:200},radius:1,size:1,animated:!0})]});if(o)return(0,l.jsx)(h.Kq,{space:2,padding:1,children:(0,l.jsx)(lq,{title:s("inputs.reference.error.failed-to-load-document-title"),children:(0,l.jsx)(h.xv,{muted:!0,size:1,children:o.message})})});if(!r)return null;if("PERMISSION_DENIED"===r.availability.reason)return(0,l.jsx)(h.Kq,{space:2,padding:1,children:s("inputs.reference.error.missing-read-permissions-description")});let c=e.type.to.find(e=>e.name===r.type);return c?r&&c&&(0,l.jsx)(cN,{id:r.id,layout:"default",preview:r.preview,refType:c,renderPreview:i,showTypeLabel:e.type.to.length>1}):(0,l.jsx)(h.Kq,{space:2,padding:1,children:s("inputs.reference.error.invalid-search-result-type-title",{returnedType:r.type})})}let dX=(0,j.zo)(x.J2)`
  & > div {
    overflow: auto;
    -webkit-overflow-scrolling: touch;
  }
`,dQ=(0,j.zo)(h.xv)`
  word-break: break-word;
`,d0=["top-start","bottom-start"],d1=(0,d.forwardRef)(function(e,t){let{searchString:n,loading:i,portalRef:a,referenceElement:r,...o}=e,{t:s}=i1(),c=e.options&&e.options.length>0,u=(0,d.useCallback)(({content:e,hidden:t,inputElement:o,onMouseEnter:d,onMouseLeave:u},p)=>(0,l.jsx)(dX,{placement:"bottom-start",fallbackPlacements:d0,arrow:!1,constrainSize:!0,onMouseEnter:d,onMouseLeave:u,content:(0,l.jsx)("div",{ref:p,children:c?e:(0,l.jsx)(h.xu,{padding:4,children:(0,l.jsx)(h.kC,{align:"center",height:"fill",justify:"center",children:(0,l.jsx)(dQ,{align:"center",muted:!0,children:(0,l.jsx)(rm,{t:s,i18nKey:"inputs.reference.no-results-for-query",values:{searchTerm:n||""}})})})})}),open:!i&&!t,ref:a,portal:!0,referenceElement:r||o,matchReferenceWidth:!0}),[c,s,n,i,a,r]);return(0,l.jsx)(h.F2,{...o,loading:i,ref:t,renderPopover:u})}),d2={hits:[],isLoading:!1},d3=()=>!0;function d4(e){return null!==e}function d5(e){let{createOptions:t,onChange:n,onEditReference:i,onSearch:a,schemaType:r,readOnly:o,id:s,onPathFocus:c,value:u,renderPreview:m,path:f,elementProps:g,focusPath:y}=e,{getReferenceInfo:b}=dw({path:f,schemaType:r,value:u}),[v,j]=(0,d.useState)(d2),C=(0,d.useCallback)(e=>{let t=(0,nm.Z)();n([sV({}),sU(r.name,["_type"]),sU(t,["_ref"]),sU(!0,["_weak"]),sU({type:e.type,weak:r.weak,template:e.template},["_strengthenOnPublish"])].filter(iw)),i({id:t,type:e.type,template:e.template}),c([])},[n,i,c,r]),w=(0,d.useCallback)(e=>{if(!e){n(sZ()),c([]);return}let t=v.hits.find(t=>t.id===e);if(!t)throw Error("Selected an item that wasnt part of the result set");n([sV({}),sU(r.name,["_type"]),sU(iS(e),["_ref"]),t.published&&!r.weak?sZ(["_weak"]):sU(!0,["_weak"]),t.published?sZ(["_strengthenOnPublish"]):sU({type:t?.type,weak:r.weak},["_strengthenOnPublish"])].filter(iw)),c([])},[n,c,r.name,r.weak,v.hits]),k=(0,d.useCallback)(()=>{n(sZ())},[n]),T=(0,d.useCallback)(e=>{"Escape"===e.key&&c([])},[c]),A=cG(u?._ref,b),_=(0,d.useRef)(null),{push:S}=(0,h.pm)(),{t:E}=i1(),M=(0,eR.H)(e=>e.pipe((0,eh.h)(d4),(0,ec.w)(e=>(0,I.z)((0,N.of)({isLoading:!0}),a(e).pipe((0,P.U)(t=>({hits:t,searchString:e,isLoading:!1})),(0,F.K)(e=>(S({title:E("inputs.reference.error.search-failed-title"),description:e.message,status:"error",id:`reference-search-fail-${s}`}),console.error(e),(0,N.of)({hits:[]})))))),(0,ep.R)((e,t)=>({...e,...t}),d2),(0,H.b)(j))),z=(0,d.useCallback)(()=>{M("")},[M]),$=(0,d.useCallback)(e=>{"Escape"===e.key&&c([])},[c]),O=(0,d.useCallback)(e=>{let t=e.hit.draft?._id||e.hit.published?._id||e.value;return(0,l.jsx)(BG,{forwardedAs:"button",type:"button",radius:2,tone:"inherit",children:(0,l.jsx)(dJ,{getReferenceInfo:b,id:t,renderPreview:m,type:r})})},[r,b,m]),D=(0,d.useCallback)(()=>A.result?.preview.draft?.title||A.result?.preview.published?.title||"",[A.result?.preview.draft?.title,A.result?.preview.published?.title]),R=(0,d.useCallback)(()=>c(["_ref"]),[c]),L=(0,d.useCallback)(t=>{_.current?.contains(t.relatedTarget)||e.elementProps.onBlur(t)},[e.elementProps]),B=A?.result?.availability?.reason==="NOT_FOUND"&&!u?._strengthenOnPublish&&u?._weak;sB(y?.[0]==="_ref",(e,t)=>{!e&&t&&g.ref.current?.focus()});let q=(0,d.useMemo)(()=>v.hits.map(e=>({value:e.id,hit:e})),[v.hits]),V=1===y.length&&"_ref"===y[0],{menuRef:K,menuButtonRef:U,containerRef:Z}=(0,d.useContext)(p.ZT)||{menuRef:{current:null},menuButtonRef:{current:null},containerRef:{current:null}},G=(0,d.useRef)(null),W=(0,d.useRef)(null),Y=(0,d.useRef)(null);return(0,h.Of)(!u?._ref&&(()=>{(V||document.activeElement===U.current)&&k()}),()=>[K.current,U.current,Z.current,G.current,W.current,Y.current]),(0,l.jsx)(h.Kq,{space:1,"data-testid":"reference-input",ref:G,children:(0,l.jsxs)(h.Kq,{space:2,children:[B?(0,l.jsx)(lq,{"data-testid":"alert-nonexistent-document",title:E("inputs.reference.error.nonexistent-document-title"),suffix:(0,l.jsx)(h.Kq,{padding:2,children:(0,l.jsx)(x.zx,{text:E("inputs.reference.error.nonexistent-document.clear-button-label"),onClick:k})}),children:(0,l.jsx)(h.xv,{size:1,children:(0,l.jsx)(rm,{i18nKey:"inputs.reference.error.nonexistent-document-description",t:E,values:{documentId:u._ref}})})}):null,(0,l.jsxs)(dZ,{ref:_,children:[(0,l.jsx)(d1,{...g,onFocus:R,onBlur:L,"data-testid":"autocomplete",loading:v.isLoading,referenceElement:_.current,options:q,radius:2,placeholder:E("inputs.reference.search-placeholder"),onKeyDown:T,readOnly:A.isLoading||o,onQueryChange:M,searchString:v.searchString,onChange:w,filterOption:d3,renderOption:O,renderValue:D,openButton:{onClick:z},portalRef:W,value:u?._ref}),t.length>0&&(0,l.jsx)(dY,{id:`${s}-selectTypeMenuButton`,readOnly:o,createOptions:t,onCreate:C,onKeyDown:$,menuRef:Y})]})]})})}async function d8(e,t,n,i){if(!e)return{};if("function"==typeof e.filter){let a=n.slice(0,-1),r=(0,c.U2)(t,a);return await e.filter({document:t,parentPath:a,parent:r,getClient:i})}return{filter:e.filter,params:"filterParams"in e?e.filterParams:void 0}}function d6(e){let t=AU(),n=t.getClient(rz),i=NQ(),a=dq(),r=CI(),{path:o,schemaType:s}=e,{EditReferenceLinkComponent:u,onEditReference:p,activePath:m,initialValueTemplateItems:h}=ck(),{enableLegacySearch:f=!1}=t.search,g=function(e){let t=(0,d.useRef)(e);return t.current=e,t}(cW([])),x=g.current?._type,y=i.get(x),b=(0,d.useMemo)(()=>y?.liveEdit,[y]),v=s.options?.disableNew===!0,j=t.getClient,C=(0,d.useCallback)(e=>(0,O.D)(d8(s.options,g.current,o,j)).pipe((0,eu.z)(({filter:t,params:i})=>{var r;return r={...s.options,filter:t,params:i,tag:"search.reference",maxFieldDepth:a},dy(s.to,n,{...r,enableLegacySearch:f,maxDepth:r.maxFieldDepth||eX.XV})(e,{includeDrafts:!0}).pipe((0,P.U)(({hits:e})=>e.map(({hit:e})=>e)),(0,P.U)(e=>iE(e)),(0,P.U)(e=>e.slice(0,100)),(0,eu.z)(e=>{var t;return(0===(t=e.filter(e=>!e.draft||!e.published).map(e=>e.draft?e.id:i_(e.id))).length?(0,N.of)([]):n.observable.fetch("*[_id in $ids]._id",{ids:t},{tag:"get-counterpart-ids"})).pipe((0,P.U)(t=>e.map(e=>{let n=i_(e.id);return{id:e.id,type:e.type,draft:e.draft||t.includes(n)?{_id:n,_type:e.type}:void 0,published:e.published||t.includes(e.id)?{_id:e.id,_type:e.type}:void 0}})))}))}),(0,F.K)(e=>{let t=e.details&&"queryParseError"===e.details.type;return s.options?.filter&&t&&(e.message='Invalid reference filter, please check the custom "filter" option'),(0,q._)(e)})),[s,g,o,j,n,a,f]),w=e.value?._strengthenOnPublish?.template,k=(0,d.useMemo)(()=>(0,d.forwardRef)(function(e,t){return u?(0,l.jsx)(u,{...e,ref:t,parentRefPath:o,template:w}):null}),[u,o,w]),T=(0,d.useCallback)(e=>{p?.({parentRefPath:o,id:e.id,type:e.type,template:e.template})},[p,o]),A=c.Ny(o,m?.path||[])?m?.state:"none",_=(0,d.useMemo)(()=>v?[]:(h||[]).filter(e=>s.to.some(t=>t.name===e.template?.schemaType)).map(e=>e.template?.schemaType?{id:e.id,title:e.title||`${e.template.schemaType} from template ${e.template?.id}`,i18n:e.i18n,type:e.template.schemaType,icon:e.icon,template:{id:e.template?.id,params:e.parameters},permission:{granted:e.granted,reason:e.reason}}:void 0).filter(iw),[v,h,s.to]),S=(0,d.useCallback)((e,t)=>dC(r,e,t),[r]);return(0,l.jsx)(d5,{...e,onSearch:C,liveEdit:b,getReferenceInfo:S,selectedState:A,editReferenceLinkComponent:k,createOptions:_,onEditReference:T})}let d7=e=>({containerNodeRect:t,draggingNodeRect:n,transform:i})=>n&&t?function(e,t,n,i){let a={...e},r=i.y||0,o=i.x||0;return t.top+a.y<=n.top+r?a.y=n.top-t.top+r:t.bottom+a.y>=n.top+n.height-r&&(a.y=n.top+n.height-t.bottom-r),t.left+a.x<=n.left-o?a.x=n.left-t.left+o:t.right+a.x>=n.left+n.width+o&&(a.x=n.left+n.width-t.right+o),a}(i,n,t,e):i,d9="moving",ue=(0,j.zo)(h.xu)`
  ${e=>e.$moving&&(0,j.iv)`
      z-index: 10000;
      /* prevents hover-effects etc on the dragged element  */
      pointer-events: none;
    `}
`,ut={threshold:{x:0,y:.02}},un={coordinateGetter:to.is},ui={duration:200,easing:"ease"},ua=(0,d.memo)(function(e){let{items:t,axis:n,onItemMove:i,onItemMoveStart:a,onItemMoveEnd:r,children:o,...s}=e,c=(0,ta.Dy)((0,ta.VT)(ta.we),(0,ta.VT)(ta.Lg,un)),u=(0,d.useCallback)(e=>{let{active:t,over:n}=e;t.id!==n?.id&&i?.({fromIndex:t.data.current?.sortable?.index,toIndex:n?.data.current?.sortable?.index}),r?.()},[i,r]),p=(0,d.useMemo)(()=>[d7({y:4}),...n?["x"===n?tr.K7:tr.DL]:[]],[n]);return(0,l.jsx)(ta.LB,{sensors:c,autoScroll:ut,modifiers:p,collisionDetection:ta.pE,onDragEnd:u,onDragStart:a,children:(0,l.jsx)(to.Fo,{items:t,strategy:n?"x"===n?to.PG:to.qw:void 0,children:(0,l.jsx)(h.rj,{...s,children:o})})})}),ur=(0,d.forwardRef)(function(e,t){let{id:n,children:i,disableTransition:a}=e,{setNodeRef:r,transform:o,transition:s,active:c}=(0,to.nB)({id:n,transition:a?null:ui}),u=n===c?.id,p=(0,d.useMemo)(()=>({transform:ts.ux.Translate.toString(o),transition:s,pointerEvents:c?"none":void 0}),[o,s,c]),m=(0,d.useCallback)(e=>{r(e),"function"==typeof t?t(e):t&&(t.current=e)},[t,r]);return(0,l.jsx)(ue,{ref:m,style:p,$moving:u,className:u?d9:"","data-index":e["data-index"],children:i})});function uo(e){let{onItemMove:t,onItemMoveEnd:n,onItemMoveStart:i,sortable:a,...r}=e,o=(0,d.useCallback)(e=>{t?.(e)},[t]);return a?(0,l.jsx)(ua,{onItemMove:o,onItemMoveStart:i,onItemMoveEnd:n,...r}):(0,l.jsx)(h.rj,{...r})}let us=(0,d.forwardRef)(function(e,t){let{sortable:n,...i}=e;return(0,l.jsx)(p.Vh.Provider,{value:e.id,children:n?(0,l.jsx)(ur,{ref:t,...i}):(0,l.jsx)(ue,{ref:t,...i})})});function ul(e){return`inset 0 0 0 ${e.width}px ${e.color}`}function uc(e){let{base:t,border:n,focusRing:i}=e,a=i.offset+i.width,r=0-i.offset,o=t?t.bg:"var(--card-bg-color)";return[r>0&&`inset 0 0 0 ${r}px var(--card-focus-ring-color)`,n&&ul(n),r<0&&`0 0 0 ${0-r}px ${o}`,a>0&&`0 0 0 ${a}px var(--card-focus-ring-color)`].filter(Boolean).join(",")}function ud(e){return(0,j.zo)(e)(e=>{let{$border:t,$radius:n}=e,{card:i,color:a,radius:r}=(0,b.aQ)(e.theme),o={width:t?1:0,color:"var(--card-border-color)"};return(0,j.iv)`
        --card-focus-box-shadow: ${ul(o)};

        border-radius: ${(0,h.hO)(r[n??1])};
        outline: none;
        box-shadow: var(--card-focus-box-shadow);

        &:focus {
          --card-focus-box-shadow: ${uc({border:o,base:a,focusRing:{...i.focusRing,offset:0}})};
        }
      `})}function uu(e){return e.files&&e.files.length>0?Promise.resolve(Array.from(e.files||[])):um(Array.from(e.items||[])).then(eG)}function up(e){return null===e?[]:[e]}function um(e){return Promise.all(e.map(e=>{if("file"===e.kind&&e.webkitGetAsEntry){let t;try{t=e.webkitGetAsEntry()}catch{return up(e.getAsFile())}return t?t.isDirectory?function e(t){if(t.isFile)return new Promise((e,n)=>t.file(e,n)).then(e=>[e]);if(t.isDirectory){let n=t.createReader();return new Promise((e,t)=>n.readEntries(e,t)).then(e=>e.filter(e=>!e.name.startsWith("."))).then(t=>Promise.all(t.map(e)).then(eG))}return Promise.resolve([])}(t):up(e.getAsFile()):[]}if("file"===e.kind){let t=e.getAsFile();return Promise.resolve(t?[t]:[])}return"string"===e.kind?console.warn('DataTransfer with kind="string" is currently not supported'):console.warn("Unknown DataTransferItem.kind: %s",e.kind),Promise.resolve([])}))}let uh={"data-is-file-target":"true"},uf=e=>e?.dataset?.isFileTarget==="true",ug={opacity:0,position:"absolute"};function ux(e){return(0,d.forwardRef)(function(t,n){let{onFiles:i,onFilesOver:a,onFilesOut:r,disabled:o,...s}=t,[c,u]=(0,d.useState)(!1),p=(0,d.useRef)(null),m=(0,d.useRef)(null);(0,d.useImperativeHandle)(n,()=>m.current);let h=(0,d.useRef)([]),f=(0,d.useCallback)(e=>{i?.(e)},[i]),g=(0,d.useCallback)(e=>{e.target===m.current&&(e.ctrlKey||e.metaKey)&&"v"===e.key&&u(!0)},[]),x=(0,d.useCallback)(e=>{uu(e.clipboardData).then(e=>p.current?e.length>0?e:function(e,t="image/jpeg"){return e.isContentEditable?new Promise(e=>setTimeout(e,10)).then(()=>Array.from(e.querySelectorAll("img"))).then(t=>(e.innerHTML="",t)).then(e=>Promise.all(e.map(e=>(function(e,t="image/jpeg",n=1){return e.match(/^webkit-fake-url:\/\//)?Promise.reject(Error("Cannot read image contents from webkit fake url")):new Promise((i,a)=>{let r=new Image;r.crossOrigin="anonymous",r.referrerPolicy="strict-origin-when-cross-origin",r.onload=()=>{let e=document.createElement("canvas");e.width=r.width,e.height=r.height,e.getContext("2d")?.drawImage(r,0,0,e.width,e.height);try{e.toBlob(i,t,n)}catch(e){a(e)}},r.src=e})})(e.src)))).then(e=>e.map(e=>new File([e],"pasted-image.jpg",{type:t}))):Promise.reject(Error(`Expected element to be contentEditable="true". Instead found a non contenteditable ${e.tagName}`))}(p.current,"image/jpeg"):[]).then(e=>{f(e),u(!1),m.current?.focus()})},[f]),y=(0,d.useCallback)(e=>{h.current=[],e.preventDefault(),e.stopPropagation();let t=e.nativeEvent.dataTransfer;i&&t&&(function(e){let t=Array.from(e.files||[]),n=Array.from(e.items||[]);return t&&t.length>0?Promise.resolve(t):um(n).then(eG)})(t).then(e=>{e&&f(e)}),r?.()},[f,i,r]),b=(0,d.useCallback)(e=>{i&&(e.preventDefault(),e.stopPropagation())},[i]),v=(0,d.useCallback)(e=>{let t=Array.from(e.dataTransfer.items).map(e=>({type:e.type,kind:e.kind}));t.some(e=>"application/portable-text"===e.type)||(e.stopPropagation(),a&&m.current===e.currentTarget&&(h.current=[...new Set(h.current),e.currentTarget],a(t)))},[a]),j=(0,d.useCallback)(e=>{e.stopPropagation();let t=h.current.indexOf(e.currentTarget);t>-1&&h.current.splice(t,1),0===h.current.length&&r?.()},[r]),C=(0,d.useRef)(!1);return(0,d.useEffect)(()=>{!C.current&&c&&p.current?(p.current.focus(),function(e){let t=document.createRange();t.selectNodeContents(e);let n=window.getSelection();n?.removeAllRanges(),n?.addRange(t)}(p.current)):C.current&&!c&&p.current?.focus(),C.current=c},[c]),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(e,{...s,ref:m,onKeyDown:o?void 0:g,onDragOver:o?void 0:b,onDragEnter:o?void 0:v,onDragLeave:o?void 0:j,onDrop:o?void 0:y,"data-test-id":"file-target",...uh}),!o&&c&&(0,l.jsx)("div",{contentEditable:!0,onPaste:x,ref:p,style:ug})]})})}function uy(e){let{hoveringFiles:t,types:n,resolveUploader:i}=e,a=t.filter(e=>n.some(t=>i(t,e))),r=t.length-a.length,o=n.length>1,{t:s}=i1();return(0,l.jsx)(l.Fragment,{children:a.length>0?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(h.gF,{space:2,children:[(0,l.jsx)(h.xv,{children:(0,l.jsx)(_.rG2,{})}),o?s("inputs.files.common.drop-message.drop-to-upload-multi",{count:a.length}):s("inputs.files.common.drop-message.drop-to-upload"),(0,l.jsx)(h.xv,{})]}),r>0&&(0,l.jsx)(h.xu,{marginTop:4,children:(0,l.jsxs)(h.gF,{space:2,children:[(0,l.jsx)(h.xv,{muted:!0,size:1,children:(0,l.jsx)(_.vaB,{})}),(0,l.jsx)(h.xv,{muted:!0,size:1,children:s("inputs.files.common.drop-message.drop-to-upload.rejected-file-message",{count:r})})]})})]}):(0,l.jsxs)(h.gF,{space:2,children:[(0,l.jsx)(h.xv,{children:(0,l.jsx)(_.vaB,{})}),(0,l.jsx)(h.xv,{children:s("inputs.files.common.drop-message.drop-to-upload.no-accepted-file-message",{count:t.length})})]})})}let ub=(0,j.zo)(h.mh)`
  position: absolute;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  top: -2px;
  left: -2px;
  right: -2px;
  bottom: -2px;
  background-color: var(--card-bg-color);
  opacity: 0.8;
`,uv=j.zo.div`
  position: relative;
`,uj=ud(function(e){let t=ux(e);return(0,d.forwardRef)(function(e,n){let{children:i,resolveUploader:a,onUpload:r,types:o,...s}=e,{push:c}=(0,h.pm)(),{t:u}=i1(),p=(0,d.useCallback)((e,t)=>{let{type:n,uploader:i}=t;r?.({file:e,schemaType:n,uploader:i})},[r]),m=(0,d.useCallback)(e=>{if(!a)return;let t=e.map(e=>({file:e,uploaderCandidates:o.map(t=>({type:t,uploader:a(t,e)})).filter(e=>e.uploader)})),n=t.filter(e=>e.uploaderCandidates.length>0),i=t.filter(e=>0===e.uploaderCandidates.length);i.length>0&&c({closable:!0,status:"warning",title:u("inputs.array.error.cannot-upload-unable-to-convert",{count:i.length}),description:i.map((e,t)=>(0,l.jsxs)(h.kC,{gap:2,padding:2,children:[(0,l.jsx)(h.xu,{children:(0,l.jsx)(h.xv,{weight:"medium",children:e.file.name})}),(0,l.jsx)(h.xu,{children:(0,l.jsxs)(h.xv,{size:1,children:["(",e.file.type,")"]})})]},t))}),n.forEach(e=>{p(e.file,C(e.uploaderCandidates,e=>e.uploader.priority)[0])})},[c,a,o,p,u]),[f,g]=(0,d.useState)([]),x=(0,d.useCallback)(()=>g([]),[]);return(0,l.jsx)(uv,{children:(0,l.jsxs)(t,{...s,ref:n,onFiles:m,onFilesOver:g,onFilesOut:x,children:[a&&f.length>0&&(0,l.jsx)(ub,{zOffset:10,children:(0,l.jsx)(uy,{hoveringFiles:f,types:o,resolveUploader:a})}),i]})})})}((0,j.zo)(h.Zb)`
  height: 100%;
`));function uC(e,t){return"toggle"===t.type?{open:!e.open}:{open:!1}}function uw(e){let[t,n]=(0,d.useReducer)(uC,{open:!1}),i=(0,d.useRef)(null),a=e.popoverProps.referenceElement??null;(0,h.Of)(()=>n({type:"close"}),()=>[i.current,a]),(0,h.qh)((0,d.useCallback)(e=>{"Escape"===e.key&&t.open&&(n({type:"close"}),a?.focus())},[t,a]));let{onSelect:r,...o}=e.insertMenuProps,s=(0,d.useCallback)(e=>{r(e),n({type:"close"})},[r]);return{popover:(0,d.useMemo)(()=>(0,l.jsx)(x.J2,{ref:i,open:t.open,constrainSize:!0,overflow:"hidden",portal:!0,content:(0,l.jsx)(uk,{...o,onSelect:s}),...e.popoverProps}),[s,o,e.popoverProps,t]),state:t,send:n}}function uk(e){let{t}=(0,tX.$G7)();return(0,l.jsx)(it.z,{...e,labels:{"insert-menu.filter.all-items":t("inputs.array.insert-menu.filter.all-items"),"insert-menu.search.no-results":t("inputs.array.insert-menu.search.no-results"),"insert-menu.search.placeholder":t("inputs.array.insert-menu.search.placeholder"),"insert-menu.toggle-grid-view.tooltip":t("inputs.array.insert-menu.toggle-grid-view.tooltip"),"insert-menu.toggle-list-view.tooltip":t("inputs.array.insert-menu.toggle-list-view.tooltip")}})}function uT(e){let{schemaType:t,readOnly:n,children:i,onValueCreate:a,onItemAppend:r}=e,{t:o}=i1(),[s,c]=(0,d.useState)(null),[u,p]=(0,d.useState)(null),m=(0,d.useCallback)(e=>{r(a(e))},[a,r]),f=(0,d.useCallback)(()=>{m(t.of[0])},[t,m]),g=t.of.length>1?"inputs.array.action.add-item-select-type":"inputs.array.action.add-item",y={icon:_.dtP,mode:"ghost",size:"large",text:o(g)},b=uw({insertMenuProps:{...e.schemaType.options?.insertMenu,schemaTypes:e.schemaType.of,onSelect:m},popoverProps:{placement:"bottom",fallbackPlacements:["top"],matchReferenceWidth:e.schemaType.options?.insertMenu?.views?.some(e=>"grid"===e.name),referenceBoundary:s,referenceElement:u}});return n?(0,l.jsx)(x.u,{portal:!0,content:o("inputs.array.read-only-label"),children:(0,l.jsx)(h.rj,{children:(0,l.jsx)(x.zx,{...y,"data-testid":"add-read-object-button",disabled:!0})})}):(0,l.jsxs)(h.rj,{ref:c,gap:1,style:{gridTemplateColumns:"repeat(auto-fit, minmax(100px, 1fr))"},children:[1===t.of.length?(0,l.jsx)(x.zx,{...y,onClick:f,"data-testid":"add-single-object-button"}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(x.zx,{...y,"data-testid":"add-multiple-object-button",selected:b.state.open,onClick:()=>{b.send({type:"toggle"})},ref:p}),b.popover]}),i]})}let uA=(0,j.zo)(x.zx)(e=>{let{$grid:t,disabled:n}=e;return n?(0,j.iv)``:(0,j.iv)`
    cursor: ${t?"move":"ns-resize"};
  `}),u_=function(e){let t=(0,d.useContext)(p.Vh),{mode:n="bleed",readOnly:i,...a}=e,{listeners:r,attributes:o}=(0,to.nB)({id:t,disabled:i}),{t:s}=i1();return(0,l.jsx)(uA,{icon:_.VVU,tooltipProps:{content:s("inputs.array.action.drag.tooltip"),delay:{open:1e3},disabled:!!i},mode:n,"data-ui":"DragHandleButton",...a,...o,...r,disabled:i})},uS=(0,j.zo)(h.kC)`
  min-height: 33px;
`,uE=(0,j.zo)(h.kC)`
  position: absolute;
  top: 0;
  right: 0;
  height: 33px;
`,uM=(0,j.zo)(h.Zb)`
  position: absolute;
  top: 0;
  left: 0;
`,uN=(0,j.zo)(h.Zb)`
  transition: border-color 250ms;
  box-sizing: border-box;
  position: relative;

  @media (hover: hover) {
    ${uM} {
      opacity: 0;
    }

    &:hover,
    &:focus-within {
      ${uM} {
        opacity: 1;
      }
    }
  }

  .${d9} & {
    box-shadow:
      0 0 0 0,
      0 8px 17px 2px var(--card-shadow-umbra-color),
      0 3px 14px 2px var(--card-shadow-penumbra-color),
      0 5px 5px -3px var(--card-shadow-ambient-color);
  }

  &[aria-selected='true'] {
    box-shadow: 0 0 0 2px var(--card-focus-ring-color);
  }
`;function uI(e){let{validation:t,selected:n,tone:i,presence:a,children:r,dragHandle:o,menu:s,footer:c,readOnly:d,...u}=e;return(0,l.jsxs)(uN,{forwardedAs:h.kC,direction:"column",border:!0,selected:n,"aria-selected":n,radius:1,tone:i,...u,children:[r,o&&(0,l.jsx)(uM,{margin:1,radius:2,display:"flex",tone:"inherit","data-ui":"DragHandleCard",children:(0,l.jsx)(u_,{$grid:!0,mode:"ghost",readOnly:!!d})}),a&&(0,l.jsx)(uE,{align:"center",marginX:1,children:a}),(0,l.jsxs)(uS,{align:"center",paddingX:1,sizing:"border",justify:"space-between",children:[(0,l.jsx)(h.kC,{children:t}),(0,l.jsx)(h.xu,{children:c}),s]})]})}let uz=(0,j.zo)(h.Zb)`
  max-width: ${({theme:e})=>e.sanity.container[1]}px;
`;function u$(e){let{value:t,onFocus:n,vertical:i,...a}=e,[r,o]=(0,d.useState)(!1),s=(0,d.useRef)(null),{t:c}=i1();(0,h.Of)(()=>o(!1),()=>[s.current]);let u=(0,d.useCallback)(e=>{("Escape"===e.key||"Tab"===e.key)&&o(!1)},[]),p=(0,d.useCallback)(()=>{o(e=>!e)},[]),m=(0,e6.wq)(t);return(0,l.jsx)(x.J2,{open:r,ref:s,onKeyDown:u,portal:!0,constrainSize:!0,tone:"default",content:(0,l.jsx)(uz,{margin:1,padding:3,onKeyDown:u,tabIndex:0,overflow:"auto",children:(0,l.jsxs)(h.Kq,{space:4,children:[(0,l.jsx)(h.xu,{children:(0,l.jsx)(h.xv,{weight:"medium",children:c("inputs.array.error.type-is-incompatible-title")})}),(0,l.jsx)(h.xv,{size:1,children:(0,l.jsx)(rm,{t:c,i18nKey:"inputs.array.error.current-schema-not-declare-description",values:{typeName:m}})}),(0,l.jsx)(h.xu,{children:(0,l.jsxs)(h.xv,{size:1,children:[(0,l.jsx)(_.sLo,{})," ",c("inputs.array.error.can-delete-but-no-edit-description")]})}),(0,l.jsxs)(h.Kq,{space:2,children:[(0,l.jsx)(h.xv,{size:1,weight:"medium",children:c("inputs.array.error.json-representation-description")}),(0,l.jsx)(h.Zb,{padding:2,overflow:"auto",border:!0,children:(0,l.jsx)(h.EK,{size:1,as:"pre",language:"json",children:JSON.stringify(t,null,2)})})]})]})}),children:(0,l.jsx)(h.Zb,{as:"button",type:"button",radius:2,tone:"inherit",paddingX:2,paddingY:3,style:{height:"100%"},onFocus:n,onClick:p,onKeyDown:u,__unstable_focusRing:!0,...a,children:(0,l.jsxs)(h.Kq,{space:4,marginTop:2,children:[(0,l.jsx)(h.xu,{margin:1,children:(0,l.jsx)(h.xv,{align:"center",size:4,children:(0,l.jsx)(_.Tzq,{})})}),(0,l.jsx)(h.xv,{align:"center",size:1,children:(0,l.jsx)(rm,{t:c,i18nKey:"inputs.array.error.type-is-incompatible-prompt",values:{typeName:m}})})]})})})}let uO={portal:!0,tone:"default"};function uP(e){let{member:t,sortable:n,readOnly:i}=e,a=(0,d.useId)(),{onChange:r}=sY(),{t:o}=i1(),s=(0,d.useCallback)(()=>{r(sH.from([sZ([{_key:t.key}])]))},[r,t.key]);return(0,l.jsx)(uI,{dragHandle:n,readOnly:i,tone:"caution",style:{height:"100%"},menu:(0,l.jsx)(x.j2,{button:(0,l.jsx)(aI,{}),id:`${a}-menuButton`,menu:(0,l.jsx)(h.v2,{children:(0,l.jsx)(x.sN,{text:o("inputs.array.action.remove-invalid-item"),tone:"critical",icon:_.XHJ,onClick:s})}),popover:uO}),children:"INVALID_ITEM_TYPE"===t.error.type?(0,l.jsx)(u$,{value:t.error.value,vertical:!0}):(0,l.jsx)("div",{children:o("inputs.array.error.unexpected-error",{error:t.error.type})})})}function uF(e=[]){return e.reduce((e,t,n)=>{let i=typeof t;if("number"===i)return`${e}[${t}]`;if("string"===i)return`${e}${0===n?"":"."}${t}`;if((0,w.fU)(t))return`${e}[_key=="${t._key}"]`;throw Error(`Unsupported path segment "${t}"`)},"")}function uD(e){return null!==e||void 0!==e}function uR(e,t,n){if(!n)throw Error("missing context");if(!0===e)return[];if(Array.isArray(e))return e.flatMap(e=>uR(e,t,n)).filter(uD);if("string"==typeof e)return uR({message:e},t,n);if("string"!=typeof e.message)throw Error(`${uF(n.path)}: Validator must return 'true' if valid or an error message as a string on errors`);let{message:i}=e,a=[];for(let t of(e.path&&a.push(e.path),e.paths||[]))a.push(t);return a.length?a.map(e=>({path:(n.path||[]).concat(e),level:t||"error",item:{message:i},message:i})):[{level:t||"error",item:{message:i},message:i,path:n.path||[]}]}function uL(e,t){let{currentLocale:n}=t,i=n.id;if(e[i])return e[i];if(i.includes("-")){let t=i.split("-",1)[0];if(e[t])return e[t]}return e["en-US"]||e["en-GB"]||e.en||"Unknown validation error (not localized)"}function uB(e){return!0!==e&&"u">typeof e&&"string"!=typeof e&&tn(e)&&!("message"in e)}function uq(e,t){if(e===t)return!0;if(Array.isArray(e)&&Array.isArray(t)){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!uq(e[n],t[n]))return!1;return!0}if(Array.isArray(e)!=Array.isArray(t))return!1;if(e&&t&&"object"==typeof e&&"object"==typeof t){let n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();if(e instanceof Date!=t instanceof Date)return!1;if(e instanceof RegExp&&t instanceof RegExp)return e.toString()==t.toString();if(e instanceof RegExp!=t instanceof RegExp)return!1;for(let e=0;e<n.length;e++)if("_key"!==n[e]&&!Object.prototype.hasOwnProperty.call(t,n[e]))return!1;for(let i=0;i<n.length;i++){let a=n[i];if("_key"!==a&&!uq(e[a],t[a]))return!1}return!0}return!1}let uV={}.toString,uK=[Object,Function,Array,String,Boolean,Number,Date,RegExp,Error];function uU(e){let t=uV.call(e).slice(8,-1);if(null==e)return t.toLowerCase();let n=e.constructor;return n&&!function(e){for(let t=0;t<uK.length;t++)if(uK[t]===e)return!0;return!1}(n)?n.name:t}let uZ=e=>e.message?e.message:1===e.results.length?e.results[0]?.message:e.i18n.t("{{messages, list}}",{messages:e.results.map(e=>e.message||e.item?.message),formatParams:{messages:{style:"long",type:e.operation}}}),uG={type:(e,t,n,{i18n:i})=>{let a=uU(t);return a===e||"undefined"===a||n||i.t("validation:generic.incorrect-type",{actualType:a,expectedType:e})},presence:(e,t,n,{i18n:i})=>void 0!==t||"required"!==e||n||i.t("validation:generic.required"),all:async(e,t,n,i)=>{let a=(await Promise.all(e.map(e=>e.validate(t,i)))).flat();return 0===a.length||uZ({message:n,results:a,operation:"conjunction",i18n:i.i18n})},either:async(e,t,n,i)=>{let a=await Promise.all(e.map(e=>e.validate(t,i))),r=a.flat();return!!a.find(e=>!e.length)||uZ({message:n,results:r,operation:"disjunction",i18n:i.i18n})},valid:(e,t,n,{i18n:i})=>{let a=typeof t;if("undefined"===a)return!0;let r=("number"===a||"string"===a)&&`${t}`,o=r&&r.length>30?`${r.slice(0,30)}\u2026`:r;return!!e.some(e=>uq(e,t))||n||i.t("validation:generic.not-allowed",r?{context:"hint",replace:{hint:o}}:{})},custom:async(e,t,n,i)=>{let a;let r=setTimeout(()=>{"studio"===i.environment&&console.warn(`Custom validator at ${uF(i.path)} has taken more than 5000ms to respond`)},5e3);try{a=await e(t,i)}finally{clearTimeout(r)}return uB(a)?uL(a,i.i18n):"string"==typeof a&&n||a}},uH={...uG,min:(e,t,n,{i18n:i,type:a})=>{if(!t||t.length>=e)return!0;let r=(0,w.js)(a)?"blocks":void 0;return n||i.t("validation:array.minimum-length",{minLength:e,context:r})},max:(e,t,n,{i18n:i,type:a})=>{if(!t||t.length<=e)return!0;let r=(0,w.js)(a)?"blocks":void 0;return n||i.t("validation:array.maximum-length",{maxLength:e,context:r})},length:(e,t,n,{i18n:i,type:a})=>{if(!t||t.length===e)return!0;let r=(0,w.js)(a)?"blocks":void 0;return n||i.t("validation:array.exact-length",{wantedLength:e,context:r})},presence:(e,t,n,{i18n:i})=>"required"!==e||!!t||n||i.t("validation:generic.required",{context:"array"}),valid:(e,t,n,{i18n:i})=>{if(typeof t>"u")return!0;let a=[];for(let n=0;n<t.length;n++){let i=t[n];if(e.some(e=>uq(e,i)))continue;let r=i&&i._key?{_key:i._key}:n;a.push([r])}let r=n||i.t("validation:generic.not-allowed");return a.map(e=>({message:r,path:e}))},unique:(e,t,n,{i18n:i})=>{let a=[];if(!t)return!0;for(let e=0;e<t.length;e++)for(let n=e+1;n<t.length;n++)uq(t[e],t[n])&&(-1===a.indexOf(e)&&a.push(e),-1===a.indexOf(n)&&a.push(n));let r=a.map(e=>{let n=t[e];return[n&&n._key?{_key:n._key}:e]}),o=n||i.t("validation:array.item-duplicate");return r.map(e=>({message:o,path:e}))}},uW={...uG,presence:(e,t,n,{i18n:i})=>"required"!==e||"boolean"==typeof t||n||i.t("validation:generic.required",{context:"boolean"})};function uY(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)}let uJ=/^(?:[-+]\d{2})?(?:\d{4}(?!\d{2}\b))(?:(-?)(?:(?:0[1-9]|1[0-2])(?:\1(?:[12]\d|0[1-9]|3[01]))?|W(?:[0-4]\d|5[0-2])(?:-?[1-7])?|(?:00[1-9]|0[1-9]\d|[12]\d{2}|3(?:[0-5]\d|6[1-6])))(?![T]$|[T][\d]+Z$)(?:[T\s](?:(?:(?:[01]\d|2[0-3])(?:(:?)[0-5]\d)?|24:?00)(?:[.,]\d+(?!:))?)(?:\2[0-5]\d(?:[.,]\d+)?)?(?:[Z]|(?:[+-])(?:[01]\d|2[0-3])(?::?[0-5]\d)?)?)?)?$/,uX=(e="",t,n)=>{let i=n?.dateFormat||eq.K_,a=n?.timeFormat||eq._r;return eq.WU(t,"date"===e?i:`${i} ${a}`,"date"===e)};function uQ(e,t=!1){if(!e)return null;if("now"===e)return new Date;let n=new Date(e),i=isNaN(n.getTime());if(i&&t)throw Error(`Unable to parse "${e}" to a date`);return i?null:n}let u0={...uG,type:(e,t,n,{i18n:i})=>!!(typeof t>"u"||uJ.test(`${t}`))||n||i.t("validation:date.invalid-format"),min:(e,t,n,{type:i,i18n:a})=>{let r=uQ(t),o=uQ(e,!0);if(!r||!t||r>=o)return!0;if(!i)throw Error("`type` was not provided in validation context.");let s=uY(i.options)?i.options:{};return n||a.t("validation:date.minimum",{minDate:uX(i.name,o,s),providedMinDate:e})},max:(e,t,n,{type:i,i18n:a})=>{let r=uQ(t),o=uQ(e,!0);if(!r||!t||r<=o)return!0;if(!i)throw Error("`type` was not provided in validation context.");let s=uY(i.options)?i.options:{};return n||a.t("validation:date.maximum",{maxDate:uX(i.name,o,s),providedMaxDate:e})}},u1=/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/,u2={...uG,integer:(e,t,n,{i18n:i})=>!!Number.isInteger(t)||n||i.t("validation:number.non-integer"),precision:(e,t,n,{i18n:i})=>{if(void 0===t)return!0;let a=t.toString().match(u1);return!(Math.max((a[1]?a[1].length:0)-(a[2]?parseInt(a[2],10):0),0)>e)||n||i.t("validation:number.maximum-precision",{limit:e})},min:(e,t,n,{i18n:i})=>t>=e||n||i.t("validation:number.minimum",{minNumber:e}),max:(e,t,n,{i18n:i})=>t<=e||n||i.t("validation:number.maximum",{maxNumber:e}),greaterThan:(e,t,n,{i18n:i})=>t>e||n||i.t("validation:number.greater-than",{threshold:e}),lessThan:(e,t,n,{i18n:i})=>t<e||n||i.t("validation:number.less-than",{threshold:e})},u3=["_key","_type","_weak"],u4={...uG,presence:(e,t,n,{i18n:i})=>{if("required"!==e)return!0;let a=t&&Object.keys(t).filter(e=>!u3.includes(e));return void 0!==t&&(!a||0!==a.length)||n||i.t("validation:generic.required",{context:"object"})},reference:async(e,t,n,i)=>{if(!t)return!0;let{type:a,getDocumentExists:r,i18n:o}=i;if(!(0,w.Yk)(t))return n||o.t("validation:object.not-reference");if(!a)throw Error("`type` was not provided in validation context");if("weak"in a&&a.weak)return!0;if(!r)throw Error("`getDocumentExists` was not provided in validation context");return!!await r({id:t._ref})||o.t("validation:object.reference-not-published",{documentId:t._ref})},assetRequired:(e,t,n,{i18n:i})=>!!t&&!!t.asset&&!!t.asset._ref||n||i.t("validation:object.asset-required",{context:e.assetType||""})},u5="http://sanity",u8=e=>/^\.*\//.test(e),u6=/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,u7={Boolean:uW,Number:u2,String:{...uG,min:(e,t,n,{i18n:i})=>!t||t.length>=e||n||i.t("validation:string.minimum-length",{minLength:e}),max:(e,t,n,{i18n:i})=>!t||t.length<=e||n||i.t("validation:string.maximum-length",{maxLength:e}),length:(e,t,n,{i18n:i})=>(t||"").length===e||n||i.t("validation:string.exact-length",{wantedLength:e}),uri:(e,t,n,{i18n:i})=>{let a;let r=t||"";if(!r)return!0;let{options:o}=e,{allowCredentials:s,relativeOnly:l}=o,c=o.allowRelative||l;try{a=c?new URL(r,u5):new URL(r)}catch{return n||i.t("validation:string.url.invalid")}if(l&&a.origin!==u5)return n||i.t("validation:string.url.not-relative");if(!c&&a.origin===u5&&u8(r))return n||i.t("validation:string.url.not-absolute");if(!s&&(a.username||a.password))return n||i.t("validation:string.url.includes-credentials");let d=a.protocol.replace(/:$/,"");return!!o.scheme.some(e=>e.test(d))||n||i.t("validation:string.url.disallowed-scheme",{scheme:d})},stringCasing:(e,t,n,{i18n:i})=>{let a=t||"";return"uppercase"===e&&a!==a.toLocaleUpperCase()?n||i.t("validation:string.uppercase"):"lowercase"!==e||a===a.toLocaleLowerCase()||n||i.t("validation:string.lowercase")},presence:(e,t,n,{i18n:i})=>"required"!==e||!!t||n||i.t("validation:generic.required",{context:"string"}),regex:(e,t,n,{i18n:i})=>{let{pattern:a,name:r,invert:o}=e,s=r||`${a.toString()}`;a.lastIndex=0;let l=a.test(t||"");return(!!o||!!l)&&(!o||!l)||n||(o?i.t("validation:string.regex-match",{name:s}):i.t("validation:string.regex-does-not-match",{name:s}))},email:(e,t,n,{i18n:i})=>{let a=`${t||""}`.trim();return!!(!a||u6.test(a))||n||i.t("validation:string.email")}},Array:uH,Object:u4,Date:u0},u9=e=>e&&e.type?u9(e.type):e,pe=e=>"object"==typeof e&&!!e&&e.type===pa.FIELD_REF,pt=[],pn=Symbol("FIELD_REF"),pi=["Array","Boolean","Date","Number","Object","String"],pa=class e{static FIELD_REF=pn;static array=t=>new e(t).type("Array");static object=t=>new e(t).type("Object");static string=t=>new e(t).type("String");static number=t=>new e(t).type("Number");static boolean=t=>new e(t).type("Boolean");static dateTime=t=>new e(t).type("Date");static valueOfField=e=>({type:pn,path:e});_type=void 0;_level=void 0;_required=void 0;_typeDef=void 0;_message=void 0;_rules=[];_fieldRules=void 0;constructor(e){this._typeDef=e,this.reset()}_mergeRequired(e){return"required"===this._required||"required"===e._required?"required":"optional"===this._required||"optional"===e._required?"optional":void 0}valueOfField=e.valueOfField.bind(e);error(e){let t=this.clone();return t._level="error",t._message=e||void 0,t}warning(e){let t=this.clone();return t._level="warning",t._message=e||void 0,t}info(e){let t=this.clone();return t._level="info",t._message=e||void 0,t}reset(){return this._type=this._type||void 0,this._rules=(this._rules||[]).filter(e=>"type"===e.flag),this._message=void 0,this._required=void 0,this._level="error",this._fieldRules=void 0,this}isRequired(){return"required"===this._required}clone(){let t=new e;return t._type=this._type,t._message=this._message,t._required=this._required,t._rules=nU(this._rules),t._level=this._level,t._fieldRules=this._fieldRules,t._typeDef=this._typeDef,t}cloneWithRules(e){let t=this.clone(),n=new Set;return e.forEach(e=>{"type"===e.flag&&(t._type=e.constraint),n.add(e.flag)}),t._rules=t._rules.filter(e=>{let t=["type","uri","email"].includes(e.flag),i=n.has(e.flag);return!(t&&i)}).concat(e),t}merge(e){if(this._type&&e._type&&this._type!==e._type)throw Error("merge() failed: conflicting types");let t=this.cloneWithRules(e._rules);return t._type=this._type||e._type,t._message=this._message||e._message,t._required=this._mergeRequired(e),t._level="error"===this._level?e._level:this._level,t}type(e){let t=`${e.slice(0,1).toUpperCase()}${e.slice(1)}`;if(!pi.includes(t))throw Error(`Unknown type "${e}"`);let n=this.cloneWithRules([{flag:"type",constraint:t}]);return n._type=t,n}all(e){return this.cloneWithRules([{flag:"all",constraint:e}])}either(e){return this.cloneWithRules([{flag:"either",constraint:e}])}optional(){let e=this.cloneWithRules([{flag:"presence",constraint:"optional"}]);return e._required="optional",e}required(){let e=this.cloneWithRules([{flag:"presence",constraint:"required"}]);return e._required="required",e}custom(e,t={}){return t.bypassConcurrencyLimit&&Object.assign(e,{bypassConcurrencyLimit:!0}),this.cloneWithRules([{flag:"custom",constraint:e}])}min(e){return this.cloneWithRules([{flag:"min",constraint:e}])}max(e){return this.cloneWithRules([{flag:"max",constraint:e}])}length(e){return this.cloneWithRules([{flag:"length",constraint:e}])}valid(e){let t=Array.isArray(e)?e:[e];return this.cloneWithRules([{flag:"valid",constraint:t}])}integer(){return this.cloneWithRules([{flag:"integer"}])}precision(e){return this.cloneWithRules([{flag:"precision",constraint:e}])}positive(){return this.cloneWithRules([{flag:"min",constraint:0}])}negative(){return this.cloneWithRules([{flag:"lessThan",constraint:0}])}greaterThan(e){return this.cloneWithRules([{flag:"greaterThan",constraint:e}])}lessThan(e){return this.cloneWithRules([{flag:"lessThan",constraint:e}])}uppercase(){return this.cloneWithRules([{flag:"stringCasing",constraint:"uppercase"}])}lowercase(){return this.cloneWithRules([{flag:"stringCasing",constraint:"lowercase"}])}regex(e,t,n){let i="string"==typeof t?t:t?.name??n?.name,a="string"!=typeof t&&(t?.invert??n?.invert);return this.cloneWithRules([{flag:"regex",constraint:{pattern:e,name:i,invert:a||!1}}])}email(){return this.cloneWithRules([{flag:"email"}])}uri(e){let t=e?.scheme||["http","https"],n=Array.isArray(t)?t:[t];if(!n.length)throw Error("scheme must have at least 1 scheme specified");let i={options:{scheme:n.map(e=>{if(!(e instanceof RegExp)&&"string"!=typeof e)throw Error("scheme must be a RegExp or a String");return"string"==typeof e?RegExp(`^${e.replace(/[\^\$\.\*\+\-\?\=\!\:\|\\\/\(\)\[\]\{\}\,]/g,"\\$&")}$`):e}),allowRelative:e?.allowRelative||!1,relativeOnly:e?.relativeOnly||!1,allowCredentials:e?.allowCredentials||!1}};return this.cloneWithRules([{flag:"uri",constraint:i}])}unique(){return this.cloneWithRules([{flag:"unique"}])}reference(){return this.cloneWithRules([{flag:"reference"}])}fields(e){if("Object"!==this._type)throw Error("fields() can only be called on an object type");let t=this.cloneWithRules([]);return t._fieldRules=e,t}assetRequired(){let e;let t=u9(this._typeDef);return e=t&&["image","file"].includes(t.name)?"image"===t.name?"image":"file":"asset",this.cloneWithRules([{flag:"assetRequired",constraint:{assetType:e}}])}async validate(e,{__internal:t={},...n}){let{customValidationConcurrencyLimiter:i}=t,a=null==e;if(a&&"optional"===this._required)return pt;let r=void 0===this._required&&a?this._rules.filter(e=>"custom"===e.flag):this._rules,o=this._type&&u7[this._type]||uG;return(await Promise.all(r.map(async t=>{if(void 0===t.flag)throw Error('Invalid rule, did not contain "flag"-property');let a=o[t.flag];if(!a){let e=this._type?`type "${this._type}"`:"rule without declared type";throw Error(`Validator for flag "${t.flag}" not found for ${e}`)}let r="constraint"in t?t.constraint:null;if(pe(r)&&(r=e7(n.parent,r.path)),"custom"===t.flag&&i&&!r?.bypassConcurrencyLimit){let e=r;r=async(...t)=>{await i.ready();try{return await e(...t)}finally{i.release()}}}let s=uB(this._message)?uL(this._message,n.i18n):this._message;try{let t=await a(r,e,s,n);return uR(t,this._level,n)}catch(e){return uR({message:`${uF(n.path)}: Exception occurred while validating value: ${e.message}`},"error",n)}}))).flat()}},pr=eD(function(e){console.warn([`Slug field at path ${e} is within an array and cannot be automatically checked for uniqueness`,'If you need to check for uniqueness, provide your own "isUnique" method',"To disable this message, set `disableArrayWarning: true` on the slug `options` field"].join(`
`))});function po(e){return e.reduce((e,t,n)=>{let i="number"==typeof t,a=(0,w.fU)(t),r=i||a?"[]":`${0===n?"":"."}${t}`;return`${e}${r}`},"")}let ps=(e,t)=>{let{getClient:n,document:i,path:a,type:r}=t,o=r?.options;if(!i)throw Error("`document` was not provided in validation context.");if(!a)throw Error("`path` was not provided in validation context.");let s=o?.disableArrayWarning||!1,{published:l,draft:c}=function(e){let t=0===e.indexOf("drafts.");return{published:t?e.slice(7):e,draft:t?e:`drafts.${e}`}}(i._id),d=i._type,u=po(a.concat("current"));!s&&u.includes("[]")&&"studio"===t.environment&&pr(po(a));let p=`_type == $docType && !(_id in [$draft, $published]) && ${u} == $slug`;return n({apiVersion:"2023-11-13"}).fetch(`!defined(*[${p}][0]._id)`,{docType:d,draft:c,published:l,slug:e},{tag:"validation.slug-is-unique"})},pl=async(e,t)=>{if(!e)return!0;let{i18n:n}=t;if("object"!=typeof e||Array.isArray(e))return n.t("validation:slug.not-object");if(!(0,w.hb)(e)||0===e.current.trim().length)return n.t("validation:slug.missing-current");let i=t?.type?.options?.isUnique||ps,a={...t,parent:t.parent,type:t.type,defaultIsUnique:ps};return!!await i(e.current,a)||n.t("validation:slug.not-unique",{slug:e.current})},pc={array:!0,boolean:!0,date:!0,number:!0,object:!0,string:!0},pd=e=>e in pc;function pu(e,t=new Set){return e?t.has(e)?[]:(t.add(e),[...e.type?pu(e.type,t):[],e]):[]}function pp(e,t){let n=e;pd(t.jsonType)&&(n=n.type(t.jsonType));let i=t?.options&&"object"==typeof t.options&&"list"in t.options&&t.options.list;return Array.isArray(i)&&(n=n.valid(i.map(e=>"object"===t.jsonType&&function e(t){return!!t&&("fields"in t||!t.type?!!("fields"in t&&Array.isArray(t.fields))&&t.fields.some(e=>"value"===e.name):e(t.type))}(t)||void 0===e.value?e:e.value))),"datetime"===t.name||"date"===t.name?n.type("Date"):"url"===t.name?n.uri():"slug"===t.name?n.custom(pl,{bypassConcurrencyLimit:!0}):"reference"===t.name?n.reference():"email"===t.name?n.email():n}function pm(e){if(!e)return[];let t=e.validation;if(Array.isArray(t))return t.flatMap(t=>pm({...e,validation:t}));if(t&&"object"==typeof t)return[t];let n=Object.values(pu(e).reduce((e,t)=>(e[t.name]=t,e),{})).reduce(pp,new pa(e));return t?pm({...e,validation:t(n)}):[n]}let ph=typeof window>"u"||typeof document>"u",pf=[a1],pg=eD(function(){let e=function(){let e={[a1.id]:{}},t=a1.bundles?.filter(aX)||[],n=new Set;for(let i of t)e[a1.id][i.namespace]=i.resources,n.add(i.namespace);return(0,nn.Fs)({ns:Array.from(n),defaultNS:a0,initImmediate:!0,partialBundledLanguages:!0,fallbackLng:a1.id,lng:a1.id,supportedLngs:[a1.id],debug:!1,load:"currentOnly",resources:e,interpolation:{escapeValue:ph}})}();return e.init(),{currentLocale:a1,locales:pf,loadNamespaces:e.loadNamespaces,t:e.t}}),px=typeof window>"u"?void 0:window,py=px?.requestIdleCallback||function(e,t){let n=Date.now();return window.setTimeout(()=>{e({didTimeout:!1,timeRemaining:()=>Math.max(0,Date.now()-n)})},0)},pb=px?.cancelIdleCallback||function(e){return window.clearTimeout(e)},pv=e=>t=>{if("object"!=typeof t||!t)return!0;let n=new Set(e.fields?.map(e=>e.name));return Object.keys(t).filter(e=>!e.startsWith("_")).filter(e=>!n.has(e)).map(t=>({message:`Field '${t}' does not exist on type '${e.name}'`,path:[t]}))},pj=e=>"object"==typeof e&&null!==e&&!Array.isArray(e),pC=e=>null!=e,pw=new WeakMap,pk={isValidating:!0,validation:[]},pT=[],pA=(e,t)=>e(t).pipe((0,P.U)(({published:e})=>e.available));function p_(){return(0,em.d)({bufferSize:1,refCount:!0})}let pS=e=>"error"===e.severity,pE=[{name:"sanity.assetSourceData",title:"Asset Source Data",type:"object",fields:[{name:"name",title:"Source name",description:"A canonical name for the source this asset is originating from",type:"string"},{name:"id",title:"Asset Source ID",description:"The unique ID for the asset within the originating source so you can programatically find back to it",type:"string"},{name:"url",title:"Asset information URL",description:"A URL to find more information about this asset in the originating source",type:"string"}]},{title:"Slug",name:"slug",type:"object",fields:[{name:"current",title:"Current slug",type:"string",validation:e=>e.required()},{name:"source",title:"Source field",type:"string",hidden:!0}]},{title:"Geographical Point",name:"geopoint",type:"object",fields:[{name:"lat",type:"number",title:"Latitude"},{name:"lng",type:"number",title:"Longitude"},{name:"alt",type:"number",title:"Altitude"}]},{name:"sanity.imageAsset",title:"Image",type:"document",fieldsets:[{name:"system",title:"System fields",description:"These fields are managed by the system and not editable"}],fields:[{name:"originalFilename",type:"string",title:"Original file name",readOnly:!0},{name:"label",type:"string",title:"Label"},{name:"title",type:"string",title:"Title"},{name:"description",type:"string",title:"Description"},{name:"altText",type:"string",title:"Alternative text"},{name:"sha1hash",type:"string",title:"SHA1 hash",readOnly:!0,fieldset:"system"},{name:"extension",type:"string",readOnly:!0,title:"File extension",fieldset:"system"},{name:"mimeType",type:"string",readOnly:!0,title:"Mime type",fieldset:"system"},{name:"size",type:"number",title:"File size in bytes",readOnly:!0,fieldset:"system"},{name:"assetId",type:"string",title:"Asset ID",readOnly:!0,fieldset:"system"},{name:"uploadId",type:"string",readOnly:!0,hidden:!0,fieldset:"system"},{name:"path",type:"string",title:"Path",readOnly:!0,fieldset:"system"},{name:"url",type:"string",title:"Url",readOnly:!0,fieldset:"system"},{name:"metadata",type:"sanity.imageMetadata",title:"Metadata"},{name:"source",type:"sanity.assetSourceData",title:"Source",readOnly:!0,fieldset:"system"}],preview:{select:{id:"_id",title:"originalFilename",mimeType:"mimeType",size:"size"},prepare:e=>({title:e.title||"string"==typeof e.path&&e.path.split("/").slice(-1)[0],media:{asset:{_ref:e.id}},subtitle:`${e.mimeType} (${(Number(e.size)/1024/1024).toFixed(2)} MB)`})},orderings:[{title:"File size",name:"fileSizeDesc",by:[{field:"size",direction:"desc"}]}]},{name:"sanity.fileAsset",title:"File",type:"document",fieldsets:[{name:"system",title:"System fields",description:"These fields are managed by the system and not editable"}],fields:[{name:"originalFilename",type:"string",title:"Original file name",readOnly:!0},{name:"label",type:"string",title:"Label"},{name:"title",type:"string",title:"Title"},{name:"description",type:"string",title:"Description"},{name:"altText",type:"string",title:"Alternative text"},{name:"sha1hash",type:"string",title:"SHA1 hash",readOnly:!0,fieldset:"system"},{name:"extension",type:"string",title:"File extension",readOnly:!0,fieldset:"system"},{name:"mimeType",type:"string",title:"Mime type",readOnly:!0,fieldset:"system"},{name:"size",type:"number",title:"File size in bytes",readOnly:!0,fieldset:"system"},{name:"assetId",type:"string",title:"Asset ID",readOnly:!0,fieldset:"system"},{name:"uploadId",type:"string",readOnly:!0,hidden:!0,fieldset:"system"},{name:"path",type:"string",title:"Path",readOnly:!0,fieldset:"system"},{name:"url",type:"string",title:"Url",readOnly:!0,fieldset:"system"},{name:"source",type:"sanity.assetSourceData",title:"Source",readOnly:!0,fieldset:"system"}],preview:{select:{title:"originalFilename",path:"path",mimeType:"mimeType",size:"size"},prepare:e=>({title:e.title||e.path.split("/").slice(-1)[0],subtitle:`${e.mimeType} (${(e.size/1024/1024).toFixed(2)} MB)`})},orderings:[{title:"File size",name:"fileSizeDesc",by:[{field:"size",direction:"desc"}]}]},{name:"sanity.imageCrop",title:"Image crop",type:"object",fields:[{name:"top",type:"number"},{name:"bottom",type:"number"},{name:"left",type:"number"},{name:"right",type:"number"}]},{name:"sanity.imageHotspot",title:"Image hotspot",type:"object",fields:[{name:"x",type:"number"},{name:"y",type:"number"},{name:"height",type:"number"},{name:"width",type:"number"}]},{name:"sanity.imageMetadata",title:"Image metadata",type:"object",fieldsets:[{name:"extra",title:"Extra metadata…",options:{collapsable:!0}}],fields:[{name:"location",type:"geopoint"},{name:"dimensions",title:"Dimensions",type:"sanity.imageDimensions",fieldset:"extra"},{name:"palette",type:"sanity.imagePalette",title:"Palette",fieldset:"extra"},{name:"lqip",title:"LQIP (Low-Quality Image Placeholder)",type:"string",readOnly:!0},{name:"blurHash",title:"BlurHash",type:"string",readOnly:!0},{name:"hasAlpha",title:"Has alpha channel",type:"boolean",readOnly:!0},{name:"isOpaque",title:"Is opaque",type:"boolean",readOnly:!0}]},{name:"sanity.imageDimensions",type:"object",title:"Image dimensions",fields:[{name:"height",type:"number",title:"Height",readOnly:!0},{name:"width",type:"number",title:"Width",readOnly:!0},{name:"aspectRatio",type:"number",title:"Aspect ratio",readOnly:!0}]},{name:"sanity.imagePalette",title:"Image palette",type:"object",fields:[{name:"darkMuted",type:"sanity.imagePaletteSwatch",title:"Dark Muted"},{name:"lightVibrant",type:"sanity.imagePaletteSwatch",title:"Light Vibrant"},{name:"darkVibrant",type:"sanity.imagePaletteSwatch",title:"Dark Vibrant"},{name:"vibrant",type:"sanity.imagePaletteSwatch",title:"Vibrant"},{name:"dominant",type:"sanity.imagePaletteSwatch",title:"Dominant"},{name:"lightMuted",type:"sanity.imagePaletteSwatch",title:"Light Muted"},{name:"muted",type:"sanity.imagePaletteSwatch",title:"Muted"}]},{name:"sanity.imagePaletteSwatch",title:"Image palette swatch",type:"object",fields:[{name:"background",type:"string",title:"Background",readOnly:!0},{name:"foreground",type:"string",title:"Foreground",readOnly:!0},{name:"population",type:"number",title:"Population",readOnly:!0},{name:"title",type:"string",title:"String",readOnly:!0}]}];function pM(e){return"string"==typeof e.title?e.title:e.type?pM(e.type):e.name||e.jsonType}let pN=[0,0,1,0];function pI(e){return e.stopPropagation()}function pz(e){return e.stopPropagation()}function p$(e){let{children:t,header:n,id:i,legacy_referenceElement:a,onClose:r,type:o,width:s,autofocus:c}=e,[u,p]=(0,d.useState)(null),m=(0,d.useRef)(null),f=(0,l.jsx)(su,{margins:pN,children:(0,l.jsx)(h.xu,{ref:m,children:t})});return"dialog"===o?(0,l.jsx)(cm,{scrollElement:u,containerElement:m,children:(0,l.jsx)(x.Vq,{__unstable_autoFocus:c,contentRef:p,"data-testid":"edit-portal-dialog",header:n,id:i||"",onClickOutside:r,onClose:r,onDragEnter:pI,onDrop:pz,width:s,children:f})}):(0,l.jsx)(BK,{header:n,onClose:r,referenceElement:a,width:s,containerRef:p,children:(0,l.jsx)(cm,{scrollElement:u,containerElement:m,children:f})})}function pO(e){return e.reduce((e,t)=>t?.children?[...e,t,...pO(t.children)]:[...e,t],[]).map(({children:e,...t})=>t)}function pP(e){let t=(0,tX._2T)(e),{t:n}=(0,tX.$G7)();return(0,d.useMemo)(()=>({...t,value:{...t?.value||{},title:t?.value?.title||n("preview.default.title-fallback")}}),[t,n])}function pF(e){let{item:t,onPathSelect:n,selected:i,isFirst:a,renderMenuItemTitle:r}=e,{value:o}=pP({schemaType:t.schemaType,value:t.value}),{title:s}=o;return(0,l.jsx)(h.Kq,{marginTop:a?void 0:1,children:(0,l.jsx)(h.zx,{mode:"bleed",onClick:()=>n(t.path),selected:i,title:s,padding:2,children:(0,l.jsxs)(h.kC,{align:"center",gap:3,justify:"space-between",children:[(0,l.jsx)(h.kC,{flex:1,children:r(o)}),i&&(0,l.jsx)(h.xv,{size:1,children:(0,l.jsx)(_.KML,{})})]})})})}function pD(e){let{items:t,onPathSelect:n,selectedPath:i,collapsed:a=!1}=e,{t:r}=(0,tX.$G7)(),o=(0,d.useCallback)(e=>eF(t[e].path,i),[t,i]),s=(0,d.useCallback)(e=>{let{title:t,media:n}=e;return a?(0,l.jsxs)(h.kC,{align:"center",gap:1,children:[(0,l.jsx)(h.xv,{size:1,muted:!0,children:"/"}),(0,l.jsx)(tX.ogX,{title:t,media:n,layout:"inline"})]}):(0,l.jsx)(tX.ogX,{title:t,media:n,layout:"inline"})},[a]),c=(0,d.useCallback)(e=>{let a=eF(e.path,i),r=eF(e.path,t[0].path);return(0,l.jsx)(pF,{isFirst:r,item:e,onPathSelect:n,renderMenuItemTitle:s,selected:a})},[s,t,n,i]);return(0,l.jsx)(tX.e8h,{activeItemDataAttr:"data-hovered",ariaLabel:r("tree-editing-dialog.breadcrumbs.menu"),autoFocus:tX.$AP?void 0:"input","data-testid":"tree-editing-breadcrumbs-menu",getItemDisabled:o,itemHeight:33,items:t,overscan:5,padding:1,renderItem:c})}let pR=["bottom-start"],pL=(0,j.zo)(h.kC)``,pB=(0,j.zo)(h.Zb)`
  min-height: max-content;
`,pq=(0,j.zo)(h.kC)(e=>{let{$maxDisplayedItems:t,$itemHeight:n}=e;return(0,j.iv)`
    --item-height: ${n}px;
    --max-items: ${t};
    --list-padding: 0.5rem;

    position: relative;
    max-height: calc(var(--item-height) * var(--max-items) + var(--list-padding));
    min-height: calc((var(--item-height) * 1));
  `}),pV=(0,j.zo)(x.J2)(()=>(0,j.iv)`
    [data-ui='Popover__wrapper'] {
      width: 250px;
      display: flex;
      flex-direction: column;
      border-radius: ${({theme:e})=>e.sanity.radius[3]}px;
      position: relative;
      overflow: hidden;
      overflow: clip;
    }
  `);function pK(e){let{button:t,collapsed:n=!1,items:i,menuTitle:a,onPathSelect:r,parentElement:o,selectedPath:s}=e,[c,u]=(0,d.useState)(!1),p=(0,d.useRef)(null),[m,f]=(0,d.useState)(null),g=(0,d.useCallback)(()=>{c&&(u(!1),m?.focus())},[m,c]),x=(0,d.useCallback)(e=>{let{key:t,shiftKey:n}=e;(n&&"Tab"===t||"Escape"===t||"Tab"===t)&&g()},[g]),y=(0,d.useCallback)(()=>{u(!c)},[c]),b=(0,d.useCallback)(e=>{r(e),u(!1)},[r]);(0,h.Of)(()=>u(!1),()=>[p.current,m]);let v=(0,l.jsx)(pL,{direction:"column",flex:1,forwardedAs:S.ZP,height:"fill",returnFocus:!0,children:(0,l.jsxs)(pq,{$itemHeight:33,$maxDisplayedItems:50,direction:"column",overflow:"hidden",children:[a&&(0,l.jsx)(pB,{borderBottom:!0,padding:3,sizing:"border",children:(0,l.jsx)(h.xu,{paddingX:1,sizing:"border",children:(0,l.jsx)(h.xv,{muted:!0,size:1,textOverflow:"ellipsis",weight:"semibold",title:a,children:a})})}),(0,l.jsx)(pD,{collapsed:n,items:i,onPathSelect:b,selectedPath:s})]})}),j=(0,d.cloneElement)(t,{"aria-expanded":c,"aria-haspopup":"true","data-testid":"tree-editing-breadcrumb-menu-button",id:"tree-breadcrumb-menu-button",onClick:y,ref:f,selected:c});return(0,l.jsx)(pV,{constrainSize:!0,content:v,"data-testid":"tree-editing-breadcrumbs-menu-popover",fallbackPlacements:pR,onKeyDown:x,open:c,placement:"bottom-start",portal:!0,ref:p,referenceBoundary:o,children:j})}let pU=[],pZ=(0,j.zo)(h.zx)(({theme:e})=>{let{bold:t}=b.aQ(e)?.font.text?.weights||{};return(0,j.iv)`
    max-height: 1rem;
    overflow: hidden;
    min-width: 2ch;

    &[data-active='true'] {
      [data-ui='Text']:first-child {
        font-weight: ${t};
      }
    }
  `}),pG=(0,j.zo)(h.xv)`
  overflow: hidden;
  padding: 8px 0;
`,pH=(0,d.forwardRef)(function(e,t){let{item:n,onPathSelect:i,isSelected:a,...r}=e,{value:o}=pP({schemaType:n.schemaType,value:n.value}),s=o.title,c=n.children&&n.children?.length>1;return(0,l.jsx)(pZ,{"data-active":a?"true":"false",mode:"bleed",onClick:()=>i(n.path),padding:1,ref:t,space:2,title:s,...r,children:(0,l.jsxs)(h.kC,{flex:1,align:"center",justify:"flex-start",gap:1,overflow:"hidden",children:[(0,l.jsx)(tX.ogX,{title:s,media:o.media,layout:"inline"}),c&&(0,l.jsx)(h.xv,{size:0,children:(0,l.jsx)(_.v4q,{})})]})})}),pW=(0,d.forwardRef)(function(e,t){let{children:n}=e;return(0,l.jsx)(h.xu,{ref:t,children:(0,l.jsx)(h.xv,{size:1,children:n})})});function pY(e){let{items:t=pU,onPathSelect:n,selectedPath:i}=e,[a,r]=(0,d.useState)(null),o=(0,h.h4)(a),s=(0,d.useMemo)(()=>{let e=o?.border.width;return e?e<500?3:e<700?4:5:5},[o?.border.width]),c=(0,d.useMemo)(()=>{let e=t.length,n=Math.ceil(s/2),i=Math.floor(s/2);return s&&e>s?[...t.slice(0,n-1),t.slice(n-1,e-i),...t.slice(e-i)]:t},[t,s]),u=(0,d.useMemo)(()=>c.map((e,t)=>{let r=`${e}-${t}`,o=t<c.length-1;if(Array.isArray(e))return(0,l.jsxs)(d.Fragment,{children:[(0,l.jsx)(pK,{button:(0,l.jsx)(pZ,{mode:"bleed",padding:1,children:(0,l.jsx)(h.kC,{overflow:"hidden",children:(0,l.jsx)(pG,{size:1,weight:"medium",textOverflow:"ellipsis",children:"..."})})}),collapsed:!0,items:e,onPathSelect:n,parentElement:a,selectedPath:i}),o&&(0,l.jsx)(pW,{children:"/"})]},r);let s=e.children&&e.children?.length>1,u=eF(e.path,i),p=(0,l.jsx)(pH,{item:e,isSelected:u,onPathSelect:n});return(0,l.jsxs)(d.Fragment,{children:[!s&&p,s&&(0,l.jsx)(pK,{button:p,items:e.children||pU,onPathSelect:n,menuTitle:(0,tX.EZo)(e.schemaType),parentElement:a,selectedPath:e.path}),o&&(0,l.jsx)(pW,{children:"/"})]},r)}),[c,i,n,a]);return(0,l.jsx)(h.kC,{align:"center",as:"ol",gap:2,ref:r,children:u})}let pJ=(0,j.zo)(h.kC).attrs({padding:2,align:"center",sizing:"border"})`
  height: 40px;
  min-height: 40px;
`;function pX(e){let{item:t,onPathSelect:n,isFirst:i}=e,{value:a}=pP({value:t.value,schemaType:t.schemaType}),r=a.title;return(0,l.jsx)(h.Kq,{marginTop:i?void 0:1,children:(0,l.jsx)(h.zx,{mode:"bleed",onClick:()=>n(t.path),children:(0,l.jsxs)(h.Kq,{space:2,flex:1,children:[(0,l.jsx)(tX.ogX,{title:r,media:a.media,layout:"inline"}),(0,l.jsx)(h.xu,{children:(0,l.jsx)(h.xv,{muted:!0,size:0,textOverflow:"ellipsis",children:(0,tX.EZo)(t.parentSchemaType)})})]})})})}function pQ(e){let{items:t,onPathSelect:n,textInputElement:i}=e,{t:a}=(0,tX.$G7)(),r=(0,d.useCallback)(e=>{let i=eF(e.path,t[0].path);return(0,l.jsx)(pX,{isFirst:i,item:e,onPathSelect:n})},[t,n]);return(0,l.jsx)(tX.e8h,{activeItemDataAttr:"data-hovered",ariaLabel:a("tree-editing-dialog.search.menu-label"),autoFocus:tX.$AP?void 0:"input",inputElement:i,itemHeight:51,items:t,overscan:5,padding:1,renderItem:r})}let p0=["bottom-start"],p1=(0,j.zo)(h.kC)``,p2=(0,j.zo)(h.kC)(e=>{let{$maxDisplayedItems:t,$itemHeight:n}=e;return(0,j.iv)`
    --item-height: ${n}px;
    --max-items: ${t};
    --list-padding: 0.5rem;

    position: relative;
    max-height: calc(var(--item-height) * var(--max-items) + var(--list-padding));
    min-height: calc((var(--item-height) * 1));
    width: 100%;
  `}),p3=(0,j.zo)(x.J2)(()=>(0,j.iv)`
    [data-ui='Popover__wrapper'] {
      min-width: 250px;
      display: flex;
      flex-direction: column;
      border-radius: ${({theme:e})=>e.sanity.radius[3]}px;
      position: relative;
      overflow: hidden;
      overflow: clip;
    }
  `),p4=(0,j.zo)(h.oi)`
  border-radius: inherit;
`;function p5(e){let{items:t,onPathSelect:n}=e,[i,a]=(0,d.useState)(null),[r,o]=(0,d.useState)(""),{t:s}=(0,tX.$G7)(),c=r.length>0,u=function(e){let[t,n]=(0,d.useState)([]),{observeForPreview:i}=(0,tX.rq_)(),a=(0,d.useMemo)(()=>pO(e),[e]),r=(0,d.useCallback)(e=>{let t=e.path;n(n=>n.some(e=>eF(e.path,t))?n.map(n=>eF(n.path,t)?{...e,title:e?.title}:n):n.concat(e))},[n]);return(0,d.useEffect)(()=>{n([]),a.forEach(e=>{i(e.value,e.schemaType).pipe((0,P.U)(t=>({...e,title:t.snapshot?.title}))).subscribe(r).unsubscribe()})},[a,r,i]),t}(t),p=(0,d.useMemo)(()=>(function(e,t){let n=pO(e),i=t6(t).toLocaleLowerCase();return n?.filter(e=>t6(e.title||"").toLocaleLowerCase().includes(i))?.sort((e,t)=>{let n=e.title?.startsWith(i),a=t.title?.startsWith(i);return n&&!a?-1:!n&&a?1:0})})(u,r),[r,u]),m=(0,d.useCallback)(()=>o(""),[]),f=(0,d.useCallback)(e=>{o(e.target.value)},[]),g=(0,d.useCallback)(e=>{n(e),m()},[n,m]),x=(0,d.useCallback)(e=>{"Escape"===e.key&&(m(),i?.focus())},[m,i]),y=(0,d.useCallback)(()=>{requestAnimationFrame(()=>{m()})},[m]),b=(0,d.useMemo)(()=>0===p.length?(0,l.jsx)(h.Zb,{children:(0,l.jsx)(h.Kq,{padding:4,sizing:"border",space:3,children:(0,l.jsx)(h.xv,{align:"center",muted:!0,size:1,weight:"medium",children:s("tree-editing-dialog.search.no-results-title")})})}):(0,l.jsx)(p1,{direction:"column",flex:1,height:"fill",children:(0,l.jsx)(h.Zb,{children:(0,l.jsx)(p2,{$itemHeight:51,$maxDisplayedItems:10,direction:"column",overflow:"hidden",children:(0,l.jsx)(pQ,{items:p,onPathSelect:g,textInputElement:i})})})}),[p,g,i,s]);return(0,l.jsx)(p3,{constrainSize:!0,content:b,fallbackPlacements:p0,matchReferenceWidth:!0,open:c,placement:"bottom-start",portal:!0,children:(0,l.jsx)(h.Zb,{radius:3,children:(0,l.jsx)(p4,{fontSize:1,icon:_.W1M,onBlur:y,onChange:f,onKeyDown:x,placeholder:s("tree-editing-dialog.search-placeholder"),ref:a,value:r})})})}function p8(e,t){return JSON.stringify(e)===JSON.stringify(t)}function p6(e){return 0!==e.length&&e[e.length-1].hasOwnProperty("_key")}function p7(e,t){return e.every((e,n)=>p8(t[n],e))&&p6(e)}function p9(e){return p6(e)?e:e.slice(0,e.length-1)}function me(e){return e.some(e=>e.children&&e.children.length>0)}let mt={block:"center",behavior:"smooth",scrollMode:"if-needed"},mn=(0,j.zo)(_.XCv)`
  transition: transform 0.2s ease;

  &[data-expanded='true'] {
    transform: rotate(90deg);
  }
`,mi=j.zo.div`
  min-width: 23px;
  max-width: 23px;
`,ma=(0,j.zo)(h.Kq)(({theme:e})=>{let t=b.aQ(e)?.space[3]||0,n=b.aQ(e)?.color._dark,i=M.VG.gray[n?900:200].hex;return(0,j.iv)`
    margin-left: ${t+2}px;
    box-sizing: border-box;
    border-left: 1px solid ${i};
  `}),mr=(0,j.zo)(h.kC)(({theme:e})=>{let t=b.aQ(e)?.color.button.bleed.default.hovered.bg,n=b.aQ(e)?.color.button.bleed.default.pressed.bg,i=b.aQ(e)?.color.button.bleed.default.selected.bg;return(0,j.iv)`
    padding: 2px;
    padding-right: 3px;
    box-sizing: border-box;
    transition: inherit;
    border-radius: ${(0,b.aQ)(e).radius[2]}px;

    &[data-selected='true'] {
      background-color: ${i};
    }

    [data-ui='ExpandButton'],
    [data-ui='NavigateButton'] {
      transition: inherit;
      background-color: inherit;
      box-shadow: unset;
    }

    @media (hover: hover) {
      &:hover {
        &[data-selected='false'] {
          background-color: ${t};
          border-radius: ${(0,b.aQ)(e).radius[2]}px;

          [data-ui='ExpandButton']:hover {
            background-color: ${n};
          }
        }

        [data-ui='ExpandButton']:hover {
          background-color: ${t};
        }
      }
    }
  `});function mo(e){let{item:t,onPathSelect:n,selectedPath:i,siblingHasChildren:a}=e,{children:r}=t,o=r&&r.length>0,[s,u]=(0,d.useState)(!1),[p,m]=(0,d.useState)(null),{t:f}=(0,y.$G)(),{value:g}=pP({schemaType:t.schemaType,value:t.value}),x=(0,d.useMemo)(()=>eF(t.path,i),[t.path,i]),b=(0,d.useMemo)(()=>!p6(t.path),[t.path]),v=(0,d.useMemo)(()=>(0,c.BB)(t.path),[t.path]),j=(0,d.useMemo)(()=>b?(0,tX.EZo)(t.schemaType):g.title,[b,t.schemaType,g.title]),C=(0,d.useMemo)(()=>o?(0,l.jsx)(mn,{"data-expanded":s?"true":"false"}):null,[o,s]),w=(0,d.useMemo)(()=>b?(0,l.jsx)(_.reJ,{}):g.media,[b,g.media]),k=(0,d.useCallback)(()=>n(t.path),[t.path,n]),T=(0,d.useCallback)(()=>u(e=>!e),[]);return(0,d.useEffect)(()=>{(function e(t,n){return t.children?.some(t=>eF(t.path,n)||e(t,n))||!1})(t,i)&&u(!0)},[t,i]),(0,d.useEffect)(()=>{p&&x&&(0,tc.Z)(p,mt)},[p,x]),(0,l.jsxs)(h.Kq,{"aria-expanded":s,as:"li",ref:m,role:"treeitem",space:1,children:[(0,l.jsx)(h.Zb,{"data-as":"button","data-testid":"tree-editing-menu-item",overflow:"hidden",radius:2,tone:"inherit",children:(0,l.jsxs)(mr,{align:"center","data-selected":x,"data-testid":"tree-editing-menu-item-content",children:[C&&(0,l.jsx)(h.zx,{"aria-label":`${f(s?"tree-editing-dialog.sidebar.action.collapse":"tree-editing-dialog.sidebar.action.expand")} ${j}`,"data-testid":`tree-editing-menu-expand-button-${v}`,"data-ui":"ExpandButton",mode:"bleed",onClick:T,padding:2,children:(0,l.jsx)(h.xv,{size:0,muted:!0,children:C})}),!C&&a&&(0,l.jsx)(mi,{}),(0,l.jsx)(h.Kq,{flex:1,children:(0,l.jsx)(h.zx,{"data-testid":`tree-editing-menu-navigate-button-${v}`,"data-ui":"NavigateButton",mode:"bleed",onClick:k,padding:1,title:j,children:(0,l.jsx)(h.kC,{align:"center",children:(0,l.jsx)(tX.ogX,{layout:"inline",media:w,title:j})})})})]})}),s&&o&&(0,l.jsx)(ma,{flex:1,forwardedAs:"ul",paddingLeft:1,role:"group",space:1,children:r.map(e=>{let t=me(r);return(0,l.jsx)(mo,{item:e,onPathSelect:n,selectedPath:i,siblingHasChildren:t},(0,c.BB)(e.path))})})]},v)}let ms=(0,d.memo)(function(e){let{items:t,onPathSelect:n,selectedPath:i}=e;return(0,l.jsx)(h.Kq,{as:"ul","data-testid":"tree-editing-menu",role:"tree",space:2,children:t.map(e=>{let a=me(t);return(0,l.jsx)(mo,{item:e,onPathSelect:n,selectedPath:i,siblingHasChildren:a},(0,c.BB)(e.path))})})}),ml=j.zo.div`
  position: absolute;
  top: 0;
  bottom: 0;
  width: 9px;
  z-index: 201;
  cursor: ew-resize;

  ${({position:e})=>"right"===e?(0,j.iv)`
          right: -4px;
        `:(0,j.iv)`
          left: -4px;
        `}

  /* Border */
  & > span:nth-child(1) {
    display: block;
    border-left: 1px solid var(--card-border-color);
    position: absolute;
    top: 0;
    ${({position:e})=>"right"===e?(0,j.iv)`
            right: 4px;
          `:(0,j.iv)`
            left: 4px;
          `}
    bottom: 0;
    transition: opacity 200ms;
  }

  /* Hover effect */
  & > span:nth-child(2) {
    display: block;
    position: absolute;
    top: 0;
    ${({position:e})=>"right"===e?(0,j.iv)`
            right: 0px;
          `:(0,j.iv)`
            left: 0px;
          `}
    width: 9px;
    bottom: 0;
    background-color: var(--card-border-color);
    opacity: 0;
    transition: opacity 150ms;
  }

  @media (hover: hover) {
    &:hover > span:nth-child(2) {
      opacity: 0.2;
    }
  }
`;function mc(e){let{onResize:t,onResizeStart:n,position:i}=e,a=(0,d.useRef)(0),r=(0,d.useCallback)(e=>{e.preventDefault(),a.current=e.pageX,n();let i=e=>{e.preventDefault(),t(a.current-e.pageX)},r=()=>{window.removeEventListener("mousemove",i),window.removeEventListener("mouseup",r)};window.addEventListener("mousemove",i),window.addEventListener("mouseup",r)},[t,n]);return(0,l.jsxs)(ml,{onMouseDown:r,position:i,children:[(0,l.jsx)("span",{}),(0,l.jsx)("span",{})]})}let md=(0,j.zo)(h.xu)`
  position: relative;
  flex: 1;
  padding-left: 1px;
`;function mu(e){let{as:t,children:n,minWidth:i,maxWidth:a,initialWidth:r,...o}=e,[s,c]=(0,d.useState)(null),u=(0,d.useRef)(),[p,m]=(0,d.useState)(r),h=(0,d.useCallback)(()=>{u.current=s?.offsetWidth},[s]),f=(0,d.useCallback)(e=>{let t=u.current;t&&m(Math.min(Math.max(t-e,i),a))},[i,a]),g=(0,d.useMemo)(()=>p?{flex:"none",width:p}:{minWidth:i,maxWidth:a},[i,a,p]);return(0,l.jsxs)(md,{as:t,...o,ref:c,style:g,children:[n,(0,l.jsx)(mc,{onResize:f,onResizeStart:h,position:"right"})]})}let mp={initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}},mm=(0,j.zo)(h.Zb)`
  flex-direction: column;
`,mh=(0,j.zo)((0,t5.E)(h.Kq))`
  overflow-x: hidden;
`,mf=(0,j.zo)(h.Kq)`
  min-height: max-content;
`,mg=(0,d.memo)(function(e){let{items:t,onPathSelect:n,selectedPath:i,onOpenToggle:a,open:r,title:o}=e,{t:s}=(0,y.$G)(),c=(0,d.useMemo)(()=>({content:s(r?"tree-editing-dialog.sidebar.action.close":"tree-editing-dialog.sidebar.action.open")}),[r,s]),u=(0,l.jsxs)(mm,{borderRight:!r,"data-testid":"tree-editing-sidebar","data-ui":"SidebarCard",display:"flex",forwardedAs:"aside",height:"fill",overflow:"hidden",tone:"transparent",children:[(0,l.jsxs)(pJ,{align:"center",gap:2,children:[(0,l.jsx)(x.zx,{"data-testid":"tree-editing-sidebar-toggle",icon:_.bl6,mode:"bleed",onClick:a,selected:r,tooltipProps:c}),r&&(0,l.jsx)(h.xu,{flex:1,children:(0,l.jsx)(h.xv,{size:1,muted:!0,weight:"medium",textOverflow:"ellipsis",children:o})})]}),r&&(0,l.jsx)(mf,{padding:2,sizing:"border",children:(0,l.jsx)(p5,{items:t,onPathSelect:n})}),(0,l.jsx)(t8.M,{mode:"wait",children:r&&(0,l.jsx)(mh,{animate:"animate",exit:"exit",initial:"initial",overflow:"auto",padding:3,sizing:"border",variants:mp,children:(0,l.jsx)(ms,{items:t,onPathSelect:n,selectedPath:i})})})]});return r?(0,l.jsx)(mu,{maxWidth:450,minWidth:150,initialWidth:250,children:u}):u}),mx=[0,0,1,0],my=(0,d.memo)(function(e){let{breadcrumbs:t,children:n,footer:i,items:a,onPathSelect:r,selectedPath:o,setScrollElement:s,title:c}=e,u=(0,d.useRef)(null),p=(0,d.useRef)(null),[m,f]=(0,d.useState)(!1),g=(0,d.useCallback)(()=>f(e=>!e),[]),x=(0,d.useCallback)(e=>{u.current=e,s?.(e)},[s]);return(0,l.jsxs)(h.kC,{height:"fill",overflow:"hidden",children:[(0,l.jsx)(mg,{items:a,onOpenToggle:g,onPathSelect:r,open:m,selectedPath:o,title:c}),(0,l.jsxs)(h.kC,{direction:"column",flex:1,overflow:"hidden",children:[(0,l.jsx)(pJ,{align:"center",sizing:"border",gap:2,paddingX:4,children:(0,l.jsx)(h.kC,{flex:1,children:(0,l.jsx)(pY,{items:t,onPathSelect:r,selectedPath:o})})}),(0,l.jsx)(h.Zb,{flex:1,id:"tree-editing-form",overflow:"auto",ref:x,children:n&&(0,l.jsx)(tX.Ahg,{containerElement:p,scrollElement:u.current,children:(0,l.jsx)(h.W2,{width:1,ref:p,paddingX:5,paddingY:5,sizing:"border",children:(0,l.jsx)(tX.$rW,{margins:mx,children:n})})})}),i]})]})});function mb(e){let t=e.findIndex(e=>e?.hasOwnProperty("_key"));return -1===t?e:e.slice(0,t)}function mv(e,t){if(!t)return;let n=(0,c.mL)(t),i=n[0];if(i&&(0,w.m$)(e)){let t=e?.fields?.find(e=>e.name===i);if(t){let e=(0,c.BB)(n.slice(1));return e?mv(t.type,e):t}}}function mj(e,t){let n=(0,e6.wq)(t);return"object"===n&&1===e.of.length?e.of[0]:e.of.find(e=>e.name===n)}function mC(e){let{arraySchemaType:t,arrayValue:n,itemPath:i,parentPath:a}=e,r=n.map(e=>{let n=[...a,{_key:e._key}],i=mj(t,e);return(0,w.dD)(i)||!i?null:{children:tX.LZ8,parentSchemaType:t,path:n,schemaType:i,value:e}}).filter(Boolean),o=r.find(e=>eF(e.path,i));return{children:r,parentSchemaType:t,path:i,schemaType:o.schemaType,value:o.value}}let mw=[],mk={breadcrumbs:mw,menuItems:mw,relativePath:mw,rootTitle:""};function mT(e,t){if(0===t.length)return!1;let n=mb(t),i=mv(e,(0,c.BB)(n));if((0,w.M1)(i?.type)){let e=i.type.of.every(e=>e?.hasOwnProperty("to")),t=(0,w.js)(i.type);return!(e||t)}return!1}let mA=[],m_={initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}},mS={duration:.2,ease:"easeInOut"};function mE(e){return e.renderDefault(e)}let mM=(0,j.zo)(h.Vq)(({theme:e})=>{let t=b.aQ(e)?.space[4];return(0,j.iv)`
    [data-ui='DialogCard'] {
      padding: ${t}px;
      box-sizing: border-box;

      // Make the dialog full height
      & > [data-ui='Card']:first-child {
        flex: 1;
      }
    }
  `}),mN=(0,t5.E)(h.kC);function mI(e){let{onPathFocus:t,onPathOpen:n,openPath:i,rootInputProps:a,schemaType:r}=e,{value:o}=a,{t:s}=(0,tX.$G7)(),[u,p]=(0,d.useState)(mk),[f,g]=(0,d.useState)(null),y=(0,d.useRef)(void 0),b=(0,d.useRef)(void 0),v=(0,d.useCallback)(()=>{f?.scrollTo(0,0)},[f]),j=(0,d.useCallback)(e=>{let t=function(e){let{openPath:t}=e,n=mb(t),i=mv(e.schemaType,(0,c.BB)(n)),a=(0,tX.EZo)(i?.type);if(!(0,w.M1)(i?.type)||i?.options?.treeEditing===!1)return mk;let r=[],o=[],s=function e(n){let{schemaType:i,path:a,documentValue:s}=n,l=(0,tX.PtK)(s,a),d=Array.isArray(l)?l:mw,u=function(e){let{arraySchemaType:t,arrayValue:n,documentValue:i,openPath:a,rootPath:r,recursive:o}=e,s=[],l=[],d=[];return t.options?.treeEditing===!1||n.forEach(e=>{let u=[...r,{_key:e._key}],p=mj(t,e);if(!p||(0,w.dD)(p)||p?.options?.treeEditing===!1)return;let m=p?.fields||[],h=[];if(p7(u,a)){let e=mC({arraySchemaType:t,arrayValue:n,itemPath:u,parentPath:r});d.push(e)}m.forEach(e=>{if(e?.type?.options?.treeEditing===!1)return;let t=[...u,e.name],n=(0,tX.PtK)(i,t);if(p8(t,a)&&(s=p9(t)),(0,w.m$)(e.type)){let n=function(e){let t=[],n=[];return function e(i){i.forEach(i=>{let a=[...n,i.name];(0,w.M1)(i.type)&&!(0,w.js)(i.type)&&t.push(a),(0,w.m$)(i.type)&&(n=a,e(i.type.fields),n=n.slice(0,-1))})}(e),t}(e.type.fields);if(0===n.length)return;n.forEach(n=>{let r=[...t,...n],l=mv(e.type,(0,c.BB)(n)),d=(0,tX.PtK)(i,r),u=Array.isArray(d)?d:[];if(!u.length||l.type.options?.treeEditing===!1)return;p8(r,a)&&(s=p9(r));let p=o({documentValue:i,path:r,schemaType:l});h.push({children:p.menuItems,parentSchemaType:e.type,path:r,schemaType:l.type,value:u})})}let r=(0,w.js)(e.type);if((0,w.M1)(e.type)&&n&&!r){if(p7(t,a)){let i=mC({arraySchemaType:e.type,arrayValue:n,itemPath:t,parentPath:u});d.push(i)}let r=o({documentValue:i,path:t,schemaType:e});h.push({children:r?.menuItems||tX.LZ8,parentSchemaType:p,path:t,schemaType:e,value:n});return}r&&(0,c.BB)(a).startsWith((0,c.BB)(t))&&(s=p9(t))}),p8(u,a)&&(s=p9(u)),(0,w.jp)(p?.type)||l.push({children:h,parentSchemaType:t,path:u,schemaType:p,value:e})}),{breadcrumbs:d,menuItems:l,relativePath:s,rootTitle:""}}({arraySchemaType:i?.type,arrayValue:d,documentValue:s,openPath:t,recursive:e,rootPath:a});return u.relativePath.length>0&&(r=u.relativePath),o.unshift(...u.breadcrumbs),u}({schemaType:i,documentValue:e.documentValue,path:n});return{relativePath:r,breadcrumbs:o,menuItems:s.menuItems,rootTitle:a}}(e);if(eF(t,u))return;let n=t.relativePath,i=0!==n.length&&p6(n)?n:u.relativePath;p({...t,relativePath:i})},[u]),C=(0,d.useMemo)(()=>m(j,1e3),[j]),k=(0,d.useCallback)(()=>{C.cancel(),n(mA),p(mk),b.current=void 0,y.current=void 0;let e=i.findIndex(w.Fd);t(i.slice(0,e+1))},[C,t,n,i]),T=(0,d.useCallback)(e=>{C.cancel(),n(e),p6(e)||t(e)},[C,t,n]);return(0,d.useEffect)(()=>{let e=!eF(o,b.current),t=!eF(i,y.current);if(void 0===b.current&&void 0===y.current||t){j({schemaType:r,documentValue:o,openPath:i}),y.current=i;return}if(!(!e&&!t))return b.current=o,y.current=i,C({schemaType:r,documentValue:o,openPath:i}),()=>{C.cancel()}},[r,o,C,i,j]),0===u.relativePath.length?null:(0,l.jsx)(mM,{__unstable_hideCloseButton:!0,animate:!0,"data-testid":"tree-editing-dialog",id:"tree-editing-dialog",onClickOutside:k,onClose:k,padding:0,width:3,children:(0,l.jsx)(my,{breadcrumbs:u.breadcrumbs,items:u.menuItems,onPathSelect:T,selectedPath:u.relativePath,title:u.rootTitle,setScrollElement:g,footer:(0,l.jsx)(h.Zb,{borderTop:!0,children:(0,l.jsx)(h.kC,{align:"center",justify:"flex-end",paddingX:3,paddingY:2,sizing:"border",children:(0,l.jsx)(x.zx,{size:"large","data-testid":"tree-editing-done",text:s("tree-editing-dialog.sidebar.action.done"),onClick:k})})}),children:(0,l.jsx)(t8.M,{initial:!1,mode:"wait",onExitComplete:v,children:(0,l.jsx)(mN,{animate:"animate","data-testid":"tree-editing-dialog-content",direction:"column",exit:"exit",height:"fill",initial:"initial",overflow:"hidden",padding:1,sizing:"border",transition:mS,variants:m_,children:(0,l.jsx)(tX.ytj,{...a,relativePath:u.relativePath,renderDefault:mE})},(0,c.BB)(u.relativePath))})})})}function mz(){return(0,d.useContext)(p.ZU)}function m$(e){let{children:t,legacyEditing:n}=e,i=mz(),a=(0,d.useMemo)(()=>({enabled:!1,legacyEditing:!!(i.legacyEditing||n)}),[n,i.legacyEditing]);return(0,l.jsx)(p.ZU.Provider,{value:a,children:t})}function mO(e){let{t}=(0,tX.$G7)(),{onInsert:n,schemaTypes:i}=e,a=uw({insertMenuProps:{...e.insertMenuOptions,schemaTypes:e.schemaTypes??[],onSelect:t=>{e.onInsert("before",t)}},popoverProps:{referenceElement:e.referenceElement,placement:"top-end",fallbackPlacements:["bottom-end"]}}),r=uw({insertMenuProps:{...e.insertMenuOptions,schemaTypes:e.schemaTypes??[],onSelect:t=>{e.onInsert("after",t)}},popoverProps:{referenceElement:e.referenceElement,placement:"bottom-end",fallbackPlacements:["top-end"]}}),o=(0,d.useCallback)(()=>{i&&(1===i.length?n("before",i[0]):a.send({type:"toggle"}))},[a,n,i]),s=(0,d.useCallback)(()=>{i&&(1===i.length?n("after",i[0]):r.send({type:"toggle"}))},[r,n,i]),c=(0,d.useMemo)(()=>i?(0,l.jsx)(x.sN,{text:1===i.length?t("inputs.array.action.add-before"):`${t("inputs.array.action.add-before")}...`,icon:_.ySV,onClick:o}):null,[o,t,i]),u=(0,d.useMemo)(()=>i?(0,l.jsx)(x.sN,{text:1===i.length?t("inputs.array.action.add-after"):`${t("inputs.array.action.add-after")}...`,icon:_.oty,onClick:s}):null,[s,t,i]);return{insertBefore:{...a,menuItem:c},insertAfter:{...r,menuItem:u}}}let mP=(0,j.zo)(h.Zb)`
  border-top-right-radius: inherit;
  border-top-left-radius: inherit;
  height: 100%;
  position: relative;

  @media (hover: hover) {
    &:hover {
      filter: brightness(95%);
    }
  }

  &:focus:focus-visible {
    box-shadow: 0 0 0 2px var(--card-focus-ring-color);
  }
`,mF={portal:!0,tone:"default"};function mD(e){let{schemaType:t,parentSchemaType:n,path:i,readOnly:a,onRemove:r,value:o,open:s,onInsert:c,onCopy:u,onFocus:p,onOpen:m,onClose:f,changed:g,focused:y,children:b,inputProps:{renderPreview:v}}=e,{t:j}=i1(),C=mz(),w=n?.options?.treeEditing===!1,k=w||C.legacyEditing,T=s&&(!C.enabled||k),A=n.options?.sortable!==!1,S=n.of,E=(0,d.useRef)(null);cS(E,s),sB(y,(e,t)=>{!e&&t&&E.current&&E.current?.focus()});let M=o._resolvingInitialValue,N=(0,d.useCallback)(()=>{c({items:[{...o,_key:sQ()}],position:"after"})},[c,o]),I=(0,d.useCallback)(()=>{u({items:[{...o,_key:sQ()}]})},[u,o]),z=(0,d.useCallback)((e,t)=>{c({items:[le(t)],position:e})},[c]),$=oa(i,!0),O=(0,d.useMemo)(()=>0===$.length?null:(0,l.jsx)(oW,{presence:$,maxAvatars:1}),[$]),P=od(i,!0),F=(0,d.useMemo)(()=>0===P.length?null:(0,l.jsx)(h.xu,{paddingX:1,paddingY:3,children:(0,l.jsx)(sw,{validation:P,__unstable_showSummary:!0})}),[P]),D=P.some(e=>"error"===e.level),R=P.some(e=>"warning"===e.level),[L,B]=(0,d.useState)(null),{insertBefore:q,insertAfter:V}=mO({schemaTypes:S,insertMenuOptions:n.options?.insertMenu,onInsert:z,referenceElement:L}),K=(0,d.useMemo)(()=>a?null:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(x.j2,{ref:B,onOpen:()=>{q.send({type:"close"}),V.send({type:"close"})},button:(0,l.jsx)(aI,{selected:!!q.state.open||!!V.state.open||void 0}),id:`${e.inputId}-menuButton`,menu:(0,l.jsxs)(h.v2,{children:[(0,l.jsx)(x.sN,{text:j("inputs.array.action.remove"),tone:"critical",icon:_.XHJ,onClick:r}),(0,l.jsx)(x.sN,{text:j("inputs.array.action.copy"),icon:_.TIy,onClick:I}),(0,l.jsx)(x.sN,{text:j("inputs.array.action.duplicate"),icon:_.bhu,onClick:N}),q.menuItem,V.menuItem]}),popover:mF}),q.popover,V.popover]}),[q,V,I,N,r,e.inputId,a,j]),U=function({readOnly:e,hasErrors:t,hasWarnings:n}){return e?"transparent":t?"critical":n?"caution":"default"}({readOnly:a,hasErrors:D,hasWarnings:R}),Z=(0,l.jsx)(uI,{menu:K,presence:O,validation:F,tone:U,radius:2,border:!0,dragHandle:A,selected:T,readOnly:a,children:(0,l.jsxs)(mP,{tone:"inherit",overflow:"auto",forwardedAs:"button","data-ui":"PreviewCard","data-as":"button",type:"button",flex:1,tabIndex:0,disabled:M,onClick:m,ref:E,onFocus:p,__unstable_focusRing:!0,children:[v({schemaType:t,value:o,layout:"media",withBorder:!1,withShadow:!1}),M&&(0,l.jsx)(aW,{fill:!0})]})}),G=pM(t);return(0,l.jsxs)(m$,{legacyEditing:w,children:[(0,l.jsx)(i9,{path:i,isChanged:g,hasFocus:!!y,children:Z}),T&&(0,l.jsx)(p$,{header:a?j("inputs.array.action.view",{itemTypeTitle:G}):j("inputs.array.action.edit",{itemTypeTitle:G}),type:n?.options?.modal?.type||"dialog",width:n?.options?.modal?.width??1,id:o._key,onClose:f,autofocus:y,legacy_referenceElement:E.current,children:b})]})}let mR=[];function mL(e){let{arrayFunctions:t=uT,elementProps:n,members:i,onChange:a,onInsert:r,onItemMove:o,onUpload:s,readOnly:c,renderAnnotation:u,renderBlock:p,renderField:m,renderInlineBlock:f,renderInput:g,renderPreview:x,resolveUploader:y,schemaType:b,value:v=mR}=e,{t:j}=i1(),C=(0,d.useCallback)(e=>{r({items:[e],position:"before",referenceItem:0})},[r]),w=(0,d.useCallback)(e=>{r({items:[e],position:"after",referenceItem:-1})},[r]),k=b.options?.sortable!==!1,T=(0,d.useCallback)(({key:e,...t})=>(0,l.jsx)(mD,{...t},e),[]),A=(0,d.useMemo)(()=>i.map(e=>e.key),[i]);return(0,l.jsxs)(h.Kq,{space:2,children:[(0,l.jsx)(uj,{types:b.of,resolveUploader:y,onUpload:s,...n,tabIndex:0,children:(0,l.jsxs)(h.Kq,{"data-ui":"ArrayInput__content",space:2,children:[i?.length===0&&(0,l.jsx)(h.Zb,{padding:3,border:!0,radius:2,children:(0,l.jsx)(h.xv,{align:"center",muted:!0,size:1,children:b.placeholder||(0,l.jsx)(l.Fragment,{children:j("inputs.array.no-items-label")})})}),i?.length>0&&(0,l.jsx)(h.Zb,{border:!0,radius:1,children:(0,l.jsx)(uo,{columns:[2,3,4],gap:3,padding:1,margin:1,items:A,onItemMove:o,sortable:k,children:i.map(e=>(0,l.jsxs)(us,{sortable:k,id:e.key,flex:1,children:["item"===e.kind&&(0,l.jsx)(s3,{member:e,renderAnnotation:u,renderBlock:p,renderInlineBlock:f,renderItem:T,renderField:m,renderInput:g,renderPreview:x}),"error"===e.kind&&(0,l.jsx)(uP,{sortable:k,member:e,readOnly:c})]},e.key))})})]})}),(0,l.jsx)(t,{onChange:a,onItemAppend:w,onItemPrepend:C,onValueCreate:le,readOnly:c,schemaType:b,value:v})]})}let mB=(0,j.zo)(h.Zb)`
  position: relative;
  border: 1px solid transparent;
  transition: border-color 250ms;

  .${d9} & {
    border-color: var(--card-shadow-umbra-color);
    box-shadow:
      0 0 0 0,
      0 8px 17px 2px var(--card-shadow-umbra-color),
      0 3px 14px 2px var(--card-shadow-penumbra-color),
      0 5px 5px -3px var(--card-shadow-ambient-color);
  }

  &:hover {
    border-color: var(--card-shadow-umbra-color);
  }

  &[aria-selected='true'] {
    border-color: var(--card-focus-ring-color);
  }
`;function mq(e){let{validation:t,selected:n,tone:i,presence:a,focused:r,children:o,dragHandle:s,menu:c,footer:u,readOnly:p}=e,m=(0,d.useRef)(null);return sB(r,(e,t)=>{!e&&t&&m.current?.focus()}),(0,l.jsx)(mB,{ref:m,selected:n,"aria-selected":n,radius:1,padding:1,tone:i,children:(0,l.jsxs)(h.Kq,{space:1,children:[(0,l.jsxs)(h.kC,{align:"center",gap:1,children:[s&&(0,l.jsx)(u_,{paddingY:3,readOnly:p}),(0,l.jsx)(h.xu,{flex:1,children:o}),(a||t||c)&&(0,l.jsxs)(h.kC,{align:"center",flex:"none",gap:2,style:{lineHeight:0},children:[a&&(0,l.jsx)(h.xu,{flex:"none",children:a}),t&&(0,l.jsx)(h.xu,{flex:"none",children:t}),c]})]}),u]})})}let mV=(0,j.zo)(h.Zb)`
  max-width: ${({theme:e})=>e.sanity.container[1]}px;
`;function mK(e){let{value:t,onFocus:n,vertical:i,...a}=e,[r,o]=(0,d.useState)(!1),s=(0,d.useRef)(null),{t:c}=i1();(0,h.Of)(()=>o(!1),()=>[s.current]);let u=(0,d.useCallback)(e=>{("Escape"===e.key||"Tab"===e.key)&&o(!1)},[]),p=(0,d.useCallback)(()=>{o(e=>!e)},[]),m=(0,e6.wq)(t);return(0,l.jsx)(x.J2,{open:r,ref:s,onKeyDown:u,portal:!0,constrainSize:!0,tone:"default",content:(0,l.jsx)(mV,{margin:1,padding:3,onKeyDown:u,tabIndex:0,overflow:"auto",children:(0,l.jsxs)(h.Kq,{space:4,children:[(0,l.jsx)(h.xu,{children:(0,l.jsx)(h.xv,{weight:"medium",children:c("inputs.array.error.type-is-incompatible-title")})}),(0,l.jsx)(h.xv,{size:1,children:(0,l.jsx)(rm,{t:c,i18nKey:"inputs.array.error.current-schema-not-declare-description",values:{typeName:m}})}),(0,l.jsx)(h.xu,{children:(0,l.jsxs)(h.xv,{size:1,children:[(0,l.jsx)(_.sLo,{})," ",c("inputs.array.error.can-delete-but-no-edit-description")]})}),(0,l.jsxs)(h.Kq,{space:2,children:[(0,l.jsx)(h.xv,{size:1,weight:"medium",children:c("inputs.array.error.json-representation-description")}),(0,l.jsx)(h.Zb,{padding:2,overflow:"auto",border:!0,children:(0,l.jsx)(h.EK,{size:1,as:"pre",language:"json",children:JSON.stringify(t,null,2)})})]})]})}),children:(0,l.jsx)(h.Zb,{as:"button",type:"button",radius:2,tone:"inherit",paddingX:2,paddingY:3,flex:1,onFocus:n,onClick:p,onKeyDown:u,__unstable_focusRing:!0,...a,children:(0,l.jsxs)(h.kC,{align:"center",children:[(0,l.jsx)(h.xu,{marginRight:3,children:(0,l.jsx)(h.xv,{children:(0,l.jsx)(_.Tzq,{})})}),(0,l.jsx)(h.xu,{flex:1,children:(0,l.jsx)(h.xv,{size:1,textOverflow:"ellipsis",children:(0,l.jsx)(rm,{t:c,i18nKey:"inputs.array.error.type-is-incompatible-prompt",values:{typeName:m}})})})]})})})}let mU={portal:!0,tone:"default"};function mZ(e){let{member:t,sortable:n,onRemove:i,readOnly:a}=e,r=(0,d.useId)(),{t:o}=i1();return(0,l.jsx)(h.xu,{paddingX:1,children:(0,l.jsx)(mq,{dragHandle:n,readOnly:!!a,tone:"caution",menu:(0,l.jsx)(x.j2,{button:(0,l.jsx)(aI,{}),id:`${r}-menuButton`,menu:(0,l.jsx)(h.v2,{children:(0,l.jsx)(x.sN,{text:o("inputs.array.action.remove-invalid-item"),tone:"critical",icon:_.XHJ,onClick:i})}),popover:mU}),children:"INVALID_ITEM_TYPE"===t.error.type?(0,l.jsx)(mK,{value:t.error.value}):(0,l.jsx)("div",{children:o("inputs.array.error.unexpected-error",{error:t.error.type})})})})}let mG=[];function mH(e){let{arrayFunctions:t=uT,elementProps:n,members:i,onChange:a,onInsert:r,onItemMove:o,onUpload:s,focusPath:c,readOnly:u,renderAnnotation:m,renderBlock:f,renderField:g,renderInlineBlock:x,renderInput:y,renderItem:b,renderPreview:v,resolveUploader:j,schemaType:C,value:A=mG}=e,{t:_}=i1(),[S,E]=(0,d.useState)(null),{space:M}=(0,h.Fg)().sanity,N=(0,d.useCallback)(e=>{r({items:[e],position:"before",referenceItem:0})},[r]),I=(0,d.useCallback)(e=>{r({items:[e],position:"after",referenceItem:-1})},[r]),z=function(e,t){let n=(0,d.useRef)(e),i=n.current,a=t(i,e);return(0,d.useEffect)(()=>{a||(n.current=e)}),a?i:e}((0,d.useMemo)(()=>i.map(e=>e.key),[i]),tl),{scrollElement:$,containerElement:O}=function(){let e=(0,d.useContext)(p.f0);if(!e)throw Error("VirtualizerScrollInstance: missing context value");return e}(),P=(0,d.useRef)(null),F=(0,d.useMemo)(()=>(0,w.Fd)(c[0])?c[0]._key:c[0],[c]),D=(0,d.useCallback)(e=>{let t={...e};if(null!==S&&(t.startIndex=Math.min(e.startIndex,S),t.endIndex=Math.max(e.endIndex,S)),F){let e=z.findIndex(e=>e===F);-1!==e&&(t.startIndex=Math.min(t.startIndex,e),t.endIndex=Math.max(t.endIndex,e))}return(0,T.MK)(t)},[S,F,z]),R=(0,d.useCallback)((e,t)=>{if(!e.scrollElement)return;let n=e.scrollElement,i=()=>{let e=O.current?.getBoundingClientRect().top??0,i=P.current?.getBoundingClientRect().top??0;t(n.scrollTop-Math.floor(i-e))};return i(),e.scrollElement.addEventListener("scroll",i,{capture:!1,passive:!0}),()=>{n.removeEventListener("scroll",i)}},[O]),L=(0,d.useCallback)(()=>53,[]),B=(0,k.MG)({count:i.length,estimateSize:L,getScrollElement:(0,d.useCallback)(()=>$,[$]),observeElementOffset:R,rangeExtractor:D,getItemKey:(0,d.useCallback)(e=>z[e],[z]),scrollToFn:(e,t,n)=>{e!==n.scrollOffset&&(0,T.sA)(e,t,n)}}),q=B.getVirtualItems(),V=(0,d.useCallback)(e=>{let{active:t}=e;E(t.data.current?.sortable?.index)},[]),K=(0,d.useCallback)(()=>{E(null)},[]),U=C.options?.sortable!==!1;return(0,l.jsxs)(h.Kq,{space:2,ref:P,children:[(0,l.jsx)(uj,{$radius:2,types:C.of,resolveUploader:j,onUpload:s,...n,tabIndex:0,children:(0,l.jsx)(h.Kq,{"data-ui":"ArrayInput__content",space:2,children:0===i.length?(0,l.jsx)(h.Zb,{padding:3,border:!0,radius:2,children:(0,l.jsx)(h.xv,{align:"center",muted:!0,size:1,children:C.placeholder||(0,l.jsx)(l.Fragment,{children:_("inputs.array.no-items-label")})})}):(0,l.jsx)(h.Zb,{border:!0,radius:2,style:{boxSizing:"border-box",height:`${B.getTotalSize()+q.length*M[1]+M[1]}px`,width:"100%",position:"relative"},children:(0,l.jsx)(uo,{axis:"y",gap:1,paddingY:1,items:z,onItemMove:o,onItemMoveStart:V,onItemMoveEnd:K,sortable:U,style:{position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${q[0].start}px)`},children:q.map(t=>{let n=i[t.index];return(0,l.jsxs)(us,{ref:B.measureElement,sortable:U,"data-index":t.index,id:n.key,children:["item"===n.kind&&(0,l.jsx)(s3,{member:n,renderAnnotation:m,renderBlock:f,renderField:g,renderInlineBlock:x,renderInput:y,renderItem:b,renderPreview:v}),"error"===n.kind&&(0,l.jsx)(mZ,{readOnly:u,sortable:U,member:n,onRemove:()=>e.onItemRemove(n.key)})]},t.key)})})})})}),(0,l.jsx)(t,{onChange:a,onItemAppend:I,onItemPrepend:N,onValueCreate:le,readOnly:u,schemaType:C,value:A})]})}function mW(e){return e.schemaType.options?.layout==="grid"?(0,l.jsx)(mL,{...e}):(0,l.jsx)(mH,{...e})}function mY(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if("object"!=typeof e&&!Array.isArray(e))return e===t;if(e._key&&e._key===t._key)return!0;if(Array.isArray(e))return!e.length===t.length&&e.every((n,i)=>mY(e[i],t[i]));let n=Object.keys(e),i=Object.keys(e);return n.length===i.length&&n.every(n=>mY(e[n],t[n]))}function mJ(e,t){return!!e&&e.some(e=>mY(e,t))}let mX=[];function mQ(e){let{renderPreview:t,schemaType:n,onChange:i,onPathFocus:a,value:r=[],readOnly:o,elementProps:s,path:c,changed:u}=e,p=(0,d.useMemo)(()=>(n.options?.list||mX).map((e,t)=>(0,w.fU)(e)?e:{...e,_key:`auto-generated-${t}`}),[n.options?.list]),m=(0,d.useCallback)((e,t)=>{if(!e&&(0,w.fU)(t)){i(sZ([{_key:t._key}]));return}let n=p.filter(n=>mY(t,n)?e:mJ(r,n));i(n.length>0?sU(n):sZ())},[i,p,r]),f=(0,d.useCallback)(e=>{a([e])},[a]),g=n.options?.layout==="grid";return(0,l.jsx)(i9,{path:c,isChanged:u,hasFocus:!1,children:(0,l.jsx)(h.rj,{gap:2,columns:g?Math.min(p.length,4):1,tabIndex:0,...s,children:p.map((e,i)=>{let a=n.of.find(t=>t.name===(0,e6.wq)(e)),s=mJ(r,e),c=!a;return(0,l.jsxs)(h.kC,{align:"center",as:"label",muted:c,children:[(0,l.jsx)(h.XZ,{disabled:c,checked:s,onChange:t=>m(t.currentTarget.checked,e),onFocus:()=>f(i),readOnly:o}),(0,l.jsx)(h.xu,{flex:1,marginLeft:2,children:a?t({layout:"default",schemaType:a,value:e}):(0,l.jsx)(h.Zb,{tone:"caution",radius:2,children:(0,l.jsx)(s5,{value:e,onFocus:()=>f(i)})})})]},i)})})})}function m0(e){let{schemaType:t,onChange:n,value:i=[],readOnly:a,path:r,changed:o,onIndexFocus:s,elementProps:c}=e,u=(0,d.useMemo)(()=>(t.options?.list||[]).map(e=>e&&"object"==typeof e&&"title"in e&&"value"in e?{title:e.title||tt(String(e.value)),value:e.value}:{title:tt(String(e)),value:e}),[t.options?.list]),p=(e,t)=>{let a=u.map(e=>e.value).filter(n=>n===t?e:i.includes(n));n(a.length>0?sU(a):sZ())},m=t.options?.layout==="grid";return(0,l.jsx)(i9,{path:r,isChanged:o,hasFocus:!1,children:(0,l.jsx)(h.rj,{gap:2,columns:m?Math.min(u.length,4):1,...c,children:u.map((e,n)=>{let r=t.of.find(t=>t.name===(0,e6.wq)(e.value)),o=i.includes(e.value),c=!r;return(0,l.jsxs)(h.kC,{align:"center",as:"label",muted:c,children:[(0,l.jsx)(h.XZ,{disabled:c,checked:o,onChange:t=>p(t.currentTarget.checked,e.value),onFocus:()=>s(n),readOnly:a}),(0,l.jsx)(h.xu,{padding:2,children:(0,l.jsx)(h.xv,{children:e.title})}),!r&&(0,l.jsx)(mK,{value:e,onFocus:()=>s(n)})]},n)})})})}function m1(e){return(0,w.M1)(e.schemaType)?(0,l.jsx)(mQ,{...e}):(0,l.jsx)(m0,{...e})}function m2(e){let{schemaType:t,readOnly:n,children:i,onValueCreate:a,onItemAppend:r}=e,o=(0,d.useId)(),{t:s}=i1(),c=(0,d.useCallback)(e=>{r(a(e))},[a,r]),u=(0,d.useCallback)(()=>{c(t.of[0])},[t,c]),p=(0,d.useMemo)(()=>({constrainSize:!0,portal:!0}),[]),m=t.of.length>1?"inputs.array.action.add-item-select-type":"inputs.array.action.add-item";return n?(0,l.jsx)(x.u,{portal:!0,content:s("inputs.array.read-only-label"),children:(0,l.jsx)(h.rj,{children:(0,l.jsx)(x.zx,{icon:_.dtP,mode:"ghost",disabled:!0,size:"large",text:s(m)})})}):(0,l.jsxs)(h.rj,{gap:1,style:{gridTemplateColumns:"repeat(auto-fit, minmax(100px, 1fr))"},children:[1===t.of.length?(0,l.jsx)(x.zx,{icon:_.dtP,mode:"ghost",onClick:u,size:"large",text:s(m)}):(0,l.jsx)(x.j2,{button:(0,l.jsx)(x.zx,{icon:_.dtP,mode:"ghost",size:"large",text:s(m)}),id:o||"",menu:(0,l.jsx)(h.v2,{children:t.of.map((e,t)=>{let n=(0,w.dD)(e)&&1===(e.to||[]).length&&e.to[0].icon,i=e.icon||e.type?.icon||n;return(0,l.jsx)(x.sN,{text:e.title||e.type?.name,onClick:()=>c(e),icon:i},t)})}),popover:p}),i]})}let m3={portal:!0,tone:"default",placement:"left",constrainSize:!0},m4=(0,d.memo)(function(e){let{types:t,onInsert:n}=e,{t:i}=i1();return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(m5,{pos:"before",types:t,onInsert:n,text:i("inputs.array.action.add-before"),icon:_.ySV}),(0,l.jsx)(m5,{pos:"after",types:t,onInsert:n,text:i("inputs.array.action.add-after"),icon:_.oty})]})});function m5(e){let{types:t,onInsert:n,pos:i,text:a,icon:r}=e;return t?.length===1?(0,l.jsx)(x.sN,{text:a,icon:r,onClick:()=>n(i,t[0])},i):(0,l.jsx)(x.kS,{text:a,popover:m3,children:t?.map(e=>l.jsx(x.sN,{icon:e.icon,text:e.title,onClick:()=>n(i,e)},e.name))},i)}let m8={portal:!0,tone:"default"},m6=(0,d.forwardRef)(function(e,t){let{sortable:n,value:i,insertableTypes:a,onInsert:r,onCopy:o,onRemove:s,readOnly:c,inputId:u,validation:p,children:m,presence:f,schemaType:g}=e,y=p.filter(e=>"error"===e.level).length>0,b=p.filter(e=>"warning"===e.level).length>0,v=(0,d.useCallback)((e,t)=>{r({position:e,items:[s6(t)]})},[r]),j=(0,d.useCallback)(()=>{i&&r({position:"after",items:[i]})},[r,i]),C=(0,d.useCallback)(()=>{o({items:[i]})},[o,i]),w=(0,d.useMemo)(()=>y?"critical":b?"caution":void 0,[y,b]),{t:k}=i1(),T=(0,l.jsx)(x.j2,{button:(0,l.jsx)(aI,{}),id:`${u}-menuButton`,popover:m8,menu:(0,l.jsxs)(h.v2,{children:[(0,l.jsx)(x.sN,{text:k("inputs.array.action.remove"),tone:"critical",icon:_.XHJ,onClick:s}),(0,l.jsx)(x.sN,{text:k("inputs.array.action.copy"),icon:_.TIy,onClick:C}),(0,l.jsx)(x.sN,{text:k("inputs.array.action.duplicate"),icon:_.bhu,onClick:j}),(0,l.jsx)(m4,{types:a,onInsert:v})]})});return(0,l.jsx)(mq,{tone:w,readOnly:!!c,menu:!c&&T,dragHandle:n,presence:0===f.length?null:(0,l.jsx)(oW,{presence:f,maxAvatars:1}),validation:p.length>0?(0,l.jsx)(h.xu,{paddingX:1,paddingY:3,children:(0,l.jsx)(sw,{validation:p})}):null,children:(0,l.jsx)(h.kC,{align:g?"flex-end":"center",ref:t,children:(0,l.jsx)(h.kC,{align:"flex-end",flex:1,children:(0,l.jsx)(h.xu,{flex:1,marginRight:2,children:m})})})})});function m7({schemaType:e}){let{t}=i1();return(0,l.jsx)(h.Zb,{padding:3,border:!0,radius:2,children:(0,l.jsx)(h.xv,{align:"center",muted:!0,size:1,children:e.placeholder||t("inputs.array.no-items-label")})})}class m9 extends d.PureComponent{_element=null;constructor(e){super(e),this.state={disableTransition:!1}}handleAppend=e=>{let{value:t=[],onIndexFocus:n,onItemAppend:i}=this.props;i(e),n(t.length)};handlePrepend=e=>{let{onIndexFocus:t,value:n=[],onItemPrepend:i}=this.props;i(e),t(n.length)};handleSortEnd=e=>{let{onIndexFocus:t,onMoveItem:n,value:i}=this.props;i&&n(e),t(e.toIndex)};handleItemMoveStart=()=>{this.setState({disableTransition:!1})};handleItemMoveEnd=()=>{this.setState({disableTransition:!0})};focus(){this._element&&this._element.focus()}getSnapshotBeforeUpdate(e){let{focusPath:t=[],value:n=[]}=e,{focusPath:i=[],value:a=[]}=this.props;if(t[0]===i[0]&&n.length!==a.length){let e=i[0],t=window.getSelection();if(!(t?.focusNode instanceof HTMLElement))return null;let n=t.focusNode?.querySelector("input,textarea");return n instanceof HTMLInputElement?{prevFocusedIndex:e,restoreSelection:{text:t.toString(),start:n.selectionStart,end:n.selectionEnd,value:n.value}}:{}}return null}componentDidUpdate(e,t,n){let{onIndexFocus:i}=this.props;if(n?.restoreSelection&&e.value){let t=e.value[n.prevFocusedIndex],a=function(e,t,n){let i=t-1,a=t,r=e.length;for(;i>-1||a<r;){let t=e[a];if(a<r&&n(t,a))return a;let o=e[i];if(i>-1&&n(o,i))return i;i--,a++}return -1}(this.props.value||[],n.prevFocusedIndex,e=>e===t);if(-1===a)return;let r=this._element?.querySelector(`[data-item-index='${a}'] input,textarea`);if(r instanceof HTMLInputElement){r.focus();try{r.setSelectionRange(n.restoreSelection.start,n.restoreSelection.end)}catch{}}i(a)}}renderArrayItem=e=>{let{schemaType:t}=this.props,{key:n,...i}=e,a=t.options?.sortable!==!1;return(0,l.jsx)(m6,{...i,sortable:a,insertableTypes:t.of},n)};render(){let{schemaType:e,members:t,readOnly:n,renderInput:i,onUpload:a,onItemRemove:r,resolveUploader:o,elementProps:s,arrayFunctions:c=m2,changed:d}=this.props,u=!n&&!1!==e7(e,"options.sortable"),p=t.map(e=>({id:`${e.key}-${"item"===e.kind?e.item.value:"error"}`,member:e}));return(0,l.jsxs)(h.Kq,{space:2,"data-testid":"array-primitives-input",children:[(0,l.jsx)(uj,{types:e.of,resolveUploader:o,onUpload:a,...s,tabIndex:0,children:(0,l.jsx)(h.Kq,{space:1,children:0===p.length?(0,l.jsx)(m7,{schemaType:e}):(0,l.jsx)(h.Zb,{padding:1,border:!0,children:(0,l.jsx)(uo,{onItemMove:this.handleSortEnd,onItemMoveStart:this.handleItemMoveStart,onItemMoveEnd:this.handleItemMoveEnd,items:p.map(e=>e.id),sortable:u,gap:1,children:p.map(({member:e,id:t},a)=>(0,l.jsxs)(us,{id:t,sortable:u,disableTransition:this.state.disableTransition,children:["item"===e.kind&&(0,l.jsx)(i9,{path:e.item.path,isChanged:d,hasFocus:!1,children:(0,l.jsx)(s9,{member:e,renderItem:this.renderArrayItem,renderInput:i})}),"error"===e.kind&&(0,l.jsx)(mZ,{readOnly:n,sortable:u,member:e,onRemove:()=>r(a)})]},e.key))})})})}),(0,l.jsx)(c,{onChange:this.props.onChange,onItemAppend:this.handleAppend,onItemPrepend:this.handlePrepend,onValueCreate:s6,readOnly:this.props.readOnly,schemaType:this.props.schemaType,value:this.props.value})]})}}let he=(0,j.zo)(h.Zb)`
  line-height: 1;
`,ht=(0,j.zo)(h.xu)`
  align-self: center;
`,hn=(0,j.zo)(h.xu)`
  line-height: 0;
`;function hi(e){let{date:t,focused:n,isCurrentMonth:i,isToday:a,onSelect:r,selected:o}=e,s=(0,d.useCallback)(()=>{r(t)},[t,r]);return(0,l.jsx)("div",{"aria-selected":o,"data-ui":"CalendarDay",children:(0,l.jsx)(h.Zb,{"aria-label":t.toDateString(),"aria-pressed":o,as:"button",__unstable_focusRing:!0,"data-weekday":!0,"data-focused":n?"true":"",role:"button",tabIndex:-1,onClick:s,padding:2,radius:2,selected:o,tone:a||o?"primary":"default",children:(0,l.jsx)(h.xv,{muted:!o&&!i,size:1,style:{textAlign:"center"},weight:i?"medium":"regular",children:t.getDate()})})})}let ha=tY(0,24),hr=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],ho=[1,2,3,4,5,6],hs=(e,t)=>{let n=(0,tp.Z)(e);return(0,tm.Z)({start:n,end:(0,th.Z)(n)},{weekStartsOn:7===t?0:t})},hl=e=>e.map(e=>[e,...ho.map(t=>(0,tf.Z)(e,t))]),hc=e=>{let{weekInfo:t}=a7();return hl(hs(e,t.firstDay)).map(e=>({number:(0,tg.Z)(e[0]),days:e}))};function hd(e){let{weekInfo:{firstDay:t}}=a7(),n=1===t?e.weekDayNames:[e.weekDayNames[6],...e.weekDayNames.slice(0,6)];return(0,l.jsx)(h.xu,{"aria-hidden":e.hidden||!1,"data-ui":"CalendarMonth",children:(0,l.jsxs)(h.rj,{gap:1,style:{gridTemplateColumns:"repeat(7, minmax(44px, 46px))"},children:[n.map(e=>(0,l.jsx)(h.xu,{paddingY:2,children:(0,l.jsx)(h.xv,{size:1,weight:"medium",style:{textAlign:"center"},children:e})},e)),hc(e.date).map((t,n)=>t.days.map((t,i)=>{let a=e.focused&&(0,tx.Z)(t,e.focused),r=e.selected&&(0,tx.Z)(t,e.selected),o=(0,tx.Z)(t,new Date),s=e.focused&&(0,ty.Z)(t,e.focused);return(0,l.jsx)(hi,{date:t,focused:a,isCurrentMonth:s,isToday:o,onSelect:e.onSelect,selected:r},`${n}-${i}`)}))]})})}let hu={dayPresets:!1,timePresets:!1},hp=(0,d.forwardRef)(function({onChange:e,onBlur:t,onKeyPress:n,value:i,...a},r){let[o,s]=(0,d.useState)(),c=(0,d.useCallback)(e=>{s(e.currentTarget.value)},[]),u=(0,d.useCallback)(t=>{t.currentTarget.value!==`${i}`&&e&&e(t),s(void 0)},[e,i]),p=(0,d.useCallback)(e=>{u(e),t&&t(e)},[u,t]),m=(0,d.useCallback)(e=>{"Enter"===e.key&&u(e),n&&n(e)},[u,n]);return(0,l.jsx)(h.oi,{...a,"data-testid":"date-input",ref:r,value:void 0===o?i:o,onChange:c,onBlur:p,onKeyPress:m})}),hm=e=>{let{onChange:t,...n}=e,i=(0,d.useCallback)(e=>{let n=parseInt(e.currentTarget.value,10);isNaN(n)||t(n)},[t]);return(0,l.jsx)(hp,{...n,fontSize:1,onChange:i,inputMode:"numeric",padding:2,radius:2})},hh=(0,l.jsx)("span",{"data-preserve-focus":!0,style:{overflow:"hidden",position:"absolute",outline:"none"},tabIndex:-1}),hf={padding:2},hg=(0,d.forwardRef)(function(e,t){let{selectTime:n,onFocusedDateChange:i,selectedDate:a=new Date,focusedDate:r=a,timeStep:o=1,onSelect:s,labels:c,...u}=e,p=(0,d.useCallback)(e=>i(e),[i]),m=(0,d.useCallback)(e=>p((0,tb.Z)((0,tv.Z)(r,e),1)),[r,p]),f=(0,d.useCallback)(e=>m(Number(e.currentTarget.value)),[m]),g=(0,d.useCallback)(e=>p((0,tj.Z)(r,e)),[r,p]),y=(0,d.useCallback)(e=>p((0,tC.Z)(r,e)),[r,p]),b=(0,d.useCallback)(e=>{s((0,tw.Z)((0,tk.Z)(e,a.getHours()),a.getMinutes()))},[s,a]),v=(0,d.useCallback)(e=>{let t=Number(e.currentTarget.value);s((0,tw.Z)(a,t))},[s,a]),j=(0,d.useCallback)(e=>{let t=Number(e.currentTarget.value);s((0,tk.Z)(a,t))},[s,a]);(0,d.useCallback)((e,t)=>{s((0,tk.Z)((0,tw.Z)(a,t),e))},[s,a]);let C=(0,d.useRef)(null);(0,d.useImperativeHandle)(t,()=>C.current);let w=(0,d.useCallback)(()=>{C.current?.querySelector('[data-focused="true"]')?.focus()},[C]),k=(0,d.useCallback)(e=>{if(!hr.includes(e.key))return;let t=e.currentTarget;if(e.preventDefault(),t.hasAttribute("data-calendar-grid")){w();return}"ArrowUp"===e.key&&i((0,tf.Z)(r,-7)),"ArrowDown"===e.key&&i((0,tf.Z)(r,7)),"ArrowLeft"===e.key&&i((0,tf.Z)(r,-1)),"ArrowRight"===e.key&&i((0,tf.Z)(r,1)),C.current?.querySelector("[data-preserve-focus]")?.focus()},[C,w,i,r]);(0,d.useEffect)(()=>{w()},[w]),(0,d.useEffect)(()=>{document.activeElement?.matches("[data-calendar-grid], [data-calendar-grid] [data-preserve-focus]")&&w()},[C,w,r]),(0,d.useCallback)(()=>b((0,tf.Z)(new Date,-1)),[b]),(0,d.useCallback)(()=>b(new Date),[b]),(0,d.useCallback)(()=>b((0,tf.Z)(new Date,1)),[b]);let T=(0,d.useCallback)(()=>s(new Date),[s]);return(0,l.jsxs)(h.xu,{"data-ui":"Calendar",...u,ref:C,children:[(0,l.jsxs)(h.xu,{padding:2,children:[hu.dayPresets,(0,l.jsxs)(h.kC,{children:[(0,l.jsx)(h.xu,{flex:1,children:(0,l.jsx)(hx,{onChange:f,monthNames:c.monthNames,value:r?.getMonth()})}),(0,l.jsx)(h.xu,{marginLeft:2,children:(0,l.jsx)(hy,{moveFocusedDate:g,labels:{goToNextYear:c.goToNextYear,goToPreviousYear:c.goToPreviousYear},onChange:y,value:r.getFullYear()})})]}),(0,l.jsxs)(h.xu,{"data-calendar-grid":!0,onKeyDown:k,marginTop:2,overflow:"hidden",tabIndex:0,children:[(0,l.jsx)(hd,{weekDayNames:c.weekDayNamesShort,date:r,focused:r,onSelect:b,selected:a}),hh]})]}),n&&(0,l.jsxs)(h.xu,{padding:2,style:{borderTop:"1px solid var(--card-border-color)"},children:[(0,l.jsxs)(h.kC,{align:"center",children:[(0,l.jsxs)(h.kC,{align:"center",flex:1,children:[(0,l.jsx)(h.xu,{children:(0,l.jsx)(h.Ph,{"aria-label":c.selectHour,fontSize:1,padding:2,radius:2,value:a?.getHours(),onChange:j,children:ha.map(e=>(0,l.jsx)("option",{value:e,children:`${e}`.padStart(2,"0")},e))})}),(0,l.jsx)(h.xu,{paddingX:1,children:(0,l.jsx)(h.xv,{size:1,children:":"})}),(0,l.jsx)(h.xu,{children:(0,l.jsx)(h.Ph,{"aria-label":c.selectMinute,fontSize:1,padding:2,radius:2,value:a?.getMinutes(),onChange:v,children:tY(0,60,o).map(e=>(0,l.jsx)("option",{value:e,children:`${e}`.padStart(2,"0")},e))})})]}),(0,l.jsx)(h.xu,{marginLeft:2,children:(0,l.jsx)(x.zx,{text:c.setToCurrentTime,mode:"bleed",onClick:T})})]}),hu.timePresets]})]})});function hx(e){let{onChange:t,value:n,monthNames:i}=e;return(0,l.jsx)(h.kC,{flex:1,gap:1,children:(0,l.jsx)(h.xu,{flex:1,children:(0,l.jsx)(h.Ph,{fontSize:1,radius:2,value:n,onChange:t,padding:2,children:i.map((e,t)=>(0,l.jsx)("option",{value:t,children:e},t))})})})}function hy(e){let{moveFocusedDate:t,onChange:n,value:i,labels:a}=e,r=(0,d.useCallback)(()=>t(-12),[t]),o=(0,d.useCallback)(()=>t(12),[t]);return(0,l.jsxs)(h.kC,{gap:1,children:[(0,l.jsx)(x.zx,{"aria-label":a.goToPreviousYear,onClick:r,mode:"bleed",icon:_.wyc,tooltipProps:{content:"Previous year"},...hf}),(0,l.jsx)(hm,{value:i,onChange:n,radius:0,style:{width:48}}),(0,l.jsx)(x.zx,{"aria-label":a.goToNextYear,onClick:o,mode:"bleed",icon:_.XCv,tooltipProps:{content:"Next year"},...hf})]})}let hb=(0,d.forwardRef)(function(e,t){let{value:n=new Date,onChange:i,calendarLabels:a,...r}=e,[o,s]=(0,d.useState)(),c=(0,d.useCallback)(e=>{i(e),s(void 0)},[i]);return(0,l.jsx)(hg,{...r,labels:a,ref:t,selectedDate:n,onSelect:c,focusedDate:o||n,onFocusedDateChange:s})}),hv=(0,d.forwardRef)(function(e,t){let{value:n,inputValue:i,onInputChange:a,onChange:r,selectTime:o,timeStep:s,calendarLabels:c,constrainSize:u=!0,...p}=e,m=(0,d.useRef)(null),f=(0,d.useRef)(null),g=(0,d.useRef)(null);(0,d.useImperativeHandle)(t,()=>f.current);let[y,b]=(0,d.useState)(!1);(0,h.Of)(()=>b(!1),()=>[m.current]);let v=(0,d.useCallback)(()=>{f.current?.focus(),f.current?.select()},[]),j=(0,d.useCallback)(e=>{"Escape"===e.key&&b(!1)},[]),C=(0,d.useCallback)(()=>b(!0),[]),w=(0,l.jsx)(h.kC,{style:{padding:"5px"},children:(0,l.jsx)(x.zx,{"aria-label":c.ariaLabel,ref:g,icon:_.Que,mode:"bleed",onClick:C,style:{display:"block"},"data-testid":"select-date-button",tooltipProps:{content:c.tooltipText}})});return(0,l.jsx)(hp,{ref:f,...p,value:i,onChange:a,suffix:y?(0,l.jsx)(h.li,{zOffset:1e3,children:(0,l.jsx)(x.J2,{constrainSize:u,"data-testid":"date-input-dialog",portal:!0,content:(0,l.jsx)(h.xu,{overflow:"auto",children:(0,l.jsx)(S.ZP,{onDeactivation:v,children:(0,l.jsx)(hb,{calendarLabels:c,selectTime:o,timeStep:s,onKeyUp:j,value:n,onChange:r})})}),open:!0,placement:"bottom",ref:m,children:w})}):w})}),hj=new Date,hC=(0,d.forwardRef)(function(e,t){let{id:n,deserialize:i,formatInputValue:a,onChange:r,parseInputValue:o,placeholder:s,readOnly:c,selectTime:u,serialize:p,timeStep:m,value:f,...g}=e,[x,y]=(0,d.useState)(null),{t:b}=i1();(0,d.useEffect)(()=>{y(null)},[f]);let v=(0,d.useCallback)(e=>{let t=e.currentTarget.value,n=""===t?null:o(t);null===n?(r(null),typeof f>"u"&&x&&y(null)):n.isValid?r(p(n.date)):y(t)},[o,r,f,x,p]),j=(0,d.useCallback)(e=>{r(e?p(e):null)},[p,r]),C=(0,d.useRef)(null);(0,d.useImperativeHandle)(t,()=>C.current);let w=x?o(x):f?i(f):null,k=x||(w?.isValid?a(w.date):f);return c?(0,l.jsx)(h.oi,{value:k,readOnly:!0}):(0,l.jsx)(hv,{...g,calendarLabels:e.calendarLabels,id:n,selectTime:u,timeStep:m,placeholder:s||b("inputs.datetime.placeholder",{example:a(hj)}),ref:C,value:w?.date,inputValue:k||"",readOnly:!!c,onInputChange:v,onChange:j,customValidity:w?.error})});function hw(e){return{ariaLabel:e("calendar.button.aria-label"),goToTomorrow:e("calendar.action.go-to-tomorrow"),goToToday:e("calendar.action.go-to-today"),goToYesterday:e("calendar.action.go-to-yesterday"),goToNextMonth:e("calendar.action.go-to-next-month"),goToPreviousMonth:e("calendar.action.go-to-previous-month"),goToNextYear:e("calendar.action.go-to-next-year"),goToPreviousYear:e("calendar.action.go-to-previous-year"),setToCurrentTime:e("calendar.action.set-to-current-time"),selectHour:e("calendar.action.select-hour"),selectMinute:e("calendar.action.select-minute"),tooltipText:e("calendar.button.tooltip-text"),monthNames:[e("calendar.month-names.january"),e("calendar.month-names.february"),e("calendar.month-names.march"),e("calendar.month-names.april"),e("calendar.month-names.may"),e("calendar.month-names.june"),e("calendar.month-names.july"),e("calendar.month-names.august"),e("calendar.month-names.september"),e("calendar.month-names.october"),e("calendar.month-names.november"),e("calendar.month-names.december")],weekDayNamesShort:[e("calendar.weekday-names.short.monday"),e("calendar.weekday-names.short.tuesday"),e("calendar.weekday-names.short.wednesday"),e("calendar.weekday-names.short.thursday"),e("calendar.weekday-names.short.friday"),e("calendar.weekday-names.short.saturday"),e("calendar.weekday-names.short.sunday")],setToTimePreset:(t,n)=>e("calendar.action.set-to-time-preset",{time:t,date:n})}}let hk=e=>(0,eq.Qc)(e,eq.K_),hT=e=>(0,eq.WU)(e,eq.K_);function hA(e){return e.toISOString()}function h_(e){let t=new Date(e);return t instanceof Date&&!isNaN(t.valueOf())?{isValid:!0,date:t}:{isValid:!1,error:`Invalid date value: "${e}"`}}let hS=(e,t)=>{if("function"==typeof e)throw Error(`Schema type "${t?.name||"<not-found>"}"'s \`validation\` was not run though \`inferFromSchema\``);return e?Array.isArray(e)?e:[e]:[]};function hE(e,t){for(let n of hS(e?.validation,e))for(let e of n._rules)if(e.flag===t)return e;return null}function hM(e){let{schemaType:t,validationError:n,elementProps:i}=e,a=hE(t,"min"),r=hE(t,"integer"),o=hE(t,"precision"),s="number"==typeof a?.constraint&&a?.constraint>=0,c=r||o?.constraint===0;return(0,l.jsx)(h.oi,{...i,type:"number",step:"any",inputMode:s?c?"numeric":"decimal":"text",customValidity:n,placeholder:t.placeholder,pattern:s?"[d]*":void 0,max:Number.MAX_SAFE_INTEGER,min:Number.MIN_SAFE_INTEGER,"data-testid":"number-input"})}let hN=(0,d.forwardRef)(function(e,t){let{onClick:n}=e,i=(0,d.useCallback)(()=>{n?.(e.name)},[e.name,n]);return(0,l.jsx)(x.OK,{"data-testid":`group-tab-${e.name}`,id:`${e.name}-tab`,label:e.title,ref:t,...e,onClick:i})}),hI=e=>{let{name:t,title:n,...i}=e,{selected:a}=e;return(0,l.jsx)("option",{title:n,value:t,id:`${t}-tab`,"aria-controls":i["aria-controls"],"data-testid":`group-select-${t}`,"aria-selected":a?"true":"false",children:n||t})},hz=(0,j.zo)(h.iX)`
  /* Hide on small screens */
  &[data-eq-max~='0'] [data-ui='TabList'] {
    display: none;
  }

  /* Hide on medium to large screens */
  [data-ui='Select'] {
    display: none;
  }

  /* Show on small screens */
  &[data-eq-max~='0'] [data-ui='Select'] {
    display: block;
  }
`,h$=({inputId:e,groups:t,onClick:n,shouldAutoFocus:i=!0,disabled:a})=>{let{t:r}=i1();return(0,l.jsx)(h.td,{space:2,"data-testid":"field-group-tabs",children:t.map(t=>{let o=t.i18n?.title?r(t.i18n.title.key,{ns:t.i18n.title.ns}):t.title||t.name;return(0,l.jsx)(hN,{"aria-controls":`${e}-field-group-fields`,autoFocus:i&&t.selected,disabled:a||t.disabled,icon:t?.icon,name:t.name,onClick:n,selected:!!t.selected,title:o},`${e}-${t.name}-tab`)})})},hO=({disabled:e,groups:t,inputId:n,onSelect:i,shouldAutoFocus:a=!0})=>{let r=(0,d.useCallback)(e=>{i(e.currentTarget.value)},[i]),{t:o}=i1();return(0,l.jsx)(h.Ph,{"aria-label":o("inputs.object.field-group-tabs.aria-label"),autoFocus:a,"data-testid":"field-group-select",disabled:e,fontSize:2,muted:!0,onChange:r,value:t.find(e=>e.selected)?.name,children:t.map(e=>{let t=e.i18n?.title?o(e.i18n.title.key,{ns:e.i18n.title.ns}):e.title||e.name;return(0,l.jsx)(hI,{"aria-controls":`${n}-field-group-fields`,disabled:e.disabled,name:e.name,selected:!!e.selected,title:t},`${n}-${e.name}-tab`)})})},hP=(0,d.memo)(function({disabled:e=!1,onClick:t,...n}){let i=(0,d.useCallback)(e=>{t?.(e)},[t]);return(0,l.jsxs)(hz,{"data-testid":"field-group-root",children:[(0,l.jsx)(h$,{...n,disabled:e,onClick:i}),(0,l.jsx)(hO,{...n,disabled:e,onSelect:i})]})}),hF=(0,j.zo)(h.Zb)`
  margin-bottom: ${({$level:e,theme:t})=>0===e?0:-1*t.sanity.space[5]}px;
  padding-bottom: ${({$level:e,theme:t})=>t.sanity.space[4]}px;
`,hD=(0,j.zo)(h.rj)`
  align-items: flex-end;
`;function hR(e){let{fieldNames:t,onChange:n,readOnly:i,value:a}=e,r=t.length,o=(0,d.useCallback)(e=>{n(sZ([e]))},[n]),{t:s}=i1();return(0,l.jsxs)(lq,{status:"warning",title:(0,l.jsx)(l.Fragment,{children:s("inputs.object.unknown-fields.warning.title",{count:r})}),children:[(0,l.jsx)(h.xv,{as:"p",muted:!0,size:1,children:(0,l.jsx)(l.Fragment,{children:s("inputs.object.unknown-fields.warning.description",{count:r})})}),(0,l.jsxs)(lG,{marginTop:4,open:lR,title:s("inputs.object.unknown-fields.warning.details.title"),children:[(0,l.jsx)(h.xu,{marginBottom:3,children:(0,l.jsx)(h.xv,{as:"p",muted:!0,size:1,children:(0,l.jsx)(l.Fragment,{children:s("inputs.object.unknown-fields.warning.details.description",{count:r})})})}),(0,l.jsx)(h.Kq,{as:"ul",space:3,children:t.map(e=>(0,l.jsx)(hL,{fieldName:e,onUnsetClick:o,readOnly:i,value:a?.[e]},e))})]})]})}function hL({fieldName:e,onUnsetClick:t,readOnly:n,value:i}){let a=(0,d.useCallback)(()=>{t(e)},[e,t]),{t:r}=i1();return(0,l.jsxs)(h.Zb,{as:"li",overflow:"hidden",radius:2,shadow:1,tone:"caution",children:[(0,l.jsx)(h.Zb,{padding:3,shadow:1,tone:"inherit",children:(0,l.jsx)(h.EK,{size:1,children:e})}),(0,l.jsx)(h.xu,{overflow:"auto",padding:3,children:(0,l.jsx)(h.EK,{language:"json",size:1,children:JSON.stringify(i,null,2)})}),n&&(0,l.jsx)(h.xu,{padding:3,children:(0,l.jsx)(h.xv,{as:"p",muted:!0,size:1,children:(0,l.jsx)(rm,{t:r,i18nKey:"inputs.object.unknown-fields.read-only.description"})})}),!n&&(0,l.jsx)(h.Zb,{padding:3,shadow:1,tone:"inherit",children:(0,l.jsx)(x.zx,{icon:_.XHJ,mode:"ghost",onClick:a,size:"large",tone:"critical",text:r("inputs.object.unknown-fields.remove-field-button.text")})})]})}let hB=(0,j.zo)(h.Kq)`
  // Disable focus ring for the object block. We instead highlight the left border on the fieldset
  // for level > 0 to signal that you have focused on the object
  &:focus {
    outline: none;
  }
`,hq=(0,d.memo)(function(e){let{__internal_arrayEditingModal:t=null,groups:n,id:i,members:a,onChange:r,onFieldGroupSelect:o,renderAnnotation:s,renderBlock:c,renderField:u,renderInlineBlock:p,renderInput:m,renderItem:h,renderPreview:f,schemaType:g,path:x,level:y,value:b,onPathFocus:v}=e,j=(0,d.useRef)(null),{columns:C}=g.options||{},k=(0,d.useMemo)(()=>"root"!==i&&!(x.length>0&&(0,w.Fd)(tJ(x))),[i,x]),T=(0,d.useMemo)(()=>{if(!g.fields)return null;let e=g.fields.map(e=>e.name),t=Object.keys(b||{}).filter(t=>!t.startsWith("_")&&!e.includes(t));return 0===t.length?null:(0,l.jsx)(hR,{fieldNames:t,value:b,onChange:r})},[r,g.fields,b]),A=(0,d.useMemo)(()=>n.find(({selected:e})=>e),[n]),_=(0,d.useCallback)(e=>{k&&e.target===j.current&&v(tX.LZ8)},[k,v]),S=(0,d.useCallback)(()=>(0,l.jsx)(ce,{members:a,renderAnnotation:s,renderBlock:c,renderField:u,renderInlineBlock:p,renderInput:m,renderItem:h,renderPreview:f}),[a,s,c,u,p,m,h,f]);return 0===a.length?null:(0,l.jsxs)(l.Fragment,{children:[t,(0,l.jsxs)(hB,{space:6,tabIndex:k?0:void 0,onFocus:_,ref:j,children:[n.length>0?(0,l.jsx)(hF,{$level:y,"data-testid":"field-groups",children:(0,l.jsx)(hP,{groups:n,inputId:i,onClick:o,shouldAutoFocus:!1})}):null,(0,l.jsx)(d.Fragment,{children:C?(0,l.jsx)(hD,{columns:C,gap:4,marginTop:1,children:S()}):S()},A?.name),T]})]})}),hV=(e,t)=>{let n=t.options?.maxLength;return e?ia(e,{truncate:"number"==typeof n?n:200,symbols:!0}):""};async function hK(e,t,n){return e&&(t.options?.slugify||hV)(e,t,n)}async function hU(e,t,n){return"function"==typeof e?e(t,n):c.U2(t,e)}function hZ(e){let{validationError:t,elementProps:n}=e;return(0,l.jsx)(h.oi,{...n,customValidity:t,"data-testid":"string-input"})}let hG=(0,j.zo)(h.Kx)`
  &[data-as='textarea'] {
    resize: vertical;
  }
`;function hH({value:e,onClearValue:t}){let n=(0,d.useMemo)(()=>!!e?._ref,[e?._ref]),{t:i}=i1(),a=(0,l.jsx)(rm,{t:i,i18nKey:"inputs.reference.cross-dataset.feature-disabled-description",components:{DocumentationLink:({children:e})=>(0,l.jsx)("a",{href:"https://www.sanity.io/docs/cross-dataset-references",target:"_blank",rel:"noreferrer",children:e})}});return(0,l.jsxs)(h.Zb,{tone:"caution",padding:4,border:!0,radius:2,"data-testid":"alert-cross-dataset-reference-feature-disabled",children:[(0,l.jsxs)(h.kC,{gap:4,marginBottom:n?4:void 0,children:[(0,l.jsx)(h.xu,{children:(0,l.jsx)(h.xv,{size:1,children:(0,l.jsx)(_.foC,{})})}),(0,l.jsxs)(h.Kq,{space:3,children:[(0,l.jsx)(h.xv,{as:"h2",size:1,weight:"medium",children:i("inputs.reference.cross-dataset.feature-unavailable-title")}),n&&(0,l.jsxs)(h.Kq,{space:3,children:[(0,l.jsx)(h.xv,{as:"p",size:1,children:a}),(0,l.jsx)(h.xv,{as:"p",size:1,children:i("inputs.reference.cross-dataset.feature-disabled-actions")})]}),!n&&(0,l.jsx)(h.xv,{as:"p",size:1,children:a})]})]}),t&&n&&(0,l.jsx)(x.zx,{icon:_.X5P,mode:"ghost",onClick:t,text:i("inputs.reference.action.clear"),width:"fill"})]})}let hW=(0,j.zo)(h.kC)`
  /* this is a hack to avoid layout jumps while previews are loading
  or the message is not tall enough to fill the card
  there's probably better ways of solving this */
  min-height: 36px;
`;function hY(e){let{refType:t,showStudioUrlIcon:n,hasStudioUrl:i,showTypeLabel:a,availability:r,preview:o,id:s,dataset:c,projectId:u}=e,p=r?.reason==="NOT_FOUND",m=r?.reason==="PERMISSION_DENIED",f=o.published?.media,{t:g}=i1(),y=(0,d.useMemo)(()=>{if(f){let e="u">typeof f?.asset&&(0,eU.JZ)(f),t=(0,d.isValidElement)(f);return e||t?function({dimensions:e}){return t?f:(0,l.jsx)("img",{src:eZ({dataset:c,projectId:u}).image(f).withOptions(e).url(),alt:g("inputs.reference.image-preview-alt-text"),referrerPolicy:"strict-origin-when-cross-origin"})}:null}return t?.icon?(0,d.createElement)(t.icon):null},[f,c,u,t?.icon,g]);return(0,l.jsxs)(hW,{align:"center",justify:"center",flex:1,"data-testid":"preview",children:[r?.available?(0,l.jsx)(h.xu,{flex:1,children:(0,l.jsx)(B5,{title:o.published?.title,subtitle:o.published?.subtitle,media:y||!1})}):(0,l.jsx)(h.xu,{flex:1,children:(0,l.jsx)(h.kC,{align:"center",children:(0,l.jsx)(h.xu,{flex:1,paddingY:2,children:(0,l.jsx)(h.xv,{muted:!0,children:g("inputs.reference.error.document-unavailable-title")})})})}),(0,l.jsx)(h.xu,{paddingLeft:3,children:(0,l.jsxs)(h.gF,{space:4,children:[t&&a&&(0,l.jsx)(h.Ct,{mode:"outline",children:t.title||t.type}),(m||p)&&(0,l.jsx)(h.xu,{children:(0,l.jsx)(x.u,{portal:!0,content:g(p?"inputs.reference.referenced-document-does-not-exist":"inputs.reference.referenced-document-insufficient-permissions",{documentId:s}),children:(0,l.jsx)(F0,{tone:"default",children:m?(0,l.jsx)(_.vaB,{}):(0,l.jsx)(_.BHU,{})})})}),!(p||m)&&n&&(0,l.jsx)(h.xu,{children:(0,l.jsx)(x.u,{portal:!0,content:g(i?"inputs.reference.document-opens-in-new-tab":"input.reference.document-cannot-be-opened.failed-to-resolve-url"),children:(0,l.jsx)(F0,{size:1,tone:"default",muted:!i,children:(0,l.jsx)(_.buG,{})})})})]})})]})}let hJ=()=>{},hX={isLoading:!0,result:void 0,error:void 0,retry:hJ},hQ={isLoading:!1,result:void 0,error:void 0,retry:hJ};function h0(e,t){let[n,i]=(0,d.useState)(0),a=(0,d.useCallback)(()=>{i(e=>e+1)},[]),r=(0,d.useMemo)(()=>({_id:e._id,_type:e._type}),[e._id,e._type]),o=(0,d.useMemo)(()=>r._id?t(r).pipe((0,P.U)(e=>({isLoading:!1,result:e,error:void 0,retry:a,retryAttempt:n})),(0,ef.O)(hX),(0,F.K)(e=>(console.error(e),(0,N.of)({isLoading:!1,result:void 0,error:e,retry:a,retryAttempt:n})))):(0,N.of)(hQ),[r,t,a,n]);return(0,eR.m)(o,hX)}function h1(){return Bi(rz).config().projectId}function h2(e){let{isLoading:t,result:n,error:i}=h0(e.document,e.getReferenceInfo),{t:a}=i1(),r=h1();if(t)return(0,l.jsxs)(h.Kq,{space:2,padding:1,children:[(0,l.jsx)(h.Qr,{style:{maxWidth:320},radius:1,animated:!0}),(0,l.jsx)(h.Qr,{style:{maxWidth:200},radius:1,size:1,animated:!0})]});if(i)return(0,l.jsx)(h.Kq,{space:2,padding:1,children:(0,l.jsx)(lq,{title:a("inputs.reference.error.failed-to-load-document-title"),children:(0,l.jsx)(h.xv,{muted:!0,size:1,children:i.message})})});if(!n)return null;if(n.availability?.reason==="PERMISSION_DENIED")return(0,l.jsx)(h.Kq,{space:2,padding:1,children:a("inputs.reference.error.missing-read-permissions-description")});let o=e.referenceType.to.find(e=>e.type===n.type);return o?n&&o&&(0,l.jsx)(hY,{id:n.id,availability:n.availability,preview:n.preview,refType:o,dataset:e.referenceType.dataset,projectId:r,showTypeLabel:e.referenceType.to.length>1}):(0,l.jsx)(h.Kq,{space:2,padding:1,children:a("inputs.reference.error.invalid-search-result-type-title",{returnedType:n.type})})}function h3(e){let{value:t,type:n,showStudioUrlIcon:i,hasStudioUrl:a,referenceInfo:r}=e,{t:o}=i1(),s=h1();if(r.isLoading||r.error)return(0,l.jsxs)(h.Kq,{space:2,padding:1,children:[(0,l.jsx)(h.Qr,{style:{maxWidth:320},radius:1,animated:!r.error}),(0,l.jsx)(h.Qr,{style:{maxWidth:200},radius:1,size:1,animated:!r.error})]});let c=n.to.length>1,d=r.result?.type,u=n.to.find(e=>e.type===d);return r.result.availability?.available&&!u?(0,l.jsx)(h.Kq,{space:2,padding:2,children:(0,l.jsx)(h.xv,{as:"p",children:(0,l.jsx)(rm,{t:o,i18nKey:"inputs.reference.cross-dataset.invalid-type",values:{typeName:d||"unknown"},components:{JsonValue:()=>(0,l.jsx)("pre",{children:JSON.stringify(t,null,2)})}})})}):(0,l.jsx)(hY,{availability:r.result.availability,hasStudioUrl:a,showStudioUrlIcon:i,preview:r.result.preview,refType:u,projectId:s,dataset:n.dataset,id:t._ref,showTypeLabel:c})}let h4=(0,j.zo)(x.J2)`
  & > div {
    overflow: auto;
    -webkit-overflow-scrolling: touch;
  }
`,h5=(0,j.zo)(h.xv)`
  word-break: break-word;
`,h8=["top-start","bottom-start"],h6=(0,d.forwardRef)(function(e,t){let{searchString:n,loading:i,portalRef:a,referenceElement:r,...o}=e,{t:s}=i1(),c=e.options&&e.options.length>0,u=(0,d.useCallback)(({content:e,hidden:t,inputElement:o,onMouseEnter:d,onMouseLeave:u},p)=>(0,l.jsx)(h4,{"data-testid":"autocomplete-popover",placement:"bottom-start",fallbackPlacements:h8,arrow:!1,constrainSize:!0,onMouseEnter:d,onMouseLeave:u,content:(0,l.jsx)("div",{ref:p,children:c?e:(0,l.jsx)(h.xu,{padding:4,children:(0,l.jsx)(h.kC,{align:"center",height:"fill",justify:"center",children:(0,l.jsx)(h5,{align:"center",muted:!0,children:(0,l.jsx)(rm,{t:s,i18nKey:"inputs.reference.no-results-for-query",values:{searchTerm:n||""}})})})})}),open:!i&&!t,ref:a,portal:!0,referenceElement:r||o,matchReferenceWidth:!0}),[c,s,n,i,a,r]);return(0,l.jsx)(h.F2,{...o,ref:t,renderPopover:u})}),h7={hits:[],isLoading:!1},h9=()=>!0,fe=["_ref"];function ft(e){let{changed:t,focused:n,focusPath:i,getReferenceInfo:a,onChange:r,onPathFocus:o,onSearch:s,path:c,readOnly:u,schemaType:p,validation:m,value:f,elementProps:g}=e,{t:y}=i1(),b=h1(),[v,j]=(0,d.useState)(h7),C=(0,d.useCallback)(e=>{if(!e){r(sZ()),o([]);return}if(!v.hits.find(t=>t.id===e))throw Error("Selected an item that wasnt part of the result set");r(sU({_type:p.name,_ref:iS(e),_projectId:b,_dataset:p.dataset,_weak:p.weak,_key:f?._key})),o([])},[f?._key,v.hits,p.name,p.dataset,p.weak,b,r,o]),w=(0,d.useCallback)(()=>{r(sZ())},[r]),k=(0,d.useCallback)(e=>{"Escape"===e.key&&o?.([])},[o]),T=(0,d.useCallback)(e=>a(e,p),[a,p]),A=h0((0,d.useMemo)(()=>({_id:f?._ref}),[f?._ref]),T),S=Bm("crossDatasetReferences"),E=(0,d.useRef)(null),M=1===i.length&&"_ref"===i[0],z=g.ref;sB({hasFocusAt:M,ref:f?._ref},(e,t)=>{let n=e?.ref!==t.ref;(e?.hasFocusAt!==t.hasFocusAt||n)&&t.hasFocusAt&&z.current?.focus()});let $=f?._weak?"weak":"strong",O=!0===p.weak?"weak":"strong",D=!!f?._ref,R=(0,d.useCallback)(()=>{r(!0===p.weak?sU(!0,["_weak"]):sZ(["_weak"]))},[r,p]),{push:L}=(0,h.pm)(),B=(0,d.useMemo)(()=>m.filter(e=>"error"===e.level),[m]),q=(0,d.useCallback)(e=>{e.currentTarget===g.ref.current&&o?.([])},[g.ref,o]),V=(0,d.useCallback)(e=>g.onBlur(e),[g]),K=(0,d.useCallback)(e=>{e.currentTarget===g.ref.current&&o?.(fe)},[g.ref,o]),U=(0,d.useCallback)(()=>{o?.(fe)},[o]),Z=(0,d.useId)(),G=(0,eR.H)(e=>e.pipe((0,eh.h)(iw),(0,ea.x)(),(0,ec.w)(e=>(0,I.z)((0,N.of)({isLoading:!0}),s(e).pipe((0,P.U)(t=>({hits:t,searchString:e,isLoading:!1})),(0,F.K)(e=>(L({title:"Reference search failed",description:e.message,status:"error",id:`reference-search-fail-${Z}`}),console.error(e),(0,N.of)({hits:[]})))))),(0,ep.R)((e,t)=>({...e,...t}),h7),(0,H.b)(j))),W=(0,d.useCallback)(()=>{G("")},[G]),Y=!A.isLoading&&D&&$!==O,J=f?._ref&&p.studioUrl?.({id:f?._ref,type:A?.result?.type})||null,X=(0,d.useCallback)(e=>(0,l.jsx)(BZ,{as:"button",type:"button",radius:2,children:(0,l.jsx)(h.xu,{paddingX:3,paddingY:1,children:(0,l.jsx)(h2,{referenceType:p,document:e.hit.published,getReferenceInfo:T})})}),[p,T]),Q=M||!f?._ref,ee=(0,d.useRef)(null),et=(0,d.useRef)(null);return(0,h.Of)(M&&(()=>o([])),()=>[ee.current,et.current]),(0,l.jsxs)(l.Fragment,{children:[!S.isLoading&&!S.enabled&&(0,l.jsx)(hH,{value:f,onClearValue:w}),(S.isLoading||S.enabled)&&(0,l.jsx)(h.Kq,{space:1,children:Q?(0,l.jsx)(h.Kq,{space:2,ref:ee,children:(0,l.jsx)(i9,{path:c,isChanged:t,hasFocus:!!n,children:(0,l.jsx)("div",{ref:E,children:(0,l.jsx)(h6,{...g,"data-testid":"autocomplete",loading:v.isLoading,referenceElement:E.current,portalRef:et,id:Z||"",options:v.hits.map(e=>({value:e.id,hit:e})),onFocus:K,radius:2,placeholder:y("inputs.reference.search-placeholder"),onKeyDown:k,readOnly:u,disabled:A.isLoading,onQueryChange:G,searchString:v.searchString,onChange:C,filterOption:h9,renderOption:X,openButton:{onClick:W}})})})}):(0,l.jsx)(i9,{path:c,isChanged:t,hasFocus:!!n,children:(0,l.jsxs)(h.Zb,{padding:0,border:!0,flex:1,radius:1,tone:u?"transparent":A.error||B.length>0?"critical":"default",children:[(0,l.jsxs)(h.kC,{align:"center",padding:1,children:[J?(0,l.jsx)(BZ,{as:"a",target:"_blank",rel:"noopener noreferrer",href:J,"data-as":"a",flex:1,padding:1,paddingRight:3,radius:2,tone:"inherit",__unstable_focusRing:!0,tabIndex:0,onFocus:q,onBlur:V,ref:g.ref,children:(0,l.jsx)(h3,{value:f,referenceInfo:A,showStudioUrlIcon:!0,hasStudioUrl:!!J,type:p})}):(0,l.jsx)(BZ,{flex:1,padding:1,paddingRight:3,radius:2,tone:"inherit",__unstable_focusRing:!0,tabIndex:0,onFocus:q,onBlur:V,ref:g.ref,children:(0,l.jsx)(h3,{value:f,referenceInfo:A,showStudioUrlIcon:!0,type:p})}),(0,l.jsx)(h.gF,{paddingX:1,children:(0,l.jsx)(x.j2,{button:(0,l.jsx)(aI,{"data-testid":"menu-button"}),id:`${Z}-menuButton`,menu:(0,l.jsx)(h.v2,{children:!u&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(x.sN,{text:y("inputs.reference.action.clear"),tone:"critical",icon:_.X5P,"data-testid":"menu-item-clear",onClick:w}),(0,l.jsx)(x.sN,{text:y("inputs.reference.action.replace"),icon:_.bnu,"data-testid":"menu-item-replace",onClick:U})]})}),placement:"right",popover:{portal:!0,tone:"default"}})})]}),Y&&(0,l.jsx)(cV,{actualStrength:$,handleFixStrengthMismatch:R}),A.error&&(0,l.jsx)(cq,{errorMessage:A.error.message,onHandleRetry:A.retry})]})})})]})}let fn={available:!0,reason:"READABLE"},fi={available:!1,reason:"PERMISSION_DENIED"},fa={available:!1,reason:"NOT_FOUND"};async function fr(e,t,n,i){if(!e)return{};if("function"==typeof e.filter){let a=n.slice(0,-1),r=(0,c.U2)(t,a);return await e.filter({document:t,parentPath:a,parent:r,getClient:i})}return{filter:e.filter,params:"filterParams"in e?e.filterParams:void 0}}function fo(e){let{reference:t,children:n,observeAsset:i,waitPlaceholder:a}=e,r=t?._ref,o=(0,d.useMemo)(()=>i(r),[r,i]),s=(0,eR.m)(o);return(0,l.jsx)(l.Fragment,{children:r&&s?n(s):a})}let fs=(0,j.zo)(x.sN)`
  position: relative;

  & input {
    overflow: hidden;
    overflow: clip;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    position: absolute;
    min-width: 0;
    display: block;
    appearance: none;
    padding: 0;
    margin: 0;
    border: 0;
    opacity: 0;
  }
`,fl=(0,d.forwardRef)(function(e,t){let{icon:n,id:i,accept:a,capture:r,multiple:o,onSelect:s,text:c,disabled:u,...p}=e,m=`${i||""}-${(0,d.useId)()}`,h=(0,d.useCallback)(e=>{s&&e.target.files&&s(Array.from(e.target.files))},[s]),f=(0,d.useCallback)(e=>(0,l.jsxs)("div",{children:[e,(0,l.jsx)("input",{"data-testid":"file-menuitem-input",accept:a,capture:r,id:m,multiple:o,onChange:h,type:"file",value:"",disabled:u})]}),[a,r,u,h,m,o]);return(0,l.jsx)(fs,{...p,htmlFor:m,disabled:u,ref:t,icon:n,text:c,renderMenuItem:f})});function fc(e){let{onUpload:t,onReset:n,readOnly:i,accept:a,directUploads:r,browse:o,downloadUrl:s,copyUrl:c}=e,{push:u}=(0,h.pm)(),{t:p}=i1(),m=(0,d.useCallback)(()=>{navigator.clipboard.writeText(c||""),u({closable:!0,status:"success",title:p("inputs.files.common.actions-menu.notification.url-copied")})},[c,u,p]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(fl,{icon:_.rG2,onSelect:t,accept:a,text:p("inputs.files.common.actions-menu.upload.label"),"data-testid":"file-input-upload-button",disabled:i||!r}),o,(s||c)&&(0,l.jsx)(h.R,{}),s&&(0,l.jsx)(x.sN,{as:"a",icon:_._8t,text:p("inputs.files.common.actions-menu.download.label"),href:s}),c&&(0,l.jsx)(x.sN,{icon:_.TIy,text:p("inputs.files.common.actions-menu.copy-url.label"),onClick:m}),(0,l.jsx)(h.R,{}),(0,l.jsx)(x.sN,{tone:"critical",icon:_.X5P,text:p("inputs.files.common.actions-menu.clear-field.label"),onClick:n,disabled:i,"data-testid":"file-input-clear"})]})}function fd(e,t){let n=e.split(","),i=n[0].match(/:(.*?);/)?.[1],a=atob(n[1]),r=a.length,o=new Uint8Array(r);for(;r--;)o[r]=a.charCodeAt(r);return new File([o],t,{type:i})}function fu({assetFromSource:e,onChange:t,type:n,resolveUploader:i,uploadWith:a,isImage:r}){var o,s;if(!e)throw Error("No asset given");if(!Array.isArray(e)||0===e.length)throw Error("Returned value must be an array with at least one item (asset)");let l=e[0],c=l.assetDocumentProps,d=c?.originalFilename,u=c?.label,p=c?.title,m=c?.description,h=c?.creditLine,f=c?.source,g=r?[sZ(["hotspot"]),sZ(["crop"])]:[];switch(l.kind){case"assetDocumentId":t([sV({_type:n.name}),...g,sU({_type:"reference",_ref:l.value},["asset"])]);break;case"file":{let e=i(n,l.value);e&&a(e,l.value,{label:u,title:p,description:m,creditLine:h,source:f});break}case"base64":(o=l.value,new Promise((e,t)=>{let n=o.toString(),i=n.indexOf(";base64");if(!n||-1===i){t(Error("Could not convert base64 to file"));return}let a=n.slice(11,i);if(!a&&!d){t(Error("Could not find mime type for image"));return}e(fd(o,d||`${(0,nm.Z)()}.${a}`))})).then(e=>{let t=i(n,e);t&&a(t,e,{label:u,title:p,description:m,creditLine:h,source:f})});break;case"url":(s=l.value,new Promise((e,t)=>{let n=new XMLHttpRequest;n.onload=()=>{let i=new FileReader;i.onloadend=()=>{let n=i.result?.toString(),a=n?.indexOf(";base64");if(!n||-1===a){t(Error("Could not convert URL to file"));return}let r=n.slice(11,a);if(!r&&!d){t(Error("Could not find mime type for image"));return}e(fd(i.result,d||`${(0,nm.Z)()}.${r}`))},i.readAsDataURL(n.response)},n.onerror=e=>{t(e)},n.open("GET",s),n.responseType="blob",n.send()})).then(e=>{let t=i(n,e);t&&a(t,e,{label:u,title:p,description:m,creditLine:h,source:f})});break;default:throw Error("Invalid value returned from asset source plugin")}}let fp=(0,j.zo)(h.kC)`
  pointer-events: none;
`;function fm(e){let{hoveringFiles:t,type:n,readOnly:i,acceptedFiles:a,rejectedFilesCount:r,directUploads:o}=e,s="file"===n,{t:c}=i1(),u=(0,d.useMemo)(()=>i?(0,l.jsx)(_.CPA,{}):t&&r>0||!o?(0,l.jsx)(_.vaB,{}):s?(0,l.jsx)(_.bg6,{}):(0,l.jsx)(_.XBm,{}),[o,t,s,i,r]),p=(0,d.useMemo)(()=>{if(!o)return c("inputs.files.common.placeholder.upload-not-supported");if(i)return c("inputs.files.common.placeholder.read-only");if(t&&o&&!i){if(a.length>0)return c("inputs.files.common.placeholder.drop-to-upload",{context:n});if(r>0)return c("inputs.files.common.placeholder.cannot-upload-some-files",{count:r})}return c("inputs.files.common.placeholder.drag-or-paste-to-upload",{context:n})},[a.length,o,t,i,r,c,n]);return(0,l.jsxs)(fp,{align:"center",gap:3,justify:"center",paddingLeft:1,children:[(0,l.jsx)(h.xv,{muted:!0,size:1,children:u}),(0,l.jsx)(h.xv,{size:1,muted:!0,children:p})]})}let fh=ud(ux(h.Zb)),ff=(0,j.zo)(x.zx).attrs({forwardedAs:"label"})(({theme:e})=>{let{focusRing:t}=e.sanity,n=e.sanity.color.base;return(0,j.iv)`
      &:not([data-disabled='true']) {
        &:focus-within {
          box-shadow: ${uc({base:n,border:{width:1,color:"var(--card-border-color)"},focusRing:t})};
        }
      }

      // The underlying file input is rendered as children within a Sanity UI <Button> component.
      // The below visibly hides it by targeting the input's parent <span> element, which is
      // added by the <Button> component.
      // TODO: refactor, avoid nth-child selector usage
      & > span:nth-child(2) {
        overflow: hidden;
        overflow: clip;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        position: absolute;
        min-width: 0;
        display: block;
        appearance: none;
        padding: 0;
        margin: 0;
        border: 0;
        opacity: 0;
      }
    `}),fg=(0,d.forwardRef)(function(e,t){let{icon:n,id:i,accept:a,capture:r,multiple:o,onSelect:s,text:c,disabled:u,...p}=e,m=`${i||""}-${(0,d.useId)()}`,h=(0,d.useCallback)(e=>{s&&e.target.files&&s(Array.from(e.target.files))},[s]);return(0,l.jsx)(ff,{...p,icon:n,text:c,htmlFor:m,disabled:u,children:(0,l.jsx)("input",{"data-testid":"file-button-input",accept:a,capture:r,id:m,multiple:o,onChange:h,ref:t,type:"file",value:"",disabled:u})})}),fx=(0,d.memo)(function(e){let{accept:t,acceptedFiles:n,browse:i,directUploads:a,hoveringFiles:r,onUpload:o,readOnly:s,rejectedFilesCount:c,type:u}=e,[p,m]=(0,d.useState)(null),f=(0,h.h4)(p),g=f?.border&&f.border.width<440,{t:x}=i1();return(0,l.jsxs)(h.kC,{align:g?void 0:"center",direction:g?"column":"row",gap:4,justify:"space-between",paddingY:g?1:void 0,ref:m,children:[(0,l.jsx)(h.kC,{flex:1,children:(0,l.jsx)(fm,{acceptedFiles:n,directUploads:a,hoveringFiles:r,readOnly:s,rejectedFilesCount:c,type:u})}),(0,l.jsxs)(h.kC,{align:"center",gap:1,justify:"center",wrap:"wrap",children:[(0,l.jsx)(fg,{accept:t,"data-testid":"file-input-upload-button",disabled:s||!a,icon:_.rG2,mode:"bleed",onSelect:o,text:x("input.files.common.upload-placeholder.file-input-button.text")}),i]})]})}),fy=(0,j.zo)(h.Zb)`
  min-height: 82px;
  box-sizing: border-box;
`,fb=(0,j.zo)(h.kC)`
  text-overflow: ellipsis;
  overflow: hidden;
  overflow: clip;
`,fv=(0,j.zo)(h.Kq)`
  position: relative;
  width: 60%;
`,fj=(0,j.zo)(h.EK)`
  position: relative;
  width: 100%;

  code {
    overflow: hidden;
    overflow: clip;
    text-overflow: ellipsis;
    position: relative;
    max-width: 200px;
  }
`,fC=e=>new Date().getTime()-new Date(e).getTime();function fw({uploadState:e,onCancel:t,onStale:n,height:i}){let a=e.file.name;(0,d.useEffect)(()=>{fC(e.updatedAt)>12e4&&n?.()},[e.updatedAt,n]);let{t:r}=i1();return(0,l.jsx)(fy,{tone:"primary",padding:4,border:!0,style:{height:i?`${i}px`:void 0},children:(0,l.jsxs)(fb,{align:"center",justify:"space-between",height:"fill",direction:"row",gap:2,children:[(0,l.jsxs)(fv,{children:[(0,l.jsx)(h.kC,{justify:"center",gap:[3,3,2,2],direction:["column","column","row"],children:(0,l.jsx)(h.xv,{size:1,children:(0,l.jsx)(h.gF,{space:2,children:(0,l.jsx)(rm,{t:r,i18nKey:"input.files.common.upload-progress",components:{FileName:()=>(0,l.jsx)(fj,{size:1,children:a||"…"})}})})})}),(0,l.jsx)(h.Zb,{border:!0,marginTop:3,radius:5,children:(0,l.jsx)(qd,{value:e.progress})})]}),t?(0,l.jsx)(x.zx,{mode:"ghost",onClick:t,text:r("input.files.common.cancel-upload"),tone:"critical"}):null]})})}function fk({onClearStale:e}){let{t}=i1();return(0,l.jsxs)(h.Zb,{tone:"caution",padding:4,border:!0,radius:2,children:[(0,l.jsxs)(h.kC,{gap:4,marginBottom:4,children:[(0,l.jsx)(h.xu,{children:(0,l.jsx)(h.xv,{size:1,children:(0,l.jsx)(_.foC,{})})}),(0,l.jsxs)(h.Kq,{space:3,children:[(0,l.jsx)(h.xv,{size:1,weight:"medium",children:t("inputs.files.common.stale-upload-warning.title")}),(0,l.jsx)(h.xv,{size:1,children:t("inputs.files.common.stale-upload-warning.description",{staleThresholdMinutes:Math.ceil(2)})})]})]}),(0,l.jsx)(x.zx,{icon:_.X5P,mode:"ghost",onClick:e,text:t("inputs.files.common.stale-upload-warning.clear"),width:"fill"})]})}function fT(e,t=2){if(0===e)return"0 Bytes";let n=Math.floor(Math.log(e)/Math.log(1024));return`${parseFloat((e/Math.pow(1024,n)).toFixed(t<0?0:t))} ${["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][n]}`}function fA(e){let{originalFilename:t,size:n,children:i,muted:a,disabled:r,onClick:o,isMenuOpen:s,onMenuOpen:c,setMenuButtonElement:u}=e,[p,m]=(0,d.useState)(null),[f,g]=(0,d.useState)(null),y=(0,d.useCallback)(()=>c(!0),[c]);(0,h.qh)((0,d.useCallback)(e=>{s&&("Escape"===e.key||"Tab"===e.key)&&(c(!1),f?.focus())},[s,c,f])),(0,h.Of)(e=>{f?.contains(e.target)||c(!1)},()=>[p]);let b=(0,d.useCallback)(e=>{u(e),g(e)},[u]);(0,d.useEffect)(()=>{s&&p?.focus()},[s,p]);let{t:v}=i1();return(0,l.jsxs)(h.kC,{wrap:"nowrap",justify:"space-between",align:"center",children:[(0,l.jsx)(h.Zb,{as:a||r?void 0:"button",radius:2,padding:2,tone:"inherit",onClick:o,flex:1,children:(0,l.jsxs)(h.kC,{wrap:"nowrap",align:"center",children:[(0,l.jsx)(h.Zb,{padding:3,tone:"transparent",shadow:1,radius:1,children:(0,l.jsx)(h.xv,{muted:a,children:(0,l.jsx)(_.bg6,{})})}),(0,l.jsxs)(h.Kq,{flex:1,space:2,marginLeft:3,children:[(0,l.jsx)(h.xv,{size:1,textOverflow:"ellipsis",muted:a,"data-testid":"file-name",weight:"medium",children:t}),(0,l.jsx)(h.xv,{size:1,muted:!0,"data-testid":"file-size",children:fT(n)})]})]})}),(0,l.jsx)(h.xu,{padding:2,children:(0,l.jsx)(h.kC,{justify:"center",children:(0,l.jsx)(x.J2,{content:(0,l.jsx)(h.v2,{ref:m,children:i}),id:"file-actions-menu",portal:!0,open:s,constrainSize:!0,children:(0,l.jsx)(aI,{"aria-label":v("inputs.file.actions-menu.file-options.aria-label"),"data-testid":"options-menu-button",onClick:y,ref:b})})})})]})}function f_(){return(0,l.jsxs)(h.kC,{align:"center",justify:"flex-start",padding:2,children:[(0,l.jsx)(h.Od,{padding:3,radius:1,animated:!0}),(0,l.jsxs)(h.Kq,{flex:1,space:2,marginLeft:3,children:[(0,l.jsx)(h.Qr,{style:{width:"100%"},radius:1,animated:!0}),(0,l.jsx)(h.Qr,{style:{width:"100%"},radius:1,animated:!0})]})]})}function fS({onClearValue:e}){let{t}=i1();return(0,l.jsxs)(h.Zb,{tone:"caution",padding:4,border:!0,radius:2,children:[(0,l.jsxs)(h.kC,{gap:4,marginBottom:4,children:[(0,l.jsx)(h.xu,{children:(0,l.jsx)(h.xv,{size:1,children:(0,l.jsx)(_.foC,{})})}),(0,l.jsxs)(h.Kq,{space:3,children:[(0,l.jsx)(h.xv,{size:1,weight:"medium",children:t("inputs.file.invalid-file-warning.title")}),(0,l.jsx)(h.xv,{size:1,children:t("inputs.file.invalid-file-warning.description")})]})]}),(0,l.jsx)(x.zx,{icon:_.X5P,mode:"ghost",onClick:e,text:t("inputs.file.invalid-file-warning.reset-button.text"),width:"fill"})]})}let fE=(0,j.zo)(h.Zb)`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
`,fM=(0,j.zo)(h.kC)`
  height: 100%;
`;function fN({children:e}){return e}let fI=["asset"];class fz extends d.PureComponent{_assetFieldPath;uploadSubscription=null;browseButtonElement=null;state={isUploading:!1,selectedAssetSource:null,hoveringFiles:[],isStale:!1,isMenuOpen:!1};constructor(e){super(e),this._assetFieldPath=e.path.concat(fI)}toast=null;handleRemoveButtonClick=()=>{let{path:e,value:t}=this.props,n="string"!=typeof e.slice(-1)[0],i=Object.keys(t||{}),a=0===i.filter(e=>!["_type","_key","_upload","asset"].includes(e)).length,r=["asset"].concat(i.filter(e=>["_upload"].includes(e))).map(e=>sZ([e]));this.props.onChange(sH.from(a&&!n?sZ():r))};clearUploadStatus(){this.props.value?._upload&&this.props.onChange(sH.from([sZ(["_upload"])]))}cancelUpload(){this.uploadSubscription&&(this.uploadSubscription.unsubscribe(),this.clearUploadStatus())}handleCancelUpload=()=>{this.cancelUpload()};handleClearUploadState=()=>{this.setState({isStale:!1}),this.clearUploadStatus()};handleStaleUpload=()=>{this.setState({isStale:!0})};handleClearField=()=>{this.props.onChange(sZ(["asset"]))};handleSelectFiles=e=>{let{directUploads:t,readOnly:n}=this.props,{hoveringFiles:i}=this.state;t&&!n?this.uploadFirstAccepted(e):i.length>0&&this.handleFilesOut()};handleSelectFileFromAssetSource=e=>{this.setState({selectedAssetSource:e})};handleAssetSourceClosed=()=>{this.setState({selectedAssetSource:null}),this.browseButtonElement?.focus()};setBrowseButtonElement=e=>{this.browseButtonElement=e};uploadFirstAccepted(e){let{schemaType:t}=this.props,n=e.map(e=>({file:e,uploader:this.props.resolveUploader?.(t,e)})).find(e=>e.uploader);n&&this.uploadWith(n.uploader,n.file),this.setState({isMenuOpen:!1})}uploadWith=(e,t,n={})=>{let{schemaType:i,onChange:a,client:r,t:o}=this.props,{source:s}=n,l={metadata:e7(i,"options.metadata"),storeOriginalFilename:e7(i,"options.storeOriginalFilename"),source:s};this.cancelUpload(),this.setState({isUploading:!0}),a(sH.from([sV({_type:i.name})])),this.uploadSubscription=e.upload(r,t,i,l).subscribe({next:e=>{e.patches&&a(sH.from(e.patches))},error:e=>{console.error(e),this.toast?.push({status:"error",description:o("inputs.file.upload-failed.description"),title:o("inputs.file.upload-failed.title")}),this.clearUploadStatus()},complete:()=>{this.setState({isUploading:!1})}})};renderUploadState(e){let{isUploading:t}=this.state;return(0,l.jsx)(fw,{uploadState:e,onCancel:t?this.handleCancelUpload:void 0,onStale:this.handleStaleUpload})}renderAssetSource(){let{selectedAssetSource:e}=this.state,{value:t,schemaType:n,observeAsset:i,t:a}=this.props;if(!e)return null;let r=e7(n,"options.accept",""),o=e.component;return t&&t.asset?(0,l.jsx)(fo,{observeAsset:i,reference:t.asset,waitPlaceholder:(0,l.jsx)(f_,{}),children:e=>(0,l.jsx)(o,{selectedAssets:[e],selectionType:"single",assetType:"file",accept:r,dialogHeaderTitle:a("inputs.file.dialog.title"),onClose:this.handleAssetSourceClosed,onSelect:this.handleSelectAssetFromSource})}):(0,l.jsx)(o,{selectedAssets:[],selectionType:"single",assetType:"file",accept:r,dialogHeaderTitle:a("inputs.file.dialog.title"),onClose:this.handleAssetSourceClosed,onSelect:this.handleSelectAssetFromSource})}handleSelectAssetFromSource=e=>{let{onChange:t,schemaType:n,resolveUploader:i}=this.props;fu({assetFromSource:e,onChange:t,type:n,resolveUploader:i,uploadWith:this.uploadWith}),this.setState({selectedAssetSource:null})};handleFileTargetFocus=e=>{e.currentTarget===e.target&&e.currentTarget===this.props.elementProps.ref?.current&&this.props.elementProps.onFocus(e)};handleFilesOver=e=>{this.setState({hoveringFiles:e})};handleFilesOut=()=>{this.setState({hoveringFiles:[]})};renderAsset(){let{value:e,changed:t,readOnly:n,elementProps:i}=this.props,{hoveringFiles:a,isStale:r}=this.state,o=!!(e?._upload||e?.asset);return e&&"u">typeof e.asset&&!e?._upload&&!(0,eU.OT)(e)?()=>(0,l.jsx)(fS,{onClearValue:this.handleClearField}):s=>(0,l.jsxs)(l.Fragment,{children:[r&&(0,l.jsx)(h.xu,{marginBottom:2,children:(0,l.jsx)(fk,{onClearStale:this.handleClearUploadState})}),(0,l.jsx)(i9,{path:this._assetFieldPath,hasFocus:!!s.focused,isChanged:t,children:e?._upload?this.renderUploadState(e._upload):(0,l.jsx)(fh,{...i,onFocus:this.handleFileTargetFocus,tabIndex:0,disabled:!!n,onFiles:this.handleSelectFiles,onFilesOver:this.handleFilesOver,onFilesOut:this.handleFilesOut,tone:this.getFileTone(),$border:o||a.length>0,style:{padding:1},sizing:"border",radius:2,children:(0,l.jsxs)("div",{style:{position:"relative"},children:[!e?.asset&&this.renderUploadPlaceholder(),e?.asset&&a.length>0?this.renderAssetMenu(this.getFileTone()):null,!e?._upload&&e?.asset&&this.renderPreview()]})})})]})}renderPreview(){let{value:e,readOnly:t,assetSources:n,schemaType:i,directUploads:a,observeAsset:r,t:o}=this.props,{isMenuOpen:s}=this.state,c=e?.asset;if(!c)return null;let d=e7(i,"options.accept",""),u=n&&n?.length===0?null:(0,l.jsx)(x.sN,{icon:_.W1M,text:o("inputs.file.browse-button.text"),onClick:()=>{this.setState({isMenuOpen:!1}),this.handleSelectFileFromAssetSource(n[0])},disabled:t,"data-testid":"file-input-browse-button"});return n.length>1&&(u=n.map(e=>(0,l.jsx)(x.sN,{text:(e.i18nKey?o(e.i18nKey):e.title)||tt(e.name),onClick:()=>{this.setState({isMenuOpen:!1}),this.handleSelectFileFromAssetSource(e)},icon:e.icon||_.XBm,disabled:t,"data-testid":`file-input-browse-button-${e.name}`},e.name))),(0,l.jsx)(fo,{reference:c,observeAsset:r,waitPlaceholder:(0,l.jsx)(f_,{}),children:({originalFilename:n,extension:i,url:r,size:o})=>{let c,p;let m=n||`download.${i}`;return(0,eU.OT)(e)&&(p=`${r}?dl`,c=r),(0,l.jsx)(fA,{size:o,originalFilename:m,muted:!t,onMenuOpen:e=>this.setState({isMenuOpen:e}),isMenuOpen:s,setMenuButtonElement:this.setBrowseButtonElement,children:(0,l.jsx)(fc,{onUpload:this.handleSelectFiles,browse:u,onReset:this.handleRemoveButtonClick,downloadUrl:p,copyUrl:c,readOnly:t,accept:d,directUploads:a})})}})}renderAssetMenu(e){let{schemaType:t,readOnly:n,directUploads:i,resolveUploader:a}=this.props,{hoveringFiles:r}=this.state,o=r.filter(e=>a?.(t,e)),s=r.length-o.length;return(0,l.jsx)(fE,{radius:2,tone:e,children:(0,l.jsx)(fM,{align:"center",justify:"center",gap:2,flex:1,children:(0,l.jsx)(fm,{readOnly:n,hoveringFiles:r,acceptedFiles:o,rejectedFilesCount:s,directUploads:i,type:"file"})})})}renderBrowser(){let{assetSources:e,readOnly:t,directUploads:n,id:i,t:a}=this.props;return 0===e.length?null:e.length>1&&!t&&n?(0,l.jsx)(x.j2,{id:`${i}_assetFileButton`,ref:this.setBrowseButtonElement,button:(0,l.jsx)(x.zx,{mode:"bleed",text:a("inputs.file.multi-browse-button.text"),"data-testid":"file-input-multi-browse-button",icon:_.W1M}),"data-testid":"input-select-button",menu:(0,l.jsx)(h.v2,{children:e.map(e=>(0,l.jsx)(x.sN,{text:e.title,onClick:()=>{this.setState({isMenuOpen:!1}),this.handleSelectFileFromAssetSource(e)},icon:e.icon||_.XBm,disabled:t,"data-testid":`file-input-browse-button-${e.name}`},e.name))})}):(0,l.jsx)(x.zx,{text:a("inputs.file.browse-button.text"),icon:_.W1M,mode:"bleed",onClick:()=>{this.setState({isMenuOpen:!1}),this.handleSelectFileFromAssetSource(e[0])},"data-testid":"file-input-browse-button",disabled:t,ref:this.setBrowseButtonElement})}renderUploadPlaceholder(){let{readOnly:e,schemaType:t,directUploads:n,resolveUploader:i}=this.props,{hoveringFiles:a}=this.state,r=a.filter(e=>i?.(t,e)),o=a.length-r.length,s=e7(t,"options.accept","");return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(h.Zb,{tone:e?"transparent":"inherit",border:!0,paddingX:3,paddingY:2,radius:2,style:0===a.length?{borderStyle:"dashed"}:{borderStyle:"dashed",borderColor:"transparent"},children:(0,l.jsx)(fx,{browse:this.renderBrowser(),onUpload:this.handleSelectFiles,readOnly:e,hoveringFiles:a,acceptedFiles:r,rejectedFilesCount:o,type:"file",accept:s,directUploads:n})})})}handleUpload=({file:e,uploader:t})=>{this.uploadWith(t,e)};setToast=e=>{this.toast=e};getFileTone(){let{directUploads:e,schemaType:t,value:n,readOnly:i,resolveUploader:a}=this.props,{hoveringFiles:r}=this.state,o=r.filter(e=>a?.(t,e)),s=r.length-o.length;return r.length>0&&(s>0||!e)?"critical":n?._upload||i||!(r.length>0)?n?._upload&&n?.asset&&i?"transparent":"default":"primary"}render(){let{members:e,renderAnnotation:t,renderBlock:n,renderInlineBlock:i,renderItem:a,renderInput:r,renderField:o,renderPreview:s,t:c}=this.props,{selectedAssetSource:d}=this.state;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(q$,{ref:this.setToast}),e.map(e=>"field"===e.kind&&("crop"===e.name||"hotspot"===e.name)?null:"field"===e.kind?(0,l.jsx)(lD,{member:e,renderAnnotation:t,renderInlineBlock:i,renderBlock:n,renderInput:"asset"===e.name?this.renderAsset():r,renderField:"asset"===e.name?fN:o,renderItem:a,renderPreview:s},e.key):"fieldSet"===e.kind?(0,l.jsx)(l7,{member:e,renderAnnotation:t,renderBlock:n,renderField:o,renderInlineBlock:i,renderInput:r,renderItem:a,renderPreview:s},e.key):"error"===e.kind?(0,l.jsx)(l6,{member:e},e.key):(0,l.jsx)(l.Fragment,{children:c("inputs.file.error.unknown-member-kind",{kind:e.kind})})),d&&this.renderAssetSource()]})}}let f$=["asset"],fO=(0,d.memo)((0,d.forwardRef)(function(e,t){let{elementProps:n,handleClearUploadState:i,handleFilesOut:a,handleFilesOver:r,handleFileTargetFocus:o,handleSelectFiles:s,hoveringFiles:c,inputProps:u,isStale:p,readOnly:m,renderAssetMenu:f,renderPreview:g,renderUploadPlaceholder:x,renderUploadState:y,tone:b,value:v}=e,j=!!(v?._upload||v?.asset),C=(0,d.useMemo)(()=>u.path.concat(f$),[u.path]);return(0,l.jsxs)(l.Fragment,{children:[p&&(0,l.jsx)(h.xu,{marginBottom:2,children:(0,l.jsx)(fk,{onClearStale:i})}),(0,l.jsx)(i9,{path:C,hasFocus:!!u.focused,isChanged:u.changed,children:v?._upload?y(v._upload):(0,l.jsxs)(fh,{...n,onFocus:o,tabIndex:0,disabled:!!m,onFiles:s,onFilesOver:r,onFilesOut:a,tone:b,$border:j||c.length>0,sizing:"border",radius:2,children:[!v?.asset&&x(),!v?._upload&&v?.asset&&(0,l.jsxs)("div",{style:{position:"relative"},ref:t,children:[g(),f()]})]})})]})})),fP=(0,j.zo)(h.gF)`
  position: absolute;
  top: 0;
  right: 0;
`,fF=()=>(0,l.jsx)(fP,{padding:2,children:(0,l.jsx)(h.Od,{style:{width:"25px",height:"25px"},animated:!0})});function fD(e){let{onEdit:t,children:n,showEdit:i,setHotspotButtonElement:a,setMenuButtonElement:r,onMenuOpen:o,isMenuOpen:s}=e,[c,u]=(0,d.useState)(null),[p,m]=(0,d.useState)(null),f=(0,d.useCallback)(()=>o(!s),[o,s]);(0,h.qh)((0,d.useCallback)(e=>{s&&("Escape"===e.key||"Tab"===e.key)&&(o(!1),p?.focus())},[s,o,p])),(0,h.Of)(e=>{p?.contains(e.target)||o(!1)},()=>[c]);let g=(0,d.useCallback)(e=>{r(e),m(e)},[r]);(0,d.useEffect)(()=>{s&&c?.focus()},[s,c]);let{t:y}=i1();return(0,l.jsx)(x.uE,{children:(0,l.jsxs)(fP,{"data-buttons":!0,space:1,padding:2,children:[i&&(0,l.jsx)(x.zx,{"aria-label":y("inputs.image.actions-menu.edit-details.aria-label"),"data-testid":"options-menu-edit-details",icon:_.Rf5,mode:"ghost",onClick:t,ref:a,tooltipProps:{content:y("inputs.image.actions-menu.crop-image-tooltip")}}),(0,l.jsx)(x.J2,{id:"image-actions-menu",content:(0,l.jsx)(h.v2,{ref:u,children:n}),portal:!0,open:s,constrainSize:!0,children:(0,l.jsx)(aI,{"aria-label":y("inputs.image.actions-menu.options.aria-label"),"data-testid":"options-menu-button",mode:"ghost",onClick:f,ref:g})})]})})}let fR=(0,d.memo)(function(e){let{assetSources:t,directUploads:n,handleOpenDialog:i,handleRemoveButtonClick:a,handleSelectFiles:r,handleSelectImageFromAssetSource:o,imageUrlBuilder:s,isImageToolEnabled:c,isMenuOpen:u,observeAsset:p,readOnly:m,schemaType:h,setHotspotButtonElement:f,setMenuButtonElement:g,setMenuOpen:y,value:b}=e,{t:v}=i1(),j=(0,d.useMemo)(()=>e7(h,"options.accept","image/*"),[h]),C=b?.asset,w=b&&C&&c;if(!C)return null;let k=t&&0===t.length?null:(0,l.jsx)(x.sN,{icon:_.W1M,text:v("inputs.image.browse-menu.text"),onClick:()=>{y(!1),o(t[0])},disabled:m,"data-testid":"file-input-browse-button"});return t&&t.length>1&&(k=t.map(e=>(0,l.jsx)(x.sN,{text:(e.i18nKey?v(e.i18nKey):e.title)||tt(e.name),onClick:()=>{y(!1),o(e)},icon:e.icon||_.XBm,"data-testid":`file-input-browse-button-${e.name}`,disabled:m},e.name))),(0,l.jsx)(fL,{accept:j,browseMenuItem:k,directUploads:n,handleOpenDialog:i,handleRemoveButtonClick:a,handleSelectFiles:r,imageUrlBuilder:s,isMenuOpen:u,observeAsset:p,readOnly:m,reference:C,schemaType:h,setHotspotButtonElement:f,setMenuButtonElement:g,setMenuOpen:y,showAdvancedEditButton:!!w,value:b})}),fL=(0,d.memo)(function(e){let t,n;let{accept:i,browseMenuItem:a,directUploads:r,handleOpenDialog:o,handleRemoveButtonClick:s,handleSelectFiles:c,imageUrlBuilder:u,isMenuOpen:p,observeAsset:m,readOnly:h,reference:f,setHotspotButtonElement:g,setMenuButtonElement:x,setMenuOpen:y,showAdvancedEditButton:b,value:v}=e,j=f?._ref,C=(0,d.useMemo)(()=>m(j),[j,m]),w=(0,eR.m)(C);if(!j||!w)return(0,l.jsx)(fF,{});let{_id:k,originalFilename:T,extension:A}=w;if((0,eU.JZ)(v)){let e=T||`download.${A}`;n=u.image(k).forceDownload(e).url(),t=u.image(k).url()}return(0,l.jsx)(fD,{isMenuOpen:p,onEdit:o,onMenuOpen:y,setHotspotButtonElement:g,setMenuButtonElement:x,showEdit:!!b,children:(0,l.jsx)(fc,{onUpload:c,browse:a,onReset:s,downloadUrl:n,copyUrl:t,readOnly:h,directUploads:r,accept:i})})}),fB=(0,d.memo)(function(e){let{handleAssetSourceClosed:t,handleSelectAssetFromSource:n,observeAsset:i,schemaType:a,selectedAssetSource:r,value:o}=e,s=(0,d.useMemo)(()=>e7(a,"options.accept","image/*"),[a]);if(!r)return null;let{component:c}=r;return o&&o.asset?(0,l.jsx)(fo,{observeAsset:i,reference:o.asset,children:e=>(0,l.jsx)(c,{selectedAssets:[e],assetType:"image",accept:s,selectionType:"single",onClose:t,onSelect:n})}):(0,l.jsx)(c,{selectedAssets:[],selectionType:"single",assetType:"image",accept:s,onClose:t,onSelect:n})}),fq={portal:!0},fV=(0,d.memo)((0,d.forwardRef)(function(e,t){let{assetSources:n,readOnly:i,directUploads:a,id:r,setMenuOpen:o,handleSelectImageFromAssetSource:s}=e,{t:c}=i1();return n&&0===n.length?null:n&&n.length>1&&!i&&a?(0,l.jsx)(x.j2,{id:`${r}_assetImageButton`,ref:t,button:(0,l.jsx)(x.zx,{"data-testid":"file-input-multi-browse-button",icon:_.W1M,iconRight:_.v4q,mode:"bleed",text:c("inputs.image.browse-menu.text")}),menu:(0,l.jsx)(h.v2,{children:n.map(e=>(0,l.jsx)(x.sN,{text:(e.i18nKey?c(e.i18nKey):e.title)||tt(e.name),onClick:()=>{o(!1),s(e)},icon:e.icon||_.XBm,disabled:i,"data-testid":`file-input-browse-button-${e.name}`},e.name))}),popover:fq}):(0,l.jsx)(x.zx,{text:c("inputs.image.browse-menu.text"),icon:_.W1M,mode:"bleed",onClick:()=>{o(!1),s(n[0])},"data-testid":"file-input-browse-button",disabled:i})})),fK=(0,j.zo)(h.xu)`
  position: relative;
  padding-bottom: calc(${({ratio:e=1.5})=>1/e} * 100%);

  & > div {
    position: absolute;
    top: ${({padding:e=0})=>e}px;
    left: ${({padding:e=0})=>e}px;
    right: ${({padding:e=0})=>e}px;
    bottom: ${({padding:e=0})=>e}px;
  }
`,fU={x:.5,y:.5,height:1,width:1},fZ={top:0,left:0,right:0,bottom:0};function fG(e){if(!e)return null;if("aspectRatio"in e)return e.aspectRatio;if("height"in e||"width"in e){if("number"!=typeof e.height&&"number"!=typeof e.width)throw Error(`Height and width must be numbers, got ${JSON.stringify(e)}`);return e.width/e.height}return null}function fH(e,t=2){let n=Math.pow(10,t);return Math.round(e*n)/n}function fW(e){return 0===e?0:`${e}%`}function fY(e){return fW(fH(100*e))}let fJ=j.zo.div`
  position: relative;
  width: 100%;
`,fX=ns("sanity-imagetool"),fQ=(0,d.memo)(function(e){let{alignX:t="center",alignY:n="center",alt:i,aspectRatio:a="none",className:r="",crop:o=fZ,hotspot:s=fU,onError:c,onLoad:u,src:p,srcAspectRatio:m,srcSet:h,style:f}=e,[g,x]=(0,d.useState)(null),y=(0,d.useRef)(null),b=(0,d.useRef)(null),v=(0,d.useCallback)(()=>{if(y.current){if("auto"===a){let e=y.current.parentNode;(0,d.startTransition)(()=>x(e.offsetWidth/e.offsetHeight))}else x(null)}},[a]);(0,d.useEffect)(()=>{let e=b.current;return e&&e.src&&e.complete&&void 0!==e.naturalWidth&&(fX("Image '%s' already loaded, refreshing (from cache) to trigger onLoad / onError",p),e.src=e.src),v(),window.addEventListener("resize",v),()=>{window.removeEventListener("resize",v)}},[p,v]);let j=(0,d.useMemo)(()=>"none"===a?o?function(e,t){let n=1/t,i=t*n;return(i-(e.left+e.right)*i)/(n-(e.top+e.bottom)*n)}(o,m):m:"auto"===a?g:a||null,[a,g,o,m]),C=(0,d.useMemo)(()=>(function(e={}){let t=fG(e.image)||1,n=e.hotspot||fU,i=e.crop||fZ,a=fG(e.container)||t*function(e){let t=1-e.top-e.bottom;return(1-e.left-e.right)/t}(i),r=function(e,t,n){let i,a,r;let o=t.crop,s=n.aspect,l=n.align,c=1-o.left-o.right,d=1-o.top-o.bottom,u={top:-o.top/d,left:-o.left/c,width:1/c,height:1/d},p=c/d*e,m={x:(t.hotspot.x-o.left)/c,y:(t.hotspot.y-o.top)/d,height:t.hotspot.height/d,width:t.hotspot.width/c},h=Math.min(1/m.width,1/m.height*p/s),f=p<=s;if((i=f?1:p/s)>h){let e;a="letterbox";let t=i-h;r={width:e=f?1-t:h,height:e/p*s,left:0,top:0};let n=m.x*r.width-m.width*r.width/2;switch(l.x){case"left":r.left=f?0:-n;break;case"right":r.left=f?1-r.width:n;break;case"center":r.left=f?(1-r.width)/2:-n;break;default:throw Error(`Invalid x alignment: '${l.x}'. Must be either 'left', 'right' or 'center'`)}let o=m.y*r.height-m.height*r.height/2;switch(l.y){case"top":r.top=f?-o:0;break;case"bottom":r.top=o;break;case"center":r.top=f?-o:(1-r.height)/2;break;default:throw Error(`Invalid y alignment: '${l.y}'. Must be either 'top', 'bottom' or 'center'`)}}else if(f){a="full_width";let e=-m.y/p*s+.5,t=i/p*s;e>0?e=0:-e>t-1&&(e=-(t-1)),r={width:i,height:t,left:0,top:e}}else{a="full_height";let e=.5-m.x*i;e>0?e=0:-e>i-1&&(e=-(i-1)),r={width:i,height:i/p*s,top:0,left:e}}return{method:a,crop:r,image:u}}(t,{hotspot:n,crop:i},{aspect:a,align:e.align||{x:"center",y:"center"}}),o=fW(fH(100/a));return{debug:{result:r},container:{overflow:"hidden",position:"relative",width:"100%",height:o},padding:{marginTop:o},crop:{position:"absolute",overflow:"hidden",height:fY(r.crop.height),width:fY(r.crop.width),top:fY(r.crop.top),left:fY(r.crop.left)},image:{position:"absolute",height:fY(r.image.height),width:fY(r.image.width),top:fY(r.image.top),left:fY(r.image.left)}}})({container:{aspectRatio:j||m},image:{aspectRatio:m},hotspot:s,crop:o,align:{x:t,y:n}}),[t,n,o,s,m,j]);return(0,l.jsx)(fJ,{className:`${r}`,style:f,ref:y,children:(0,l.jsxs)("div",{style:C.container,children:[(0,l.jsx)("div",{style:C.padding}),(0,l.jsx)("div",{style:C.crop,children:(0,l.jsx)("img",{ref:b,src:p,alt:i,srcSet:h,onLoad:u,onError:c,style:C.image})})]})})});function f0(e){let{src:t,children:n}=e,[i,a]=(0,d.useState)(!0),[r,o]=(0,d.useState)(null),[s,l]=(0,d.useState)(null);return(0,d.useEffect)(()=>{o(null),l(null),a(!0);let e=new Image;e.onload=()=>{o(e),l(null),a(!1)},e.onerror=()=>{l(Error(`Could not load image from ${JSON.stringify(t)}`)),a(!1)},e.referrerPolicy="strict-origin-when-cross-origin",e.src=t},[t]),n({image:r,error:s,isLoading:i})}function f1(e){let{image:t,maxHeight:n,maxWidth:i,children:a}=e,r=(0,d.useRef)(null),[o,s]=(0,d.useState)(!1);return(0,d.useLayoutEffect)(()=>{if(!r.current){let e=document.createElement("canvas");e.style.display="none",r.current=e,s(!0)}let e=t.width/t.height,a=Math.min(t.width,i),o=Math.min(t.height,n),l=t.width>t.height,c=l?a:o*e,d=l?a/e:o;r.current.width=c,r.current.height=d;let u=r.current.getContext("2d");u&&u.drawImage(t,0,0,t.width,t.height,0,0,c,d);let p=r.current;return document.body.appendChild(p),()=>{document.body.removeChild(p)}},[t,n,i]),r.current&&o?a(r.current):null}class f2{x;y;constructor(e,t){this.x=e,this.y=t}}class f3{y;_left;_right;constructor(e,t,n){this.y=e,this._left=t,this._right=n}get right(){return new f2(this._right,this.y)}get left(){return new f2(this._left,this.y)}get length(){return this._right-this._left}}class f4{rect;constructor(e){this.rect=e}get top(){return new f3(this.rect.top,this.rect.left,this.rect.right)}get bottom(){return new f3(this.rect.bottom,this.rect.left,this.rect.right)}}class f5{left;top;width;height;static fromEdges({left:e,right:t,top:n,bottom:i}){return new f5(e,n,1-e-t,1-n-i)}constructor(e=0,t=0,n=0,i=0){this.left=e,this.top=t,this.width=n,this.height=i}setTopLeft(e,t){return new f5(e,t,this.width||0,this.height||0)}setSize(e,t){return new f5(this.left||0,this.top||0,e,t)}setCenter(e,t){let n=this.width||0,i=this.height||0;return new f5(e-n/2,t-i/2,n||0,i||0)}get center(){return new f2(this.left+this.width/2,this.top+this.height/2)}get corners(){return new f4(this)}get right(){return this.left+this.width}get bottom(){return this.top+this.height}multiply(e){return new f5((this.left||0)+this.width*e.left,(this.top||0)+this.height*e.top,this.width*e.width,this.height*e.height)}grow(e){return new f5(this.left-e,this.top-e,this.width+2*e,this.height+2*e)}shrink(e){return this.grow(-e)}cropRelative(e){let t=this.top+e.top*this.height,n=this.left+e.left*this.width,i=this.height*e.height;return new f5(n,t,this.width*e.width,i)}clamp(e){let{left:t,top:n,width:i,height:a}=this;return e.width<i&&(i=e.width,t=e.left),e.height<a&&(a=e.height,n=e.top),t+i>e.left+e.width&&(t=e.right-i),n+a>e.top+e.height&&(n=e.bottom-a),new f5(Math.max(t,e.left),Math.max(n,e.top),i,a)}}function f8(e,t){let n={x:t.center.x,y:t.center.y},i=t.width/2,a=t.height/2;if(i<=0||a<=0)return!1;let r={x:e.x-n.x,y:e.y-n.y};return Math.pow(r.x,2)/Math.pow(i,2)+Math.pow(r.y,2)/Math.pow(a,2)<=1}function f6({x:e,y:t},n){return Math.pow(e-n.x,2)+Math.pow(t-n.y,2)<Math.pow(n.radius,2)}function f7(e,t){return e.x>=t.left&&e.x<=t.left+t.width&&e.y>=t.top&&e.y<=t.top+t.height}function f9(e,t){return{x:t.center.x-t.width/2*Math.cos(e),y:t.center.y-t.height/2*Math.sin(e)}}let ge=(0,d.forwardRef)(function(e,t){let{readOnly:n,onDragStart:i,onDragEnd:a,onDrag:r,...o}=e,s=(0,d.useRef)(null),c=(0,d.useRef)(null),u=(0,d.useRef)(!1),p=(0,d.useCallback)(e=>{if(n||!s.current)return;if(u.current){gn("Start cancelled, already a drag in progress");return}u.current=!0;let t=gr(e);gn("Drag started %o",t),i(ga(t.x,t.y,s.current.getBoundingClientRect())),c.current=t},[i,n]),m=(0,d.useCallback)(e=>{var t;if(!u.current||n||!c.current)return;let i=gr(e),a=(t=c.current,{x:i.x-t.x,y:i.y-t.y});r(a),gn("moving by %o",a),c.current=i},[r,n]),h=(0,d.useCallback)(()=>{u.current&&!n&&c.current&&s.current&&(u.current=!1,a(ga(c.current.x,c.current.y,s.current.getBoundingClientRect())),c.current=null)},[a,n]),f=(0,d.useCallback)(e=>{if(!u.current||n||!s.current)return;let t=gr(e);a(ga(t.x,t.y,s.current.getBoundingClientRect())),u.current=!1,c.current=null,gn("Done moving %o",t)},[a,n]);(0,d.useEffect)(()=>(document.body.addEventListener("pointermove",m),document.body.addEventListener("pointerup",f),document.body.addEventListener("pointerleave",h),document.body.addEventListener("pointercancel",h),()=>{document.body.removeEventListener("pointermove",m),document.body.removeEventListener("pointerup",f),document.body.removeEventListener("pointerleave",h),document.body.removeEventListener("pointercancel",h)}),[m,h,f]);let g=(0,d.useCallback)(e=>{s.current=e,"function"==typeof t?t(e):t&&(t.current=e)},[t]);return(0,l.jsx)(gi,{ref:g,onPointerDown:n?void 0:p,...o})}),gt=(0,d.memo)(ge),gn=ns("sanity-imagetool"),gi=j.zo.canvas`
  display: block;
  position: relative;
  max-width: calc(100% - 0.5em); /* to prevent overlap with change bar */
  max-height: calc(100% + 1em);
  user-select: none;
  // Enable only multi-finger panning and zooming within this element.
  // This prevents single finger panning when manipulating drag handles,
  // which can cause unwanted scrolling in the underlying document body.
  touch-action: pinch-zoom;
`;function ga(e,t,n){return{x:e-n.left,y:t-n.top}}function gr(e){return{x:e.clientX,y:e.clientY}}let go=["left","right","top","topLeft","topRight","bottom","bottomLeft","bottomRight"],gs=j.zo.div`
  width: 100%;
  height: 100%;
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
`;function gl(e,t){let{top:n,right:i,bottom:a,left:r}=e.crop||fZ;return{value:{hotspot:e.hotspot,crop:{top:n+(t.top||0)>0?n:0,right:i+(t.right||0)>0?i:0,bottom:a+(t.bottom||0)>0?a:0,left:r+(t.left||0)>0?r:0}},delta:{top:n+(t.top||0)>0&&t.top||0,right:i+(t.right||0)>0&&t.right||0,bottom:a+(t.bottom||0)>0&&t.bottom||0,left:r+(t.left||0)>0&&t.left||0}}}let gc=(0,d.memo)(function(e){let{image:t,readOnly:n,onChange:i,onChangeEnd:a,value:r}=e,o=(0,E.j)(),[s,c]=function(){let[e,t]=(0,d.useState)(null),[n,i]=(0,d.useState)(0),[a,r]=(0,d.useState)(0),o=(0,d.useMemo)(()=>({height:n,width:a}),[n,a]);return(0,d.useEffect)(()=>{if(e)return i(e.clientHeight),r(e.clientWidth),iD.observe(e,e=>{i(Math.round(e.contentRect.height)),r(Math.round(e.contentRect.width))}),()=>{iD.unobserve(e)}},[e]),[o,t]}(),u=(0,d.useMemo)(()=>t.width/s.width,[s.width,t.width]),p=(0,d.useMemo)(()=>{let e=r.hotspot||fU,n=new f5().setSize(e.width,e.height).setCenter(e.x,e.y);return new f5().setSize(t.width,t.height).shrink(8*u).multiply(n)},[t.height,t.width,u,r.hotspot]),m=(0,d.useMemo)(()=>new f5().setSize(t.width,t.height).shrink(8*u).cropRelative(f5.fromEdges(r.crop||fZ).clamp(new f5(0,0,1,1))),[t.height,t.width,u,r.crop]),h=(0,d.useMemo)(()=>{let e=12*u,t=e/2,n=new f5(0,0,e,e);return{left:n.setTopLeft(m.left-t,m.center.y-t),right:n.setTopLeft(m.right-t,m.center.y-t),top:n.setTopLeft(m.center.x-t,m.top-t),topLeft:n.setTopLeft(m.left-t,m.top-t),topRight:n.setTopLeft(m.right-t,m.top-t),bottom:n.setTopLeft(m.center.x-t,m.bottom-t),bottomLeft:n.setTopLeft(m.left-t,m.bottom-t),bottomRight:n.setTopLeft(m.right-t,m.bottom-t)}},[m,u]),f=(0,d.useMemo)(()=>{let e=f5.fromEdges(r.crop||fZ).clamp(new f5(0,0,1,1)),t=r.hotspot||fU,n=new f5(0,0,1,1).setSize(t.width,t.height).setCenter(t.x,t.y).clamp(e);return{crop:e,hotspot:n}},[r.crop,r.hotspot]);return(0,l.jsx)(gd,{actualSize:s,hotspotRect:p,cropRect:m,cropHandles:h,clampedValue:f,image:t,onChange:i,onChangeEnd:a,ratio:o,readOnly:n,scale:u,setCanvasObserver:c,value:r})});class gd extends d.PureComponent{state={cropping:!1,cropMoving:!1,moving:!1,resizing:!1,pointerPosition:null};canvas;getActiveCropHandleFor({x:e,y:t}){let n=this.props.cropHandles;for(let i of go)if(f7({x:e,y:t},n[i]))return i;return!1}emitMove(e){let{image:t,value:n,onChange:i}=this.props,a=this.props.scale;i(function(e,t){let n=e&&e.hotspot||fU;return{...e,hotspot:{...n,x:n.x+t.x,y:n.y+t.y}}}(n,{x:e.x*a/t.width,y:e.y*a/t.height}))}emitCropMove(e){let{image:t,onChange:n,value:i}=this.props,a=this.props.scale,r=e.x*a/t.width,o={left:r,right:-e.x*a/t.width,top:e.y*a/t.height,bottom:-e.y*a/t.height};!i||!i.crop||i.crop.top+o.top<0||i.crop.left+o.left<0||i.crop.right+o.right<0||i.crop.bottom+o.bottom<0||n(gu(i,o))}emitCrop(e,t){let{image:n,onChange:i,value:a}=this.props,r=this.props.scale,o=0,s=0,l=0,c=0;"left"==e||"topLeft"===e||"bottomLeft"===e?o=t.x*r/n.width:("right"==e||"topRight"===e||"bottomRight"===e)&&(s=-t.x*r/n.width),"top"==e||"topLeft"===e||"topRight"===e?l=t.y*r/n.height:("bottom"==e||"bottomLeft"===e||"bottomRight"===e)&&(c=-t.y*r/n.height);let d={left:o,right:s,top:l,bottom:c};i(gu(gl(a,d).value,gl(a,d).delta))}emitResize(e){let{image:t,onChange:n,value:i}=this.props,a=this.props.scale,r={x:e.x*a*2/t.width,y:e.y*a*2/t.height};n(function(e,t){let n=e&&e.hotspot||fU;return{...e,hotspot:{...n,height:n.height+t.height,width:n.width+t.width}}}(i,{height:r.y,width:r.x}))}getDragHandleCoords(){let e=f9(1.25*Math.PI,this.props.hotspotRect);return{x:e.x,y:e.y,radius:8*this.props.scale}}getCursor(){let{pointerPosition:e}=this.state,{readOnly:t}=this.props;if(!e||t)return"auto";let n=this.state.cropping||this.getActiveCropHandleFor(e);if(n)return function(e){switch(e){case"left":case"right":return"col-resize";case"top":case"bottom":return"row-resize";case"topRight":case"bottomLeft":return"nesw-resize";case"topLeft":case"bottomRight":return"nwse-resize";default:return null}}(n)||"auto";let i=f6(e,this.getDragHandleCoords());if(this.state.resizing||i)return"move";if(this.state.moving||this.state.cropMoving)return"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAQAAADZc7J/AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QA/4ePzL8AAABdSURBVEjH7ZA7DsAwCEMN6v2vTCdESpLKQRl5gxfzMQDNRQyWlEK83QAIRh3cH/QbIhQwMDl8gORl7A16WD/xxAdq6N6SgycKUblf41+wbFBT44RiCi11NU3TLHgBxRUUD4ITqnIAAAAldEVYdGRhdGU6Y3JlYXRlADIwMTUtMDEtMjFUMDA6MTM6NDMrMDE6MDC74T7AAAAAJXRFWHRkYXRlOm1vZGlmeQAyMDEyLTA0LTAyVDA0OjEzOjM3KzAyOjAwQJ35wQAAAABJRU5ErkJggg==), move";let a=f8(e,this.props.hotspotRect),r=f7(e,this.props.cropRect);return a||r?"url(data:image/png;base64,AAACAAEAICACAAcABQAwAQAAFgAAACgAAAAgAAAAQAAAAAEAAQAAAAAAAAEAAAAAAAAAAAAAAgAAAAAAAAAAAAAA////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD8AAAA/AAAAfwAAAP+AAAH/gAAB/8AAA//AAAd/wAAGf+AAAH9gAADbYAAA2yAAAZsAAAGbAAAAGAAAAAAAAA//////////////////////////////////////////////////////////////////////////////////////gH///4B///8Af//+AD///AA///wAH//4AB//8AAf//AAD//5AA///gAP//4AD//8AF///AB///5A////5///8=), move":"auto"}componentDidMount(){let{canvas:e}=this;e&&this.draw({canvas:e})}componentDidUpdate(){let{canvas:e}=this;e&&this.draw({canvas:e})}draw({canvas:e}){let t=e.getContext("2d");if(!t)return;let{clampedValue:n,cropHandles:i,cropRect:a,hotspotRect:r,image:o,ratio:s,readOnly:l,scale:c}=this.props,{cropping:d,pointerPosition:u}=this.state;!function({clampedValue:e,context:t,cropHandles:n,cropping:i,cropRect:a,HOTSPOT_HANDLE_SIZE:r,hotspotRect:o,image:s,MARGIN_PX:l,pointerPosition:c,ratio:d,readOnly:u,scale:p}){t.save(),t.scale(d,d);let m=!u&&c?.8:.2;(function({context:e,image:t,MARGIN_PX:n,scale:i}){let a=new f5().setSize(t.width,t.height).shrink(n*i);e.save(),e.fillStyle="white",e.clearRect(0,0,t.width,t.height),e.globalAlpha=.3,e.drawImage(t,a.left,a.top,a.width,a.height),e.restore()})({context:t,image:s,MARGIN_PX:l,scale:p}),function({clampedValue:e,context:t,HOTSPOT_HANDLE_SIZE:n,image:i,MARGIN_PX:a,opacity:r,readOnly:o,scale:s}){let l=new f5().setSize(i.width,i.height),{hotspot:c,crop:d}=e,u=a*s;function p(e,n,a,r,o,s,l,c){t.save(),t.drawImage(i,e,n,a,r,o,s,l,c),t.restore()}t.save(),function(){let e=l.cropRelative(d),n=l.shrink(u).cropRelative(d);t.save(),p(e.left,e.top,e.width,e.height,n.left,n.top,n.width,n.height),t.globalAlpha=.5,t.fillStyle="black",t.fillRect(n.left,n.top,n.width,n.height),t.restore()}(),function(){t.save();let e=l.shrink(u).multiply(c),n=e.height/e.width;t.scale(1,n),t.beginPath(),t.globalAlpha=r,t.arc(e.center.x,e.center.y/n,Math.abs(e.width/2),0,2*Math.PI,!1),t.strokeStyle="white",t.lineWidth=1.5*s,t.stroke(),t.closePath(),t.restore()}(),t.clip(),function(){let e=l.multiply(c),t=l.shrink(u).multiply(c);p(e.left,e.top,e.width,e.height,t.left,t.top,t.width,t.height)}(),t.restore(),o||function(e){t.save();let i=n*s,a=f9(e,l.shrink(u).multiply(c));t.beginPath(),t.arc(a.x,a.y,i,0,2*Math.PI,!1),t.fillStyle="rgb(255,255,255)",t.fill(),t.closePath(),t.restore(),t.beginPath(),t.arc(a.x,a.y,i,0,2*Math.PI,!1),t.strokeStyle="rgb(0, 0, 0)",t.lineWidth=.5*s,t.stroke(),t.closePath()}(1.25*Math.PI)}({clampedValue:e,context:t,HOTSPOT_HANDLE_SIZE:r,image:s,MARGIN_PX:l,opacity:m,readOnly:u,scale:p}),function({context:e,hotspotRect:t,image:n,MARGIN_PX:i,scale:a}){e.save();let r=i*a;function o(e){l(e,r,e,n.height-r)}function s(e){l(r,e,n.width-r,e)}function l(t,n,i,a){e.beginPath(),e.moveTo(t,n),e.lineTo(i,a),e.stroke(),e.closePath()}e.setLineDash&&e.setLineDash([2*a,2*a]),e.lineWidth=.5*a,e.strokeStyle="rgba(200, 200, 200, 0.5)",o(t.center.x),s(t.center.y),e.strokeStyle="rgba(150, 150, 150, 0.5)",s(t.top),s(t.bottom),o(t.left),o(t.right),e.restore()}({context:t,hotspotRect:o,image:s,MARGIN_PX:l,scale:p}),function({context:e,cropRect:t}){e.save(),e.beginPath(),e.fillStyle="rgba(66, 66, 66, 0.9)",e.lineWidth=1,e.rect(t.left,t.top,t.width,t.height),e.stroke(),e.closePath(),e.restore()}({context:t,cropRect:a}),u||function({context:e,cropHandles:t,cropping:n,opacity:i}){e.save(),go.forEach(a=>{e.fillStyle=n===a?`rgba(202, 54, 53, ${i})`:`rgba(230, 230, 230, ${i+.4})`;let{left:r,top:o,height:s,width:l}=t[a];e.fillRect(r,o,l,s),e.beginPath(),e.fillStyle=`rgba(66, 66, 66, ${i})`,e.rect(r,o,l,s),e.closePath(),e.stroke()}),e.restore()}({context:t,cropHandles:n,cropping:i,opacity:m}),t.restore()}({clampedValue:n,context:t,cropHandles:i,cropping:d,cropRect:a,HOTSPOT_HANDLE_SIZE:10,hotspotRect:r,image:o,MARGIN_PX:8,pointerPosition:u,ratio:s,readOnly:l,scale:c});let p=e.style.cursor,m=this.getCursor();p!==m&&(e.style.cursor=m)}handleDragStart=({x:e,y:t})=>{let n={x:e*this.props.scale,y:t*this.props.scale},i=f8(n,this.props.hotspotRect),a=f6(n,this.getDragHandleCoords()),r=this.getActiveCropHandleFor(n),o=f7(n,this.props.cropRect);r?this.setState({cropping:r}):a?this.setState({resizing:!0}):i?this.setState({moving:!0}):o&&this.setState({cropMoving:!0})};handleDrag=e=>{this.state.cropping?this.emitCrop(this.state.cropping,e):this.state.cropMoving?this.emitCropMove(e):this.state.moving?this.emitMove(e):this.state.resizing&&this.emitResize(e)};handleDragEnd=()=>{let{onChange:e,onChangeEnd:t}=this.props;this.setState({moving:!1,resizing:!1,cropping:!1,cropMoving:!1});let{hotspot:n,crop:i}=this.props.clampedValue,a=function(e){let t=e.top>e.bottom,n=e.left>e.right;return{top:t?e.bottom:e.top,bottom:t?e.top:e.bottom,left:n?e.right:e.left,right:n?e.left:e.right}}(i),r={crop:{top:a.top,bottom:1-a.bottom,left:a.left,right:1-a.right},hotspot:{x:n.center.x,y:n.center.y,height:Math.abs(n.height),width:Math.abs(n.width)}};e(r),t&&t(r)};handlePointerOut=()=>{this.setState({pointerPosition:null})};handlePointerMove=e=>{let t=e.currentTarget.getBoundingClientRect();this.setState({pointerPosition:{x:(e.clientX-t.left)*this.props.scale,y:(e.clientY-t.top)*this.props.scale}})};setCanvas=e=>{e&&(this.canvas=e),this.props.setCanvasObserver(e)};render(){let{image:e,readOnly:t,ratio:n}=this.props;return(0,l.jsx)(gs,{children:(0,l.jsx)(gt,{readOnly:t,ref:this.setCanvas,onDrag:this.handleDrag,onDragStart:this.handleDragStart,onDragEnd:this.handleDragEnd,onPointerMove:this.handlePointerMove,onPointerOut:this.handlePointerOut,height:e.height*n,width:e.width*n})})}}function gu(e,t){let n=e&&e.crop||fZ;return{...e,crop:{left:n.left+(t.left||0),right:n.right+(t.right||0),top:n.top+(t.top||0),bottom:n.bottom+(t.bottom||0)}}}function gp(e){return(0,l.jsx)(f0,{src:e.src,children:({isLoading:t,image:n,error:i})=>t?(0,l.jsx)(aW,{showText:!0}):i?(0,l.jsx)("div",{children:i.message}):n?(0,l.jsx)(f1,{image:n,maxHeight:gp.maxHeight,maxWidth:gp.maxWidth,children:t=>(0,l.jsx)(gc,{image:t,...e})}):null})}gp.maxHeight=500,gp.maxWidth=1e3;let gm={isLoading:!0},gh=["hotspot"],gf=[["3:4",3/4],["Square",1],["16:9",16/9],["Panorama",4]],gg={crop:fZ,hotspot:fU},gx=j.zo.div`
  min-height: 6em;
`;function gy(e){return(0,l.jsx)(h.kC,{align:"center",justify:"center",padding:4,style:{overflowWrap:"break-word"},children:e.children})}function gb(e){let{imageUrl:t,value:n,changed:i,level:a,path:r,focusPath:o=iI,presence:s,onChange:c,schemaType:u,onPathFocus:p,readOnly:m,elementProps:f}=e,[g,x]=(0,d.useState)(n||gg),{image:y,isLoading:b,error:v}=function(e){let[t,n]=(0,d.useState)(gm);return(0,d.useEffect)(()=>{n(gm);let t=new $.y(t=>{let n=document.createElement("img"),i=!1;return n.onload=()=>{i=!0,t.next(n),t.complete()},n.onerror=()=>{i=!0,t.error(Error(`Could not load image from ${e.startsWith("blob:")?"blob":e}`))},n.src=e,()=>{n.onload=null,n.onerror=null,i||(n.src="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=")}}).subscribe({error:e=>{n({isLoading:!1,error:e})},next:e=>{n({image:e,isLoading:!1})}});return()=>{t.unsubscribe()}},[e]),t}(t),j=(0,d.useCallback)(()=>{p(gh)},[p]);(0,d.useEffect)(()=>{x(n||gg)},[n]);let C="hotspot"===o[0];sB(C,e=>{!e&&C&&f.ref.current?.focus()});let w=(0,d.useCallback)(e=>{if(m)return;let t=u.fields.find(e=>"crop"===e.name&&"object"!==e.type.name),n=u.fields.find(e=>"object"!==e.type.name&&"hotspot"===e.name),i=t?{_type:t.type.name,...e.crop||fZ}:e.crop,a=n?{_type:n.type.name,...e.hotspot||fU}:e.hotspot;c([sU(i,["crop"]),sU(a,["hotspot"])])},[c,m,u.fields]),{t:k}=i1();return(0,l.jsx)(sM,{title:k("inputs.imagetool.title"),level:a,description:k("inputs.imagetool.description"),deprecated:u.deprecated,__unstable_presence:s,children:(0,l.jsxs)("div",{children:[(0,l.jsx)(h.Zb,{__unstable_checkered:!0,__unstable_focusRing:!0,tabIndex:0,ref:f.ref,onFocus:j,children:(0,l.jsx)(i9,{path:r.concat(gh),hasFocus:"hotspot"===o[0],isChanged:i,children:(0,l.jsxs)(fK,{ratio:1.5,children:[(b||v)&&(0,l.jsx)(gy,{children:v?(0,l.jsx)(h.Zb,{padding:4,radius:2,tone:"critical",border:!0,children:(0,l.jsx)(h.xv,{children:k("inputs.imagetool.load-error",{errorMessage:v.message})})}):(0,l.jsx)(aW,{showText:!0})}),!b&&y&&(0,l.jsx)(h.xu,{margin:1,children:(0,l.jsx)(gp,{value:g,src:y.src,readOnly:!!m,onChangeEnd:w,onChange:x})})]})})}),(0,l.jsx)(h.xu,{marginTop:3,children:(0,l.jsx)(h.rj,{columns:gf.length,gap:1,children:gf.map(([e,t])=>(0,l.jsxs)("div",{children:[(0,l.jsx)(h.X6,{as:"h4",size:0,children:e}),(0,l.jsx)(h.xu,{marginTop:2,children:(0,l.jsx)(fK,{ratio:t,children:(0,l.jsx)(h.Zb,{__unstable_checkered:!0,children:!b&&y?(0,l.jsx)(fQ,{aspectRatio:t,src:y.src,srcAspectRatio:y.width/y.height,hotspot:g.hotspot||fU,crop:g.crop||fZ}):(0,l.jsx)(gx,{})})})})]},t))})})]})})}let gv=(0,d.memo)(function(e){let{handleCloseDialog:t,inputProps:n,imageInputProps:i,isImageToolEnabled:a}=e,{t:r}=i1(),{changed:o,id:s,imageUrlBuilder:c,value:u}=i,p=a&&u&&u.asset,m=(0,d.useMemo)(()=>u?.asset?c.image(u.asset).url():"",[c,u?.asset]);return(0,l.jsx)(x.Vq,{__unstable_autoFocus:!1,header:r("inputs.image.hotspot-dialog.title"),id:`${s}_dialog`,onClickOutside:t,onClose:t,width:1,children:(0,l.jsx)(su,{children:(0,l.jsx)(h.Kq,{space:5,children:p&&u?.asset&&(0,l.jsx)(gb,{...i,imageUrl:m,value:u,presence:n.presence,changed:o})})})})}),gj=(0,j.zo)(h.Zb)`
  position: relative;
  width: 100%;
  overflow: hidden;
  overflow: clip;
  min-height: 3.75rem;
  max-height: 20rem;

  & > div[data-container] {
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    display: flex !important;
    align-items: center;
    justify-content: center;
  }

  & img {
    max-width: 100%;
    max-height: 100%;
  }
`,gC=(0,j.zo)(h.kC)(({$drag:e,$tone:t})=>{let n=h.Lg.color.light[t].card.enabled.fg,i=(0,h.m4)(h.Lg.color.light[t].card.enabled.bg,.8);return(0,j.iv)`
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    backdrop-filter: ${e?"blur(10px)":""};
    color: ${t?n:""};
    background-color: ${e?i:"transparent"};
  `}),gw=(0,j.zo)(h.kC)`
  position: absolute;
  top: 0;
  left: 0;
  bottom: 0;
  right: 0;
`,gk=e=>{let t=new URLSearchParams(e.split("?")[1]).get("rect");return t?[t.split(",")[2],t.split(",")[3]].map(Number):e.split("-")[1].split(".")[0].split("x").map(Number)};function gT(e){let{drag:t,readOnly:n,isRejected:i,src:a,initialHeight:r,...o}=e,[s,c]=(0,d.useState)(!1),[u,p]=(0,d.useState)(null),m=h.XL(u)?.width||0,f=t?i||n?"critical":"primary":"default",g=30*document.documentElement.clientHeight/100,[x,y]=gk(a);(0,d.useEffect)(()=>{c(!1)},[a]);let b=(0,d.useCallback)(()=>{c(!0)},[]),{t:v}=i1();return(0,l.jsxs)(gj,{...o,ref:p,style:{height:r&&!s?r:(x>m?m/(x/y):y)<g?null:"30vh"},tone:"transparent",children:[(0,l.jsxs)(h.Zb,{"data-container":!0,tone:"inherit",children:[!s&&(0,l.jsx)(g_,{cardTone:"transparent",drag:!0,content:(0,l.jsx)(aW,{showText:!0})}),(0,l.jsx)("img",{src:a,"data-testid":"hotspot-image-input",alt:e.alt,onLoad:b,referrerPolicy:"strict-origin-when-cross-origin"})]}),t&&(0,l.jsx)(g_,{cardTone:f,drag:t,content:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(h.xu,{marginBottom:3,children:(0,l.jsx)(h.X6,{children:(0,l.jsx)(gA,{isRejected:i,readOnly:n})})}),(0,l.jsx)(h.xv,{size:1,children:v(function({isRejected:e,readOnly:t}){return e?"inputs.image.drag-overlay.this-field-is-read-only":t?"inputs.image.drag-overlay.cannot-upload-here":"inputs.image.drag-overlay.drop-to-upload-image"}({isRejected:i,readOnly:n}))})]})})]})}function gA({isRejected:e,readOnly:t}){return e?(0,l.jsx)(_.vaB,{}):t?(0,l.jsx)(_.CPA,{}):(0,l.jsx)(_.XBm,{})}function g_({cardTone:e,drag:t,content:n}){return(0,l.jsx)(gC,{justify:"flex-end",padding:3,$drag:t,$tone:e,children:(0,l.jsx)(gw,{direction:"column",align:"center",justify:"center",children:n})})}let gS=(0,d.memo)(function(e){let{directUploads:t,handleOpenDialog:n,hoveringFiles:i,imageUrlBuilder:a,initialHeight:r,readOnly:o,resolveUploader:s,schemaType:c,value:u}=e,p=(0,d.useMemo)(()=>(0,eU.JZ)(u),[u]);return u&&p?(0,l.jsx)(gE,{directUploads:t,handleOpenDialog:n,hoveringFiles:i,imageUrlBuilder:a,initialHeight:r,readOnly:o,resolveUploader:s,schemaType:c,value:u}):null});function gE(e){let{directUploads:t,handleOpenDialog:n,hoveringFiles:i,imageUrlBuilder:a,initialHeight:r,readOnly:o,resolveUploader:s,schemaType:c,value:u}=e,{t:p}=i1(),m=(0,d.useMemo)(()=>i.filter(e=>s(c,e)),[i,s,c]),h=(0,d.useMemo)(()=>i.length-m.length,[m,i]),f=(0,E.j)(),g=(0,d.useMemo)(()=>a.width(2e3).fit("max").image(u).dpr(f).auto("format").url(),[f,a,u]);return(0,l.jsx)(gT,{alt:p("inputs.image.preview-uploaded-image"),drag:!u?._upload&&i.length>0,initialHeight:r,isRejected:h>0||!t,onDoubleClick:n,readOnly:o,src:g})}let gM=(0,d.memo)(function(e){let{directUploads:t,handleSelectFiles:n,hoveringFiles:i,readOnly:a,renderBrowser:r,resolveUploader:o,schemaType:s}=e,c=(0,d.useMemo)(()=>i.filter(e=>o(s,e)),[i,o,s]),u=(0,d.useMemo)(()=>e7(s,"options.accept","image/*"),[s]),p=i.length-c.length;return(0,l.jsx)("div",{style:{padding:1},children:(0,l.jsx)(h.Zb,{tone:a?"transparent":"inherit",border:!0,paddingX:3,paddingY:2,radius:2,style:0===i.length?{}:{borderColor:"transparent"},children:(0,l.jsx)(fx,{browse:r(),onUpload:n,readOnly:a,hoveringFiles:i,acceptedFiles:c,rejectedFilesCount:p,type:"image",accept:u,directUploads:t})})})});function gN({onClearValue:e}){let{t}=i1();return(0,l.jsxs)(h.Zb,{tone:"caution",padding:4,border:!0,radius:2,children:[(0,l.jsxs)(h.kC,{gap:4,marginBottom:4,children:[(0,l.jsx)(h.xu,{children:(0,l.jsx)(h.xv,{size:1,children:(0,l.jsx)(_.foC,{})})}),(0,l.jsxs)(h.Kq,{space:3,children:[(0,l.jsx)(h.xv,{size:1,weight:"medium",children:t("inputs.image.invalid-image-warning.title")}),(0,l.jsx)(h.xv,{size:1,children:t("inputs.image.invalid-image-warning.description")})]})]}),(0,l.jsx)(x.zx,{icon:_.X5P,mode:"ghost",onClick:e,text:t("inputs.image.invalid-image-warning.reset-button.text"),width:"fill"})]})}let gI=(0,d.memo)(function(e){let{assetSources:t,client:n,directUploads:i,elementProps:a,focusPath:r,id:o,imageUrlBuilder:s,members:c,observeAsset:u,onChange:p,onPathFocus:m,path:f,readOnly:g,renderAnnotation:x,renderBlock:y,renderField:b,renderInlineBlock:v,renderInput:j,renderItem:C,renderPreview:w,resolveUploader:k,schemaType:T,value:A}=e,{push:_}=(0,h.pm)(),{t:S}=i1(),[E,M]=(0,d.useState)(null),[N,I]=(0,d.useState)(!1),[z,$]=(0,d.useState)([]),[O,P]=(0,d.useState)(!1),[F,D]=(0,d.useState)(null),[R,L]=(0,d.useState)(null),[B,q]=(0,d.useState)(!1),V=(0,d.useRef)(null),K=(0,d.useRef)({el:null,height:0}),U=(0,d.useCallback)(e=>{e?(K.current.el=e,K.current.height=e.offsetHeight):(K.current.height=K.current.el?.offsetHeight||0,K.current.el=null)},[]),Z=(0,d.useCallback)(()=>{let e=z.filter(e=>k(T,e)),t=z.length-e.length;return z.length>0&&(t>0||!i)?"critical":A?._upload||g||!(z.length>0)?g||A?._upload&&A?.asset?"transparent":"default":"primary"},[i,z,g,k,T,A?._upload,A?.asset]),G=(0,d.useCallback)(()=>!0===e7(T,"options.hotspot"),[T]),H=(0,d.useCallback)(()=>"string"!=typeof f.slice(-1)[0],[f]),W=(0,d.useCallback)(()=>{A?._upload&&p(sZ(["_upload"]))},[p,A?._upload]),Y=(0,d.useCallback)(()=>{V.current&&(V.current.unsubscribe(),W())},[W]),J=(0,d.useCallback)((e,t,i={})=>{let{label:a,title:r,description:o,creditLine:s,source:l}=i,c={metadata:e7(T,"options.metadata"),storeOriginalFilename:e7(T,"options.storeOriginalFilename"),label:a,title:r,description:o,creditLine:s,source:l};Y(),I(!0),p(sV({_type:T.name})),V.current=e.upload(n,t,T,c).subscribe({next:e=>{e.patches&&p(e.patches)},error:e=>{console.error(e),_({status:"error",description:S("inputs.image.upload-error.description"),title:S("inputs.image.upload-error.title")}),W()},complete:()=>{p([sZ(["hotspot"]),sZ(["crop"])]),I(!1)}})},[Y,W,n,p,_,T,S]),X=(0,d.useCallback)(e=>{let t=e.map(e=>({file:e,uploader:k(T,e)})).find(e=>e.uploader);t&&J(t.uploader,t.file),q(!1)},[k,T,J]),Q=(0,d.useCallback)(()=>{p([sZ(["asset"]),sZ(["crop"]),sZ(["hotspot"])]),K.current.el=null,K.current.height=0},[p]),ee=(0,d.useCallback)(()=>{let e=Object.keys(A||{}),t=0===e.filter(e=>!["_type","_key","_upload","asset","crop","hotspot"].includes(e)).length,n=["asset"].concat(e.filter(e=>["crop","hotspot","_upload"].includes(e))).map(e=>sZ([e]));p(t&&!H()?sZ():n),K.current.el=null,K.current.height=0},[p,A,H]),et=(0,d.useCallback)(()=>{m(["hotspot"])},[m]),en=(0,d.useCallback)(()=>{m([]),F?.focus()},[F,m]),ei=(0,d.useCallback)(e=>{fu({assetFromSource:e,onChange:p,type:T,resolveUploader:k,uploadWith:J,isImage:!0}),M(null)},[p,k,T,J]),ea=(0,d.useCallback)(e=>{e.currentTarget===e.target&&e.currentTarget===a.ref?.current&&a.onFocus(e)},[a]),er=(0,d.useCallback)(e=>{$(e.filter(e=>"string"!==e.kind))},[]),eo=(0,d.useCallback)(()=>{$([])},[]),es=(0,d.useCallback)(()=>{Y()},[Y]),el=(0,d.useCallback)(()=>{P(!1),W()},[W]),ec=(0,d.useCallback)(()=>{P(!0)},[]),ed=(0,d.useCallback)(e=>{i&&!g?X(e):z.length>0&&eo()},[i,eo,z.length,g,X]),eu=(0,d.useCallback)(e=>{M(e)},[]),ep=(0,d.useCallback)(()=>{M(null),R?.focus()},[R]),em=(0,d.useCallback)(()=>(0,l.jsx)(gS,{directUploads:i,handleOpenDialog:et,hoveringFiles:z,imageUrlBuilder:s,initialHeight:K.current.height,readOnly:g,resolveUploader:k,schemaType:T,value:A}),[i,et,z,s,g,k,T,A]),eh=(0,d.useCallback)(()=>(0,l.jsx)(fR,{assetSources:t,directUploads:i,handleOpenDialog:et,handleRemoveButtonClick:ee,handleSelectFiles:ed,handleSelectImageFromAssetSource:eu,imageUrlBuilder:s,isImageToolEnabled:G(),isMenuOpen:B,observeAsset:u,readOnly:g,schemaType:T,setHotspotButtonElement:D,setMenuButtonElement:L,setMenuOpen:q,value:A}),[t,i,et,ee,ed,eu,s,G,B,u,g,T,A]),ef=(0,d.useCallback)(()=>(0,l.jsx)(fV,{assetSources:t,readOnly:g,directUploads:i,id:o,setMenuOpen:q,handleSelectImageFromAssetSource:eu}),[t,i,eu,o,g]),eg=(0,d.useCallback)(()=>(0,l.jsx)(gM,{directUploads:i,handleSelectFiles:ed,hoveringFiles:z,readOnly:g,renderBrowser:ef,resolveUploader:k,schemaType:T}),[i,ed,z,g,ef,k,T]),ex=(0,d.useCallback)(e=>(0,l.jsx)(fw,{uploadState:e,onCancel:N?es:void 0,onStale:ec,height:K.current.height}),[es,ec,N]),ey=(0,d.useCallback)(()=>A&&"u">typeof A.asset&&!A?._upload&&!(0,eU.JZ)(A)?()=>(0,l.jsx)(gN,{onClearValue:Q}):e=>(0,l.jsx)(fO,{ref:U,elementProps:a,handleClearUploadState:el,handleFilesOut:eo,handleFilesOver:er,handleFileTargetFocus:ea,handleSelectFiles:ed,hoveringFiles:z,inputProps:e,isStale:O,readOnly:g,renderAssetMenu:eh,renderPreview:em,renderUploadPlaceholder:eg,renderUploadState:ex,tone:Z(),value:A}),[a,Z,Q,el,ea,eo,er,ed,z,O,g,eh,em,eg,ex,U,A]),eb=(0,d.useCallback)(t=>(0,l.jsx)(gv,{isImageToolEnabled:G(),handleCloseDialog:en,imageInputProps:e,inputProps:t}),[en,G,e]),ev=(0,d.useCallback)(()=>(0,l.jsx)(fB,{handleAssetSourceClosed:ep,handleSelectAssetFromSource:ei,observeAsset:u,schemaType:T,selectedAssetSource:E,value:A}),[ep,ei,u,T,E,A]),ej=(0,d.useMemo)(()=>c.find(e=>"field"===e.kind&&"hotspot"===e.name),[c]);return(0,l.jsxs)(h.Kq,{space:5,"data-testid":"image-input",children:[c.map(e=>"field"===e.kind&&("crop"===e.name||"hotspot"===e.name)?null:"field"===e.kind?(0,l.jsx)(lD,{member:e,renderAnnotation:x,renderBlock:y,renderInlineBlock:v,renderInput:"asset"===e.name?ey():j,renderField:"asset"===e.name?gz:b,renderItem:C,renderPreview:w},e.key):"fieldSet"===e.kind?(0,l.jsx)(l7,{member:e,renderAnnotation:x,renderBlock:y,renderField:b,renderInlineBlock:v,renderInput:j,renderItem:C,renderPreview:w},e.key):"error"===e.kind?(0,l.jsx)(l6,{member:e},e.key):(0,l.jsx)(l.Fragment,{children:S("inputs.image.error.unknown-member-kind",{kind:e.kind})})),ej&&"hotspot"===r[0]&&(0,l.jsx)(ca,{...e,absolutePath:ej.field.path,renderInput:eb}),E&&ev()]})});function gz({children:e}){return e}let g$={document:hq,object:hq,array:function(e){return(0,d.useMemo)(()=>Array.isArray(e.schemaType.options?.list),[e.schemaType])?(0,l.jsx)(m1,{...e}):(0,w.d7)(e.schemaType)?(0,l.jsx)(m9,{...e}):(0,l.jsx)(mW,{...e})},boolean:function(e){let{t}=i1(),{id:n,value:i,schemaType:a,readOnly:r,elementProps:o,validation:s}=e,c="checkbox"===(a.options?.layout||"switch")?h.XZ:h.rs,d=r?"transparent":void 0,u=(0,l.jsx)(hn,{padding:3,children:(0,l.jsx)(c,{label:a.title,...o,checked:i||!1,readOnly:r,indeterminate:"boolean"!=typeof i,style:{margin:-4}})});return(0,l.jsx)(he,{border:!0,"data-testid":"boolean-input",radius:2,tone:d,children:(0,l.jsxs)(h.kC,{children:[r?(0,l.jsx)(x.u,{content:t("inputs.boolean.disabled"),children:u}):u,(0,l.jsx)(h.xu,{flex:1,paddingY:2,children:(0,l.jsx)(sS,{deprecated:a.deprecated,description:a.description,inputId:n,validation:s,title:a.title})}),(0,l.jsx)(ht,{paddingX:3,paddingY:1,children:(0,l.jsx)(sL,{maxAvatars:1,position:"top"})})]})})},number:hM,text:function(e){let{schemaType:t,validationError:n,value:i,elementProps:a}=e;return(0,l.jsx)(hG,{customValidity:n,value:i||"",placeholder:t.placeholder,rows:"number"==typeof t.rows?t.rows:10,...a})},email:function(e){let{validationError:t,elementProps:n}=e;return(0,l.jsx)(h.oi,{...n,type:"email",inputMode:"email",customValidity:t})},datetime:function(e){let{onChange:t,schemaType:n,value:i,elementProps:a}=e,{dateFormat:r,timeFormat:o,timeStep:s}=function(e={}){return{dateFormat:e.dateFormat||eq.K_,timeFormat:e.timeFormat||eq._r,timeStep:"timeStep"in e&&Number(e.timeStep)||1}}(n.options),{t:c}=i1(),u=(0,d.useCallback)(e=>{let n=e;null!==n&&s>1&&(n=function(e,t){if(!t||1===t)return e;let n=(0,tT.Z)(e),i=(0,tA.Z)(n),a=i%t;return hA(0!==a?(0,tw.Z)(n,i-a):n)}(n,s)),t(null===n?sZ():sU(n))},[t,s]),p=(0,d.useCallback)(e=>(0,eq.WU)(e,`${r} ${o}`),[r,o]),m=(0,d.useCallback)(e=>(0,eq.Qc)(e,`${r} ${o}`),[r,o]),h=(0,d.useMemo)(()=>hw(c),[c]);return(0,l.jsx)(hC,{...a,calendarLabels:h,onChange:u,deserialize:h_,formatInputValue:p,parseInputValue:m,placeholder:n.placeholder,selectTime:!0,serialize:hA,timeStep:s,value:i})},date:function(e){let{readOnly:t,onChange:n,schemaType:i,elementProps:a,value:r}=e,o=i.options?.dateFormat||eq.K_,{t:s}=i1(),c=(0,d.useCallback)(e=>{n(null===e?sZ():sU(e))},[n]),u=(0,d.useCallback)(e=>(0,eq.WU)(e,o),[o]),p=(0,d.useCallback)(e=>(0,eq.Qc)(e,o),[o]),m=(0,d.useMemo)(()=>hw(s),[s]);return(0,l.jsx)(hC,{...a,deserialize:hk,formatInputValue:u,onChange:c,parseInputValue:p,placeholder:i.placeholder,calendarLabels:m,readOnly:t,selectTime:!1,serialize:hT,value:r})},url:function(e){let{schemaType:t,validationError:n,elementProps:i}=e,a=hE(t,"uri")?.constraint?.options?.allowRelative?"text":"url";return(0,l.jsx)(h.oi,{type:a,inputMode:"url",customValidity:n,...i})},image:function(e){let t=e.schemaType.options?.sources,{image:n}=or().__internal,i=CI(),a=Bi(rz),r=n.directUploads,o=(0,d.useCallback)((e,t)=>r?lN(e,t):null,[r]),s=(0,d.useMemo)(()=>t||n.assetSources,[n,t]),c=(0,d.useMemo)(()=>eZ(a),[a]),u=(0,d.useCallback)(e=>ly(i,e),[i]),{t:p}=i1();return(0,l.jsx)(gI,{...e,t:p,client:a,assetSources:s,directUploads:r,imageUrlBuilder:c,observeAsset:u,resolveUploader:o})},file:function(e){let t=e.schemaType.options?.sources,n=CI(),{file:i}=or().__internal,a=Bi(rz),{t:r}=i1(),o=(0,d.useCallback)((e,t)=>i.directUploads?lN(e,t):null,[i.directUploads]),s=(0,d.useMemo)(()=>t||i.assetSources,[i,t]),c=(0,d.useCallback)(e=>ly(n,e),[n]);return(0,l.jsx)(fz,{...e,t:r,client:a,assetSources:s,directUploads:i.directUploads,observeAsset:c,resolveUploader:o})},string:hZ,slug:function(e){let t=k8(),{path:n,value:i,schemaType:a,validation:r,onChange:o,readOnly:s,elementProps:u}=e,p=a.options?.source,m=(0,d.useMemo)(()=>r.filter(e=>"error"===e.level),[r]),f=function(){let{getClient:e}=AU(),t=NQ(),n=vh(),i=NP(),a=Bo();return(0,d.useMemo)(()=>({projectId:i,dataset:a,getClient:e,schema:t,currentUser:n}),[e,t,n,i,a])}(),{t:g}=i1(),y=(0,d.useCallback)(e=>{if(!e){o(sH.from(sZ([])));return}o(sH.from([sV({_type:a.name}),sU(e,["current"])]))},[o,a.name]),[b,v]=function(e){let[t,n]=(0,d.useState)(null),i=(0,d.useRef)(0);return[t,(0,d.useCallback)(t=>{let a=++i.current;n({status:"pending"}),Promise.resolve().then(()=>e(t)).then(e=>{a===i.current&&n({status:"complete",result:e})},e=>{a===i.current&&n({status:"error",error:e})})},[e])]}((0,d.useCallback)(()=>{if(!p)return Promise.reject(Error(g("inputs.slug.error.missing-source",{schemaType:a.name})));let e=t([])||{_type:a.name},i=function(e,t,n){let i=e.slice(0,-1),a=c.U2(t,i);return{parentPath:i,parent:a,...n}}(n,e,f);return hU(p,e,i).then(e=>hK(e||"",a,i)).then(e=>y(e))},[p,t,a,n,f,y,g])),j=b?.status==="pending",C=(0,d.useCallback)(e=>y(e.currentTarget.value),[y]);return(0,l.jsx)(h.Kq,{space:3,children:(0,l.jsxs)(h.kC,{gap:1,children:[(0,l.jsxs)(h.xu,{flex:1,children:[(0,l.jsx)(h.oi,{customValidity:m.length>0?m[0].message:"",disabled:j,onChange:C,value:i?.current||"",readOnly:s,...u}),b?.status==="error"&&(0,l.jsx)(h.Zb,{padding:2,tone:"critical",children:b.error.message})]}),p&&(0,l.jsx)(x.zx,{mode:"ghost",type:"button",disabled:s||j,onClick:v,size:"large",text:b?.status==="pending"?g("inputs.slug.action.generating"):g("inputs.slug.action.generate")})]})})},crossDatasetReference:function(e){let{path:t,schemaType:n}=e,i=AU(),a=i.getClient(rz),r=CI(),o=i.getClient,{enableLegacySearch:s=!1}=i.search,c=(0,d.useMemo)(()=>a.withConfig({dataset:n.dataset,apiVersion:"2023-11-13",ignoreBrowserTokenWarning:!0}).clone(),[a,n.dataset]),u=dq(c),p=function(e){let t=(0,d.useRef)(e);return t.current=e,t}(cW([])),m=(0,d.useCallback)(e=>(0,O.D)(fr(n.options,p.current,t,o)).pipe((0,eu.z)(({filter:t,params:i})=>{var a;return a={...n.options,filter:t,params:i,tag:"search.cross-dataset-reference",maxFieldDepth:u,enableLegacySearch:s},dy(n.to,c,{...a,maxDepth:a.maxFieldDepth})(e,{includeDrafts:!1,isCrossDataset:!0}).pipe((0,P.U)(({hits:e})=>e.map(({hit:e})=>e)),(0,P.U)(e=>iE(e)),(0,P.U)(e=>e.map(e=>({id:e.id,type:e.type,published:e.published}))))}),(0,F.K)(e=>{let t=e.details&&"queryParseError"===e.details.type;return n.options?.filter&&t&&(e.message='Invalid reference filter, please check the custom "filter" option'),(0,q._)(e)})),[n,p,t,o,c,u,s]),h=(0,d.useMemo)(()=>(function(e){let{client:t,documentPreviewStore:n}=e,{dataset:i,projectId:a}=t.config(),r=i&&a?{dataset:i,projectId:a}:void 0;return function(e,i){return(e._type?(0,N.of)(e):n.observeDocumentTypeFromId(e._id,r).pipe((0,P.U)(t=>({_id:e._id,_type:t})))).pipe((0,ec.w)(a=>{if(!a._type)return(function(e,t){let n={uri:e.getDataUrl("doc",t),json:!0,query:{excludeContent:"true"},tag:"cross-dataset-refs.availability"};return e.observable.request(n).pipe((0,P.U)(e=>{let n=nY(e.omitted||[],e=>e.id)[t];return n?"existence"===n.reason?fa:"permission"===n.reason?fi:null:fn}))})(t,e._id).pipe((0,P.U)(t=>({id:e._id,type:void 0,availability:t,preview:{published:void 0}})));let o=i.to.find(e=>e.type===a._type),s=b2(o?.preview)||[],l=n.observePaths(e,s,r).pipe((0,P.U)(e=>e&&vi(e,o)));return(0,U.a)([l]).pipe((0,P.U)(([t])=>({type:a._type,id:e._id,availability:fn,preview:{published:iO(t)?t:void 0}})))}))}})({client:c,documentPreviewStore:r}),[c,r]);return(0,l.jsx)(ft,{...e,getReferenceInfo:h,onSearch:m})}},gO=(0,t4.dS)({version:1,name:"Portable Text Editor Expanded",description:"The portable text editor was expanded"}),gP=(0,t4.dS)({version:1,name:"Portable Text Editor Collapsed",description:"The portable text editor was collapsed"}),gF=(0,t4.dS)({version:1,name:"Portable Text Editor Invalid Value Ignored",description:"The portable text got an invalid value from the form and pressed button to ignore it"}),gD=(0,t4.dS)({version:1,name:"Portable Text Editor Invalid Value Resolved",description:"The portable text got an invalid value from the form and pressed button to resolve it."}),gR=j.zo.div`
  position: relative;
`,gL=j.zo.div`
  z-index: 13;
  opacity: 0;
  transition: opacity 300ms linear;
`,gB=(0,j.zo)(h.Zb)`
  border: 1px solid var(--card-border-color);
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 12;
  transition: opacity 150ms ease-in-out;
  opacity: 0;
  box-sizing: border-box;
`,gq=(0,j.zo)(h.kC)`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;

  &:hover,
  &:focus {
    & ${gB} {
      opacity: 0.9;
    }

    & ${gL} {
      opacity: 1;
    }
  }
`,gV=()=>"u">typeof window&&"ontouchstart"in window||"u">typeof navigator&&navigator.maxTouchPoints>0;function gK(e){let{children:t,message:n,onActivate:i,isOverlayActive:a}=e,[r,o]=(0,d.useState)(!1),{t:s}=i1(),c=(0,d.useCallback)(()=>{i&&i()},[i]),u=(0,d.useCallback)(e=>{a&&"Space"===e.code&&i&&(e.preventDefault(),i())},[a,i]),p=(0,d.useCallback)(()=>{a&&i&&i()},[a,i]),m=(0,d.useCallback)(()=>{o(!0)},[]),f=(0,d.useCallback)(()=>{o(!1)},[]),g=(0,d.useMemo)(()=>{let e;e=gV()?"tap":r?"click-focused":"click";let t=n||s("inputs.portable-text.activate-on-focus-message",{context:e});return(0,l.jsx)(h.xv,{weight:"medium",children:t})},[r,n,s]);return(0,l.jsxs)(gR,{onBlur:f,onClick:c,onFocus:m,onKeyDown:u,onDragEnter:p,children:[a&&(0,l.jsxs)(gq,{"data-testid":"activate-overlay",tabIndex:0,align:"center",justify:"center",children:[(0,l.jsx)(gB,{radius:2}),(0,l.jsx)(gL,{children:g})]}),t]})}let gU=j.zo.div(e=>{let{color:t,input:n,radius:i}=(0,b.aQ)(e.theme),a={color:t.input.default.enabled.border,width:n.border.width};return(0,j.iv)`
    --input-box-shadow: ${ul(a)};

    position: relative;

    & [data-wrapper] {
      overflow: hidden;
      overflow: clip;
      position: relative;
      z-index: 1;
      padding: ${n.border.width}px;
    }

    & [data-border] {
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      box-shadow: var(--input-box-shadow);
      z-index: 2;
      border-radius: ${i[2]}px;
      pointer-events: none;
    }

    &:not([data-read-only])[data-focused] [data-border] {
      --input-box-shadow: ${uc({base:t,border:a,focusRing:n.text.focusRing})};
    }
  `}),gZ=(0,j.zo)(h.mh)`
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;

  & > div {
    height: 100%;
  }
`,gG=[1,2,3,4,5,6,7,8,9],gH=["●","○","■"],gW=["number","lower-alpha","lower-roman"],gY={em:"em","strike-through":"s",underline:"u",strong:"strong",code:"code"},gJ={h1:{paddingTop:5,paddingBottom:4},h2:{paddingTop:4,paddingBottom:4},h3:{paddingTop:4,paddingBottom:3},h4:{paddingTop:4,paddingBottom:3},h5:{paddingTop:4,paddingBottom:3},h6:{paddingTop:4,paddingBottom:2},normal:{paddingTop:2,paddingBottom:3},blockquote:{paddingTop:2,paddingBottom:3}},gX=j.zo.span(({theme:e})=>{let t=e.sanity.color.dark;return(0,j.iv)`
    /* Make sure the annotation styling is visible */
    &[data-mark='code'] {
      color: inherit;
      mix-blend-mode: ${t?"screen":"multiply"};
    }
  `});function gQ(e){let{value:t,focused:n,selected:i,children:a,schemaType:r}=e,o=gY[t],s=r.component,c=(0,d.useCallback)(e=>(0,l.jsx)(gX,{as:o,"data-mark":t,children:e.children}),[o,t]);return(0,d.useMemo)(()=>{let e={focused:n,renderDefault:c,schemaType:r,selected:i,title:r.title,value:t};return s?(0,l.jsx)(s,{...e,children:a}):(0,l.jsx)(c,{...e,children:a})},[s,c,a,n,r,i,t])}function g0(e){return`list-level-${e}`}let g1=j.zo.div(({theme:e})=>{let{radius:t,space:n,color:i}=e.sanity,a=(0,h.m4)(i.spot.yellow,.2);return(0,j.iv)`
    position: absolute;
    border-radius: ${t[3]}px;
    top: -${n[2]}px;
    bottom: -${n[1]+n[1]}px;
    left: ${n[4]+n[1]}px;
    right: ${n[1]}px;
    background-color: ${a};
    pointer-events: none;
  `}),g2=(0,j.zo)(i9)(()=>(0,j.iv)`
    width: 1px;
    height: 100%;

    & > div {
      height: 100%;
    }
  `),g3=j.zo.div`
  display: flex;
  pointer-events: all;
`;function g4(e){let t=(0,t2._F)(),{block:n,onChange:i,renderBlockActions:a}=e,r=(0,d.useMemo)(()=>t.schemaTypes.decorators.map(e=>e.value),[t]),o=(0,d.useMemo)(()=>{if(a)return a({block:n,value:t2.q$.getValue(t),set:function(e){let{allowedDecorators:t,block:n,onChange:i}=e;return e=>{let a=[sU((0,t9.nX)(e,{allowedDecorators:t}),[{_key:n._key}])];return i(sH.from(a))}}({allowedDecorators:r,block:n,onChange:i}),unset:function(e){let{block:t,onChange:n}=e;return()=>{let e=[sZ([{_key:t._key}])];return n(sH.from(e))}}({block:n,onChange:i}),insert:function(e){let{allowedDecorators:t,block:n,onChange:i}=e;return e=>{let a=[sK((Array.isArray(e)?e:[e]).map(e=>(0,t9.nX)(e,{allowedDecorators:t})),"after",[{_key:n._key}])];return i(sH.from(a))}}({allowedDecorators:r,block:n,onChange:i})})},[a,n,t,i,r]);return o?(0,l.jsx)(g3,{contentEditable:!1,children:o}):null}let g5=j.zo.div(function(e){let{$level:t}=e,{color:n,font:i,radius:a,space:r}=(0,b.aQ)(e.theme),o=gW[(t-1)%gW.length],s=gH[(t-1)%gH.length];return(0,j.iv)`
    --marker-bg-color: transparent;

    mix-blend-mode: ${n._dark?"screen":"multiply"};
    position: relative;

    & > [data-ui='TextBlock_inner'] {
      position: relative;
      flex: 1;
    }

    & > div:before {
      content: '';
      position: absolute;
      top: -${r[1]}px;
      bottom: -${r[1]}px;
      left: -${r[1]}px;
      right: -${r[1]}px;
      border-radius: ${a[2]}px;
      background-color: var(--marker-bg-color);
      // This is to make sure the marker is always behind the text
      z-index: -1;
      pointer-events: none;
    }

    &[data-markers] {
      --marker-bg-color: ${n._dark?M.VG.purple[950].hex:M.VG.purple[50].hex};
    }

    &[data-warning] {
      --card-border-color: ${n.button.ghost.caution.enabled.border};
      --marker-bg-color: ${n.button.ghost.caution.hovered.bg};
    }

    &[data-error] {
      --card-border-color: ${n.button.ghost.critical.enabled.border};
      --marker-bg-color: ${n.button.ghost.critical.hovered.bg};
    }

    & [data-list-prefix] {
      position: absolute;
      margin-left: -4.5rem;
      width: 3.75rem;
      text-align: right;
      box-sizing: border-box;
    }

    &[data-list-item='number'] [data-list-prefix] {
      font-variant-numeric: tabular-nums;

      & > span:before {
        content: counter(${g0(t)}) '.';
        content: counter(${g0(t)}, ${o}) '.';
      }
    }

    &[data-list-item='bullet'] [data-list-prefix] {
      & > span {
        position: relative;
        top: -0.1875em;

        &:before {
          content: '${s}';
          font-size: 0.46666em;
        }
      }
    }

    & [data-text] {
      overflow-wrap: anywhere;
      text-transform: none;
      white-space: pre-wrap;
      font-family: ${i.text.family};
      flex: 1;

      *::selection {
        background-color: ${(0,v.m4)(n.focusRing,.3)};
      }
    }
  `}),g8=(0,j.zo)(h.xu)`
  position: relative;
  display: flex;
`,g6=j.zo.div`
  user-select: none;
  white-space: nowrap;
`,g7=(0,j.zo)(h.xu)`
  line-height: 0;
  width: 25px;
  position: relative;
`,g9=(0,j.zo)(h.kC)(({theme:e})=>{let{fonts:t,space:n}=e.sanity,i=t.text.sizes[1],a=t.text.sizes[2],r=i.lineHeight-i.ascenderHeight-i.descenderHeight,o=a.lineHeight-a.ascenderHeight-a.descenderHeight,s=0-(r+n[2]+n[2]-o)/2;return(0,j.iv)`
    user-select: none;
    position: absolute;
    right: 0;
    top: ${s}px;
  `}),xe=(0,j.zo)(h.xu)`
  max-width: 250px;
`,xt=(0,j.zo)(h.kC)`
  position: relative;
  padding-left: ${({$level:e})=>e?32*e:0}px;
`,xn=j.zo.div(({theme:e,$hasChanges:t})=>{let{space:n}=e.sanity;return(0,j.iv)`
      position: absolute;
      width: ${n[2]}px;
      right: 0;
      top: 0;
      bottom: 0;
      padding-left: ${n[1]}px;
      padding-right: ${n[2]}px;
      user-select: none;

      ${!t&&(0,j.iv)`
        display: none;
      `}
    `}),xi=j.zo.div`
  display: block;
`,xa=({children:e,...t})=>(0,l.jsx)(h.xv,{"data-testid":"text-style--normal",...t,children:(0,l.jsx)(xi,{children:e})}),xr=({children:e,...t})=>(0,l.jsx)(h.X6,{as:"h1","data-testid":"text-style--h1",size:5,...t,children:(0,l.jsx)(xi,{children:e})}),xo=({children:e,...t})=>(0,l.jsx)(h.X6,{as:"h2","data-testid":"text-style--h2",size:4,...t,children:(0,l.jsx)(xi,{children:e})}),xs=({children:e,...t})=>(0,l.jsx)(h.X6,{as:"h3","data-testid":"text-style--h3",size:3,...t,children:(0,l.jsx)(xi,{children:e})}),xl=({children:e,...t})=>(0,l.jsx)(h.X6,{as:"h4","data-testid":"text-style--h4",size:2,...t,children:(0,l.jsx)(xi,{children:e})}),xc=({children:e,...t})=>(0,l.jsx)(h.X6,{as:"h5","data-testid":"text-style--h5",size:1,...t,children:(0,l.jsx)(xi,{children:e})}),xd=({children:e,...t})=>(0,l.jsx)(h.X6,{as:"h6","data-testid":"text-style--h6",size:0,...t,children:(0,l.jsx)(xi,{children:e})}),xu=j.zo.blockquote`
  position: relative;
  display: block;
  margin: 0;
  padding-left: ${({theme:e})=>e.sanity.space[3]}px;

  &::before {
    content: '';
    position: absolute;
    left: 0;
    top: -4px;
    bottom: -4px;
    width: 3px;
    background: var(--card-border-color);
  }
`,xp=({children:e,...t})=>(0,l.jsx)(xu,{"data-testid":"text-style--blockquote",...t,children:(0,l.jsx)(h.xv,{as:"p",children:e})}),xm={normal:xa,h1:xr,h2:xo,h3:xs,h4:xl,h5:xc,h6:xd,blockquote:xp};function xh(e){let{children:t,floatingBoundary:n,focused:i,isFullscreen:a,onItemClose:r,onItemOpen:o,onPathFocus:s,path:u,readOnly:p,referenceBoundary:m,renderBlock:f,renderAnnotation:g,renderBlockActions:y,renderCustomMarkers:b,renderField:v,renderInlineBlock:j,renderInput:C,renderItem:w,renderPreview:k,schemaType:T,selected:A,spellCheck:_,value:S}=e,{Markers:E}=or().__internal.components,[M,N]=(0,d.useState)(!1),I=om(u),z=co(rg(u)),$=(0,t2._F)(),{onChange:O}=sY(),P=oa(u,!0),F=(0,d.useMemo)(()=>P.filter(e=>(0,c.Xy)(e.path,u)||"children"===e.path.slice(-3)[1]&&e.path.length-u.length==2),[u,P]),D=(0,d.useCallback)(()=>N(!0),[]),R=(0,d.useCallback)(()=>N(!1),[]),{validation:L,hasError:B,hasWarning:q,hasInfo:V}=op(z?.node),K=!!b&&I.length>0,U=B||q||K||V,Z=(0,d.useCallback)(()=>{z&&o(z.node.path)},[o,z]),G=(0,d.useCallback)(()=>{let e={path:u.slice(-1),offset:0};t2.q$.delete($,{focus:e,anchor:e},{mode:"blocks"}),t2.q$.focus($)},[u,$]),H=(0,d.useMemo)(()=>(0,l.jsxs)(xt,{align:"flex-start",$level:S?.level,children:[S.listItem&&(0,l.jsx)(g6,{contentEditable:!1,children:(0,l.jsx)(h.xv,{"data-list-prefix":"",children:(0,l.jsx)(xi,{})})}),(0,l.jsx)("div",{"data-text":"",style:void 0,children:t})]}),[S.listItem,S.level,t]),W=(0,d.useMemo)(()=>a&&!y?{paddingX:5}:a&&y?{paddingLeft:5,paddingRight:2}:y?{paddingLeft:3,paddingRight:2}:{paddingX:3},[a,y]),Y=(0,d.useMemo)(()=>S.listItem?{paddingY:2}:gJ[S.style||"normal"]||{paddingY:2},[S]),J=!!z?.member.open,X=$.schemaTypes.portableText,Q=(0,d.useMemo)(()=>({__unstable_floatingBoundary:n,__unstable_referenceBoundary:m,__unstable_referenceElement:z?.elementRef?.current||null,children:H,focused:i,markers:I,onClose:r,onOpen:Z,onPathFocus:s,onRemove:G,open:J,parentSchemaType:X,path:z?.node.path||iI,presence:F,readOnly:!!p,renderAnnotation:g,renderBlock:f,renderDefault:xf,renderField:v,renderInput:C,renderInlineBlock:j,renderItem:w,renderPreview:k,schemaType:T,selected:A,validation:L,value:S}),[n,i,J,I,z?.elementRef,z?.node.path,r,Z,s,G,X,p,m,g,f,v,j,C,w,k,T,A,H,F,L,S]),ee=(0,d.useMemo)(()=>U&&(0,l.jsx)(xe,{children:(0,l.jsx)(E,{markers:I,renderCustomMarkers:b,validation:L})})||null,[E,I,b,U,L]),et=y&&!p,en=a&&z;return(0,d.useMemo)(()=>(0,l.jsx)(h.xu,{...Y,"data-testid":"text-block","data-text-block":"",ref:z?.elementRef,style:void 0,children:(0,l.jsx)(g8,{"data-testid":"text-block__wrapper",children:(0,l.jsxs)(h.kC,{"data-text-block-inner":"",flex:1,...W,children:[(0,l.jsx)(h.xu,{flex:1,children:(0,l.jsx)(x.u,{content:ee,disabled:!U,placement:"top",portal:"editor",children:(0,l.jsx)(g5,{$level:S.level||1,"data-error":B?"":void 0,"data-list-item":S.listItem,"data-markers":K?"":void 0,"data-read-only":p,"data-testid":"text-block__text","data-warning":q?"":void 0,spellCheck:_,children:f&&f(Q)})})}),et&&(0,l.jsx)(g7,{contentEditable:!1,marginRight:3,children:(0,l.jsx)(g9,{children:i&&(0,l.jsx)(g4,{block:S,onChange:O,renderBlockActions:y})})}),en&&(0,l.jsx)(xn,{$hasChanges:z.member.item.changed,contentEditable:!1,onMouseEnter:D,onMouseLeave:R,children:(0,l.jsx)(g2,{hasFocus:i,isChanged:z.member.item.changed,path:z.member.item.path,withHoverEffect:!1})}),M&&(0,l.jsx)(g1,{})]})})}),[et,en,Q,i,D,R,B,K,q,W,z,O,Y,p,f,y,M,_,ee,U,S])}let xf=e=>(0,l.jsx)(l.Fragment,{children:e.children}),xg=(0,j.zo)(h.Zb)`
  &[data-fullscreen='true'] {
    height: 100%;
  }

  &[data-fullscreen='false'] {
    min-height: 5em;
    resize: vertical;
    overflow: auto;
    height: 19em;
  }

  &:not([hidden]) {
    display: flex;
  }

  flex-direction: column;
`,xx=(0,j.zo)(h.Zb)`
  z-index: 10;
  line-height: 0;
`,xy=(0,j.zo)(h.Zb)`
  position: relative;
  overflow: hidden;
  overflow: clip;

  & > [data-portal] {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    pointer-events: none;

    & > * {
      pointer-events: initial;
    }
  }

  &::selection,
  *::selection {
    background-color: transparent;
  }
`,xb=(0,j.zo)(at)`
  position: relative;
  overflow: auto;
  height: 100%;
  display: flex;
  flex-direction: column;

  & > * {
    flex: 1;
    min-height: auto;
  }
`,xv=(0,j.zo)(h.Zb)`
  height: 100%;
  width: 100%;
  counter-reset: ${gG.map(e=>g0(e)).join(" ")};
  overflow: hidden;
  overflow: clip;

  & > div {
    height: 100%;
  }

  & .pt-editable {
    display: block;
    width: 100%;
    height: 100%;

    ${gG.map(e=>(0,j.iv)`
        & > .pt-list-item-number[class~='pt-list-item-level-${e}'] {
          counter-increment: ${g0(e)};
        }
      `)}

    & > .pt-list-item-bullet + .pt-list-item-number,
    & > .pt-list-item-number + .pt-list-item-bullet {
      margin-top: ${({theme:e})=>e.sanity.space[3]}px;
      counter-reset: ${gG.map(e=>g0(e)).join(" ")};
    }

    & > :not(.pt-list-item) + .pt-list-item {
      margin-top: ${({theme:e})=>e.sanity.space[2]}px;
    }

    /* Reset the list count if the element is not a numbered list item */
    & > :not(.pt-list-item-number) {
      counter-set: ${gG.map(e=>g0(e)).join(" ")};
    }

    ${gG.slice(1).map(e=>(0,j.iv)`
        & > .pt-list-item-level-${e} + .pt-list-item-level-${e-1} {
          counter-reset: ${g0(e)};
        }
      `)}

    & > .pt-list-item + :not(.pt-list-item) {
      margin-top: ${({theme:e})=>e.sanity.space[3]}px;
    }

    & > :first-child {
      padding-top: ${({$isFullscreen:e,theme:t})=>t.sanity.space[e?5:3]}px;
    }

    padding-bottom: ${({$isFullscreen:e,theme:t})=>t.sanity.space[e?9:5]}px;

    & > .pt-block {
      margin: 0 auto;
      max-width: ${e=>(0,b.aQ)(e.theme).container[1]}px;
    }

    /* & > .pt-block {
      & .pt-inline-object {
      }
    } */

    & .pt-drop-indicator {
      pointer-events: none;
      border: 1px solid var(--card-focus-ring-color) !important;
      height: 0px !important;
      border-radius: ${e=>(0,b.aQ)(e.theme).radius[2]}px;
      margin-top: -3px;
      left: calc(
        ${({$isFullscreen:e,theme:t})=>e?(0,h.hO)(t.sanity.space[5]):(0,h.hO)(t.sanity.space[3])} - 1px
      );
      right: calc(
        ${({$isFullscreen:e,theme:t})=>e?(0,h.hO)(t.sanity.space[5]):(0,h.hO)(t.sanity.space[3])} - 1px
      );
      width: calc(
        100% -
          ${({$isFullscreen:e,theme:t})=>e?(0,h.hO)(2*t.sanity.space[5]):(0,h.hO)(2*t.sanity.space[3])} + 2px
      ) !important;
    }
  }
`,xj=e=>(0,l.jsx)(l.Fragment,{children:e.children}),xC=e=>{let{block:t,children:n,schemaType:i,selected:a,focused:r,level:o,value:s}=e,{title:c,component:u}=i;return(0,d.useMemo)(()=>{let e={block:t,focused:r,level:o,renderDefault:xj,schemaType:i,selected:a,title:c,value:s};return u?(0,l.jsx)(u,{...e,children:n}):(0,l.jsx)(xj,{...e,children:n})},[u,t,n,r,o,i,a,c,s])},xw=e=>{let{block:t,focused:n,children:i,selected:a,schemaType:r}=e,o=(0,d.useMemo)(()=>(t.style&&xm[t.style]?xm[t.style]:xm[0])||xa,[t.style]),s=(0,d.useCallback)(e=>(0,l.jsx)(o,{children:(0,l.jsx)(xi,{"data-testid":`text-style--${t.style}`,children:e.children})}),[o,t.style]);return(0,d.useMemo)(()=>{let e=r.component,{title:o,value:c}=r,d={block:t,focused:n,renderDefault:s,schemaType:r,selected:a,title:o,value:c};return e?(0,l.jsx)(e,{...d,children:i}):(0,l.jsx)(s,{...d,children:i})},[s,t,i,n,r,a])},xk=j.zo.div`
  border-right: 1px solid var(--card-border-color);
  height: auto;

  &[data-hidden] {
    opacity: 0;
  }
`;function xT(e){let{hidden:t,...n}=e;return(0,l.jsx)(xk,{"data-ui":"CollapseMenuDivider","data-hidden":t?"":void 0,...n})}let xA={portal:!0,constrainSize:!0},x_=(0,d.forwardRef)(function(e,t){let{disableRestoreFocusOnClose:n,menuButton:i,menuButtonProps:a,menuOptions:r,onMenuClose:o}=e;return(0,l.jsx)(x.j2,{__unstable_disableRestoreFocusOnClose:n,id:"menu-button",ref:t,onClose:o,popover:xA,...a,button:i,menu:(0,l.jsx)(h.v2,{children:r.map((e,t)=>{let{collapsedProps:n={},expandedProps:i={},tooltipProps:a={},tooltipText:r,dividerBefore:o,fontSize:s,padding:c,text:u,icon:p,selected:m,...f}=e.props;return(0,l.jsxs)(d.Fragment,{children:[o&&0!==t&&(0,l.jsx)(h.R,{}),(0,l.jsx)(x.sN,{text:u,icon:p,pressed:m,...f})]},e.key)})})})});function xS(e){let{onIntersectionChange:t,children:n,options:i,...a}=e,[r,o]=(0,d.useState)(null);return(0,d.useEffect)(()=>{let e=r?.closest('[data-ui="Flex"]');if(!e)return;let n=new IntersectionObserver(t,i);return n.observe(e),()=>{n.unobserve(e),n.disconnect()}},[r,t,i]),(0,l.jsxs)(h.kC,{...a,children:[n,(0,l.jsx)("span",{hidden:!0,ref:o})]})}let xE=(0,j.iv)`
  list-style: none;
  display: flex;
  white-space: nowrap;

  &[data-hidden='true'] {
    opacity: 0;
    visibility: hidden;
  }
`,xM=(0,j.zo)(h.kC)`
  padding: ${3}px;
  margin: -${3}px;
  box-sizing: border-box;
`,xN=(0,j.zo)(h.kC)`
  border-radius: inherit;
  position: relative;
`,xI=(0,j.zo)(h.kC)`
  width: max-content;
  &[data-hidden='true'] {
    visibility: hidden;
    position: relative;
    margin-top: -1px;
    height: 1px;
  }
`,xz=(0,j.zo)(xS)`
  ${xE}
`;function x$(e){return!!e}let xO=(0,d.forwardRef)(function(e,t){let{children:n,collapsed:i,disableRestoreFocusOnClose:a,onMenuClose:r,menuButtonProps:o,...s}=e,c=(0,d.useMemo)(()=>d.Children.toArray(n).filter(x$),[n]),u=(0,d.useMemo)(()=>o?.button||(0,l.jsx)(aI,{}),[o]);return i?(0,l.jsx)(x_,{ref:t,disableRestoreFocusOnClose:a,menuButton:u,menuButtonProps:o,menuOptions:c,onMenuClose:r}):(0,l.jsx)(xP,{...s,ref:t,disableRestoreFocusOnClose:a,menuButtonProps:o,menuOptions:c,onMenuClose:r})}),xP=(0,d.forwardRef)(function(e,t){let{collapseText:n=!0,disableRestoreFocusOnClose:i,gap:a,menuOptions:r,menuButtonProps:o,onMenuClose:s,...c}=e,[u,p]=(0,d.useState)(null),[m,f]=(0,d.useState)({}),[g,y]=(0,d.useState)({}),b=(0,d.useMemo)(()=>({root:u,threshold:.99,rootMargin:"2px"}),[u]),v=(0,d.useMemo)(()=>r.map(e=>e.key),[r]),j=(0,d.useMemo)(()=>[...no(v,Object.keys(m)),...no(v,Object.keys(g))],[v,m,g]),C=(0,d.useMemo)(()=>r.filter(e=>{let t=m[e.key];return t&&!t.intersects}),[m,r]),w=(0,d.useCallback)((e,t)=>{f(n=>{let i=t.key;if(null===i)throw Error("Expected element to have a non-null key");let a={intersects:e.isIntersecting,element:t},r=n[i];return r&&r.intersects===a.intersects?n:{...n,[i]:a}})},[]),k=(0,d.useCallback)((e,t)=>{y(n=>{let i=t.key;if(null===i)throw Error("Expected child element to have a non-null key");let a=n[i],r={intersects:e.isIntersecting,element:t};return a?.intersects===r.intersects?n:{...n,[i]:r}})},[]),T=(0,d.useMemo)(()=>r.map(e=>{let{collapsedProps:t}=e.props,i=n?void 0:e.props.text;return(0,d.cloneElement)(e,{...t,text:i})}),[r,n]),A=(0,d.useMemo)(()=>r.filter(e=>g[e.key]?.intersects===!1),[r,g]),_=C.length>0?T.filter(e=>g[e.key]?.intersects===!0):r,S=(0,d.useMemo)(()=>o?.button||(0,l.jsx)(aI,{}),[o]);return(0,l.jsxs)(xM,{align:"center","data-ui":"CollapseMenu",overflow:"hidden",sizing:"border",ref:t,...c,children:[(0,l.jsxs)(xN,{direction:"column",flex:1,justify:"center",ref:p,children:[(0,l.jsx)(xI,{gap:a,children:0===j.length&&_.map((e,t)=>{let{dividerBefore:n,tooltipText:i="",tooltipProps:a={}}=e.props,r=!e.key||!(e.key in m)||A.includes(e);return(0,l.jsxs)(d.Fragment,{children:[n&&0!==t&&(0,l.jsx)(xT,{hidden:r}),(0,l.jsx)(x.u,{portal:!0,disabled:!i,content:i,...a,children:(0,l.jsx)(h.kC,{children:(0,d.cloneElement)(e,{disabled:e.props.disabled||r,"aria-hidden":r})})})]},e.key)})}),(0,l.jsx)(xF,{gap:a,elements:r,intersectionOptions:b,onIntersectionChange:w}),(0,l.jsx)(xF,{gap:a,elements:T,intersectionOptions:b,onIntersectionChange:k})]}),A.length>0&&(0,l.jsx)(h.kC,{marginLeft:a,children:(0,l.jsx)(x_,{disableRestoreFocusOnClose:i,menuButton:S,menuButtonProps:o,menuOptions:A,onMenuClose:s})})]})}),xF=(0,d.memo)(function(e){let{elements:t,gap:n,intersectionOptions:i,onIntersectionChange:a}=e;return(0,l.jsx)(xI,{"data-hidden":!0,"aria-hidden":"true",gap:n,overflow:"hidden",children:t.map((e,t)=>{let{dividerBefore:n}=e.props;return(0,l.jsxs)(d.Fragment,{children:[n&&0!==t&&(0,l.jsx)(xT,{hidden:!0}),(0,l.jsx)(xz,{options:i,onIntersectionChange:t=>a(t[0],e),children:(0,l.jsx)(h.kC,{children:(0,d.cloneElement)(e,{disabled:!0,"aria-hidden":!0})})})]},e.key)})})}),xD=(0,d.forwardRef)(function(e,t){let{collapsedProps:n={},expandedProps:i={},tooltipProps:a={},tooltipText:r,dividerBefore:o,...s}=e;return(0,l.jsx)(x.zx,{"data-ui":"CollapseMenuButton",...s,ref:t})}),xR=j.zo.div`
  width: 1em;
  height: 1em;
  border-radius: inherit;
  background-origin: content-box;
  background-position: center;
  background-repeat: no-repeat;
  background-size: cover;
  transform: scale(0.7);
`;function xL(e){let{icon:t,active:n}=e,i=(0,d.useMemo)(()=>({backgroundImage:`url(${t})`,filter:n?"invert(100%)":"invert(0%)"}),[n,t]);return(0,l.jsx)(xR,{style:i})}function xB(e,t){let n=e7(e,"to[0].icon");return e.icon||e.type&&e.type.icon||n||t}let xq={link:_.xPt},xV={strong:_.mY4,em:_.h32,"strike-through":_.dwl,underline:_.Adg,code:_.dNJ},xK={number:_.NvX,bullet:_.AEM};function xU(){let e=(0,t2._F)(),t=(0,t2.L9)();return(0,d.useMemo)(()=>t?t2.q$.focusBlock(e):void 0,[e,t])}let xZ=(0,d.memo)(xO),xG={constrainSize:!0,portal:!0},xH=(0,d.memo)(function(e){let{disabled:t,groups:n,isFullscreen:i,collapsed:a}=e,r=xU(),o=(0,t2._F)(),s=(0,t2.L9)(),{t:c}=i1(),u=s&&(0,w.Fd)(s.anchor.path[0])&&(0,w.Fd)(s.focus.path[0])?s.anchor.path[0]._key!==s?.focus.path[0]._key:s?.anchor.path[0]!==s?.focus.path[0],p=r?._type!==o.schemaTypes.block.name,m=!p&&Array.isArray(r.children)&&1===r.children.length&&r?.children[0].text==="",h=t||p,f=(0,d.useMemo)(()=>n.reduce((e,t)=>e.concat(t.actions.map((e,t)=>0===t?{...e,firstInGroup:!0}:e)),[]),[n]),g=function({actions:e}){let t=(0,t2._F)(),n=(0,t2.L9)();return ij((0,d.useMemo)(()=>n?e.filter(e=>"annotation"===e.type?t2.q$.isAnnotationActive(t,e.key):"listStyle"===e.type?t2.q$.hasListStyle(t,e.key):t2.q$.isMarkActive(t,e.key)).map(e=>e.key):[],[e,t,n]))}({actions:f}),x=(0,d.useCallback)(()=>{t2.q$.focus(o)},[o]),y=i?"bottom":"top",b=(0,d.useMemo)(()=>f.map(e=>{let t="annotation"===e.type&&(m||u),n=m?c("user-menu.action.portable-text.annotation-disabled_empty-block",{name:e.title||e.key}):c("user-menu.action.portable-text.annotation-disabled_multiple-blocks",{name:e.title||e.key}),i=g.includes(e.key);return(0,l.jsx)(xD,{"aria-label":c("toolbar.portable-text.action-button-aria-label",{action:e.title||e.key}),"data-testid":`action-button-${e.key}`,disabled:h||t,mode:"bleed",dividerBefore:e.firstInGroup,icon:e.icon?"string"==typeof e.icon?(0,l.jsx)(xL,{active:i,icon:e.icon}):e.icon:"annotation"===e.type?xq[e.key]||_.Tzq:"listStyle"===e.type?xK[e.key]||_.Tzq:xV[e.key]||_.Tzq,onClick:()=>e.handle(i),selected:i,text:e.title||e.key,tooltipText:t?n:e.title||e.key,tooltipProps:{disabled:h,placement:y,portal:"default"}},e.key)}),[f,g,h,m,u,c,y]),v=(0,d.useMemo)(()=>({button:(0,l.jsx)(aI,{"data-testid":"action-menu-button",disabled:h,tooltipProps:{placement:y}}),popover:xG}),[h,y]);return(0,l.jsx)(xZ,{"data-testid":"action-menu-auto-collapse-menu",collapsed:a,disableRestoreFocusOnClose:!0,gap:1,menuButtonProps:v,onMenuClose:x,children:b})}),xW=(0,d.memo)(x.j2),xY=(0,j.zo)(h.sN)`
  // Change the border color variable used by BlockQuote
  // to make the border visible when the MenuItem is selected
  &[data-selected] {
    [data-option='blockquote'] {
      --card-border-color: var(--card-muted-fg-color);
    }
  }
`,xJ={h1:e=>(0,l.jsx)(xr,{children:e}),h2:e=>(0,l.jsx)(xo,{children:e}),h3:e=>(0,l.jsx)(xs,{children:e}),h4:e=>(0,l.jsx)(xl,{children:e}),h5:e=>(0,l.jsx)(xc,{children:e}),h6:e=>(0,l.jsx)(xd,{children:e}),normal:e=>(0,l.jsx)(xa,{children:e}),blockquote:e=>(0,l.jsx)(xp,{"data-option":"blockquote",children:e})},xX=e=>e.preventDefault(),xQ={key:"style-none",style:"",title:"No style",i18nTitleKey:"inputs.portable-text.style.none"},x0=(0,d.memo)(function(e){let{disabled:t,items:n,boundaryElement:i}=e,a=(0,t2._F)(),r=xU(),{t:o}=i1(),s=t||!!r&&a.schemaTypes.block.name!==r._type,c=function({items:e}){let t=(0,t2._F)(),n=xU(),i=(0,t2.L9)();return ij((0,d.useMemo)(()=>n&&i?e.filter(e=>t2.q$.hasBlockStyle(t,e.style)).map(e=>e.style):[],[t,n,e,i]))}({items:n}),{activeItems:u,items:p}=(0,d.useMemo)(()=>{let e=n.filter(e=>c.includes(e.style)),t=n;return 0===e.length&&t.length>1&&(t=t.concat([xQ]),e.push(xQ)),{activeItems:e,items:t}},[c,n]),m=(0,d.useMemo)(()=>u.length>1?o("inputs.portable-text.style.multiple"):1!==u.length?xQ.i18nTitleKey?o(xQ.i18nTitleKey):xQ.title:u[0].i18nTitleKey?o(u[0].i18nTitleKey):u[0].title,[u,o]),f=(0,d.useCallback)(e=>{r&&e.style!==r.style&&(t2.q$.toggleBlockStyle(a,e.style),t2.q$.focus(a))},[a,r]),g=(0,d.useCallback)(e=>{let{style:t,styleComponent:n}=e,i=xJ[t],a=e.i18nTitleKey?o(e.i18nTitleKey):e?.title||e.style,r="function"==typeof n?n:void 0;return i&&!r?i(a):r?(0,l.jsx)(r,{children:a}):(0,l.jsx)(h.xv,{children:a})},[o]),y=(0,d.useMemo)(()=>(0,l.jsx)(x.zx,{disabled:s,iconRight:_.v4q,justify:"space-between",mode:"bleed",onClick:xX,text:m,width:"fill"}),[s,m]),b=(0,d.useMemo)(()=>(0,l.jsx)(h.v2,{disabled:s,children:p.map(e=>(0,l.jsx)(xY,{pressed:u.includes(e),onClick:s?void 0:()=>f(e),children:g(e)},e.key))}),[s,u,f,p,g]);return(0,l.jsx)(xW,{popover:{constrainSize:!0,placement:"bottom-start",portal:"default",referenceBoundary:i},id:"block-style-select",button:y,menu:b})}),x1=(0,d.memo)(xO),x2={constrainSize:!0,portal:!0},x3=(0,d.memo)(function(e){let{disabled:t,items:n,isFullscreen:i,collapsed:a}=e,{t:r}=i1(),o=xU(),s=(0,t2._F)(),c=o&&o._type!==s.schemaTypes.block.name,u=(0,d.useCallback)(()=>{t2.q$.focus(s)},[s]),p=i?"bottom":"top",m=(0,d.useMemo)(()=>n.map(e=>{let n=e.type.title||n1(e.type.name);return(0,l.jsx)(xD,{"aria-label":r(e.inline?"inputs.portable-text.action.insert-inline-object-aria-label":"inputs.portable-text.action.insert-block-aria-label",{typeName:n}),mode:"bleed",disabled:t||c&&!0===e.inline,icon:e.icon,onClick:e.handle,text:n,tooltipText:r(e.inline?"inputs.portable-text.action.insert-inline-object":"inputs.portable-text.action.insert-block",{typeName:n}),tooltipProps:{disabled:t,placement:p,portal:"default"}},e.key)}),[t,c,n,r,p]),h=(0,d.useMemo)(()=>({button:(0,l.jsx)(aI,{"data-testid":"insert-menu-button",disabled:t,tooltipProps:{placement:p}}),popover:x2}),[t,p]);return(0,l.jsx)(x1,{"data-testid":"insert-menu-auto-collapse-menu",collapsed:a,collapseText:!1,disableRestoreFocusOnClose:!0,gap:1,menuButtonProps:h,onMenuClose:u,children:m})}),x4=(0,j.zo)(h.kC)`
  width: 100%;
`,x5=(0,j.zo)(h.xu)`
  width: 8em;
`,x8=(0,j.zo)(h.kC)`
  border-right: 1px solid var(--card-border-color);
`,x6=(0,j.zo)(h.xu)`
  ${({$withInsertMenu:e})=>e&&(0,j.iv)`
      max-width: max-content;
      border-right: 1px solid var(--card-border-color);
    `}
`,x7=(0,j.zo)(h.xu)`
  border-left: 1px solid var(--card-border-color);
`,x9="u">typeof window&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),ye=(0,d.memo)(function({actionGroups:e,blockStyles:t,collapsible:n,disabled:i,insertMenuItems:a,isFullscreen:r,onToggleFullscreen:o}){let{t:s}=i1(),c=e.reduce((e,t)=>e+t.actions.length,0)>0,u=a.length>0,[p,m]=(0,d.useState)(null),f=(0,h.XL)(p),g=!!n&&!!f&&f?.width<400,y=t.length>1;qE({rootElement:p});let b=(0,d.useCallback)(e=>{e.preventDefault()},[]);return(0,l.jsxs)(x4,{align:"center",ref:m,onMouseDown:b,children:[y&&(0,l.jsx)(x8,{flex:g?1:void 0,children:(0,l.jsx)(x5,{padding:r?2:1,"data-testid":"block-style-select",children:(0,l.jsx)(x0,{disabled:i,items:t,boundaryElement:p})})}),(0,l.jsxs)(h.kC,{flex:1,children:[c&&(0,l.jsx)(x6,{flex:g?void 0:1,padding:r?2:1,$withInsertMenu:u,children:(0,l.jsx)(xH,{disabled:i,collapsed:g,groups:e,isFullscreen:r})}),u&&(0,l.jsx)(h.xu,{flex:g?void 0:1,padding:r?2:1,children:(0,l.jsx)(x3,{disabled:i,collapsed:g,items:a,isFullscreen:r})})]}),(0,l.jsx)(x7,{padding:r?2:1,children:(0,l.jsx)(x.zx,{"aria-label":s("inputs.portable-text.action.expand-editor"),icon:r?_.W5x:_.Qq,mode:"bleed",onClick:o,tooltipProps:{content:s(r?"inputs.portable-text.action.collapse-editor":"inputs.portable-text.action.expand-editor"),hotkeys:[`${x9?"Cmd":"Ctrl"}`,"Enter"],placement:r?"bottom":"top",portal:"default"}})})]})});function yt(e){let{collapsible:t,hotkeys:n,isFullscreen:i,readOnly:a,onMemberOpen:r,onToggleFullscreen:o}=e,s=(0,t2._F)(),c=(0,t2.L9)(),u=jS(),p=a||!c,{push:m}=(0,h.pm)(),f=(0,d.useCallback)(e=>{let t=!1,n=setTimeout(()=>{t=!0,m({id:"resolving-initial-value",status:"info",title:"Resolving initial value…"})},300);return u(e,{}).then(e=>(t&&m({id:"resolving-initial-value",status:"info",duration:500,title:"Initial value resolved"}),e)).catch(t=>{m({title:"Could not resolve initial value",id:"resolving-initial-value",description:`Unable to resolve initial value for type: ${e.name}: ${t.message}.`,status:"error"})}).finally(()=>clearTimeout(n))},[m,u]),g=(0,d.useCallback)(async e=>{let t=await f(e),n=t2.q$.insertBlock(s,e,t);n&&r(n)},[s,r,f]),x=(0,d.useCallback)(async e=>{let t=await f(e),n=t2.q$.insertChild(s,e,t);n&&r(n)},[s,r,f]),y=function({hotkeys:e,onMemberOpen:t,resolveInitialValue:n,disabled:i}){let a=(0,t2._F)(),{t:r}=i1(),o=(0,d.useCallback)(async e=>{let i=await n(e),r=t2.q$.addAnnotation(a,e,i);r&&r.markDefPath&&t(r.markDefPath)},[a,t,n]);return(0,d.useMemo)(()=>a?[{name:"format",actions:a.schemaTypes.decorators.map(t=>{let n=Object.keys(e.marks||{}).find(n=>e.marks?.[n]===t.value),o=[];return n&&(o=[n]),{type:"format",disabled:i,icon:t?.icon,key:t.value,handle:()=>{t2.q$.toggleMark(a,t.value),t2.q$.focus(a)},hotkeys:o,title:t.i18nTitleKey&&r?r(t.i18nTitleKey):t.title}})},{name:"list",actions:a.schemaTypes.lists.map(e=>({type:"listStyle",key:e.value,disabled:i,icon:e?.icon,handle:()=>{t2.q$.toggleList(a,e.value)},title:e.i18nTitleKey&&r?r(e.i18nTitleKey):e.title}))},{name:"annotation",actions:function(e,t,n,i){let a=e.schemaTypes,r=t2.q$.focusChild(e),o=r&&r.text;return a.annotations.map(a=>({type:"annotation",disabled:!o||t,icon:e7(a,"icon")||e7(a,"type.icon")||e7(a,"type.to.icon")||e7(a,"type.to[0].icon"),key:a.name,handle:t=>{t?(t2.q$.removeAnnotation(e,a),t2.q$.focus(e)):n(a)},title:a.i18nTitleKey&&i?i(a.i18nTitleKey):a.title||ti(a.name)}))}(a,i,o,r)}]:[],[i,a,o,e,r])}({hotkeys:n,onMemberOpen:r,resolveInitialValue:f,disabled:!0}),b=(0,d.useMemo)(()=>s.schemaTypes.styles.map(e=>({key:`style-${e.value}`,style:e.value,styleComponent:e&&e.component,title:e.title,i18nTitleKey:e.i18nTitleKey})),[s]),v=(0,d.useMemo)(()=>(function(e,t,n,i){let a=e.blockObjects.map((e,t)=>({handle:()=>n(e),icon:xB(e,_.sTT),inline:!1,key:`block-${t}`,type:e})),r=e.inlineObjects.map((e,t)=>({handle:()=>i(e),icon:xB(e,_.Kz2),inline:!0,key:`inline-${t}`,type:e}));return a.concat(r).filter(e=>!e.type?.hidden)})(s.schemaTypes,0,g,x),[p,s,g,x]);return(0,l.jsx)(ye,{actionGroups:y,blockStyles:b,collapsible:t,disabled:p,insertMenuItems:v,isFullscreen:i,onToggleFullscreen:o})}let yn={outline:"none"},yi=j.zo.span(e=>{let{color:t}=(0,b.aQ)(e.theme);return(0,j.iv)`
    color: ${t.input.default.enabled.placeholder};
  `}),ya=e=>(0,l.jsx)(gQ,{...e}),yr=e=>(0,l.jsx)(xw,{...e}),yo=e=>(0,l.jsx)(xC,{...e});function ys(e){let{elementRef:t,hideToolbar:n,hotkeys:i,initialSelection:a,isActive:r,isFullscreen:o,onCopy:s,onItemOpen:c,onPaste:u,onToggleFullscreen:p,path:m,readOnly:f,rangeDecorations:g,renderAnnotation:y,renderBlock:b,renderChild:v,renderEditable:j,scrollElement:C,setPortalElement:w,setScrollElement:k,ariaDescribedBy:T}=e,{id:A}=or(),{t:_}=i1(),{isTopLayer:S}=(0,h.sJ)(),{element:E}=(0,h.sz)();(0,h.qh)((0,d.useCallback)(e=>{S&&o&&"Escape"===e.key&&p()},[p,o,S]));let M=(0,d.useCallback)(()=>(0,l.jsx)(yi,{"data-testid":"pt-input-placeholder",children:_("inputs.portable-text.empty-placeholder")}),[_]),N=function(){let e=(0,t2._F)();return(0,d.useMemo)(()=>{let t=e.schemaTypes.block.options?.spellCheck,n=!(typeof navigator>"u")&&/Chrome\/96/.test(navigator.userAgent);return(void 0!==t||!0!==n)&&t},[e])}(),I=(0,d.useMemo)(()=>(e,t)=>{if(t2.q$.getSelection(e)){let e=t.startContainer.parentElement;e&&(0,tc.Z)(e,{scrollMode:"if-needed",boundary:C,block:"nearest",inline:"nearest"})}},[C]),z=(0,d.useMemo)(()=>{let e={"aria-describedby":T,hotkeys:i,onCopy:s,onPaste:u,rangeDecorations:g,ref:t,renderAnnotation:y,renderBlock:b,renderChild:v,renderDecorator:ya,renderListItem:yo,renderPlaceholder:M,renderStyle:yr,scrollSelectionIntoView:I,selection:a,spellCheck:N,style:yn},n=t=>(0,l.jsx)(t2.iV,{...e,...t7(t,["renderDefault"])});return j?j({...e,renderDefault:n}):n(e)},[T,t,i,a,s,u,g,y,b,v,j,M,I,N]),$=(0,d.useCallback)(e=>{c(m.concat(e))},[c,m]);return(0,l.jsxs)(xg,{"data-fullscreen":o,"data-testid":"pt-editor",children:[r&&!n&&(0,l.jsx)(x.uE,{children:(0,l.jsx)(xx,{"data-testid":"pt-editor__toolbar-card",shadow:1,children:(0,l.jsx)(yt,{collapsible:"root"===A,hotkeys:i,isFullscreen:o,onMemberOpen:$,onToggleFullscreen:p,readOnly:f})})}),(0,l.jsxs)(xy,{flex:1,tone:f?"transparent":"default",children:[(0,l.jsx)(xb,{ref:k,children:(0,l.jsx)("div",{children:(0,l.jsx)(xv,{$isFullscreen:o,tone:f?"transparent":"default",children:(0,l.jsx)(h.NM,{element:o?C:E,children:z})})})}),(0,l.jsx)("div",{"data-portal":"",ref:w})]})]})}let yl=(0,j.zo)(h.Zb)(function({theme:e}){let{color:t,radius:n}=e.sanity;return(0,j.iv)`
    line-height: 0;
    border-radius: ${n[2]}px;
    padding: 2px;
    box-shadow: inset 0 0 0 1px var(--card-border-color);
    height: calc(1em - 1px);
    margin-top: 0.0625em;
    cursor: default;

    &:not([hidden]) {
      display: inline-flex;
      align-items: center;
      vertical-align: top;
    }

    &[data-ready-only] {
      cursor: default;
    }

    &[data-focused] {
      box-shadow: inset 0 0 0 1px ${t.selectable?.primary.selected.border};
      color: ${t.selectable?.primary.pressed.fg};
    }

    &[data-selected] {
      background-color: ${t.selectable?.primary.pressed.bg};
    }

    &:not([data-focused]):not([data-selected]) {
      @media (hover: hover) {
        &:hover {
          --card-border-color: ${t.input.default.hovered.border};
        }
      }
    }

    &[data-markers] {
      --card-bg-color: ${t.dark?M.VG.purple[950].hex:M.VG.purple[50].hex};
    }

    &[data-warning] {
      --card-bg-color: ${t.muted.caution.hovered.bg};

      @media (hover: hover) {
        &:hover {
          --card-border-color: ${t.muted.caution.hovered.border};
        }
      }
    }

    &[data-invalid] {
      --card-bg-color: ${t.input.invalid.enabled.bg};
      --card-border-color: ${t.input.invalid.enabled.border};

      @media (hover: hover) {
        &:hover {
          --card-border-color: ${t.input.invalid.hovered.border};
        }
      }
    }
  `}),yc=j.zo.span`
  display: block;
  max-width: calc(5em + 80px);
  position: relative;
`,yd=(0,j.zo)(h.xu)`
  max-width: 250px;
`,yu=["top","bottom"];function yp(e){let{floatingBoundary:t,onClosePopover:n,onEdit:i,onDelete:a,referenceBoundary:r,referenceElement:o,title:s,open:c}=e,{sanity:u}=(0,h.Fg)(),{t:p}=i1(),m=(0,d.useRef)(null),f=(0,d.useRef)(null),g=u.color.dark?"light":"dark";(0,h.qh)((0,d.useCallback)(e=>{"Escape"===e.key&&(e.preventDefault(),e.stopPropagation(),n())},[n]));let y=(0,d.useCallback)(e=>{if(!f.current?.disabled){e.preventDefault(),e.stopPropagation();try{a(e)}catch(e){console.error(e)}finally{f.current&&(f.current.disabled=!0)}}},[a]),b=(0,d.useMemo)(()=>(0,l.jsx)(h.xu,{padding:1,children:(0,l.jsxs)(h.gF,{space:1,children:[(0,l.jsx)(h.xu,{padding:2,children:(0,l.jsx)(h.xv,{weight:"medium",size:1,children:s})}),(0,l.jsx)(x.zx,{"aria-label":p("inputs.portable-text.inline-object.edit-aria-label"),icon:_.dY8,mode:"bleed",onClick:i,ref:m,tooltipProps:{content:p("inputs.portable-text.inline-object.edit")}}),(0,l.jsx)(x.zx,{"aria-label":p("inputs.portable-text.inline-object.remove-aria-label"),ref:f,icon:_.XHJ,mode:"bleed",onClick:y,tone:"critical",tooltipProps:{content:p("inputs.portable-text.inline-object.remove")}})]})}),[y,i,s,p]);return(0,l.jsx)(x.J2,{constrainSize:!0,content:b,fallbackPlacements:yu,floatingBoundary:t,open:c,placement:"top",portal:!0,referenceBoundary:r,referenceElement:o,scheme:g})}let ym=e=>{let{floatingBoundary:t,focused:n,onItemClose:i,onItemOpen:a,onPathFocus:r,path:o,readOnly:s,referenceBoundary:u,relativePath:p,renderAnnotation:m,renderBlock:h,renderCustomMarkers:f,renderField:g,renderItem:y,renderInlineBlock:b,renderInput:v,renderPreview:j,schemaType:C,selected:w,value:k}=e,{Markers:T}=or().__internal.components,A=(0,t2._F)(),_=om(o),S=co(rg(o)),{validation:E,hasError:M,hasInfo:N,hasWarning:I}=op(S?.node),z=A.schemaTypes.block,$=_.length>0,O=(0,d.useMemo)(()=>({anchor:{path:p,offset:0},focus:{path:p,offset:0}}),[p]),P=(0,d.useCallback)(()=>{t2.q$.delete(A,O,{mode:"children"}),t2.q$.focus(A)},[O,A]),F=(0,d.useCallback)(()=>{S&&(t2.q$.blur(A),a(S.node.path))},[A,a,S]),D=(0,d.useCallback)(()=>{i(),t2.q$.select(A,O),t2.q$.focus(A)},[i,A,O]),R=!!S?.member.open,L=S?.input,B=S?.node.path||iI,q=S?.elementRef?.current,V=oa(o,!0),K=(0,d.useMemo)(()=>V.filter(e=>(0,c.Xy)(e.path,o)),[o,V]),U=(0,d.useMemo)(()=>({__unstable_floatingBoundary:t,__unstable_referenceBoundary:u,__unstable_referenceElement:q,children:L,focused:n,onClose:D,onOpen:F,onPathFocus:r,onRemove:P,open:R,markers:_,member:S?.member,parentSchemaType:z,path:B,presence:K,readOnly:!!s,renderAnnotation:m,renderBlock:h,renderDefault:yh,renderField:g,renderInlineBlock:b,renderInput:v,renderItem:y,renderPreview:j,schemaType:C,selected:w,value:k,validation:E}),[t,n,L,R,_,S?.member,B,D,F,r,P,z,s,u,q,m,h,g,b,v,y,j,K,C,w,E,k]),Z=M||I||N||$,G=(0,d.useMemo)(()=>Z&&(0,l.jsx)(yd,{children:(0,l.jsx)(T,{markers:_,validation:E,renderCustomMarkers:f})})||null,[T,_,f,Z,E]);return(0,d.useMemo)(()=>(0,l.jsx)("span",{ref:S?.elementRef,contentEditable:!1,children:(0,l.jsx)(x.u,{placement:"bottom",portal:"editor",disabled:!!R||!Z,content:G,children:b&&(0,l.jsx)("span",{style:{position:"relative"},children:b(U)})})}),[U,S?.elementRef,b,G,Z,R])},yh=e=>{let{__unstable_floatingBoundary:t,__unstable_referenceBoundary:n,__unstable_referenceElement:i,children:a,focused:r,markers:o,onClose:s,onOpen:c,onRemove:u,open:p,readOnly:m,renderPreview:h,schemaType:f,selected:g,validation:x,value:y}=e,{t:b}=i1(),v=o.length>0,[j,C]=(0,d.useState)(!1),w=f?.title||f.name,k=x.filter(e=>"error"===e.level).length>0,T=x.filter(e=>"warning"===e.level).length>0,A=(0,d.useCallback)(()=>{C(!1),c()},[c]);(0,d.useEffect)(()=>{C(!p&&!!r)},[r,p]);let _=(0,d.useMemo)(()=>k?"critical":T?"caution":g||r?"primary":void 0,[r,k,T,g]),S=(0,d.useCallback)(()=>{C(!1)},[]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(yl,{"aria-label":b("inputs.portable-text.inline-block.aria-label"),"data-focused":r||void 0,"data-invalid":k||void 0,"data-markers":v||void 0,"data-read-only":m||void 0,"data-selected":g||void 0,"data-warning":T||void 0,forwardedAs:"span",onClick:m?A:void 0,onDoubleClick:A,tone:_,children:(0,l.jsx)(yc,{children:h({layout:"inline",schemaType:f,skipVisibilityCheck:!0,value:y,fallbackTitle:"Click to edit"})})}),i&&(0,l.jsx)(yp,{floatingBoundary:t,onClosePopover:S,onDelete:u,onEdit:A,open:j,referenceBoundary:n,referenceElement:i,title:w}),p&&(0,l.jsx)(cj,{defaultType:"popover",onClose:s,autoFocus:r,floatingBoundary:t,referenceBoundary:n,referenceElement:i,schemaType:f,children:a})]})};function yf(e){let{changed:t,elementRef:n,focused:i,focusPath:a=iI,elementProps:r,hasFocusWithin:o,hideToolbar:s,hotkeys:u,isActive:m,isFullscreen:f,onActivate:g,onCopy:x,onItemClose:y,onItemOpen:b,onItemRemove:v,onPaste:j,onPathFocus:C,onToggleFullscreen:k,onUpload:T,path:A,rangeDecorations:_,readOnly:S,renderAnnotation:E,renderBlock:M,renderBlockActions:N,renderCustomMarkers:I,renderEditable:z,renderField:$,renderInlineBlock:O,renderInput:P,renderItem:F,renderPreview:D,resolveUploader:R,value:L}=e,B=(0,t2._F)(),q=(0,h.sz)().element,[V,K]=(0,d.useState)(null),[U,Z]=(0,d.useState)(null),G=(0,d.useCallback)(()=>{k()},[k]),H=function(e){let t=(0,t2._F)(),[n]=(0,d.useState)(()=>e);return n!==e&&console.warn("Make sure that hotkeys are a stable object across renders, or there will be issues with key handling in the Portable Text Editor."),(0,d.useMemo)(()=>{let e={marks:{}};return t.schemaTypes.decorators.forEach(t=>{switch(t.value){case"strong":e.marks["mod+b"]=t.value;break;case"em":e.marks["mod+i"]=t.value;break;case"underline":e.marks["mod+u"]=t.value;break;case"code":e.marks["mod+'"]=t.value}}),{marks:{...e.marks,...(n||{}).marks},custom:n.custom}},[t,n])}((0,d.useMemo)(()=>({...u,custom:{"mod+enter":k,...u?.custom||{}}}),[u,k])),W=L&&N?N:void 0,Y=L&&I?I:void 0,[J,X]=(0,d.useState)(null),Q=(0,d.useCallback)(e=>{let{children:t,focused:n,path:i,selected:a,schemaType:r,value:o}=e;return(0,l.jsx)(xh,{floatingBoundary:q,focused:n,isFullscreen:f,onItemClose:y,onItemOpen:b,onItemRemove:v,onPathFocus:C,path:A.concat(i),readOnly:S,referenceBoundary:U,renderAnnotation:E,renderField:$,renderInlineBlock:O,renderInput:P,renderItem:F,renderBlockActions:W,renderCustomMarkers:Y,renderPreview:D,renderBlock:M,schemaType:r,selected:a,value:o,children:t})},[W,Y,q,f,y,b,v,C,A,S,E,M,$,O,P,F,D,U]),ee=(0,d.useCallback)(e=>{let{focused:t,path:n,selected:i,schemaType:a,value:r}=e;return(0,l.jsx)(bf,{floatingBoundary:q,focused:t,isFullscreen:f,onItemClose:y,onItemOpen:b,onItemRemove:v,onPathFocus:C,path:A.concat(n),readOnly:S,referenceBoundary:U,relativePath:n,renderAnnotation:E,renderBlock:M,renderBlockActions:W,renderCustomMarkers:Y,renderField:$,renderInlineBlock:O,renderInput:P,renderItem:F,renderPreview:D,schemaType:a,selected:i,value:r})},[q,U,f,y,b,v,C,A,S,E,M,W,Y,$,O,P,F,D]),et=(0,d.useCallback)(e=>{let{value:t}=e;return t._type===B.schemaTypes.block.name?Q(e):ee(e)},[B.schemaTypes.block.name,ee,Q]),en=(0,d.useCallback)(e=>{let{children:t,focused:n,path:i,selected:a,schemaType:r,value:o}=e;return o._type===B.schemaTypes.span.name?t:(0,l.jsx)(ym,{floatingBoundary:q,focused:n,onItemClose:y,onItemOpen:b,onPathFocus:C,path:A.concat(i),readOnly:S,referenceBoundary:U,relativePath:i,renderAnnotation:E,renderBlock:M,renderCustomMarkers:I,renderField:$,renderInlineBlock:O,renderInput:P,renderItem:F,renderPreview:D,schemaType:r,selected:a,value:o})},[B.schemaTypes.span.name,q,y,b,C,A,S,U,E,M,I,$,O,P,F,D]),ei=(0,d.useCallback)(e=>{let{children:t,focused:n,path:a,selected:r,schemaType:o,value:s}=e;return(0,l.jsx)(cC,{editorNodeFocused:n,floatingBoundary:q,focused:!!i,onItemClose:y,onItemOpen:b,onPathFocus:C,path:A.concat(a),readOnly:S,referenceBoundary:U,renderAnnotation:E,renderBlock:M,renderCustomMarkers:I,renderField:$,renderInlineBlock:O,renderInput:P,renderItem:F,renderPreview:D,schemaType:o,selected:r,value:s,children:t})},[q,U,i,y,b,C,A,S,E,M,I,$,O,P,F,D]),ea=r["aria-describedby"],[er]=(0,d.useState)(()=>{if(o)return{anchor:{path:a,offset:0},focus:{path:a,offset:0}}}),eo=(0,d.useMemo)(()=>(0,l.jsx)(uj,{types:B.schemaTypes.portableText.of,resolveUploader:R,onUpload:T,tabIndex:-1,children:(0,l.jsx)(ys,{ariaDescribedBy:ea,elementRef:n,initialSelection:er,hideToolbar:s,hotkeys:H,isActive:m,isFullscreen:f,onItemOpen:b,onCopy:x,onPaste:j,onToggleFullscreen:G,path:A,rangeDecorations:_,readOnly:S,renderAnnotation:ei,renderBlock:et,renderChild:en,renderEditable:z,setPortalElement:X,scrollElement:U,setScrollElement:Z})}),[ea,B.schemaTypes.portableText.of,H,ei,et,en,n,G,s,er,m,f,x,b,j,A,T,R,_,S,z,U]),es=(0,h.vI)(),el=(0,d.useMemo)(()=>({collapsed:V,default:es.element,editor:J,expanded:es.element}),[es.element,J,V]);!function(e){let{focusPath:t,boundaryElement:n,onItemClose:i}=e,a=function(){let e=(0,d.useContext)(p.bt);if(!e)throw Error("Form context not provided");return e}(),r=(0,t2._F)(),o=(0,t2.L9)();(0,d.useLayoutEffect)(()=>{if(0===t.length||o?.focus.path&&(0,c.Xy)(o.focus.path,t.slice(0,o.focus.path.length)))return;let e=a.find(e=>e.member.item.focused),i=a.find(e=>e.member.open),s=e||i;if(s&&s.elementRef?.current){n&&((0,tc.Z)(n,{scrollMode:"if-needed",block:"start",inline:"start"}),(0,tc.Z)(s.elementRef.current,{scrollMode:"if-needed",boundary:n,block:"nearest",inline:"start"}));let e="textBlock"===s.kind,i=1===t.length;if(e||i){let n=e&&(0,w.fU)(t[2])?t[2]._key:void 0,a=n&&Array.isArray(s.node.value?.children)?s.node.value?.children.find(e=>e._key===n):void 0,o=a&&"span"===a._type&&4===t.length&&"children"===t[1]&&"text"===t[3]||!1,l=e&&(3===t.length&&"children"===t[1]||o),c=[];l?c=t.slice(0,3):e&&i&&Array.isArray(s.node.value?.children)?c=[t[0],"children",{_key:s.node.value?.children[0]._key}]:i&&(c=[{_key:s.key}]),c.length&&(t2.q$.select(r,{anchor:{path:c,offset:0},focus:{path:c,offset:0}}),e&&t2.q$.focus(r))}}},[n,r,t,i,a,o?.focus.path])}({focusPath:a,boundaryElement:U,onItemClose:y});let ec=i||o;return(0,l.jsx)(m$,{legacyEditing:!0,children:(0,l.jsx)(h.Xp,{__unstable_elements:el,element:es.element,children:(0,l.jsx)(gK,{onActivate:g,isOverlayActive:!m,children:(0,l.jsx)(i9,{disabled:f,hasFocus:!!i,isChanged:t,path:A,children:(0,l.jsxs)(gU,{"data-focused":ec?"":void 0,"data-read-only":S?"":void 0,children:[(0,l.jsx)(h.xu,{"data-wrapper":"",ref:K,children:(0,l.jsx)(h.h_,{__unstable_name:f?"expanded":"collapsed",children:f?(0,l.jsx)(gZ,{children:eo}):eo})}),(0,l.jsx)("div",{"data-border":""})]})})})})})}function yg(e){return(0,l.jsx)(p.Nj.Provider,{value:e.markers,children:e.children})}function yx(e){return(0,l.jsx)(p.bt.Provider,{value:e.memberItems,children:e.children})}function yy(e){let{onChange:t,onIgnore:n,resolution:i,readOnly:a}=e,r=(0,na.f1)(),{t:o}=i1(),s=(0,d.useCallback)(()=>{i&&(t({type:"mutation",patches:i.patches}),r.log(gD,{PTEInvalidValueId:i.i18n.description,PTEInvalidValueDescription:i.description}))},[t,i,r]),c=(0,d.useCallback)(()=>{r.log(gF),n()},[n,r]);return i?(0,l.jsx)(lq,{title:(0,l.jsx)(l.Fragment,{children:o("inputs.portable-text.invalid-value.title")}),suffix:(0,l.jsxs)(h.Kq,{padding:2,children:[i.action&&(0,l.jsxs)(h.rj,{columns:[1,2],gap:1,children:[(0,l.jsx)(h.zx,{mode:"ghost",onClick:c,text:o("inputs.portable-text.invalid-value.ignore-button.text")}),!a&&(0,l.jsx)(h.zx,{onClick:s,text:(0,l.jsx)(rm,{t:o,i18nKey:i.i18n.action,values:i.i18n.values}),tone:"caution"})]}),(0,l.jsx)(h.xu,{padding:3,children:i.action&&(0,l.jsx)(h.xv,{as:"p",muted:!0,size:1,children:o("inputs.portable-text.invalid-value.action-disclaimer")})})]}),children:(0,l.jsxs)(h.Kq,{space:3,children:[(0,l.jsx)(h.xv,{as:"p",muted:!0,size:1,children:(0,l.jsx)(rm,{t:o,i18nKey:i.i18n.description,values:i.i18n.values})}),(0,l.jsx)(h.Zb,{border:!0,overflow:"auto",padding:2,tone:"inherit",children:(0,l.jsx)(h.EK,{language:"json",children:JSON.stringify(i.item,null,2)})})]})}):null}let yb={animate:{opacity:1,scaleX:1,scaleY:1},exit:{opacity:0,scaleX:0,scaleY:.5},initial:{opacity:0,scaleX:0,scaleY:.5}},yv={duration:.3,ease:"easeInOut",type:"spring",bounce:0},yj={animate:{opacity:1},exit:{opacity:0},initial:{opacity:0}},yC={duration:.2,delay:.15},yw=j.zo.span(({theme:e,$tints:t})=>{let n=b.aQ(e)?.color._dark,i=t[n?400:500].hex,a=t[n?900:50].hex;return(0,j.iv)`
    --presence-cursor-bg: ${i};
    --presence-cursor-fg: ${a};

    border-left: 1px solid transparent;
    border-color: var(--presence-cursor-bg);
    margin-left: -1px;
    position: relative;
    word-break: normal;
    white-space: normal;
    mix-blend-mode: unset;
    pointer-events: none;
  `}),yk=j.zo.div`
  background-color: var(--presence-cursor-bg);
  border-radius: 50%;
  width: ${6}px;
  height: ${6}px;
  position: absolute;
  top: -${5}px;
  left: -0.5px;
  transform: translateX(-50%);
  mix-blend-mode: unset;
  z-index: 0;
  pointer-events: all;

  // Increase the hit area of the cursor dot
  &:before {
    content: '';
    position: absolute;
    top: -${3}px;
    left: 50%;
    transform: translateX(-50%);
    width: ${12}px;
    height: ${18}px;
    opacity: 0.5;
  }
`,yT=(0,j.zo)((0,t5.E)(h.xu))(({theme:e})=>{let t=b.aQ(e)?.radius[4];return(0,j.iv)`
    position: absolute;
    top: -${9}px;
    left: -${4.5}px;
    transform-origin: left;
    white-space: nowrap;
    padding: 3px 6px;
    box-sizing: border-box;
    border-radius: ${t}px;
    background-color: var(--presence-cursor-bg);
    z-index: 1;
    mix-blend-mode: unset;
    user-select: none;
  `}),yA=(0,j.zo)((0,t5.E)(h.xv))`
  color: var(--presence-cursor-fg);
  mix-blend-mode: unset;
`;function y_(e){let{children:t,user:n}=e,{tints:i}=rT(n.id),[a,r]=(0,d.useState)(!1),o=(0,d.useCallback)(()=>r(!0),[]),s=(0,d.useCallback)(()=>r(!1),[]),c=(0,d.useMemo)(()=>`presence-cursor-${n.displayName?.split(" ").join("-")}`,[n.displayName]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(yw,{$tints:i,contentEditable:!1,"data-testid":c,onMouseEnter:o,onMouseLeave:s,children:[(0,l.jsx)(t8.M,{children:a&&(0,l.jsx)(yT,{animate:"animate",exit:"exit",flex:1,initial:"initial",transition:yv,variants:yb,children:(0,l.jsx)(yA,{animate:"animate",exit:"exit",initial:"initial",size:0,transition:yC,variants:yj,weight:"medium",children:n.displayName})})}),(0,l.jsx)(yk,{})]}),t]})}function yS(e,t){if(e===t)return!0;if(!Array.isArray(e)||!Array.isArray(t)||e.length<t.length)return!1;for(let n=0,i=t.length;n<i;n++)if(!function(e,t){let n=typeof e;return n===typeof t&&("object"===n?tl(e,t):e===t)}(t[n],e[n]))return!1;return!0}function yE(e){let{editorRef:t,elementProps:n,hotkeys:i,initialActive:a,initialFullscreen:r,markers:o=iI,onChange:s,onCopy:u,onEditorChange:p,onFullScreenChange:m,onInsert:f,onItemRemove:g,onPaste:x,onPathFocus:y,path:b,readOnly:v,rangeDecorations:j,renderBlockActions:k,renderCustomMarkers:T,renderEditable:A,schemaType:_,value:S,resolveUploader:E,onUpload:M}=e,{onBlur:N,ref:I}=n,z=(0,d.useRef)(null),$=t||z,O=function(e){let{path:t}=e,n=oi(),[i,a]=(0,d.useState)([]),[r,o]=(0,d.useState)([]),s=(0,d.useRef)(i),u=(0,d.useCallback)(e=>{let{rangeDecoration:t,newSelection:n}=e;o(e=>e.map(e=>e.payload?.sessionId===t.payload?.sessionId?{...t,selection:n}:e))},[]);return(0,d.useEffect)(()=>{let e=n.filter(e=>(0,c.Ny)(t,e.path)&&!eF(t,e.path));if(!eF(e.map(e=>({...e.selection,sessionId:e.sessionId})),s.current.map(e=>({...e.selection,sessionId:e.sessionId})))){let t=e.length>0?e:tX.LZ8;a(t),s.current=t}},[n,t]),(0,d.useEffect)(()=>{o(i.map(e=>e.selection?{component:({children:t})=>(0,l.jsx)(y_,{user:e.user,children:t}),selection:{focus:e.selection.focus,anchor:e.selection.focus},onMoved:u,payload:{sessionId:e.sessionId}}:null).filter(Boolean))},[i,u]),r}((0,d.useMemo)(()=>({path:e.path}),[e.path])),{subscribe:P}=function(e){let{path:t}=e,{patchChannel:n}=or().__internal;return{subscribe:(0,d.useCallback)(e=>n.subscribe(({snapshot:n,patches:i})=>{let a=i.filter(e=>yS(e.path,t)).map(e=>({...e,path:e.path.slice(t.length)}));a.length&&e({shouldReset:i.some(e=>{var n;return(0===(n=e.path).length||yS(t,n)&&!yS(n,t))&&("set"===e.type||"unset"===e.type)}),snapshot:iO(n)?t.reduce((e,t)=>"object"==typeof t?io(e,t):e7(e,t),n):{},patches:a})}),[t,n])}}({path:b}),{t:F}=i1(),[R,L]=(0,d.useState)(!1),[B,q]=(0,d.useState)(null),[V,K]=(0,d.useState)(r??!1),[U,Z]=(0,d.useState)(a??!1),[G,H]=(0,d.useState)(!1),[W,Y]=(0,d.useState)(!1),J=(0,na.f1)(),X=(0,h.pm)(),Q=(0,d.useMemo)(()=>new D.x,[]),ee=(0,d.useMemo)(()=>Q.asObservable(),[Q]),et=(0,d.useCallback)(()=>{K(e=>{let t=!e;return t?J.log(gO):J.log(gP),m?.(t),t})},[m,J]);(0,d.useEffect)(()=>{B&&S!==B.value&&q(null)},[B,S]),(0,d.useEffect)(()=>P(({patches:e,snapshot:t})=>{Q.next({patches:e,snapshot:t})}),[Q,P]);let en=function(e){let{members:t,path:n,schemaType:i,renderAnnotation:a,renderField:r,renderBlock:o,renderInput:s,renderItem:u,renderInlineBlock:p,renderPreview:m,onPathFocus:h}=e,f=(0,d.useRef)([]);return(0,d.useMemo)(()=>{let e=[];for(let n of t)if("item"===n.kind){if(r6(n.item.schemaType)){(n.item.validation.length>0||n.item.changed||n.item.presence?.length||n.open||n.item.focusPath.length||n.item.focused)&&e.push({kind:"textBlock",member:n,node:n.item});let t=n.item.members.find(e=>"field"===e.kind&&"children"===e.name);if(t&&"field"===t.kind&&lO(t))for(let n of t.field.members)"item"===n.kind&&"span"!==n.item.schemaType.name&&e.push({kind:"inlineObject",member:n,node:n.item});let i=n.item.members.filter(r7).find(e=>"markDefs"===e.name);if(i)for(let t of i.field.members)"item"===t.kind&&"object"===t.item.schemaType.jsonType&&e.push({kind:"annotation",member:t,node:t.item})}else e.push({kind:"objectBlock",member:n,node:n.item})}let g=e.map(e=>{let g=rg(e.node.path),x=f.current.find(e=>e.key===g),y="textBlock"!==e.kind,b=null;if(y&&e.member!==x?.member||e.node!==x?.node){let d=e=>({...e.elementProps,onFocus:()=>{}}),f=t=>{let i=e.member.item.path.concat(t);0!==t.length&&h(i.slice(n.length,i.length))},g=t=>n=>{if("unset"===n.type&&0===n.path.length){t.onChange((0,tX.t8m)({_type:e.member.item.schemaType.name,_key:e.member.key},n.path));return}t.onChange(n)},x={absolutePath:(0,c.s6)(e.node.path),includeField:!1,members:t,path:(0,c.s6)(n),renderAnnotation:a,renderBlock:o,renderField:r,renderInlineBlock:p,renderInput:t=>(0,c.Xy)(t.path,e.member.item.path)?s({...t,onChange:g(t),onPathFocus:f,elementProps:d(t)}):s(t),renderItem:u,renderPreview:m,schemaType:i};b=(0,l.jsx)(ca,{...x})}return x?(x.member=e.member,x.node=e.node,x.input=b||x.input,x):{kind:e.kind,key:g,member:e.member,node:e.node,elementRef:(0,d.createRef)(),input:b}});return f.current=g,g},[t,h,n,a,o,r,p,s,u,m,i])}(e);(0,d.useEffect)(()=>{W&&Z(!0)},[W]);let ei=(0,d.useCallback)(()=>{let e=ea.current,t=e?.focus.path;if(!t)return;let n=3===t.length&&"children"===t[1]&&(0,w.Fd)(t[2])&&!en.some(e=>(0,w.Fd)(t[2])&&e.member.key===t[2]._key)?t.concat(["text"]):t;(0,d.startTransition)(()=>{y(n,{selection:e})})},[y,en]),ea=(0,d.useRef)(null),er=(0,d.useCallback)(e=>{switch(e.type){case"mutation":case"undo":case"redo":s(e.patches.map(e=>({...e,patchType:sq})));break;case"connection":"offline"===e.value?H(!0):"online"===e.value&&H(!1);break;case"selection":ea.current=e.selection,ei();break;case"focus":Z(!0),Y(!0);break;case"blur":N(e.event),Y(!1);break;case"invalidValue":q(e);break;case"error":X.push({status:e.level,description:e.description})}$.current&&p&&p(e,$.current)},[$,p,s,ei,N,X]);(0,d.useEffect)(()=>{L(!1)},[S]);let eo=(0,d.useCallback)(()=>{L(!0)},[]),es=(0,d.useMemo)(()=>B&&B.resolution?(0,l.jsx)(h.xu,{marginBottom:2,children:(0,l.jsx)(yy,{onChange:er,onIgnore:eo,resolution:B.resolution,readOnly:G||v})}):null,[er,eo,B,G,v]),el=(0,d.useCallback)(()=>{U||(Z(!0),$.current&&t2.q$.focus($.current))},[$,U]),ec=(0,d.useRef)([]),ed=(0,d.useMemo)(()=>{let e=[...j||[],...O],t=ot(ec.current,e);return ec.current=t,t},[O,j]),eu=(0,d.useCallback)((e,t)=>{let{type:n,uploader:i}=t;M?.({file:e,schemaType:n,uploader:i})},[M]),ep=(0,d.useCallback)(e=>{if(!E)return;let t=e.map(e=>({file:e,uploaderCandidates:_.of.map(t=>({type:t,uploader:E(t,e),parentType:t})).filter(e=>e.uploader)})),n=t.filter(e=>e.uploaderCandidates.length>0),i=t.filter(e=>0===e.uploaderCandidates.length);i.length>0&&X.push({closable:!0,status:"warning",title:F("inputs.array.error.cannot-upload-unable-to-convert",{count:i.length}),description:i.map((e,t)=>(0,l.jsxs)(h.kC,{gap:2,padding:2,children:[(0,l.jsx)(h.xu,{children:(0,l.jsx)(h.xv,{weight:"medium",children:e.file.name})}),(0,l.jsx)(h.xu,{children:(0,l.jsxs)(h.xv,{size:1,children:["(",e.file.type,")"]})})]},t))}),n.forEach(e=>{eu(e.file,C(e.uploaderCandidates,e=>e.uploader.priority)[0])})},[X,E,_,eu,F]),em=(0,d.useCallback)(e=>{let{event:t}=e,n="paste"===t.type?"paste":"drop",i=!!t.clipboardData.getData("text/html"),a=!!t.clipboardData.getData("text/plain");return"paste"===n&&i&&a||uu(t.clipboardData).then(e=>e.length>0?e:[]).then(e=>{ep(e)}),x?.(e)},[ep,x]);return(0,l.jsxs)(h.xu,{children:[!R&&es,(!B||R)&&(0,l.jsx)(yg,{markers:o,children:(0,l.jsx)(yx,{memberItems:en,children:(0,l.jsx)(t2.q$,{patches$:ee,onChange:er,maxBlocks:void 0,ref:$,readOnly:G||v,schemaType:_,value:S,children:(0,l.jsx)(yf,{...e,elementRef:I,hasFocusWithin:W,hotkeys:i,isActive:U,isFullscreen:V,onActivate:el,onItemRemove:g,onCopy:u,onInsert:f,onPaste:em,onToggleFullscreen:et,rangeDecorations:ed,renderBlockActions:k,renderCustomMarkers:T,renderEditable:A})})})})]})}function yM(e){return`inset 0 0 0 ${e.width}px ${e.color}`}let yN=(0,j.zo)(h.Zb)(e=>{let{theme:t}=e,{focusRing:n,input:i,radius:a}=t.sanity,r=t.sanity.color.input,o=(0,h.hO)(t.sanity.space[1]);return{position:"relative",borderRadius:`${a[1]}px`,color:r.default.enabled.fg,boxShadow:yM({color:r.default.enabled.border,width:i.border.width}),"& > .content":{position:"relative",lineHeight:0,margin:`-${o} 0 0 -${o}`},"& > .content > div":{display:"inline-block",verticalAlign:"top",padding:`${o} 0 0 ${o}`},"&:not([data-read-only])":{cursor:"text"},"@media(hover:hover):not([data-disabled]):not([data-read-only]):hover":{borderColor:r.default.hovered.border},"&:not([data-disabled]):not([data-read-only])[data-focused]":{boxShadow:function(e){let{base:t,border:n,focusRing:i}=e,a=i.offset+i.width,r=0-i.offset,o=t?t.bg:"var(--card-bg-color)";return[r>0&&`inset 0 0 0 ${r}px var(--card-focus-ring-color)`,n&&yM(n),r<0&&`0 0 0 ${0-r}px ${o}`,a>0&&`0 0 0 ${a}px var(--card-focus-ring-color)`].filter(Boolean).join(",")}({border:{color:r.default.enabled.border,width:i.border.width},focusRing:n})},"*:disabled + &":{color:r.default.disabled.fg,backgroundColor:r.default.disabled.bg,boxShadow:yM({color:r.default.disabled.border,width:i.border.width})}}}),yI=j.zo.input(e=>{let{theme:t}=e,n=t.sanity.fonts.text,i=t.sanity.color.input,a=t.sanity.space[2],r=t.sanity.fonts.text.sizes[2];return{appearance:"none",background:"none",border:0,borderRadius:0,outline:"none",fontSize:(0,h.hO)(r.fontSize),lineHeight:r.lineHeight/r.fontSize,fontFamily:n.family,fontWeight:n.weights.regular,margin:0,display:"block",minWidth:"1px",maxWidth:"100%",boxSizing:"border-box",paddingTop:(0,h.hO)(a-r.ascenderHeight),paddingRight:(0,h.hO)(a),paddingBottom:(0,h.hO)(a-r.descenderHeight),paddingLeft:(0,h.hO)(a),"&:not(:invalid):not(:disabled)":{color:i.default.enabled.fg},"&:not(:invalid):disabled":{color:i.default.disabled.fg}}}),yz=(0,j.zo)(h.xu)(e=>{let{theme:t}=e,n=t.sanity.color.input;return(0,j.iv)`
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    pointer-events: none;
    --card-fg-color: ${n.default.enabled.placeholder};
  `}),y$=(0,j.zo)(h.xu)`
  // This is needed to make textOverflow="ellipsis" work properly for the Text primitive
  max-width: 100%;
`,yO=(0,d.forwardRef)((e,t)=>{let{disabled:n,onChange:i,onFocus:a,placeholder:r,readOnly:o,value:s=[],...c}=e,{t:u}=i1(a0),[p,m]=(0,d.useState)(""),f=!n&&!o,[g,x]=(0,d.useState)(!1),y=(0,d.useRef)(null),b=(0,d.useRef)(null);(0,d.useImperativeHandle)(t,()=>y.current);let v=(0,d.useCallback)(e=>{if((0,h.Re)(e.target)&&e.target.closest('[data-ui="Tag"]'))return;let t=y.current;t&&setTimeout(()=>t.focus(),0)},[]),j=(0,d.useCallback)(()=>{x(!1)},[]),C=(0,d.useCallback)(e=>{m(e.currentTarget.value)},[]),w=(0,d.useCallback)(e=>{x(!0),a&&a(e)},[a]),k=(0,d.useCallback)(e=>{if("Enter"===e.key&&(e.preventDefault(),e.stopPropagation(),i&&p)){let e=s.concat([{value:p}]);m(""),i&&i(e)}},[p,i,s]),T=(0,d.useCallback)(e=>{if(!i)return;let t=s.slice(0);t.splice(e,1),i(t)},[i,s]);return(0,d.useEffect)(()=>{let e=y.current;e&&(e.style.width="0",e.style.width=`${e.scrollWidth}px`)},[p]),(0,l.jsxs)(yN,{"data-disabled":n?"":void 0,"data-focused":g?"":void 0,"data-read-only":o?"":void 0,"data-ui":"TagInput",onPointerDown:v,overflow:"auto",padding:1,ref:b,children:[f&&(0,l.jsx)(yz,{hidden:!!(p||s.length),padding:3,children:(0,l.jsx)(h.xv,{textOverflow:"ellipsis",children:r||u("inputs.tags.placeholder",{context:"u">typeof window&&"ontouchstart"in window?"touch":void 0})})}),(0,l.jsxs)("div",{className:"content",children:[s.map((e,t)=>(0,l.jsx)(y$,{children:(0,l.jsx)(yP,{enabled:f,index:t,muted:!f,onRemove:T,tag:e})},`tag-${t}`)),(0,l.jsx)("div",{children:(0,l.jsx)(yI,{...c,disabled:!f,onBlur:j,onChange:C,onFocus:w,onKeyDown:k,ref:y,type:"text",value:p})},"tag-input")]})]})});function yP(e){let{enabled:t,index:n,muted:i,onRemove:a,tag:r}=e,o=(0,d.useCallback)(()=>{a(n)},[n,a]);return(0,l.jsx)(h.Zb,{"data-ui":"Tag",radius:2,tone:"transparent",children:(0,l.jsxs)(h.kC,{align:"center",gap:1,children:[(0,l.jsx)(h.xu,{flex:1,paddingY:2,paddingLeft:2,children:(0,l.jsx)(h.xv,{muted:i,textOverflow:"ellipsis",children:r.value})}),t&&(0,l.jsx)(x.zx,{icon:_.Two,mode:"bleed",onClick:o,tooltipProps:{content:"Remove"}})]})})}function yF(e){let{onChange:t,readOnly:n,value:i=[],elementProps:a,path:r,changed:o}=e,s=(0,d.useMemo)(()=>i?.map(e=>({value:e})),[i]),c=(0,d.useCallback)(e=>{t(0===e.length?sZ():sU(e.map(e=>e.value)))},[t]);return(0,l.jsx)(i9,{path:r,isChanged:o,hasFocus:!1,children:(0,l.jsx)(yO,{onChange:c,readOnly:n,value:s,...a})})}yO.displayName="ForwardRef(TagInput)";let yD=["string","number","boolean"];function yR(e){return(0,w.n4)(e)?e:{title:ti(`${e}`),value:e}}let yL={title:"",value:void 0};function yB(e){let{value:t,readOnly:n,validationError:i,schemaType:a,onChange:r,path:o,changed:s,focused:c,elementProps:u}=e,p=(0,d.useMemo)(()=>(a.options?.list||[]).map(yR),[a.options?.list]),m=p.find(e=>e.value===t),f=a.options&&"radio"===a.options.layout,g=(0,d.useCallback)(e=>p[Number(e)],[p]),x=(0,d.useCallback)(e=>String(p.indexOf(e)),[p]),y=(0,d.useId)(),b=(0,d.useCallback)(e=>{r(sH.from(typeof e?.value>"u"?sZ():sU(e.value)))},[r]),v=(0,d.useCallback)(e=>{let t=g(e.currentTarget.value);if(!t){b(yL);return}b(t)},[b,g]),j=f?(0,l.jsx)(yq,{...u,value:m,inputId:y,items:p,direction:a.options?.direction||"vertical",customValidity:i,onChange:b,readOnly:n}):(0,l.jsx)(h.Ph,{...u,customValidity:i,value:x(m),readOnly:n,onChange:v,children:[yL,...p].map((e,t)=>(0,l.jsx)("option",{value:t-1,children:e.title},`${t-1}`))});return(0,l.jsx)(i9,{path:o,isChanged:s,hasFocus:!!c,children:j})}let yq=(0,d.forwardRef)(function(e,t){let{items:n,value:i,onChange:a,onFocus:r,readOnly:o,customValidity:s,direction:c,inputId:d}=e;return(0,l.jsx)(h.Zb,{border:!0,padding:3,radius:2,children:(0,l.jsx)("horizontal"===c?h.gF:h.Kq,{space:3,role:"group",children:n.map((e,n)=>(0,l.jsx)(yV,{customValidity:s,inputId:d,item:e,onChange:a,onFocus:r,readOnly:o,ref:0===n?t:null,value:i},n))})})}),yV=(0,d.forwardRef)(function(e,t){let{customValidity:n,inputId:i,item:a,onChange:r,onFocus:o,readOnly:s,value:c}=e,u=(0,d.useCallback)(()=>{r(a)},[a,r]);return(0,l.jsxs)(h.kC,{as:"label",align:"center",children:[(0,l.jsx)(h.Y8,{ref:t,checked:c===a,onChange:u,onFocus:o,readOnly:s,customValidity:n,name:i}),(0,l.jsx)(h.xu,{marginLeft:2,children:(0,l.jsx)(h.xv,{size:1,weight:"medium",children:a.title})})]})});function yK(e){var t;if(e.components?.input)return e.components.input;let n=lp("array",e)?1===(t=e).of.length&&lp("string",t.of[0])&&t.options?.layout==="tags"?yF:t.options?.list?m1:t.of.every(e=>yD.includes(e.jsonType))?m9:t.of.some(e=>lp("block",e))?yE:mW:lp("reference",e)?d6:lp("string",e)?dA(e,"list")?yB:hZ:lp("number",e)?dA(e,"list")?yB:hM:void 0;if(n)return n;let i=Object.values(dN(e,new Set).reduce((e,t)=>(e[t.name]=t,e),{})).find(e=>g$[e.name]);if(i)return g$[i.name];throw Error(`Could not find input component for schema type \`${e.name}\``)}function yU(e){return e.components?.preview?e.components.preview:bU}let yZ={portal:!0,tone:"default"},yG={position:"relative"};function yH(e){let{schemaType:t,parentSchemaType:n,path:i,readOnly:a,onRemove:r,value:o,open:s,onInsert:c,onCopy:u,onFocus:p,onOpen:m,onClose:f,changed:g,focused:y,children:b,inputProps:{renderPreview:v}}=e,{t:j}=i1(),C=mz(),w=n?.options?.treeEditing===!1,k=w||C.legacyEditing,T=s&&(!C.enabled||k),A=n.options?.sortable!==!1,S=n.of,E=(0,d.useRef)(null);cS(E,s),sB(y,(e,t)=>{!e&&t&&E.current&&E.current?.focus()});let M=o._resolvingInitialValue,N=(0,d.useCallback)(()=>{c({items:[{...o,_key:sQ()}],position:"after"})},[c,o]),I=(0,d.useCallback)(()=>{u({items:[{...o,_key:sQ()}]})},[u,o]),z=(0,d.useCallback)((e,t)=>{c({items:[le(t)],position:e})},[c]),$=oa(i,!0),O=(0,d.useMemo)(()=>0===$.length?null:(0,l.jsx)(oW,{presence:$,maxAvatars:1}),[$]),P=od(i,!0),F=(0,d.useMemo)(()=>0===P.length?null:(0,l.jsx)(h.xu,{paddingX:1,paddingY:3,children:(0,l.jsx)(sw,{validation:P,__unstable_showSummary:!0})}),[P]),D=P.some(e=>"error"===e.level),R=P.some(e=>"warning"===e.level),[L,B]=(0,d.useState)(null),{insertBefore:q,insertAfter:V}=mO({schemaTypes:S,insertMenuOptions:n.options?.insertMenu,onInsert:z,referenceElement:L}),K=(0,d.useMemo)(()=>a?null:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(x.j2,{ref:B,onOpen:()=>{q.send({type:"close"}),V.send({type:"close"})},button:(0,l.jsx)(aI,{selected:!!q.state.open||!!V.state.open||void 0}),id:`${e.inputId}-menuButton`,menu:(0,l.jsxs)(h.v2,{children:[(0,l.jsx)(x.sN,{text:j("inputs.array.action.remove"),tone:"critical",icon:_.XHJ,onClick:r}),(0,l.jsx)(x.sN,{text:j("inputs.array.action.copy"),icon:_.TIy,onClick:I}),(0,l.jsx)(x.sN,{text:j("inputs.array.action.duplicate"),icon:_.bhu,onClick:N}),q.menuItem,V.menuItem]}),popover:yZ}),q.popover,V.popover]}),[a,q,V,e.inputId,j,r,I,N]),U=function({readOnly:e,hasErrors:t,hasWarnings:n}){return e?"transparent":t?"critical":n?"caution":"default"}({readOnly:a,hasErrors:D,hasWarnings:R}),Z=(0,l.jsx)(mq,{menu:K,presence:O,validation:F,tone:U,focused:y,dragHandle:A,selected:s,readOnly:!!a,children:(0,l.jsxs)(h.Zb,{as:"button",type:"button",tone:"inherit",radius:1,disabled:M,onClick:m,ref:E,onFocus:p,__unstable_focusRing:!0,style:yG,children:[v({schemaType:e.schemaType,value:e.value,layout:"default",skipVisibilityCheck:!0}),M&&(0,l.jsx)(aW,{fill:!0})]})}),G=pM(t);return(0,l.jsxs)(m$,{legacyEditing:w,children:[(0,l.jsx)(i9,{path:i,isChanged:g,hasFocus:!!y,children:(0,l.jsx)(h.xu,{paddingX:1,children:Z})}),T&&(0,l.jsx)(p$,{header:a?j("inputs.array.action.view",{itemTypeTitle:G}):j("inputs.array.action.edit",{itemTypeTitle:G}),type:n?.options?.modal?.type||"dialog",width:n?.options?.modal?.width??1,id:o._key,onClose:f,autofocus:y,legacy_referenceElement:E.current,children:b})]})}function yW(e){let{menuRef:t,menuButtonRef:n,containerRef:i}=e,a=(0,d.useMemo)(()=>({menuRef:t,menuButtonRef:n,containerRef:i}),[i,n,t]);return(0,l.jsx)(p.ZT.Provider,{value:a,children:e.children})}let yY={portal:!0,tone:"default"};function yJ(e){let{schemaType:t,parentSchemaType:n,path:i,readOnly:a,onRemove:r,value:o,open:s,onInsert:c,onCopy:u,presence:p,validation:m,inputId:f,changed:g,focused:y,children:b,inputProps:{onChange:v,focusPath:j,onPathFocus:C,renderPreview:w,elementProps:k}}=e,T=n.options?.sortable!==!1,A=n.of,S=(0,d.useRef)(null),E=(0,d.useRef)(null),M=(0,d.useRef)(null),N=(0,d.useRef)(null),{EditReferenceLink:I,getReferenceInfo:z,selectedState:$,isCurrentDocumentLiveEdit:O}=dw({path:i,schemaType:t,value:o});cS(S,s),sB(y,(e,t)=>{!e&&t&&S.current&&S.current?.focus()});let P=e.validation.some(e=>"error"===e.level),F=e.validation.some(e=>"warning"===e.level),D=o._resolvingInitialValue,R=(0,d.useCallback)(()=>{c({items:[{...o,_key:sQ()}],position:"after"})},[c,o]),L=(0,d.useCallback)(()=>{u({items:[{...o,_key:sQ()}]})},[u,o]),B=(0,d.useCallback)((e,t)=>{c({items:[{...le(t),_key:sQ()}],position:e})},[c]),q=cG(o?._ref,z),V=o._ref,K=q.result?.type||o?._strengthenOnPublish?.type,U=V&&q.result?.preview?.published?._id,Z=(0,d.useCallback)(()=>{v([!0===t.weak?sU(!0,["_weak"]):sZ(["_weak"]),sZ(["_strengthenOnPublish"])])},[v,t.weak]),G=K?t.to.find(e=>e.name===K):void 0,H="pressed"===$,W="selected"===$,Y=function({readOnly:e,hasErrors:t,hasWarnings:n}){return e?"transparent":t?"critical":n?"caution":"default"}({readOnly:a,hasErrors:P,hasWarnings:F}),J=!V||"_ref"===j[0],{t:X}=i1(),Q=(0,d.useMemo)(()=>(0,d.forwardRef)(function(e,t){return(0,l.jsx)(ny.nR,{...e,intent:"edit",params:{id:o?._ref,type:G?.name},target:"_blank",rel:"noopener noreferrer",ref:t})}),[G?.name,o?._ref]),ee=(0,d.useCallback)(()=>{C(V&&J?[]:["_ref"])},[V,J,C]),[et,en]=(0,d.useState)(null),ei=(0,d.useCallback)(e=>{en(e),M.current=e},[]),{insertBefore:ea,insertAfter:er}=mO({schemaTypes:A,insertMenuOptions:n.options?.insertMenu,onInsert:B,referenceElement:et}),eo=(0,d.useMemo)(()=>a?null:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(x.j2,{ref:ei,onOpen:()=>{ea.send({type:"close"}),er.send({type:"close"})},button:(0,l.jsx)(aI,{selected:!!ea.state.open||!!er.state.open||void 0}),id:`${f}-menuButton`,menu:(0,l.jsxs)(h.v2,{ref:E,children:[!a&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(x.sN,{text:X("inputs.reference.action.remove"),tone:"critical",icon:_.XHJ,onClick:r}),(0,l.jsx)(x.sN,{text:X(V&&J?"inputs.reference.action.replace-cancel":"inputs.reference.action.replace"),icon:V&&J?_.Two:_.bnu,onClick:ee}),(0,l.jsx)(x.sN,{text:X("inputs.reference.action.copy"),icon:_.TIy,onClick:L}),(0,l.jsx)(x.sN,{text:X("inputs.reference.action.duplicate"),icon:_.bhu,onClick:R}),ea.menuItem,er.menuItem]}),!a&&!J&&V&&(0,l.jsx)(h.R,{}),!J&&V&&(0,l.jsx)(x.sN,{as:Q,"data-as":"a",text:X("inputs.reference.action.open-in-new-tab"),icon:_.buG})]}),popover:yY}),ea.popover,er.popover]}),[Q,L,R,ee,V,f,er,ea,J,r,a,ei,X]),es=(0,d.useCallback)(()=>{v(!0===t.weak?sU(!0,["_weak"]):sZ(["_weak"]))},[v,t]),el=o?._weak?"weak":"strong",ec=!0===t.weak?"weak":"strong",ed=V&&!q.isLoading&&o?._strengthenOnPublish,eu=!q.isLoading&&q.result?.availability.available&&V&&el!==ec&&!ed,ep=(0,l.jsxs)(l.Fragment,{children:[O&&U&&o._strengthenOnPublish&&(0,l.jsx)(cR,{schemaType:t,handleRemoveStrengthenOnPublish:Z}),eu&&(0,l.jsx)(cV,{actualStrength:el,handleFixStrengthMismatch:es}),q.error&&(0,l.jsx)(cq,{errorMessage:q.error.message,onHandleRetry:q.retry})]}),em=(0,l.jsx)(yW,{menuRef:E,menuButtonRef:M,containerRef:N,children:(0,l.jsx)(mq,{dragHandle:T,readOnly:!!a,presence:!J&&p.length>0&&(0,l.jsx)(oW,{presence:p,maxAvatars:1}),validation:!J&&m.length>0&&(0,l.jsx)(sw,{validation:m}),menu:eo,footer:J?void 0:ep,tone:J?void 0:Y,focused:y,children:J?(0,l.jsx)(h.xu,{padding:1,ref:N,children:(0,l.jsx)(sD,{title:t.title,description:t.description,__unstable_presence:p,validation:m,inputId:f,deprecated:t.deprecated,children:b})}):(0,l.jsxs)(cB,{as:I,tone:"inherit",radius:2,documentId:o?._ref,documentType:G?.name,disabled:D,__unstable_focusRing:!0,selected:W,pressed:H,"data-selected":!!W||void 0,"data-pressed":!!H||void 0,...k,children:[(0,l.jsx)(cI,{value:o,referenceInfo:q,renderPreview:w,type:t}),D&&(0,l.jsx)(aW,{fill:!0})]})})});return(0,l.jsx)(i9,{path:i,isChanged:g,hasFocus:!!y,children:(0,l.jsx)(h.xu,{paddingX:1,children:em})})}function yX(e){return e.components?.item?e.components.item:(0,w.dD)(e)?yJ:yH}function yQ(e){let{children:t}=e,[{error:n,info:i},a]=(0,d.useState)({error:null,info:{}}),r=(0,d.useCallback)(()=>a({error:null,info:{}}),[]);return n?(0,l.jsx)(y0,{error:n,info:i,onRetry:r}):(0,l.jsx)(h.SV,{onCatch:a,children:t})}function y0(e){let{error:t,info:n,onRetry:i}=e;if(t instanceof r$||t instanceof Pd)throw t;let{t:a}=i1(),r=(0,d.useMemo)(()=>iO(t)&&"string"==typeof t.message&&t.message,[t]),o=(0,d.useMemo)(()=>iO(t)&&"string"==typeof t.stack&&t.stack,[t]),s=(0,d.useMemo)(()=>"string"==typeof n?.componentStack&&n.componentStack,[n?.componentStack]);return(0,nG.H)(i),(0,l.jsx)(lq,{status:"error",title:(0,l.jsx)(l.Fragment,{children:a("form.error.unhandled-runtime-error.title")}),children:(0,l.jsxs)(h.Kq,{space:4,children:[(0,l.jsx)(h.xv,{as:"p",muted:!0,size:1,children:(0,l.jsx)(l.Fragment,{children:a("form.error.unhandled-runtime-error.error-message",{message:r})})}),o&&(0,l.jsx)(h.xu,{children:(0,l.jsxs)(h.Kq,{space:2,children:[(0,l.jsx)(h.xv,{as:"p",size:1,children:(0,l.jsx)(l.Fragment,{children:a("form.error.unhandled-runtime-error.call-stack.title")})}),(0,l.jsx)(h.Zb,{border:!0,radius:2,overflow:"auto",padding:4,tone:"inherit",children:o&&(0,l.jsx)(h.EK,{size:1,style:{maxHeight:"40vh"},children:o})})]})},"call-stack"),lR&&s&&(0,l.jsx)(h.xu,{children:(0,l.jsxs)(h.Kq,{space:2,children:[(0,l.jsx)(h.xv,{as:"p",size:1,children:(0,l.jsx)(l.Fragment,{children:a("form.error.unhandled-runtime-error.component-stack.title")})}),(0,l.jsx)(h.Zb,{border:!0,radius:2,overflow:"auto",padding:4,tone:"inherit",children:s&&(0,l.jsx)(h.EK,{size:1,style:{maxHeight:"40vh"},children:s})})]})},"component-stack")]})})}let y1={isLoading:!0},y2={isLoading:!1};function y3(e){let{enabled:t=!0,ordering:n,schemaType:i,value:a}=e||{},{observeForPreview:r}=CI(),o=(0,d.useMemo)(()=>t&&a&&i?r(a,i,{viewOptions:{ordering:n}}).pipe((0,P.U)(e=>({isLoading:!1,value:e.snapshot||void 0})),(0,F.K)(e=>(0,N.of)({isLoading:!1,error:e}))):(0,N.of)(y2),[t,a,i,r,n]);return(0,eR.m)(o,y1)}let y4=typeof window>"u"?z.E:(0,L.R)(window,"orientationchange").pipe((0,em.d)(1)),y5=typeof window>"u"?z.E:(0,L.R)(window,"resize").pipe((0,em.d)(1)),y8=typeof window>"u"?z.E:(0,L.R)(window,"scroll",{passive:!0,capture:!0}).pipe((0,em.d)(1)),y6="u">typeof window&&"IntersectionObserver"in window&&"IntersectionObserverEntry"in window&&"intersectionRatio"in IntersectionObserverEntry.prototype&&("isIntersecting"in IntersectionObserverEntry.prototype||Object.defineProperty(IntersectionObserverEntry.prototype,"isIntersecting",{get(){return this.intersectionRatio>0}}),1)?function(){let e=new D.x,t=new IntersectionObserver(t=>{t.forEach(t=>{e.next(t)})},{threshold:0,rootMargin:"150px"});return function(n){return new $.y(e=>(t.observe(n),e.next(),()=>t.unobserve(n))).pipe((0,eu.z)(()=>e.asObservable()),(0,eh.h)(e=>e.target===n),(0,P.U)(e=>({isIntersecting:e.isIntersecting})))}}():function(e){let t=()=>{var t,n;return t=e.getBoundingClientRect(),n={left:0,right:window.innerWidth,top:0,bottom:window.innerHeight},t.left<=n.right+150&&t.right>=n.left-150&&t.top<=n.bottom+150&&t.bottom>=n.top-150};return(0,R.T)((0,N.of)(t()),y5,y8,y4).pipe((0,P.U)(t),(0,P.U)(e=>({isIntersecting:e})))},y7=typeof window>"u"?z.E:(0,L.R)(document,"visibilitychange").pipe((0,em.d)(1));function y9(e){return iP(e)?e:void 0}function be(e){let{layout:t,value:n,component:i,style:a,schemaType:r,skipVisibilityCheck:o,...s}=e,{t:c}=i1(),[u,p]=(0,d.useState)(null),m=function(e){let{element:t,hideDelay:n=0}=e,[i,a]=(0,d.useState)(!1);return(0,d.useEffect)(()=>{if(!t)return;let e=(0,I.z)((0,N.of)(!document.hidden),y7.pipe((0,P.U)(e=>e.target instanceof Document&&!e?.target?.hidden))).pipe((0,ea.x)()),i=y6(t).pipe((0,P.U)(e=>e.isIntersecting)),r=e.pipe((0,ec.w)(e=>e?i:(0,N.of)(!1)),(0,ec.w)(e=>e?(0,N.of)(!0):(0,N.of)(!1).pipe((0,eA.g)(n))),(0,ea.x)()).subscribe(a);return()=>r.unsubscribe()},[t,n]),i}({element:o?null:u,hideDelay:2e3}),h=y3({enabled:o||m,schemaType:r,value:n}),f=(0,d.useMemo)(()=>({...a,minWidth:a?.minWidth||1,minHeight:a?.minHeight||1}),[a]),g=(0,d.useMemo)(()=>(function(e){if(!iO(e))return;let t="number"==typeof e.progress?e.progress:0,n=y9(e.initiated||e.createdAt),i=y9(e.updated||e.updatedAt),a=y9(e?.file?.name),r=y9(e?.file?.type),o=y9(e.previewImage);if(n&&i&&a&&r)return{progress:t,createdAt:n,updatedAt:i,file:{name:a,type:r},previewImage:o}})(n?._upload),[n]),x=(0,d.useMemo)(()=>g?.previewImage?(0,l.jsx)("img",{alt:c("preview.image.file-is-being-uploaded.alt-text"),src:g.previewImage}):h?.value?.media?h?.value?.media:r.icon,[h,r,g,c]);return(0,l.jsx)("div",{ref:p,style:f,children:(0,d.createElement)(i,{...s,...h?.value||{},media:x,error:h?.error,isPlaceholder:h?.isLoading,layout:t,schemaType:r})})}function bt(){return(0,l.jsxs)(h.xv,{size:1,children:["This is a example custom marker, please implement ",(0,l.jsx)("code",{children:"renderCustomMarkers"})," function."]})}let bn={publish:()=>{},subscribe:()=>(console.warn("No patch channel provided to form-builder. If you need input based patch updates, please provide one"),()=>{})};function bi(e){let{__internal_fieldActions:t=iI,__internal_patchChannel:n=bn,autoFocus:i,changesOpen:a,children:r,collapsedFieldSets:o,collapsedPaths:s,file:c,filterField:u,focusPath:m,focused:h,groups:f,id:g,image:x,onChange:y,onFieldGroupSelect:b,onPathBlur:v,onPathFocus:j,onPathOpen:C,onSetFieldSetCollapsed:w,onSetPathCollapsed:k,presence:T,readOnly:A,renderAnnotation:_,renderBlock:S,renderField:E,renderInlineBlock:M,renderInput:N,renderItem:I,renderPreview:z,schemaType:$,unstable:O,validation:P}=e,F=(0,d.useMemo)(()=>({patchChannel:n,components:{ArrayFunctions:uT,CustomMarkers:O?.CustomMarkers||bt,Markers:O?.Markers||ol},field:{actions:t},file:{assetSources:c.assetSources,directUploads:c?.directUploads!==!1},filterField:u||(()=>!0),image:{assetSources:x.assetSources,directUploads:x?.directUploads!==!1},onChange:y}),[t,c.assetSources,c?.directUploads,u,x.assetSources,x?.directUploads,y,n,O?.CustomMarkers,O?.Markers]),D=(0,d.useMemo)(()=>({__internal:F,autoFocus:i,changesOpen:a,collapsedFieldSets:o,collapsedPaths:s,focusPath:m,focused:h,groups:f,id:g,readOnly:A,renderAnnotation:_,renderBlock:S,renderField:E,renderInlineBlock:M,renderInput:N,renderItem:I,renderPreview:z,schemaType:$}),[F,i,a,o,s,m,h,f,g,A,_,S,E,M,N,I,z,$]);return(0,l.jsx)(p.rR.Provider,{value:D,children:(0,l.jsx)(sW,{onChange:y,onFieldGroupSelect:b,onPathBlur:v,onPathFocus:j,onPathOpen:C,onSetPathCollapsed:k,onSetFieldSetCollapsed:w,children:(0,l.jsx)(cA,{id:g,children:(0,l.jsx)(on,{presence:T,children:(0,l.jsx)(oc,{validation:P,children:(0,l.jsx)(oS,{children:r})})})})})})}function ba(e){let{__internal_fieldActions:t,__internal_patchChannel:n,autoFocus:i,changesOpen:a,children:r,collapsedFieldSets:o,collapsedPaths:s,focusPath:c,focused:u,groups:p,id:m,onChange:h,onPathBlur:f,onPathFocus:g,onPathOpen:x,onFieldGroupSelect:y,onSetPathCollapsed:b,onSetFieldSetCollapsed:v,presence:j,readOnly:C,schemaType:w,validation:k}=e,{file:T,image:A}=AU().form,_=bO(),S=bP(),E=bF(),M=bD(),N=bR(),I=bL(),z=bB(),$=(0,d.useCallback)(e=>(0,l.jsx)(_,{...e}),[_]),O=(0,d.useCallback)(e=>(0,l.jsx)(S,{...e}),[S]),P=(0,d.useCallback)(({key:e,...t})=>(0,l.jsx)(M,{...t},e),[M]),F=(0,d.useCallback)(e=>(0,l.jsx)(be,{component:E,...e}),[E]),D=(0,d.useCallback)(e=>(0,l.jsx)(N,{...e}),[N]),R=(0,d.useCallback)(e=>(0,l.jsx)(I,{...e}),[I]),L=(0,d.useCallback)(e=>(0,l.jsx)(z,{...e}),[z]);return(0,l.jsx)(bi,{__internal_fieldActions:t,__internal_patchChannel:n,autoFocus:i,changesOpen:a,collapsedFieldSets:o,collapsedPaths:s,file:T,focusPath:c,focused:u,groups:p,id:m,image:A,onChange:h,onPathBlur:f,onPathFocus:g,onPathOpen:x,onFieldGroupSelect:y,onSetPathCollapsed:b,onSetFieldSetCollapsed:v,presence:j,readOnly:C,renderAnnotation:L,renderBlock:D,renderField:O,renderInlineBlock:R,renderInput:$,renderItem:P,renderPreview:F,schemaType:w,validation:k,children:r})}function br(e){let{__internal_fieldActions:t,__internal_patchChannel:n,autoFocus:i,changesOpen:a,collapsedFieldSets:r,collapsedPaths:o,focused:s,focusPath:c,groups:u,id:p,members:m,onChange:h,onFieldGroupSelect:f,onPathBlur:g,onPathFocus:x,onPathOpen:y,onSetFieldSetCollapsed:b,onSetPathCollapsed:v,openPath:j=iI,presence:C,readOnly:w,schemaType:k,validation:T,value:A}=e,_=(0,d.useCallback)(e=>v([e],!0),[v]),S=(0,d.useCallback)(e=>v([e],!1),[v]),E=(0,d.useCallback)(()=>g(iI),[g]),M=(0,d.useCallback)(()=>x(iI),[x]),N=(0,d.useCallback)(e=>h(sH.from(e)),[h]),I=(0,d.useRef)(null),z=(0,d.useCallback)(e=>f(iI,e),[f]),$=(0,d.useCallback)(e=>y([e]),[y]),O=(0,d.useCallback)(()=>y([]),[y]),P=(0,d.useCallback)(e=>b([e],!0),[b]),F=(0,d.useCallback)(e=>b([e],!1),[b]),D=bO(),R=bP(),L=bF(),B=bD(),q=bR(),V=bL(),K=bB(),U=(0,d.useCallback)(e=>(0,l.jsx)(yQ,{children:(0,l.jsx)(D,{...e})}),[D]),Z=(0,d.useCallback)(e=>(0,l.jsx)(R,{...e}),[R]),G=(0,d.useCallback)(({key:e,...t})=>(0,l.jsx)(B,{...t},e),[B]),H=(0,d.useCallback)(e=>(0,l.jsx)(be,{component:L,...e}),[L]),W=(0,d.useCallback)(e=>(0,l.jsx)(q,{...e}),[q]),Y=(0,d.useCallback)(e=>(0,l.jsx)(V,{...e}),[V]),J=(0,d.useCallback)(e=>(0,l.jsx)(K,{...e}),[K]),X=(0,d.useMemo)(()=>({focusPath:c,elementProps:{ref:I,id:p,onBlur:E,onFocus:M,"aria-describedby":void 0},changed:m.some(e=>"field"===e.kind&&e.field.changed),focused:s,groups:u,id:p,level:0,members:m,onChange:N,onFieldClose:O,onFieldCollapse:_,onFieldSetCollapse:P,onFieldExpand:S,onFieldSetExpand:F,onPathFocus:x,onFieldOpen:$,onFieldGroupSelect:z,path:iI,presence:iI,readOnly:w,renderAnnotation:J,renderBlock:W,renderField:Z,renderInlineBlock:Y,renderInput:U,renderItem:G,renderPreview:H,schemaType:k,validation:iI,value:A}),[c,s,u,E,N,O,_,P,S,F,M,$,z,p,m,x,w,J,W,Z,Y,U,G,H,k,A]);return(0,l.jsx)(ba,{__internal_fieldActions:t,__internal_patchChannel:n,autoFocus:i,changesOpen:a,collapsedFieldSets:r,collapsedPaths:o,focusPath:c,focused:s,groups:u,id:p,onChange:h,onPathBlur:g,onPathFocus:x,onPathOpen:y,onFieldGroupSelect:f,onSetPathCollapsed:v,onSetFieldSetCollapsed:b,presence:C,validation:T,readOnly:w,schemaType:k,children:(0,l.jsx)(k5,{value:A,children:(0,l.jsx)(cH,{value:A,children:(0,l.jsx)(ld,{actions:t,children:(0,l.jsx)(m$,{children:(0,l.jsx)(bo,{rootInputProps:X,onPathOpen:y,openPath:j,renderInput:U})})})})})})}function bo(e){let{rootInputProps:t,onPathOpen:n,openPath:i,renderInput:a}=e,r=mz(),o=(0,d.useMemo)(()=>mT(t.schemaType,i),[i,t.schemaType]),s="root"===t.id,c=r.enabled&&s&&o&&(0,l.jsx)(mI,{onPathFocus:t.onPathFocus,onPathOpen:n,openPath:i,rootInputProps:t,schemaType:t.schemaType});return a({...t,__internal_arrayEditingModal:c})}let bs=(0,j.zo)(h.Zb)(e=>{let{color:t,radius:n,space:i}=e.theme.sanity,a=(0,j.iv)`
    pointer-events: none;
    content: '';
    position: absolute;
    top: -${i[1]}px;
    bottom: -${i[1]}px;
    left: -${i[1]}px;
    right: -${i[1]}px;
    border-radius: ${n[2]}px;
    mix-blend-mode: ${t.dark?"screen":"multiply"};
  `;return(0,j.iv)`
    box-shadow: 0 0 0 1px var(--card-border-color);
    border-radius: ${n[1]}px;
    pointer-events: all;
    position: relative;

    &[data-focused] {
      --card-border-color: var(--card-focus-ring-color);
    }

    &:not([data-focused]):not([data-selected]) {
      @media (hover: hover) {
        &:hover {
          --card-border-color: ${t.input.default.hovered.border};
        }
      }
    }

    &[data-markers] {
      &:after {
        ${a}
        background-color: ${t.dark?M.VG.purple[950].hex:M.VG.purple[50].hex};
      }
    }

    &[data-warning] {
      &:after {
        ${a}
        background-color: ${t.muted.caution.hovered.bg};
      }

      @media (hover: hover) {
        &:hover {
          --card-border-color: ${t.muted.caution.hovered.border};
        }
      }
    }

    &[data-invalid] {
      &:after {
        ${a}
        background-color: ${t.input.invalid.enabled.bg};
      }

      @media (hover: hover) {
        &:hover {
          --card-border-color: ${t.input.invalid.hovered.border};
        }
      }
    }
  `}),bl=(0,j.zo)(h.kC)`
  display: block;
  position: relative;
  width: 100%;
  user-select: none;
  pointer-events: all;
`,bc=j.zo.div(({theme:e,$hasChanges:t})=>{let{space:n}=e.sanity;return(0,j.iv)`
      position: absolute;
      width: ${n[2]}px;
      right: 0;
      top: 0;
      bottom: 0;
      padding-left: ${n[1]}px;
      padding-right: ${n[2]}px;
      user-select: none;

      ${!t&&(0,j.iv)`
        display: none;
      `}

      [data-dragged] & {
        visibility: hidden;
      }
    `});(0,j.zo)(h.kC)`
  position: relative;

  [data-dragged] > & {
    opacity: 0.5;
  }
`;let bd=(0,j.zo)(h.xu)`
  width: 25px;
  position: relative;
  flex-shrink: 0;
  user-select: none;

  [data-dragged] & {
    visibility: hidden;
  }
`,bu=(0,j.zo)(h.kC)`
  position: absolute;
  right: 0;
  [data-dragged] & {
    visibility: hidden;
  }
`,bp=(0,j.zo)(h.xu)`
  max-width: 250px;
`,bm={constrainSize:!0,placement:"bottom",portal:"default",tone:"default"};function bh(e){let{children:t,focused:n,isOpen:i,onOpen:a,onRemove:r,readOnly:o,value:s}=e,{t:c}=i1(),u=(0,d.useId)(),p=(0,d.useRef)(null),m=(0,d.useRef)(!1),f=(0,d.useMemo)(()=>(0,w.Yk)(s)?(0,d.forwardRef)(function(e,t){return(0,l.jsx)(ny.nR,{...e,intent:"edit",params:{id:s._ref},ref:t})}):void 0,[s]);(0,d.useEffect)(()=>{i&&(m.current=!1)},[i]),(0,h.qh)((0,d.useCallback)(e=>{n&&"Tab"===e.key&&p.current&&!m.current&&!i&&(e.preventDefault(),e.stopPropagation(),p.current.focus(),m.current=!0)},[n,i]));let g=(0,d.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),r()},[r]);return(0,l.jsxs)(h.kC,{children:[(0,l.jsx)(h.xu,{flex:1,children:t}),(0,l.jsx)(h.xu,{children:(0,l.jsx)(x.j2,{button:(0,l.jsx)(x.zx,{"aria-label":c("inputs.portable-text.block.open-menu-aria-label"),icon:_.xXb,mode:"bleed",paddingY:3,tabIndex:n?0:1,tooltipProps:{content:"Open menu"}}),ref:p,id:u,menu:(0,l.jsx)(h.v2,{children:(0,l.jsxs)(l.Fragment,{children:["_ref"in s&&s._ref&&(0,l.jsx)(x.sN,{as:f,"data-as":"a",icon:_.xPt,text:c("inputs.portable-text.block.open-reference")}),o&&(0,l.jsx)(x.sN,{icon:_.hsE,onClick:a,text:c("inputs.portable-text.block.view")}),!o&&(0,l.jsx)(x.sN,{icon:_.dY8,onClick:a,text:c("inputs.portable-text.block.edit")}),!o&&(0,l.jsx)(x.sN,{icon:_.XHJ,onClick:g,text:c("inputs.portable-text.block.remove"),tone:"critical"})]})}),popover:bm})})]})}function bf(e){let{floatingBoundary:t,focused:n,isFullscreen:i,onItemClose:a,onItemOpen:r,onPathFocus:o,path:s,readOnly:u,referenceBoundary:p,relativePath:m,renderAnnotation:f,renderBlock:g,renderBlockActions:y,renderCustomMarkers:b,renderField:v,renderInlineBlock:j,renderInput:C,renderItem:w,renderPreview:k,schemaType:T,selected:A,value:_}=e,{onChange:S}=sY(),{Markers:E}=or().__internal.components,[M,N]=(0,d.useState)(!1),I=om(s),z=(0,t2._F)(),$=co(rg(s)),O=(0,d.useRef)(!1),P=(0,d.useMemo)(()=>({anchor:{path:m,offset:0},focus:{path:m,offset:0}}),[m]),F=(0,d.useCallback)(()=>N(!0),[]),D=(0,d.useCallback)(()=>N(!1),[]),R=(0,d.useCallback)(()=>{$&&(t2.q$.blur(z),r($.node.path))},[z,$,r]),L=(0,d.useCallback)(()=>{a(),t2.q$.select(z,P),t2.q$.focus(z)},[a,z,P]),B=(0,d.useCallback)(()=>{if(!O.current)try{t2.q$.delete(z,P,{mode:"blocks"})}catch(e){console.error(e)}finally{O.current=!0}},[z,P]);(0,d.useEffect)(()=>()=>{O.current&&t2.q$.focus(z)},[z]);let q=(0,d.useMemo)(()=>i&&!y?{paddingX:5}:i&&y?{paddingLeft:5,paddingRight:2}:y?{paddingLeft:3,paddingRight:2}:{paddingX:3},[i,y]),{validation:V,hasError:K,hasWarning:U,hasInfo:Z}=op($?.node),G=z.schemaTypes.portableText,H=I.length>0,W=oa(s,!0),Y=(0,d.useMemo)(()=>W.filter(e=>(0,c.Xy)(e.path,s)),[s,W]),J=K||U||Z||H,X=(0,d.useMemo)(()=>J&&(0,l.jsx)(bp,{children:(0,l.jsx)(E,{markers:I,validation:V,renderCustomMarkers:b})})||null,[E,I,b,J,V]),Q=!!$?.member.open,ee=$?.input,et=$?.node.path||iI,en=$?.elementRef?.current,ei=(0,d.useMemo)(()=>({__unstable_floatingBoundary:t,__unstable_referenceBoundary:p,__unstable_referenceElement:en||null,children:ee,focused:n,markers:I,onClose:L,onOpen:R,onPathFocus:o,onRemove:B,open:Q,parentSchemaType:G,path:et,presence:Y,readOnly:!!u,renderAnnotation:f,renderBlock:g,renderDefault:bg,renderField:v,renderInlineBlock:j,renderInput:C,renderItem:w,renderPreview:k,schemaType:T,selected:A,validation:V,value:_}),[t,en,ee,n,I,L,R,o,B,Q,G,et,Y,u,p,f,g,v,j,C,w,k,T,A,V,_]),ea=y&&_&&!u,er=i&&$;return(0,d.useMemo)(()=>(0,l.jsx)(h.xu,{ref:$?.elementRef,contentEditable:!1,children:(0,l.jsx)(h.kC,{"data-object-block":"",paddingBottom:1,marginY:3,style:void 0,children:(0,l.jsxs)(bl,{"data-object-block-inner":"",...q,children:[(0,l.jsx)(h.xu,{flex:1,children:(0,l.jsx)(x.u,{placement:"top",portal:"editor",disabled:!!Q||!J,content:X,children:(0,l.jsx)("div",{children:g&&g(ei)})})}),ea&&(0,l.jsx)(bd,{contentEditable:!1,marginRight:3,children:(0,l.jsx)(bu,{children:n&&(0,l.jsx)(g4,{block:_,onChange:S,renderBlockActions:y})})}),er&&(0,l.jsx)(bc,{$hasChanges:$.member.item.changed,contentEditable:!1,onMouseEnter:F,onMouseLeave:D,children:(0,l.jsx)(g2,{hasFocus:n,isChanged:$.member.item.changed,path:$.member.item.path,withHoverEffect:!1})}),M&&(0,l.jsx)(g1,{})]})})}),[ea,er,ei,n,D,F,q,$,S,g,y,M,X,J,_,Q])}let bg=e=>{let{__unstable_floatingBoundary:t,__unstable_referenceBoundary:n,__unstable_referenceElement:i,children:a,focused:r,markers:o,onClose:s,onOpen:c,onRemove:u,open:p,readOnly:m,renderPreview:h,schemaType:f,selected:g,value:x,validation:y}=e,{t:b}=i1(),v=(0,w.Or)(x),j=y.filter(e=>"error"===e.level).length>0,C=y.filter(e=>"warning"===e.level).length>0,k=o.length>0,T=g||r?"primary":"default",A=(0,d.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),c()},[c]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(bs,{"aria-label":b("inputs.portable-text.block.aria-label"),"data-focused":r?"":void 0,"data-image-preview":v?"":void 0,"data-invalid":j?"":void 0,"data-markers":k?"":void 0,"data-read-only":m?"":void 0,"data-selected":g?"":void 0,"data-testid":"pte-block-object","data-warning":C?"":void 0,flex:1,onDoubleClick:A,padding:v?0:1,tone:T,children:h({actions:(0,l.jsx)(bh,{isOpen:p,focused:r,onOpen:c,onRemove:u,readOnly:m,value:x}),layout:v?"blockImage":"block",schemaType:f,skipVisibilityCheck:!0,value:x})}),p&&(0,l.jsx)(cj,{floatingBoundary:t,defaultType:"dialog",onClose:s,autoFocus:r,schemaType:f,referenceBoundary:n,referenceElement:i,children:a})]})};function bx(e){return e.components?.block?e.components.block:r6(e)?xf:bg}function by(e){return e.components?.inlineBlock?e.components.inlineBlock:yh}function bb(e){return e.components?.annotation?e.components.annotation:cw}function bv(e){let{componentResolver:t,componentProps:n}=e;if(!n.schemaType)throw Error("the `schemaType` property must be defined");let i=t(n.schemaType),a=(0,d.useCallback)(e=>{if(!e.schemaType?.type)throw Error("Attempted to render form component of non-existent parent type");let{components:n,...i}=e.schemaType,a=t(i);return(0,d.createElement)(a,e)},[t]);return(0,d.createElement)(i,{...n,renderDefault:a})}function bj(e){return bv({componentProps:e,componentResolver:yK})}function bC(e){return bv({componentProps:e,componentResolver:dF})}function bw(e){return bv({componentProps:e,componentResolver:yX})}function bk(e){return bv({componentProps:e,componentResolver:yU})}function bT(e){return bv({componentProps:e,componentResolver:bx})}function bA(e){return bv({componentProps:e,componentResolver:by})}function b_(e){return bv({componentProps:e,componentResolver:bb})}function bS(e){return e.form?.components?.input}function bE(e){return e.form?.components?.field}function bM(e){return e.form?.components?.preview}function bN(e){return e.form?.components?.item}function bI(e){return e.form?.components?.block}function bz(e){return e.form?.components?.inlineBlock}function b$(e){return e.form?.components?.annotation}function bO(){return aL({defaultComponent:bj,pick:bS})}function bP(){return aL({defaultComponent:bC,pick:bE})}function bF(){return aL({defaultComponent:bk,pick:bM})}function bD(){return aL({defaultComponent:bw,pick:bN})}function bR(){return aL({defaultComponent:bT,pick:bI})}function bL(){return aL({defaultComponent:bA,pick:bz})}function bB(){return aL({defaultComponent:b_,pick:b$})}function bq(e){let t=bF();return(0,l.jsx)(be,{...e,component:t})}let bV={block:function(e){let{actions:t,title:n,subtitle:i,description:a,mediaDimensions:r=qC,media:o,status:s,children:c}=e;return(0,l.jsxs)(h.Kq,{"data-testid":"block-preview",space:1,children:[(0,l.jsxs)(qw,{"data-testid":"block-preview__header",children:[o&&(0,l.jsx)(BY,{dimensions:r,layout:"block",media:o}),(0,l.jsxs)(h.xu,{flex:1,paddingLeft:o?2:1,children:[(0,l.jsx)(h.xv,{size:1,textOverflow:"ellipsis",weight:"medium",children:n?BJ(n,"block"):"Untitled"}),i&&(0,l.jsx)(h.xu,{marginTop:2,children:(0,l.jsx)(h.xv,{muted:!0,size:1,textOverflow:"ellipsis",children:BJ(i,"block")})}),a&&(0,l.jsx)(h.xu,{marginTop:3,children:(0,l.jsx)(h.xv,{muted:!0,size:1,textOverflow:"ellipsis",children:BJ(a,"block")})})]}),(0,l.jsxs)(h.kC,{gap:1,paddingLeft:1,children:[s&&(0,l.jsx)(h.xu,{paddingX:2,paddingY:3,children:BJ(s,"block")}),t]})]}),c&&(0,l.jsx)("div",{"data-testid":"block-preview__children",children:c})]})},blockImage:function(e){let{actions:t,title:n,subtitle:i,description:a,fallbackTitle:r="Untitled",mediaDimensions:o=qv,media:s,children:c,status:d}=e;return(0,l.jsxs)(qb,{children:[(0,l.jsxs)(h.Kq,{children:[(0,l.jsxs)(qx,{paddingBottom:3,paddingLeft:2,paddingRight:1,paddingTop:1,children:[(0,l.jsxs)(h.Kq,{flex:1,space:2,children:[(n||r)&&(0,l.jsx)(h.xv,{size:1,textOverflow:"ellipsis",weight:"medium",children:n?BJ(n,"block"):r}),i&&(0,l.jsx)(h.xv,{muted:!0,size:1,textOverflow:"ellipsis",children:BJ(i,"block")})]}),(0,l.jsxs)(h.kC,{gap:1,paddingLeft:1,children:[d&&(0,l.jsx)(h.xu,{paddingX:2,paddingY:3,children:BJ(d,"block")}),t]})]}),(0,l.jsx)(qy,{$ratio:qj(o),__unstable_checkered:!0,display:"flex",sizing:"border",radius:2,tone:"inherit",children:(0,l.jsx)(BY,{border:!1,dimensions:o,layout:"blockImage",media:s,radius:0,responsive:!0})})]}),a&&(0,l.jsx)(h.xu,{paddingX:2,paddingY:3,children:(0,l.jsx)(h.xv,{muted:!0,size:1,children:BJ(a,"block")})}),c&&(0,l.jsx)("div",{children:c})]})},compact:function(e){let{children:t,isPlaceholder:n,media:i,status:a,title:r}=e,{t:o}=i1(),s=a&&(0,l.jsx)(h.xu,{"data-testid":"compact-preview__status",paddingLeft:4,paddingRight:1,children:BJ(a,"compact")});return n?(0,l.jsx)(BQ,{align:"center","data-testid":"default-preview",paddingLeft:i?1:2,paddingRight:2,paddingY:1,children:(0,l.jsxs)(h.kC,{align:"center",flex:1,gap:2,children:[i&&(0,l.jsx)(h.Od,{animated:!0,radius:2,style:BH.compact.media}),(0,l.jsx)(h.Kq,{"data-testid":"compact-preview__heading",flex:1,space:2,children:(0,l.jsx)(B0,{})}),s]})}):(0,l.jsxs)(BQ,{align:"center","data-testid":"compact-preview",paddingLeft:i?1:2,paddingRight:2,paddingY:1,children:[(0,l.jsxs)(h.kC,{align:"center",flex:1,gap:2,children:[i&&(0,l.jsx)(BY,{border:!1,dimensions:BX,layout:"compact",media:i}),(0,l.jsx)(h.Kq,{"data-testid":"compact-preview__header",flex:1,space:2,children:(0,l.jsxs)(h.xv,{size:1,style:{color:"inherit"},textOverflow:"ellipsis",weight:"medium",children:[r&&BJ(r,"compact"),!r&&(0,l.jsx)("span",{style:{color:"var(--card-muted-fg-color)"},children:o("preview.default.title-fallback")})]})}),s]}),t&&(0,l.jsx)(h.xu,{marginLeft:1,children:t})]})},default:B5,detail:function(e){let{title:t,subtitle:n,description:i,mediaDimensions:a=qi,media:r,status:o,children:s,isPlaceholder:c}=e,{t:d}=i1(),u=o&&(0,l.jsx)(B6,{marginLeft:3,paddingRight:1,children:BJ(o,"detail")});return c?(0,l.jsx)(B8,{"data-testid":"detail-preview",paddingLeft:r?2:3,paddingRight:2,paddingY:2,children:(0,l.jsxs)(h.kC,{align:"center",flex:1,gap:3,children:[r&&(0,l.jsx)(B7,{"data-testid":"detail-preview__media"}),(0,l.jsx)(h.kC,{align:"center","data-testid":"detail-preview__header",flex:1,children:(0,l.jsxs)(h.Kq,{flex:1,space:2,children:[(0,l.jsx)(B9,{}),(0,l.jsx)(qe,{}),i&&(0,l.jsx)(h.xu,{marginTop:1,children:(0,l.jsx)(qt,{})})]})}),u]})}):(0,l.jsx)(B8,{"data-testid":"detail-preview",paddingLeft:r?2:3,paddingRight:2,paddingY:2,children:(0,l.jsxs)(h.kC,{align:"center",flex:1,gap:3,children:[r&&(0,l.jsx)(BY,{dimensions:a,layout:"detail",media:r}),(0,l.jsxs)(h.kC,{align:"center","data-testid":"detail-preview__header",flex:1,children:[(0,l.jsxs)(h.Kq,{flex:1,space:2,children:[(0,l.jsxs)(h.xv,{textOverflow:"ellipsis",size:1,style:{color:"inherit"},weight:"medium",children:[t&&BJ(t,"detail"),!t&&(0,l.jsx)(l.Fragment,{children:d("preview.default.title-fallback")})]}),n&&(0,l.jsx)(h.xv,{muted:!0,size:1,textOverflow:"ellipsis",children:BJ(n,"detail")}),i&&(0,l.jsx)(h.xu,{marginTop:1,children:(0,l.jsx)(qn,{muted:!0,size:1,children:BJ(i,"detail")})})]}),u]}),s]})})},inline:function(e){var t;let{title:n,fallbackTitle:i="Untitled",media:a,mediaDimensions:r=q_}=e;return(0,l.jsxs)(qk,{"data-testid":"inline-preview",children:[a&&(0,l.jsxs)(qT,{"data-testid":"inline-preview-media",children:[(t="inline",(0,eV.isValidElementType)(a)?(0,d.createElement)(a,{layout:t,dimensions:r}):"string"==typeof a?(0,l.jsx)("div",{children:a}):a),(0,l.jsx)("span",{})]}),(0,l.jsx)(qA,{"data-testid":"inline-preview-title",size:1,children:BJ(n,"inline",i)})]})},media:function(e){let{media:t,mediaDimensions:n=qg,children:i,isPlaceholder:a,progress:r=-1,subtitle:o,title:s,withBorder:c=!0,withRadius:u=!0}=e,p=n.aspect||1,m=(0,d.useMemo)(()=>({paddingBottom:`${100/p}%`}),[p]),f=(0,d.useMemo)(()=>s&&o?(0,l.jsxs)(qf,{children:[s&&(0,l.jsx)(h.xv,{align:"center",size:1,weight:"medium",children:BJ(s,"media")}),o&&(0,l.jsx)(h.xv,{align:"center",muted:!0,size:1,children:BJ(o,"media")})]}):null,[o,s]);return(0,l.jsx)(h.xu,{padding:2,children:(0,l.jsxs)(qu,{"data-testid":"media-preview",flex:1,overflow:"hidden",children:[(0,l.jsx)("div",{style:m}),(0,l.jsx)(x.u,{content:f,disabled:!f,placement:"top",portal:!0,children:(0,l.jsxs)(qp,{children:[a?(0,l.jsx)(qm,{}):(0,l.jsx)(BY,{border:c,dimensions:n,layout:"media",media:t,radius:u?1:0,responsive:!0}),"number"==typeof r&&r>-1&&(0,l.jsx)(qh,{children:(0,l.jsx)(qs,{value:r})})]})}),i]})})}};function bK(){return(0,l.jsx)(_.$lS,{className:"sanity-studio__preview-fallback-icon"})}function bU(e){let{icon:t,layout:n,media:i,imageUrl:a,title:r,tooltip:o,...s}=e,c=Bi(rz),u=(0,d.useMemo)(()=>eZ(c),[c]),p=(0,d.useCallback)(e=>{let{dimensions:t}=e;return(0,l.jsx)("img",{alt:iP(r)?r:void 0,referrerPolicy:"strict-origin-when-cross-origin",src:u.image(i).width(t.width||100).height(t.height||100).fit(t.fit).dpr(t.dpr||1).url()||""})},[u,i,r]),m=(0,d.useCallback)(()=>(0,d.createElement)(t||bK),[t]),h=(0,d.useMemo)(()=>!1!==t&&((0,eV.isValidElementType)(i)||(0,d.isValidElement)(i)?i:(0,eU.JZ)(i)?p:iP(a)?(0,l.jsx)("img",{src:a,alt:iP(r)?r:void 0,referrerPolicy:"strict-origin-when-cross-origin"}):m),[t,a,i,m,p,r]),f=(0,d.useMemo)(()=>({...s,media:h,title:r}),[h,s,r]),g=bV[n||"default"],y=(0,d.createElement)(g,f);return o?(0,l.jsx)(x.u,{content:o,disabled:!o,fallbackPlacements:["top-end"],placement:"bottom-end",children:(0,l.jsx)("div",{children:y})}):y}let bZ=["_id","_rev","_type"],bG=[...bZ,"_key"],bH={available:!0,reason:"READABLE"},bW={available:!1,reason:"PERMISSION_DENIED"},bY={available:!1,reason:"NOT_FOUND"},bJ={title:"Invalid preview config",subtitle:"Check the error log in the console",media:(0,l.jsx)(_.foC,{})};function bX(e,t){let n,i={},a=0;return function(...e){return new $.y(o=>{clearTimeout(n),n=setTimeout(r,t);let s={args:e,observer:o,completed:!1};return i[a++]=s,()=>{s.completed=!0}})};function r(){let t=i;i={};let n=Object.keys(t).filter(e=>{let n=t[e];return n&&!n.completed});0!==n.length&&e(n.map(e=>{let n=t[e];return n&&n.args}).filter(iw)).subscribe({next(e){e.forEach((i,a)=>{let r=t[n[a]];r&&!r.completed&&r.observer.next(e[a])})},complete(){n.forEach(e=>{let n=t[e];n&&!n.completed&&n.observer.complete()})},error(e){n.forEach(n=>{let i=t[n];i&&!i.completed&&i.observer.error(e)})}})}}function bQ(e,t){return e.push(...t),e}function b0(e){return Object.keys(e)}let b1=[["_createdAt"],["_updatedAt"]];function b2(e){let t=e?.select;return t?(Object.values(t).map(e=>String(e).split("."))||[]).concat(b1):void 0}let b3=["_id","_type","_upload","_createdAt","_updatedAt"],b4=[],b5=(r={},{add:(e,t,n)=>{let i="name"in e?e.name:e.type;r[i]||(r[i]=[]),r[i].push({error:n,type:e,value:t})},getAll:()=>r,clear(){r={}}}),b8=m(()=>{let e=b5.getAll(),t=eG(Object.keys(e).map(t=>eK(e[t],e=>e.error.message))).length;0!==t&&(console.groupCollapsed(`%cHeads up! Got ${1===t?"error":`${t} errors`} while preparing data for preview. Click for details.`,"color: #ff7e7c"),Object.keys(e).forEach(t=>{let n=e[t];console.group(`Check the preview config for schema type "${t}": %o`,n[0].type.preview),eK(n,e=>e.error.message).forEach(e=>{if("returnValueError"===e.error.type){let t="function"==typeof e.type.preview?.prepare,{value:n,error:i}=e;console.log(`Encountered an invalid ${t?"return value when calling prepare(%o)":"value targeted by preview.select"}:`,n),console.error(i)}if("prepareError"===e.error.type){let{value:t,error:n}=e;console.log("Encountered an error when calling prepare(%o):",t),console.error(n)}}),console.groupEnd()}),console.groupEnd(),b5.clear())},1e3),b6=e=>t=>{let n=typeof t;return null===t||"undefined"===n||"string"===n||"number"===n||"boolean"===n?b4:[ve("returnValueError",Error(`The "${e}" field should be a string, number, boolean, undefined or null, instead saw ${b9(t)}`))]},b7={media:()=>b4,title:b6("title"),subtitle:b6("subtitle"),description:b6("description"),imageUrl:b6("imageUrl"),date:b6("date")};function b9(e,t=!0){if(iO(e)){let n=Object.keys(e),i=n.length>3?"...":"";return`${t?"object with keys ":""}{${n.slice(0,3).join(", ")}${i}}`}if(Array.isArray(e)){let n=e.length>3?"...":"";return`${t?"array with ":""}[${e.map(e=>b9(e,!1))}${n}]`}return`the ${typeof e} ${e}`}function ve(e,t){return Object.assign(t,{type:e})}function vt(e,t,n={}){let i=e.preview?.prepare;try{return{returnValue:i?i(t,n):b0(t).reduce((e,n)=>{let i=t[n];return{...e,[n]:Array.isArray(i)&&(0===i.length||i.some(w.DG))?function(e){let t=Array.isArray(e)&&e.find(w.DG);return t&&t.children?t.children.filter(w.NG).map(e=>e.text).join(""):""}(i):i}},{}),errors:b4}}catch(e){return{returnValue:null,errors:[ve("prepareError",e)]}}}function vn(e,t,n){return e.errors.forEach(e=>b5.add(t,n,e)),b8(),bJ}function vi(e,t,n={}){var i;let a="function"==typeof t.preview?.prepare,r=t.preview?.select||{},o=Object.keys(r).reduce((n,i)=>{var o;let s="fields"in t?t:null,l=r[i],c=s?.fields?.find(e=>e.name===l),d=c&&(!function(e){let t=!!e.options&&"object"==typeof e.options&&e.options;return!!t&&"list"in t&&Array.isArray(t.list)}(o=c.type)?void 0:o.options.list.map(e=>(0,w.n4)(e)?e:{title:e,value:e}));if(!a&&d){let t=d&&d.find(t=>t.value===e7(e,r[i]));n[i]=t?t.value:e7(e,r[i])}else n[i]=e7(e,r[i]);return n},{}),s=vt(t,o,n);if(s.errors.length>0)return vn(s,t,o);let l={...s,errors:[...s.errors||[],...tn(i=s.returnValue)&&null!==i?Object.entries(i).reduce((e,[t,n])=>[...e,...function(e,t){if(typeof t>"u")return b4;let n=b7[e];return n&&n(t)||b4}(t,n)],b4):[ve("returnValueError",Error(`Invalid return value. Expected a plain object with at least a 'title' field, instead saw ${b9(i)}`))]]};return l.errors.length>0?vn(l,t,o):{...ne(e,b3),...s.returnValue}}let va=e=>e;function vr(e){return JSON.stringify(e)}let vo=e=>iV(e)?`"${e}": @${iK(e)}`:e;function vs({ids:e,fields:t}){let n=[...bZ,...t];return`*[_id in [${e.map(vr).join(",")}]][0...${e.length}]{${n.map(vo).join(",")}}`}let vl=e=>!0===e.liveEdit;function vc(e,t,n,i){let a=vl(t)?(0,N.of)({snapshot:null}):e.observeForPreview({_id:i_(n)},t),r=e.observeForPreview({_id:iS(n)},t);return(0,U.a)([a,r]).pipe((0,P.U)(([e,t])=>({draft:e.snapshot?{title:i,...e.snapshot||{}}:null,isLoading:!1,published:t.snapshot?{title:i,...t.snapshot||{}}:null})),(0,ef.O)({draft:null,isLoading:!0,published:null}))}let vd=e=>({title:(0,l.jsx)("em",{children:e.title?String(e.title):"Missing document"}),subtitle:(0,l.jsx)("em",{children:e.title?`Missing document ID: ${e._id}`:`Document ID: ${e._id}`}),media:()=>(0,l.jsx)(_.foC,{})}),vu=({value:e,draft:t,published:n})=>{let i=t||n;return i?n0({},i,e,(e,t)=>typeof t>"u"?e:t):vd(e)},vp=iC(([e,t])=>(0,O.D)(e.getUser(t).catch(e=>(console.error(e),null))));function vm(e){let t=CE();return vp((0,d.useMemo)(()=>[t,e],[e,t]))}function vh(){let{currentUser:e}=AU();return e}let vf=e=>{let t=e.LOCAL,n=e.document.HEAD;return t&&{...t,_type:(n||t)._type,_rev:(n||t)._rev,_updatedAt:new Date().toISOString()}},vg=e=>({type:"snapshot",document:e}),vx=e=>e.document,vy=e=>{let t=new D.x,n=new X.X(!0),i=new D.x,a=new D.x,r=new D.x,o=new D.x,s=e=>{let t=new nt.W6(e);return t.onMutation=({mutation:e,remote:n})=>{i.next({type:"mutation",document:vf(t),mutations:e.mutations,origin:n?"remote":"local"})},t.onRemoteMutation=e=>{r.next({type:"remoteMutation",head:t.document.HEAD,transactionId:e.transactionId,timestamp:e.timestamp,author:e.identity,effects:e.effects})},t.onRebase=(e,t,n)=>{a.next({type:"rebase",document:e,remoteMutations:t,localMutations:n})},t.onConsistencyChanged=e=>{n.next(e)},t.commitHandler=e=>o.next(e),t},l=e.pipe((0,ep.R)((e,t)=>"snapshot"===t.type?(e&&e.commit(),s(t.document||null)):null===e?(console.warn('Ignoring event of type "%s" since buffered document has not yet been set up with snapshot',t.type),null):e,null),(0,eh.h)(e=>null!==e),(0,ea.x)(),(0,eS._)(1),(0,eE.x)()),c=e.pipe((0,eh.h)(e=>"mutation"===e.type),(0,eM.M)(l),(0,P.U)(([e,t])=>(t.arrive(new nt.mm(e)),vf(t)))),d=t.pipe((0,eM.M)(l),(0,H.b)(([e,t])=>{"mutation"===e.type&&t.add(new nt.mm({mutations:e.mutations})),"commit"===e.type&&t.commit()}),(0,eg.j)(z.E),(0,Y.B)()),u=e=>t.next(e),p=e=>u({type:"mutation",mutations:e}),m=(0,R.T)(l.pipe((0,P.U)(e=>e.LOCAL)),i.pipe((0,P.U)(vx)),a.pipe((0,P.U)(vx)),c).pipe((0,P.U)(vg),(0,eS._)(1),(0,eE.x)()),h=(0,R.T)(l.pipe((0,P.U)(e=>e.document.HEAD),(0,P.U)(vg)),r).pipe((0,eS._)(1),(0,eE.x)());return{updates$:(0,R.T)(m,d,i,a),consistency$:n.pipe((0,ea.x)(),(0,eS._)(1),(0,eE.x)()),remoteSnapshot$:h,commitRequest$:o,addMutation:e=>p([e]),addMutations:p,commit:()=>{l.pipe((0,eo.q)(1),(0,H.b)(e=>e.commit())).subscribe()}}},vb=e=>t=>{let{_id:n,_rev:i,_updatedAt:a,...r}=t;return{_id:e,...r}},vv=(e,t)=>{let n=vy(t),i=vb(e),a={delete:{id:e}};return{events:n.updates$,consistency$:n.consistency$,remoteSnapshot$:n.remoteSnapshot$,commitRequest$:n.commitRequest$,patch:t=>t.map(t=>({patch:{...t,id:e}})),create:e=>({create:i(e)}),createIfNotExists:e=>({createIfNotExists:i(e)}),createOrReplace:e=>({createOrReplace:i(e)}),delete:()=>a,mutate:e=>n.addMutations(e),commit:()=>n.commit()}},vj={type:"pending",phase:"begin"},vC={type:"pending",phase:"end"};function vw(e,t){return{type:"snapshot",documentId:e,document:t}}function vk(e){return e.withConfig({apiVersion:"2024-05-23"})}let vT=e=>t=>"reconnect"!==t.type&&"pending"!==t.type&&t.documentId===e;function vA(e){return t=>({...t,version:e})}function v_(e,t){let{resultRev:n,...i}=t;return e.dataRequest("mutate",i,{visibility:"async",returnDocuments:!1,tag:"document.commit",skipCrossDatasetReferenceValidation:!0})}function vS(e,t,n){let{publishedId:i,draftId:a}=t,r=new D.x,o=(function(e,t,n={}){let{publishedId:i,draftId:a}=t;return(0,B.P)(()=>e.observable.listen("*[_id == $publishedId || _id == $draftId]",{publishedId:i,draftId:a},{includeResult:!1,events:["welcome","mutation","reconnect"],effectFormat:"mendoza",tag:n.tag||"document.pair-listener"})).pipe((0,ev.b)(t=>"welcome"===t.type?e.observable.getDocuments([a,i],{tag:"document.snapshots"}).pipe((0,P.U)(([e,t])=>({draft:e,published:t}))).pipe((0,ev.b)(e=>[vw(a,e.draft),vw(i,e.published)])):(0,N.of)(t)),(0,ep.R)((e,t)=>{if("mutation"!==t.type)return{next:[t],buffer:[]};let n=e.buffer.length>0,i=t.transactionTotalEvents>1;if(!i&&!n)return{next:[t],buffer:[]};if(!i)return{next:[],buffer:e.buffer.concat(t)};let a=e.buffer.concat(t);return Object.values(eH(a.filter(e=>"mutation"===e.type),e=>e.transactionId)).every(e=>e.length===e[0].transactionTotalEvents)?{next:a.concat(vC),buffer:[]}:{next:1===a.length?[vj]:[],buffer:a}},{next:[],buffer:[]}),(0,eu.z)(e=>e.next),(0,ev.b)(e=>window.SLOW?(0,V.H)(1e4).pipe((0,P.U)(()=>e)):(0,N.of)(e)))})(e,t).pipe((0,Y.B)({connector:()=>r})),s=o.pipe((0,eh.h)(e=>"reconnect"===e.type)),l=vv(a,o.pipe((0,eh.h)(vT(a)))),c=vv(i,o.pipe((0,eh.h)(vT(i)))),d=o.pipe((0,eh.h)(e=>"pending"===e.type)),u=(0,R.T)(l.commitRequest$,c.commitRequest$).pipe((0,eu.z)(i=>n.pipe((0,eo.q)(1),(0,eu.z)(n=>{var a;return(0,O.D)(n?!function(e,t){let{resultRev:n,...i}=e;return i.mutations.flatMap(e=>{let t=Object.values(e);if(t.length>1)throw Error("Did not expect multiple mutations in the same payload");return t[0].id||t[0]._id}).every(e=>e===t)}(a=i.mutation.params,t.publishedId)?vk(e).observable.action(function(e,t){let n=t.mutations.flatMap(t=>{if(t.createIfNotExists)return[];if(t.create)return function(e){if(!e._id)throw Error("Expected document to have an _id")}(t.create),{actionType:"sanity.action.document.create",publishedId:e.publishedId,attributes:t.create,ifExists:"fail"};if(t.patch)return{actionType:"sanity.action.document.edit",draftId:e.draftId,publishedId:e.publishedId,patch:t7(t.patch,"id")};throw Error("Cannot map mutation to action")});return 0===n.length?[{actionType:"sanity.action.document.edit",draftId:e.draftId,publishedId:e.publishedId,patch:{unset:["_empty_action_guard_pseudo_field_"]}}]:n}(t,a),{tag:"document.commit",transactionId:a.transactionId}):v_(e,a):v_(e,i.mutation.params)).pipe((0,H.b)({error:e=>{"statusCode"in e&&"number"==typeof e.statusCode&&e.statusCode>=400&&e.statusCode<=500?i.cancel(e):i.failure(e)},next:()=>i.success()}))}))),(0,eu.z)(()=>z.E),(0,Y.B)());return{transactionsPendingEvents$:d,draft:{...l,events:(0,R.T)(u,s,l.events).pipe((0,P.U)(vA("draft"))),consistency$:l.consistency$,remoteSnapshot$:l.remoteSnapshot$.pipe((0,P.U)(vA("draft")))},published:{...c,events:(0,R.T)(u,s,c.events).pipe((0,P.U)(vA("published"))),consistency$:c.consistency$,remoteSnapshot$:c.remoteSnapshot$.pipe((0,P.U)(vA("published")))},complete:()=>r.complete()}}function vE(e,t){let n=Object.create(null);return(...i)=>{let a=t(...i);return a in n||(n[a]=e(...i)),n[a]}}function vM(e,t,n){let i=e.config();return`${i.dataset??""}-${i.projectId??""}-${t.publishedId}-${n}`}let vN=vE((e,t,n,i)=>new $.y(n=>{let a=vS(e,t,i);return n.next(a),a.complete}).pipe((0,eS._)(1),(0,eE.x)()),vM);function vI(e){return"snapshot"===e.type}function vz(e){return{snapshots$:e.events.pipe((0,eh.h)(vI),(0,P.U)(e=>e.document),(0,eS._)(1),(0,eE.x)()),patch:e.patch,create:e.create,createIfNotExists:e.createIfNotExists,createOrReplace:e.createOrReplace,delete:e.delete,mutate:e.mutate,commit:e.commit}}let v$=vE((e,t,n,i)=>vN(e,t,n,i).pipe((0,P.U)(({published:e,draft:t,transactionsPendingEvents$:n})=>({transactionsPendingEvents$:n,published:vz(e),draft:vz(t)})),(0,eS._)(1),(0,eE.x)()),vM),vO=(e,t)=>e.get(t)?.liveEdit===!0,vP={enabled:!0},vF={enabled:!1},vD=vE((e,t,n)=>{let i=vO(e.schema,n);return v$(e.client,t,n,e.serverActionsEnabled).pipe((0,ec.w)(e=>(0,U.a)([e.draft.snapshots$,e.published.snapshots$,e.transactionsPendingEvents$.pipe((0,P.U)(e=>"begin"===e.phase?vP:vF),(0,ef.O)(vF))])),(0,P.U)(([e,a,r])=>({id:t.publishedId,type:n,draft:e,published:a,liveEdit:i,ready:!0,transactionSyncLock:r})),(0,ef.O)({id:t.publishedId,type:n,draft:null,published:null,liveEdit:i,ready:!1,transactionSyncLock:null}),(0,eS._)(1),(0,eE.x)())},(e,t,n)=>vM(e.client,t,n)),vR=vE((e,t,n,i)=>vN(e,t,n,i).pipe((0,ec.w)(({draft:e,published:t})=>(0,U.a)([e.consistency$,t.consistency$])),(0,P.U)(([e,t])=>e&&t),(0,ea.x)(),(0,eS._)(1),(0,eE.x)()),vM),vL=vE((e,t,n)=>v$(e.client,t,n,e.serverActionsEnabled).pipe((0,ec.w)(i=>(0,U.a)([i.draft.snapshots$,i.published.snapshots$,e.serverActionsEnabled]).pipe((0,P.U)(([a,r,o])=>({...e,serverActionsEnabled:o,idPair:t,typeName:n,snapshots:{draft:a,published:r},draft:i.draft,published:i.published})))),(0,eS._)(1),(0,eE.x)()),(e,t,n)=>vM(e.client,t,n)),vB={disabled:()=>!1,execute:({draft:e,published:t})=>(e.commit(),t.commit(),z.E)},vq={disabled:({snapshots:e})=>!e.draft&&!e.published&&"NOTHING_TO_DELETE",execute:({client:e,schema:t,idPair:n,typeName:i})=>{let a=e.observable.transaction().delete(n.publishedId);return vO(t,i)?a.commit({tag:"document.delete"}):a.delete(n.draftId).commit({tag:"document.delete",skipCrossDatasetReferenceValidation:!0})}},vV={disabled:({snapshots:e})=>e.draft?!e.published&&"NOT_PUBLISHED":"NO_CHANGES",execute:({client:e,idPair:t})=>e.observable.transaction().delete(t.draftId).commit({tag:"document.discard-changes"})},vK=["_createdAt","_updatedAt"],vU={disabled:({snapshots:e})=>!e.published&&!e.draft&&"NOTHING_TO_DUPLICATE",execute:({schema:e,client:t,snapshots:n,typeName:i},a)=>{let r=n.draft||n.published;if(!r)throw Error("cannot execute on empty document");return t.observable.create({...t7(r,vK),_id:vO(e,i)?a:i_(a),_type:r._type},{tag:"document.duplicate"})}},vZ={disabled:()=>!1,execute:({schema:e,snapshots:t,idPair:n,draft:i,published:a,typeName:r},o=[],s)=>{vO(e,r)?a.mutate([a.createIfNotExists({_type:r,...s}),...a.patch(o)]):i.mutate([i.createIfNotExists({...s,...t.published,_id:n.draftId,_type:r}),...i.patch(o)])}},vG={disabled:({schema:e,typeName:t,snapshots:n})=>vO(e,t)?"LIVE_EDIT_ENABLED":!n.draft&&(n.published?"ALREADY_PUBLISHED":"NO_CHANGES"),execute:({client:e,idPair:t,snapshots:n})=>{if(!n.draft)throw Error('cannot execute "publish" when draft is missing');let i=function e(t){return(0,w.Yk)(t)?t._strengthenOnPublish?t7(t,["_strengthenOnPublish"].concat(t._strengthenOnPublish.weak?[]:["_weak"])):t:"object"==typeof t&&t?Array.isArray(t)?t.map(e):Object.fromEntries(Object.entries(t).map(([t,n])=>[t,e(n)])):t}(t7(n.draft,"_updatedAt")),a=e.observable.transaction();if(!n.draft)throw Error('cannot execute "publish" when draft is missing');return n.published?(a.patch(t.publishedId,{unset:["_revision_lock_pseudo_field_"],ifRevisionID:n.published._rev}),a.createOrReplace({...i,_id:t.publishedId,_type:n.draft._type})):a.create({...i,_id:t.publishedId,_type:n.draft._type}),a.delete(t.draftId),a.commit({tag:"document.publish",visibility:"async"})}},vH={disabled:()=>!1,execute:({historyStore:e,schema:t,idPair:n,typeName:i},a)=>{let r=vO(t,i)?n.publishedId:n.draftId;return e.restore(n.publishedId,r,a)}},vW={disabled:({schema:e,snapshots:t,typeName:n})=>vO(e,n)?"LIVE_EDIT_ENABLED":!t.published&&"NOT_PUBLISHED",execute:({client:e,idPair:t,snapshots:n})=>{let i=e.observable.transaction().delete(t.publishedId);return n.published&&(i=i.createIfNotExists({...t7(n.published,"_updatedAt"),_id:t.draftId,_type:n.published._type})),i.commit({tag:"document.unpublish",visibility:"async",skipCrossDatasetReferenceValidation:!0})}},vY={disabled:({snapshots:e})=>!e.draft&&!e.published&&"NOTHING_TO_DELETE",execute:({client:e,schema:t,idPair:n,typeName:i,snapshots:a})=>vO(t,i)?e.observable.transaction().delete(n.publishedId).commit({tag:"document.delete"}):a.published?vk(e).observable.action({actionType:"sanity.action.document.delete",includeDrafts:a.draft?[n.draftId]:[],publishedId:n.publishedId},{tag:"document.delete",skipCrossDatasetReferenceValidation:!0}):vk(e).observable.action({actionType:"sanity.action.document.discard",draftId:n.draftId},{tag:"document.delete"})},vJ={disabled:({snapshots:e})=>e.draft?!e.published&&"NOT_PUBLISHED":"NO_CHANGES",execute:({client:e,idPair:t})=>vk(e).observable.action({actionType:"sanity.action.document.discard",draftId:t.draftId},{tag:"document.discard-changes"})},vX={disabled:()=>!1,execute:({schema:e,snapshots:t,idPair:n,draft:i,published:a,typeName:r},o=[],s)=>{if(vO(e,r)){let e=a.patch(o),n=t.published?e:[a.createIfNotExists({_type:r,...s})];a.mutate(n);return}let l=i.patch(o);if(t.published){i.mutate([i.createIfNotExists({...s,...t.published,_id:n.draftId,_type:r}),...l]);return}let c=t.draft?[]:[i.create({...s,_id:n.draftId,_type:r})];i.mutate([...c,...l])}},vQ={disabled:({schema:e,typeName:t,snapshots:n})=>vO(e,t)?"LIVE_EDIT_ENABLED":!n.draft&&(n.published?"ALREADY_PUBLISHED":"NO_CHANGES"),execute:({client:e,idPair:t,snapshots:n})=>{if(!n.draft)throw Error('cannot execute "publish" when draft is missing');return vk(e).observable.action({actionType:"sanity.action.document.publish",draftId:t.draftId,publishedId:t.publishedId,ifPublishedRevisionId:n.published?._rev},{tag:"document.publish"})}},v0={disabled:()=>!1,execute:({snapshots:e,historyStore:t,schema:n,idPair:i,typeName:a},r)=>{let o=vO(n,a)?i.publishedId:i.draftId;return t.restore(i.publishedId,o,r,{fromDeleted:!e.draft&&!e.published,useServerDocumentActions:!0})}},v1={disabled:({schema:e,snapshots:t,typeName:n})=>vO(e,n)?"LIVE_EDIT_ENABLED":!t.published&&"NOT_PUBLISHED",execute:({client:e,idPair:t})=>vk(e).observable.action({actionType:"sanity.action.document.unpublish",draftId:t.draftId,publishedId:t.publishedId},{tag:"document.unpublish",skipCrossDatasetReferenceValidation:!0})},v2={del:vq,delete:vq,publish:vG,patch:vZ,commit:vB,discardChanges:vV,unpublish:vW,duplicate:vU,restore:vH},v3={...v2,del:vY,delete:vY,discardChanges:vJ,patch:vX,publish:vQ,unpublish:v1,restore:v0},v4=(e,t,n,i)=>{let a=i?v3[e]:v2[e];return(0,B.P)(()=>{var e;return(0,R.T)((0,N.of)(null),typeof(e=a.execute(t,...n))>"u"?(0,N.of)(null):e)}).pipe((0,eN.Z)())},v5=new D.x;function v8(e,t,n,i){v5.next({operationName:e,idPair:t,typeName:n,extraArgs:i})}let v6=["publish","unpublish","discardChanges","delete"],v7=vE(e=>{let t=v5.pipe((0,ew.v)(e=>e.idPair.publishedId),(0,eu.z)(t=>t.pipe((0,ec.w)(t=>vL(e,t.idPair,t.typeName).pipe((0,eo.q)(1),(0,ec.w)(n=>{let i=v6.includes(t.operationName);i&&(n.published.commit(),n.draft.commit());let a=vR(e.client,t.idPair,t.typeName,e.serverActionsEnabled).pipe((0,eh.h)(Boolean));return(i?a.pipe((0,eo.q)(1)):(0,N.of)(!0)).pipe((0,ec.w)(()=>v4(t.operationName,n,t.extraArgs,n.serverActionsEnabled)))}),(0,P.U)(()=>({type:"success",args:t})),(0,F.K)(e=>(0,N.of)({type:"error",args:t,error:e})))))),(0,Y.B)()),n=t.pipe((0,eh.h)(e=>"success"===e.type&&"patch"===e.args.operationName),(0,eT.p)(1e3,G.z,{leading:!0,trailing:!0}),(0,ev.b)(e=>window.SLOW?(0,V.H)(1e4).pipe((0,P.U)(()=>e)):(0,N.of)(e)),(0,H.b)(e=>{v8("commit",e.args.idPair,e.args.typeName,[])}));return(0,R.T)(t,n.pipe((0,eg.j)(z.E)))},e=>{let t=e.client.config();return`${t.dataset??""}-${t.projectId??""}${e.serverActionsEnabled?"-serverActionsEnabled":""}`}),v9=vE((e,t,n,i)=>vN(e,t,n,i).pipe((0,ec.w)(({published:e,draft:t})=>(0,R.T)(e.remoteSnapshot$,t.remoteSnapshot$))),vM),je=vE((e,{draftId:t,publishedId:n},i)=>{let a=vD(e,{draftId:t,publishedId:n},i).pipe((0,P.U)(({draft:e,published:t})=>e||t),(0,eT.p)(200,G.z,{trailing:!0}),(0,ea.x)((e,t)=>e?._rev===t?._rev||tl(t7(e,"_rev","_updatedAt"),t7(t,"_rev","_updatedAt"))),(0,em.d)({bufferSize:1,refCount:!0}));return function(e,t){let n=t.pipe((0,P.U)(e=>(0,n4.u4)(e,(e,t)=>((0,w.Yk)(t)&&e.add(t._ref),e),new Set)),(0,eu.z)(e=>(0,O.D)(e))).pipe((0,ew.v)(e=>e,{duration:()=>(0,V.H)(18e5)}),(0,eu.z)(t=>t.pipe((0,ek.E)(),(0,eu.z)(t=>pA(e.observeDocumentPairAvailability,t).pipe((0,P.U)(e=>[t,e]))))),(0,ep.R)((e,[t,n])=>e[t]===n?e:{...e,[t]:n},{}),(0,ea.x)(tl),p_()),i=({id:e})=>(0,Z.n)(n.pipe((0,ey.P)(t=>e in t),(0,P.U)(t=>t[e]))),a=n.pipe((0,es.T)(1),(0,eT.p)(1e3,G.z,{leading:!0,trailing:!0}));return(0,U.a)([t,(0,I.z)((0,N.of)(null),a)]).pipe((0,P.U)(([e])=>e),(0,n5.q)(t=>(0,B.P)(()=>t?._type?(0,I.z)((0,N.of)({isValidating:!0,revision:t._rev}),(function({document:e,getClient:t,i18n:n=pg(),schema:i,getDocumentExists:a,environment:r,maxCustomValidationConcurrency:o}){if("string"!=typeof e?._type)throw Error("Tried to validated a value without a '_type'");let s=i.get(e._type);if(!s)return"studio"===r?(console.warn('Schema type for object type "%s" not found, skipping validation',e._type),(0,N.of)([])):(0,N.of)([{level:"warning",message:`Could not find schema type for type '${e._type}', skipping validation`,path:[]}]);let l=pw.get(i);l||(l=new n8.h(o??5),pw.set(i,l));let c={getClient:t,schema:i,parent:void 0,value:e,path:[],document:e,type:s,i18n:n,getDocumentExists:a,environment:r,customValidationConcurrencyLimiter:l};return(0,O.D)(n.loadNamespaces(["validation"])).pipe((0,ec.w)(()=>(function e({value:t,type:n,path:i=[],parent:a,customValidationConcurrencyLimiter:r,environment:o,...s}){let l=e=>n?.jsonType==="object"&&pu(n).find(e=>["object","document","file","image"].includes(e.name))&&"studio"!==o?e.custom(pv(n),{bypassConcurrencyLimit:!0}).warning():e,c=pm(n),d=c.map(l).map(e=>(0,B.P)(()=>e.validate(t,{...s,environment:o,parent:a,path:i,type:n,__internal:{customValidationConcurrencyLimiter:r}}))),u=[],p=c.some(e=>e.isRequired());if(n?.jsonType==="object"&&(t||null==t&&p)){let a=n.fields.reduce((e,t)=>(e[t.name]=t.type,e),{});u=(u=u.concat(c.map(e=>e._fieldRules).filter(pC).flatMap(e=>Object.entries(e)).flatMap(([e,n])=>{let c=a[e];return pm({...c,validation:n}).map(l).map(n=>{let a=pj(t)?t[e]:void 0;return(0,B.P)(()=>n.validate(a,{...s,parent:t,path:i.concat(e),type:c,environment:o,__internal:{customValidationConcurrencyLimiter:r}}))})}))).concat(n.fields.map(n=>e({...s,parent:t,value:pj(t)?t[n.name]:void 0,path:i.concat(n.name),type:n.type,environment:o,customValidationConcurrencyLimiter:r})))}return n?.jsonType==="array"&&Array.isArray(t)&&(u=u.concat(t.map((a,l)=>e({...s,parent:t,value:a,path:i.concat((0,w.fU)(a)?{_key:a._key}:l),type:function(e,t){if(1===t.length)return t[0];let n=(0,w.ay)(e)&&e._type,i=null==e||!n&&uU(e).toLowerCase();return i&&"object"!==i?t.find(e=>e.jsonType===i):t.find(e=>e.type?.name===n)||t.find(e=>e.name===n)||t.find(e=>"object"===e.name&&"object"===i)}(a,n.of),environment:o,customValidationConcurrencyLimiter:r})))),(0,B.P)(()=>(0,R.T)([...d,...u])).pipe((0,eu.z)(e=>(0,I.z)(new $.y(e=>{let t=py(()=>{e.complete()},void 0);return()=>pb(t)}),e),40),(0,ej.J)(),(0,eC.q)(),(0,P.U)(eG),(0,P.U)(e=>c.some(e=>e._fieldRules)?eK(e,e=>JSON.stringify(e)):e))})(c)),(0,F.K)(e=>{console.error(e);let t=e?.message||"Unknown error";return(0,N.of)([{level:"error",message:t,item:{message:t},path:[]}])}))})({document:t,getClient:e.getClient,getDocumentExists:i,i18n:e.i18n,schema:e.schema,environment:"studio"}).pipe((0,P.U)(e=>({validation:e,isValidating:!1})))):(0,N.of)({validation:pT,isValidating:!1}))),(0,ep.R)((e,t)=>({...e,...t}),pk),p_())}(e,a)},(e,t,n)=>vM(e.client,t,n)),jt=vE((e,t,n,i)=>vN(e,t,n,i).pipe((0,ec.w)(({draft:e,published:t})=>(0,R.T)(e.events,t.events))),vM);function jn(e){return{disabled:"NOT_READY",execute:()=>{throw Error(`Called ${e} before it was ready.`)}}}let ji={commit:jn("commit"),delete:jn("delete"),del:jn("del"),publish:jn("publish"),patch:jn("patch"),discardChanges:jn("discardChanges"),unpublish:jn("unpublish"),duplicate:jn("duplicate"),restore:jn("restore")},ja=(e,t,n)=>(...i)=>v8(e,t,n,i);function jr(e,t,n){return{disabled:t.disabled(n),execute:ja(e,n.idPair,n.typeName)}}function jo(e){let t={commit:jr("commit",vB,e),delete:jr("delete",vq,e),del:jr("delete",vq,e),publish:jr("publish",vG,e),patch:jr("patch",vZ,e),discardChanges:jr("discardChanges",vV,e),unpublish:jr("unpublish",vW,e),duplicate:jr("duplicate",vU,e),restore:jr("restore",vH,e)};return e.serverActionsEnabled?{...t,delete:jr("delete",vY,e),del:jr("delete",vY,e),discardChanges:jr("discardChanges",vJ,e),patch:jr("patch",vX,e),publish:jr("publish",vQ,e),unpublish:jr("unpublish",v1,e),restore:jr("restore",v0,e)}:t}let js=vE((e,t,n)=>{let i=v7(e),a=vL(e,t,n).pipe((0,P.U)(jo));return(0,I.z)((0,N.of)(ji),(0,R.T)(i.pipe((0,eu.z)(()=>z.E)),a)).pipe((0,em.d)({refCount:!0,bufferSize:1}))},(e,t,n)=>vM(e.client,t,n));function jl(e,t){let n={...e,...t};return Object.keys(n).forEach(i=>{let a=t[i],r=e[i];tn(a)&&tn(r)&&(n[i]=jl(r,a))}),n}let jc=["_dataset","_projectId","_strengthenOnPublish","_key","_ref","_type","_weak"];function jd(e){return e&&e.length>0?`"${e}"`:e}function ju(e,t){let n=e=>`Template "${t.id}" initial value: ${e}`;if(!tn(e))throw Error(n("resolved to a non-object"));if(e._type&&t.schemaType!==e._type)throw Error(n(`includes "_type"-property (${e._type}) that does not match template (${t.schemaType})`));try{return function e(t,n=[],i=!1){if(Array.isArray(t))return t.map((t,i)=>{if(Array.isArray(t))throw Error(`multidimensional arrays are not supported (at path "${(0,c.BB)(n)}")`);return e(t,n.concat(i),!0)});if(!tn(t))return t;let a=i&&!t._key?{_key:(0,e6.E2)()}:{};return n.length>0&&!t._type&&t._ref&&(a._type="reference"),t._ref&&function(e,t=[]){if(!e._type&&e.type)throw Error(`Reference is missing "_type", but has a "type" property at path "${(0,c.BB)(t)}"`);let n=Object.keys(e).filter(e=>!jc.includes(e));if(n.length>0){let e=n.length>1?"properties":"property";throw Error(`Disallowed ${e} found in reference: ${n.map(jd).join(", ")} at path "${(0,c.BB)(t)}"`)}}(t,n),Object.keys(t).reduce((i,a)=>(i[a]=e(t[a],n.concat([a])),i),a)}(e)}catch(e){throw e.message=n(e.message),e}}let jp=new WeakMap;async function jm(e,t,n,i){let a=i?.useCache;if("function"==typeof e){let i=jp.get(e),r=JSON.stringify([t,n.projectId,n.dataset,n.currentUser?.id]);if(a&&i?.[r])return i[r];let o=e(t,n);return a&&jp.set(e,{...i,[r]:o}),o}return e}async function jh(e,t,n={},i,a){if(tn(t)&&"function"==typeof t.serialize)return jh(e,t.serialize(),n,i,a);let{id:r,schemaType:o,value:s}=t;if(!s)throw Error(`Template "${r}" has invalid "value" property`);let l=await jm(s,n,i,a);if(!tn(l))throw Error(`Template "${r}" has invalid "value" property - must be a plain object or a resolver function returning a plain object`);tn(l)&&!Object.keys(l).length&&(l={_type:o}),l=ju(l,t);let c=e.get(o);if(!c)throw Error(`Could not find schema type with name "${o}".`);return ju(jl(await jg(c,n,jf,i,a)||{},l),t)}let jf=10;function jg(e,t,n=jf,i,a){return n<=0?Promise.resolve(void 0):(0,w.m$)(e)?jy(e,t,n,i,a):(0,w.jB)(e)?jx(e,t,n,i,a):jm(e.initialValue,t,i,a)}async function jx(e,t,n,i,a){let r=await jm(e.initialValue,void 0,i,a);if(Array.isArray(r))return Promise.all(r.map(async r=>{let o=function(e,t){let n=(0,e6.wq)(t);return"object"===n&&1===e.of.length?e.of[0]:e.of.find(e=>e.name===n)}(e,r);return(0,w.m$)(o)?{...r,...await jg(o,t,n-1,i,a),_key:(0,e6.E2)()}:r}))}async function jy(e,t,n,i,a){let r={...await jm(e.initialValue,t,i,a)||{}},o={};await Promise.all(e.fields.map(async e=>{let r=await jg(e.type,t,n-1,i,a);null!=r&&(o[e.name]=r)}));let s=jl(o,r);if(!(0,e6.Ru)(s))return"object"!==e.name&&(s._type=e.name),s}let jb={type:"loading"},jv=(e,t,n,i)=>(0,B.P)(()=>e.observable.fetch(t,n,{tag:i.tag,filterResponse:!0,perspective:i.perspective})),jj=(e,t,n,i)=>(0,B.P)(()=>e.listen(t,n,{events:["welcome","mutation","reconnect"],includeResult:!1,visibility:"query",tag:i.tag}));function jC(e){return"welcome"===e.type}function jw(e){if(iT(e))throw Error("editOpsOf does not expect a draft id.");return{publishedId:e,draftId:i_(e)}}let jk={isLoaded:!1,documentType:void 0};function jT(e,t="*"){let n=Cz(),i=iS(e),a=!!(t&&"*"!==t),r=(0,d.useMemo)(()=>({documentType:t,isLoaded:!0}),[t]),[o,s]=(0,d.useState)(a?r:jk);return(0,d.useEffect)(()=>s(jk),[i,t]),(0,d.useEffect)(()=>{if(a)return;let e=n.resolveTypeForDocument(i,t).subscribe(e=>s({documentType:e,isLoaded:!0}));return()=>e.unsubscribe()},[n,i,t,a]),a?r:o}function jA(e){let{documentId:t,documentType:n,templateName:i,templateParams:a}=e,r=ij(a),o=Cz(),s=j_(),l=(0,d.useMemo)(()=>({_id:t,_type:n}),[t,n]),[c,u]=(0,d.useState)({loading:!1,error:null,value:l});return(0,d.useEffect)(()=>{if(!i){u({loading:!0,error:null,value:l});return}let e=o.initialValue({documentId:t,documentType:n,templateName:i,templateParams:r},s).subscribe(e=>{"loading"===e.type&&u({loading:!0,error:null,value:l}),"success"===e.type&&u({loading:!1,error:null,value:e.value?{...l,...e.value}:l}),"error"===e.type&&u({loading:!1,error:e.error,value:l})});return u({loading:!0,error:null,value:l}),()=>e.unsubscribe()},[l,t,o,n,i,r,s]),c}function j_(){let e=AU(),t=NQ(),n=vh(),i=NP(),a=Bo(),r=e.getClient;return(0,d.useMemo)(()=>({projectId:i,dataset:a,getClient:r,schema:t,currentUser:n}),[r,t,n,i,a])}function jS(){let e=j_();return(0,d.useCallback)((t,n)=>jg(t,n,jf,e),[e])}let jE=new WeakMap,jM=(0,V.H)(12e4),jN=e=>(jE.has(e)||jE.set(e,function(e){let{dataset:t}=e.config();return(0,V.H)(0,12e4).pipe((0,ev.b)(()=>e.observable.request({uri:`/data/actions/${t}`,withCredentials:!0}).pipe((0,P.U)(e=>e.enabled&&(0,ni.satisfies)(tQ.y,e.compatibleStudioVersions,{includePrerelease:!0})),(0,ee.V)({first:2e3,with:()=>(0,N.of)(!1)}),(0,F.K)(()=>(0,N.of)(!1)))),(0,Y.B)({connector:()=>new et.t(1),resetOnComplete:()=>jM,resetOnRefCountZero:()=>jM}))}(e)),jE.get(e)),jI=iC(function({client:e,grantsStore:t,schema:n,id:i,permission:a,type:r,serverActionsEnabled:o}){if("*"===r)return(0,N.of)({granted:!1,reason:"Type specified was `*`"});let s=!!function(e,t){let n=e.get(t);if(!n)throw Error(`No such schema type: ${t}`);return n}(n,r).liveEdit;return v$(e,{draftId:i_(i),publishedId:iS(i)},r,o).pipe((0,ec.w)(e=>(0,U.a)([e.draft.snapshots$,e.published.snapshots$]).pipe((0,P.U)(([e,t])=>({draft:e,published:t})))),(0,ec.w)(({draft:e,published:n})=>{let i=(function({grantsStore:e,permission:t,draft:n,published:i,liveEdit:a}){let r=n||i,o=r===n?"draft":"published",{checkDocumentPermission:s}=e;switch(t){case"delete":return a?[["delete published document (live-edit)",s("update",i)]]:[["delete draft document",s("update",n)],["delete published document",s("update",i)]];case"discardDraft":return a?[]:[["delete draft document",s("update",n)]];case"publish":return a?[]:[["update published document at its current state",s("update",i)],["delete draft document",s("update",n)],["create published document from draft",s("create",n&&{...n,_id:iS(n._id)})]];case"unpublish":return a?[]:[["update draft document at its current state",s("create",n)],["delete published document",s("update",i)],["create draft document from published version",s("create",i&&{...i,_id:i_(i._id)})]];case"update":return a?[["update published document (live-edit)",s("update",i)]]:[[`update ${o} document`,s("update",r)]];case"duplicate":return a?[["create new published document from existing document (live-edit)",s("create",{...i,_id:"dummy-id"})]]:[[`create new draft document from existing ${o} document`,s("create",{...r,_id:i_("dummy-id")})]];default:throw Error(`Could not match permission: ${t}`)}})({grantsStore:t,permission:a,draft:e,published:n,liveEdit:s}).map(([e,t])=>t.pipe((0,P.U)(({granted:t,reason:n})=>({granted:t,reason:t?"":`not allowed to ${e}: ${n}`,label:e,permission:a}))));return i.length?(0,U.a)(i).pipe((0,P.U)(e=>{let t=e.every(e=>e.granted),n=t?"":`Unable to ${a}:
	${e.filter(e=>!e.granted).map(e=>e.reason).join(`
	`)}`;return{granted:t,reason:n}})):(0,N.of)({granted:!0,reason:""})}))});function jz({id:e,type:t,permission:n,client:i,schema:a,grantsStore:r}){let o=Bi(rz),s=NQ(),l=CM(),c=dR(),u=(0,d.useMemo)(()=>i||o,[o,i]),p=(0,d.useMemo)(()=>a||s,[s,a]),m=(0,d.useMemo)(()=>r||l,[l,r]),h=(0,d.useMemo)(()=>{let e=c.__internal_serverDocumentActions?.enabled;return"boolean"==typeof e?(0,N.of)(e):jN(u)},[u,c.__internal_serverDocumentActions?.enabled]);return jI((0,d.useMemo)(()=>({client:u,schema:p,grantsStore:m,id:e,permission:n,type:t,serverActionsEnabled:h}),[u,m,e,n,p,t,h]))}function j$({grantsStore:e,document:t,permission:n}){let{checkDocumentPermission:i}=e;return i(n,t)}let jO=iC(j$);function jP({document:e,permission:t,...n}){let i=CM();return jO({grantsStore:n.grantsStore||i,document:e,permission:t})}let jF="_debug_",jD=typeof window>"u"?(0,N.of)({}):(0,L.R)(window,"hashchange"),jR=(0,I.z)((0,N.of)(0),jD).pipe((0,P.U)(()=>typeof document>"u"?"#":document.location.hash),(0,ea.x)(),(0,P.U)(e=>e.slice(1).split(";").filter(e=>e.toLowerCase().startsWith(jF)).map(e=>e.slice(jF.length)))),jL=jR.pipe((0,P.U)(e=>e.find(e=>e.startsWith("roles="))),(0,P.U)(e=>e?.split("roles=")[1].split(",").map(e=>e.trim())||[])),jB=[{filter:'_id in path("**")',permissions:["read","create","history","update"]}],jq=[{filter:'_id in path("**")',permissions:["read","history"]}],jV={administrator:[{filter:'_id in path("**")',permissions:["read","create","history","update"]}],editor:jB,developer:[{filter:'_id in path("**")',permissions:["read","create","history","update"]}],contributor:[{filter:'_id in path("**")',permissions:["read"]},{filter:'_id in path("drafts.**")',permissions:["create","history","update"]}],viewer:jq,restricted:[{filter:'_id in path("drafts.**") && _type in ["stringsTest", "book", "author", "referenceTest"]',permissions:["read","create","history","update"]},{filter:'_id in path("**")',permissions:["read"]}],requiresApproval:[{filter:"!locked",permissions:["read","create","update"]}],read:jq,write:jB},jK=jL.pipe((0,P.U)(e=>e.length?e.filter(e=>!!e&&e in jV).flatMap(e=>jV[e]||[]):null));async function jU(e,t,n){return await e.request({uri:`/projects/${t}/datasets/${n}/acl`,tag:"acl.get",withCredentials:!0})}let jZ=new Map;async function jG(e,t,n){jZ.has(t)||jZ.set(t,(0,n6.Qc)(`*[${t}]`));let i=jZ.get(t),a=function(e){let t={};return null!==e&&(t.identity=e),t}(e),{identity:r}=a,o={...a};return(await (await n6.ku(i,{dataset:[n],identity:r,params:o})).get())?.length===1}async function jH(e,t,n,i){if(!i)return{granted:!0,reason:"Null document, nothing to check"};if(!t.length)return{granted:!1,reason:"No document grants"};let a=[];for(let n of t)await jG(e,n.filter,i)&&a.push(n);let r=a.some(e=>e.permissions.some(e=>e===n));return{granted:r,reason:r?"Matching grant":"No matching grants found"}}let jW=iC(function({grantsStore:e,templateItems:t,templates:n,schema:i,context:a}){return t?.length?(0,U.a)(t.map(function e(t){return"object"==typeof t&&null!==t&&"serialize"in t?e(t.serialize()):t}).map(async e=>{let t=n.find(t=>t.id===e.templateId);if(!t)throw Error(`template not found: "${e.templateId}"`);let r=await jh(i,t,e.parameters,a,{useCache:!0});return{template:t,item:e,resolvedInitialValue:r}}).map(t=>(0,O.D)(t).pipe((0,ec.w)(({item:t,resolvedInitialValue:n,template:a})=>{let r=i.get(a.schemaType);if(!r)throw Error(`schema type not found: "${a.schemaType}"`);let o=r?.liveEdit,{initialDocumentId:s="dummy-id"}=t;return j$({grantsStore:e,permission:"create",document:{_id:o?iS(s):i_(s),...n}}).pipe((0,P.U)(({granted:e,reason:i})=>{let o=t.title||a.title;return{...t,i18n:t.i18n||a.i18n,granted:e,reason:i,resolvedInitialValue:n,template:a,title:o,subtitle:r.title===o?void 0:r.title,description:t.description||a.description,icon:t.icon||a.icon}}))})))):(0,N.of)([])});function jY({templateItems:e,...t}){let n=NQ(),i=Bk(),a=CM(),r=j_();return jW({templateItems:e,grantsStore:t.grantsStore||a,schema:t.schema||n,templates:t.templates||i,context:r})}function jJ(e,t){var n,i;if(e.end!==t.start)throw Error("chunks are not next to each other");let a=j0(e.draftState,t.draftState),r=j0(e.publishedState,t.publishedState);if("delete"===e.type&&"editDraft"===t.type)return[e,{...t,type:"create",draftState:a,publishedState:r}];if("delete"===t.type){if("missing"===a&&"present"===r)return[e,{...t,type:"discardDraft",draftState:a,publishedState:r}];if("present"===a&&"missing"===r)return[e,{...t,type:"unpublish",draftState:a,publishedState:r}]}if(("create"===(n=e.type)||"editDraft"===n)&&"editDraft"===t.type&&(i=e.endTimestamp,Date.parse(t.startTimestamp)-Date.parse(i)<3e5)){let n=new Set;for(let t of e.authors)n.add(t);for(let e of t.authors)n.add(e);return{index:0,id:t.id,type:e.type,start:e.start,end:t.end,startTimestamp:e.startTimestamp,endTimestamp:t.endTimestamp,authors:n,draftState:a,publishedState:r}}return[e,{...t,draftState:a,publishedState:r}]}function jX(e){return e&&j1(e?.apply)?"deleted":e?"upsert":"unedited"}function jQ(e){let t=!!e.draftEffect,n=!!e.publishedEffect,i=e.draftEffect&&j1(e.draftEffect.apply),a=e.publishedEffect&&j1(e.publishedEffect.apply),r=function(e){let t=jX(e.draftEffect),n=jX(e.publishedEffect);if("unedited"===n){if("deleted"===t)return"delete";if("upsert"===t)return"editDraft"}if("deleted"===n)return"delete";if("upsert"===n){if("unedited"===t)return"editLive";if("deleted"===t)return"publish"}return"editLive"}(e);return{index:0,id:e.id,type:r,start:e.index,end:e.index+1,startTimestamp:e.timestamp,endTimestamp:e.timestamp,authors:new Set([e.author]),draftState:t?i?"missing":"present":"unknown",publishedState:n?a?"missing":"present":"unknown"}}function j0(e,t){return"unknown"===t?e:t}function j1(e){return 0===e[0]&&null===e[1]}function j2(e){return e.draft||e.published}class j3{type="array";value;length;annotation;extractor;content;elements=[];constructor(e,t,n,i){this.content=e,this.value=t,this.annotation=n,this.extractor=i,this.length=e.elements.length}at(e){if(e>=this.length)throw Error("out of bounds");return this.elements[e]||(this.elements[e]=j8(this.content.elements[e],this.value[e],this.extractor))}annotationAt(e){let t=this.content.metas[e];return this.extractor.fromMeta(t)}}class j4{type="object";value;keys;annotation;extractor;content;fields={};constructor(e,t,n,i){this.content=e,this.value=t,this.annotation=n,this.extractor=i,this.keys=Object.keys(e.fields)}get(e){let t=this.fields[e];if(t)return t;let n=this.content.fields[e];if(n)return this.fields[e]=j8(n,this.value[e],this.extractor)}}class j5{type="string";value;annotation;extractor;content;constructor(e,t,n,i){this.content=e,this.value=t,this.annotation=n,this.extractor=i}sliceAnnotation(e,t){let n=[],i=0;for(let a of this.content.parts){let r=a.value.length,o=Math.max(0,e-i);if(o<r){let e=Math.min(r,t-i);if(e<=0)break;!function(e,t){if(n.length>0){var i;let a=n[n.length-1];if((i=a.annotation)&&t?i.author===t.author&&i.chunk===t.chunk:!i&&!t){a.text+=e;return}}n.push({text:e,annotation:t})}(a.value.slice(o,e),this.extractor.fromValue(a))}i+=r}return n}}function j8(e,t,n){let i=n.fromValue(e);if(e.content)switch(e.content.type){case"array":return new j3(e.content,t,i,n);case"object":return new j4(e.content,t,i,n);case"string":return new j5(e.content,t,i,n)}return(0,n9.r)(t,i)}function j6(e,t,n){return n?j9(e,n.transactionIndex+1,n.chunk.index):t?j9(e,t.start,t.index):null}function j7(e,t){return t?j9(e,t.transactionIndex,t.chunk.index):null}function j9(e,t,n){let i=e.transactionByIndex(t);if(!i)return null;let a=e.chunkByTransactionIndex(t,n);return a?{chunk:a,timestamp:i.timestamp,author:i.author}:null}class Ce{_postive=[];_negative=[];addToEnd(e){e.index=this._postive.length,this._postive.push(e)}addToBeginning(e){if(0==this.length){this.addToEnd(e);return}e.index=-(this._negative.length+1),this._negative.push(e)}mergeAtEnd(e,t){if(0===this.length){this.addToEnd(e);return}let n=this.lastIdx,i=t(this.get(n),e);Array.isArray(i)?(this.set(n,i[0]),this.addToEnd(i[1])):this.set(n,i)}mergeAtBeginning(e,t){if(0===this.length){this.addToEnd(e);return}let n=this.firstIdx,i=t(e,this.get(n));Array.isArray(i)?(this.set(n,i[1]),this.addToBeginning(i[0])):this.set(n,i)}removeFromEnd(){0===this._postive.length?this._negative.shift():this._postive.pop()}has(e){return e>=0?e<this._postive.length:-(e+1)<this._negative.length}get(e){return e>=0?this._postive[e]:this._negative[-(e+1)]}set(e,t){e>=0?(t.index=e,this._postive[e]=t):(t.index=e,this._negative[-(e+1)]=t)}get lastIdx(){return this._postive.length-1}get last(){return this.get(this.lastIdx)}get firstIdx(){return-this._negative.length}get first(){return this.get(this.firstIdx)}get length(){return this._postive.length+this._negative.length}}class Ct{reachedEarliestEntry=!1;publishedId;draftId;_transactions=new Ce;_chunks=new Ce;_possiblePendingTransactions=new Map;_recreateTransactionsFrom;_trace;constructor(e){this.publishedId=e.publishedId,this.draftId=`drafts.${e.publishedId}`,e.enableTrace&&(this._trace=[],this._trace.push({type:"initial",publishedId:e.publishedId}),window.__sanityTimelineTrace=this._trace)}get chunkCount(){return this._chunks.length}mapChunks(e){let t=[],n=this._chunks.firstIdx,i=this._chunks.lastIdx;for(let a=i;a>=n;a--)t.push(e(this._chunks.get(a),a));return t}reset(){this._transactions=new Ce,this._chunks=new Ce,this._possiblePendingTransactions=new Map,this._recreateTransactionsFrom=void 0,this.reachedEarliestEntry=!1}addRemoteMutation(e){this._trace&&this._trace.push({type:"addRemoteMutation",event:e});let t=this._possiblePendingTransactions.get(e.transactionId),n=t?t.transaction:{index:0,id:e.transactionId,timestamp:e.timestamp.toISOString(),author:e.author};"draft"===e.version?n.draftEffect=e.effects:n.publishedEffect=e.effects,t?(this._possiblePendingTransactions.delete(e.transactionId),this._invalidateTransactionFrom(t.idx)):(this._transactions.addToEnd(n),this._possiblePendingTransactions.set(e.transactionId,{transaction:n,idx:this._transactions.lastIdx}))}addTranslogEntry(e){this._trace&&this._trace.push({type:"addTranslogEntry",event:e}),this._transactions.addToBeginning({index:0,id:e.id,author:e.author,timestamp:e.timestamp,draftEffect:e.effects[this.draftId],publishedEffect:e.effects[this.publishedId]})}didReachEarliestEntry(){this._trace&&this._trace.push({type:"didReachEarliestEntry"}),this.reachedEarliestEntry=!0}updateChunks(){this._trace&&this._trace.push({type:"updateChunks"}),this._removeInvalidatedChunks(),this._addChunksFromTransactions(),this._createInitialChunk()}_removeInvalidatedChunks(){if(this._recreateTransactionsFrom){for(;this._chunks.length>0;){let e=this._chunks.last;if(this._recreateTransactionsFrom<e.end)this._chunks.removeFromEnd();else break}this._recreateTransactionsFrom=void 0}}_addChunksFromTransactions(){let e=this._transactions.firstIdx,t=this._transactions.lastIdx,n=this._chunks.length>0?this._chunks.last.end:e;for(let e=n;e<=t;e++){let t=this._transactions.get(e);this._chunks.mergeAtEnd(jQ(t),jJ)}if(0==this._chunks.length)return;let i=this._chunks.first.start;for(let t=i-1;t>=e;t--){let e=this._transactions.get(t);this._chunks.mergeAtBeginning(jQ(e),jJ)}}_invalidateTransactionFrom(e){(void 0===this._recreateTransactionsFrom||e<this._recreateTransactionsFrom)&&(this._recreateTransactionsFrom=e)}_createInitialChunk(){if(this.reachedEarliestEntry){if(this._chunks.first?.type==="initial")return;let e=this._transactions.first;if(!e)return;let t=jQ(e);t.type="initial",t.id="@initial",t.end=t.start,this._chunks.addToBeginning(t)}}parseTimeId(e){if(0===this._chunks.length)return this.reachedEarliestEntry?"invalid":"loading";let t=e.split("/",3),n=t.shift(),i=t.shift(),a=Number(n);for(let e=this._chunks.lastIdx;e>=this._chunks.firstIdx;e--){let t=this._chunks.get(e);if(t.id===i)return t;if(Date.parse(t.endTimestamp)+36e5<a)return"invalid"}return this.reachedEarliestEntry?"invalid":"loading"}findLastPublishedBefore(e){for(let t=e?e.index-1:this._chunks.lastIdx;t>=this._chunks.firstIdx;t--){let e=this._chunks.get(t);if("publish"===e.type||"initial"===e.type)return e}return this.reachedEarliestEntry?this._chunks.first:"loading"}isLatestChunk(e){return e===this._chunks.last}createTimeId(e){return`${e.endTimestamp.valueOf()}/${e.id}`}lastChunk(){return this._chunks.last}transactionByIndex(e){return this._transactions.has(e)?this._transactions.get(e):null}chunkByTransactionIndex(e,t=0){let n=t;for(;;){let t=this._chunks.get(n);if(!t)throw Error("transaction does not belong in any chunk");if(e>=t.end)n++;else{if(!(e<t.start))return t;n--}}}replayBackwardsBetween(e,t,n){let i=n.draft,a=n.published;for(let n=t;n>=e;n--){let e=this._transactions.get(n);e.draftEffect&&(i=(0,n7.a)(i,e.draftEffect.revert)),e.publishedEffect&&(a=(0,n7.a)(a,e.publishedEffect.revert))}return{draft:i,published:a}}replayBackwardsUntil(e,t){return this.replayBackwardsBetween(e,this._transactions.lastIdx,t)}calculateDiff(e,t,n,i){var a,r;let o=n7.v.wrap(e.draft,null),s=n7.v.wrap(e.published,null),l=(a=o,r=s,"null"===n7.v.getType(a)?r:a),c=j2(e),d=null;for(let e=n;e<=i;e++){let t=this._chunks.get(e);d||(d=t);for(let e=t.start;e<t.end;e++){let n=this._transactions.get(e),i={chunk:t,transactionIndex:e},a=o,r=s;n.draftEffect&&(o=n7.v.applyPatch(o,n.draftEffect.apply,i)),n.publishedEffect&&(s=n7.v.applyPatch(s,n.publishedEffect.apply,i));let l="null"!==n7.v.getType(a),c="null"!==n7.v.getType(o);"null"===n7.v.getType(s)||c||(s=n7.v.rebaseValue(a,s)),c&&!l&&(o=n7.v.rebaseValue(r,o))}}return function(e,t,n,i,a,r){let o=j8(n,i,{fromValue:n=>j6(e,t,n.endMeta),fromMeta:n=>j6(e,t,n)}),s=j8(a,r,{fromValue:t=>j7(e,t.startMeta),fromMeta:t=>j7(e,t)});return(0,n9.t)(o,s)}(this,d,l,c,"null"===n7.v.getType(o)?s:o,j2(t))}}function Cn(e){return{id:e,hasAttrs:!1,attrs:null,rev:null,events:[],aligned:!1}}function Ci(e,t){if(e.hasAttrs=!0,t){if(e.attrs={...t},"string"!=typeof e.attrs._rev)throw Error("snapshot has no _rev");e.rev=e.attrs._rev,delete e.attrs._rev}else e.attrs=null,e.rev=null;e.events=[]}class Ca{timeline;earliestTransactionId=null;constructor(e){this.timeline=e,this._states={draft:Cn(e.draftId),published:Cn(e.publishedId)}}_states;appendRemoteSnapshotEvent(e){let t=this._states[e.version];if("snapshot"===e.type){this._maybeInvalidateHistory(),Ci(t,e.document);return}"remoteMutation"===e.type&&(t.aligned?(this._apply(t,e),this.timeline.addRemoteMutation(e)):t.hasAttrs?t.events.push(e):Ci(t,e.head))}prependHistoryEvent(e){if(!this.acceptsHistory)throw Error("cannot prepend history at this point");for(let t of Object.values(this._states))if(!t.aligned){let n=function(e,t){let n=t.events.findIndex(t=>e.id===t.transactionId);return n>=0?n+1:t.rev?t.rev===e.id?0:-1:0}(e,t);n>=0&&this._alignAtIndex(t,n)}this.timeline.addTranslogEntry(e),this.earliestTransactionId=e.id}didReachEarliestEntry(){for(let e of Object.values(this._states))if(!e.aligned){if(null!==e.attrs)throw Error("unable to find translog entry to align to");this._alignAtIndex(e,0)}this.timeline.didReachEarliestEntry()}get isAligned(){return Object.values(this._states).every(e=>e.aligned)}get acceptsHistory(){return this._isComplete}get currentDocument(){return{draft:this._states.draft.attrs,published:this._states.published.attrs}}_alignAtIndex(e,t){for(let n of e.events.slice(0,t))this._apply(e,n);for(let n of e.events.slice(t))this._apply(e,n),this.timeline.addRemoteMutation(n);e.events=[],e.aligned=!0}get _isComplete(){return Object.values(this._states).every(e=>e.hasAttrs)}_apply(e,t){e.attrs=(0,n7.a)(e.attrs,t.effects.apply),e.rev=t.transactionId}_maybeInvalidateHistory(){if(this._isComplete){for(let e of Object.values(this._states))e.aligned=!1;this.earliestTransactionId=null,this.timeline.reset()}}}async function Cr(e,t){let n=t?{headers:{Authorization:`Bearer ${t}`}}:{credentials:"include"};return function(e){let t=e.body;if(!t)throw Error("Failed to read body from response");let n,i=!1;return new ReadableStream({start(e){n=t.getReader();let a=new TextDecoder,r="";n.read().then(function t(o){if(o.done){if(i)return;if(0===(r=r.trim()).length){e.close();return}e.enqueue(JSON.parse(r)),e.close();return}let s=(r+=a.decode(o.value,{stream:!0})).split(`
`);for(let t=0;t<s.length-1;++t){let a=s[t].trim();if(0!==a.length)try{e.enqueue(JSON.parse(a))}catch(t){e.error(t),i=!0,n.cancel();return}}return r=s[s.length-1],n.read().then(t).catch(t=>e.error(t))}).catch(t=>e.error(t))},cancel(){i=!0,n.cancel()}})}(await fetch(e,n))}class Co{timeline;start;end;doc;constructor(e,t,n,i){this.timeline=e,this.start=n,this.end=i,this.doc=t}same(e,t){return this.start===e&&this.end===t}_startDocument;_endDocument;_diff;endAttributes(){return Cs(this.endDocument())}endDocument(){return this._endDocument||(this._endDocument=this.timeline.replayBackwardsUntil(this.end.end,this.doc)),this._endDocument}startAttributes(){return Cs(this.startDocument())}startDocument(){if(!this.start)throw Error("start required");return this._startDocument||(this._startDocument=this.timeline.replayBackwardsBetween(this.start.end,this.end.end-1,this.endDocument())),this._startDocument}diff(){if(!this._diff){if(!this.start)throw Error("start required");this._diff=this.timeline.calculateDiff(this.startDocument(),this.endDocument(),this.start.index+1,this.end.index)}return this._diff}}function Cs(e){return e.draft||e.published}class Cl{timeline;client;handler;version=0;selectionState="inactive";constructor(e){this.timeline=e.timeline,this.client=e.client,this.handler=e.handler,this._aligner=new Ca(this.timeline),this.markChange()}_aligner;_fetchMore=!1;_fetchAtLeast=0;_isRunning=!1;_isSuspended=!1;_didErr=!1;_since=null;_sinceTime=null;_rev=null;_revTime=null;_reconstruction;clearRange(){this.setRange(null,null)}setRange(e,t){t!==this._rev&&this.setRevTime(t),e!==this._since&&this.setSinceTime(e);let n=10;if("loading"!==this._sinceTime&&"loading"!==this._revTime&&this._aligner.isAligned){if("invalid"===this._sinceTime||"invalid"===this._revTime)this.selectionState="invalid";else if(this._sinceTime){this.selectionState="range";let e=this._revTime||this.timeline.lastChunk();this._sinceTime.index>e.index?(this._revTime="invalid",this.selectionState="invalid"):this.setReconstruction(this._sinceTime,e)}else this._revTime?(this.selectionState="rev",this.setReconstruction(null,this._revTime)):(this.selectionState="inactive",n=0)}else this.selectionState="loading";this._fetchAtLeast=n,this.start()}setLoadMore(e){this._fetchMore=e,this.start()}get sinceTime(){return this._sinceTime&&"object"==typeof this._sinceTime?this._sinceTime:null}get revTime(){return this._revTime&&"object"==typeof this._revTime?this._revTime:null}get realRevChunk(){return this.revTime||this.timeline.lastChunk()}onOlderRevision(){return!!this._rev&&("range"===this.selectionState||"rev"===this.selectionState)}findRangeForNewRev(e){let t=this.timeline.isLatestChunk(e)?null:this.timeline.createTimeId(e);if(!this._since)return[null,t];let n=this.sinceTime;return n&&n.index<e.index?[this._since,t]:["@lastPublished",t]}findRangeForNewSince(e){let t=this.revTime;return t&&e.index<t.index?[this.timeline.createTimeId(e),this._rev]:[this.timeline.createTimeId(e),null]}setRevTime(e){this._rev=e,this._revTime=e?this.timeline.parseTimeId(e):null,"@lastPublished"===this._since&&(this._since=null,this._sinceTime=null)}setSinceTime(e){"@lastPublished"===e?"string"==typeof this._revTime?this._sinceTime=this._revTime:this._sinceTime=this.timeline.findLastPublishedBefore(this._revTime):this._sinceTime=e?this.timeline.parseTimeId(e):null,this._since=e}sinceAttributes(){return this._sinceTime&&this._reconstruction?this._reconstruction.startAttributes():null}displayed(){return this._revTime&&this._reconstruction?this._reconstruction.endAttributes():null}setReconstruction(e,t){this._reconstruction&&this._reconstruction.same(e,t)||(this._reconstruction=new Co(this.timeline,this._aligner.currentDocument,e,t))}currentDiff(){return this._reconstruction?this._reconstruction.diff():null}currentObjectDiff(){let e=this.currentDiff();if(e){if("null"===e.type)return null;if("object"!==e.type)throw Error(`ObjectDiff expected, got ${e.type}`)}return e}handleRemoteMutation(e){this._aligner.appendRemoteSnapshotEvent(e),this.markChange(),this._aligner.acceptsHistory&&this.start()}start(){this._didErr||this._isRunning||(this._isRunning=!0,this.tick().then(()=>{this._isRunning=!1}))}resume(){this._isSuspended=!1}suspend(){this._isSuspended=!0}async tick(){if(this._aligner.acceptsHistory&&!this.timeline.reachedEarliestEntry&&("loading"===this.selectionState||this._fetchMore||this.timeline.chunkCount<=this._fetchAtLeast)&&!this._isSuspended){try{await this.fetchMoreTransactions()}catch(e){this._didErr=!0,this.handler?.(e,this);return}await this.tick()}}async fetchMoreTransactions(){let e=this.timeline.publishedId,t=this.timeline.draftId,n=this.client.config(),i="tag=sanity.studio.structure.history&effectFormat=mendoza&excludeContent=true&excludeMutations=true&includeIdentifiedDocumentsOnly=true&reverse=true&limit=50",a=this._aligner.earliestTransactionId;a&&(i+=`&toTransaction=${a}`);let r=this.client.getUrl(`/data/history/${n.dataset}/transactions/${e},${t}?${i}`),o=(await Cr(r,n.token)).getReader(),s=0;for(;;){let e=await o.read();if(e.done)break;if("error"in e.value)throw Error(e.value.error.description||e.value.error.type);if(s++,e.value.id!==a){if(this._aligner.earliestTransactionId!==a||!this._aligner.acceptsHistory)return;this._aligner.prependHistoryEvent(e.value),a=this._aligner.earliestTransactionId}}this._aligner.earliestTransactionId===a&&this._aligner.acceptsHistory&&(s<50&&this._aligner.didReachEarliestEntry(),this.markChange())}markChange(){this.timeline.updateChunks(),this.setRevTime(this._rev),this.setSinceTime(this._rev),this.version++,this.handler?.(null,this)}}let Cc=Object.create(null),Cd=(e,t,n={})=>{let i=Array.isArray(t)?t:[t],{time:a,revision:r}=n;if(a&&r)throw Error("getHistory can't handle both time and revision parameters");let o=`/data/history/${e.config().dataset}/documents/${i.join(",")}`;if(r)o=`${o}?revision=${r}`;else{let e=a||new Date().toISOString();o=`${o}?time=${e}`}return e.request({url:o})},Cu=(e,t,n)=>{let i=iS(t),a=i_(t),r=`${i}@${n}`,o=Cc[r];if(o)return o;let s=`/data/history/${e.config().dataset}/documents/${i},${a}?revision=${n}`,l=e.request({url:s}).then(e=>{let t=e.documents||[],n=t.find(e=>e._id===i);return t.find(e=>e._id===a)||n});return Cc[r]=l,l},Cp=({client:e,documentId:t,documentType:n})=>{let i=new Ct({enableTrace:lR,publishedId:t});return new Cl({client:e,documentId:t,documentType:n,timeline:i})},Cm=async(e,t)=>{let n=Array.isArray(t)?t:[t],i=e.config().dataset,a=`/data/history/${i}/transactions/${n.join(",")}`;return(await e.request({url:a,query:{excludeContent:"true",includeIdentifiedDocumentsOnly:"true"}})).toString("utf8").split(`
`).filter(Boolean).map(e=>JSON.parse(e))},Ch=e=>(0,n4.u4)(e,(e,t)=>(0,w.Yk)(t)&&!e.includes(t._ref)?[...e,t._ref]:e,[]),Cf=(e,t)=>(function e(t,n){return Array.isArray(t)?n(t.map(t=>e(t,n)).filter(e=>"u">typeof e)):iO(t)?n(Object.keys(t).reduce((i,a)=>{let r=e(t[a],n);return"u">typeof r&&(i[a]=r),i},{})):n(t)})(e,e=>(0,w.Yk)(e)?t(e):e),Cg=(e,t)=>Cf(e,e=>t[e._ref]?e:void 0);function Cx(e,t){return(0,nq.useSyncExternalStoreWithSelector)(e.subscribe,e.getSnapshot,null,t)}let Cy={chunks:[],diff:null,hasMoreChunks:null,isLoading:!1,isPristine:null,lastNonDeletedRevId:null,onOlderRevision:!1,realRevChunk:null,revTime:null,selectionState:"inactive",sinceAttributes:null,sinceTime:null,timelineDisplayed:null,timelineReady:!1};function Cb({documentId:e,documentType:t,onError:n,rev:i,since:a}){let r=CN(),o=(0,d.useRef)(null),s=(0,d.useRef)(Cy),l=Bi(rz),c=dR(),p=(0,d.useMemo)(()=>r.getTimelineController({client:l,documentId:e,documentType:t}),[l,e,t,r]),m=(0,d.useMemo)(()=>new X.X(p),[p]);(0,d.useEffect)(()=>(p.setRange(a||null,i||null),m.next(p),p.handler=(e,t)=>{e?m.error(e):setTimeout(()=>{t.setRange(a||null,i||null),m.next(t)},0)},p.resume(),()=>p.suspend()),[i,a,p,m]);let h=(0,d.useMemo)(()=>{let e=c.__internal_serverDocumentActions?.enabled;return"boolean"==typeof e?(0,N.of)(e):jN(l)},[l,c.__internal_serverDocumentActions?.enabled]);return(0,d.useEffect)(()=>(o.current||(o.current=v9(l,{draftId:`drafts.${e}`,publishedId:e},t,h).subscribe(e=>{p.handleRemoteMutation(e)})),()=>{o.current&&(o.current.unsubscribe(),o.current=null)}),[l,p,e,t,h]),(0,d.useMemo)(()=>({findRangeForRev:e=>p.findRangeForNewRev(e),findRangeForSince:e=>p.findRangeForNewSince(e),loadMore:()=>{p.setLoadMore(!0),s.current.isLoading=!0},getSnapshot:()=>s.current,subscribe:e=>{let t=m.pipe((0,P.U)(e=>{let t=e.timeline.mapChunks(e=>e),n=t.filter(e=>!["delete","initial"].includes(e.type)),i=!e.timeline.reachedEarliestEntry;i&&t.length>16&&e.setLoadMore(!1);let a=!["invalid","loading"].includes(e.selectionState);return{chunks:t,diff:e.sinceTime?e.currentObjectDiff():null,isLoading:!1,isPristine:a?0===t.length&&!1===i:null,hasMoreChunks:!e.timeline.reachedEarliestEntry,lastNonDeletedRevId:n?.[0]?.id,onOlderRevision:e.onOlderRevision(),realRevChunk:e.realRevChunk,revTime:e.revTime,selectionState:e.selectionState,sinceAttributes:e.sinceAttributes(),sinceTime:e.sinceTime,timelineDisplayed:e.displayed(),timelineReady:a}}),(0,ea.x)(u),(0,F.K)(e=>(n?.(e),(0,N.of)(Cy))),(0,H.b)(e=>{s.current=e}),(0,H.b)(e)).subscribe();return()=>t.unsubscribe()}}),[p,n,m])}let Cv=e=>{if("rollCall"===e.type)return{type:"rollCall",userId:e.i,sessionId:e.session};if("state"===e.type){let{sessionId:t,locations:n}=e.m;return{type:"state",userId:e.i,sessionId:t,timestamp:new Date().toISOString(),locations:n}}if("disconnect"===e.type)return{type:"disconnect",userId:e.i,sessionId:e.m.session,timestamp:new Date().toISOString()};throw Error(`Got unknown presence event: ${JSON.stringify(e)}`)},Cj=(e,t)=>[e.listen("presence").pipe((0,P.U)(Cv)).pipe((0,Y.B)()),n=>"rollCall"===n.type?e.request("presence_rollcall",{session:t}):"state"===n.type?e.request("presence_announce",{data:{locations:n.locations,sessionId:t}}):"disconnect"===n.type?e.request("presence_disconnect",{session:t}):z.E],CC=[["nested","first"],["nested","second"],["nestedArray",{_key:"565c867c8dac"},"arrayNo1",{_key:"a645548a8f01"},"arrayNo1",{_key:"1685e372c40f"},"fieldNo0"],["nestedArray",{_key:"565c867c8dac"},"fieldNo0"],["nestedArray",{_key:"565c867c8dac"},"arrayNo19",{_key:"a02e7a93e2a2"},"fieldNo0"],["nestedArray",{_key:"565c867c8dac"},"arrayNo19",{_key:"a02e7a93e2a2"},"fieldNo19"],["address","country"],["address","street"],["customInputWithDefaultPresence","row3","cell3"]],Cw=(0,B.P)(()=>(0,V.H)(0,1e4)).pipe((0,eg.j)(["pqSMwf6hH","pnLYqNfv5","priDVVmy8","p0NFOU0j8","pTDl2jw8d","pHMeQnTse","pDQYzJbyS","pZyoPHKUs","p4Tyi2Be5","pb9vii060","pE8yhOisw","p7Fd2C6Cj","p3exSgYCx","pbIQRYViC","p8GJaTEhN","p27ewL8aM","pYg97z75S","pdLr4quHv","pkJXiDgg6","pkl4UAKcA","pNoExists"]),(0,P.U)((e,t)=>({type:"state",userId:e,sessionId:e+t,timestamp:new Date().toISOString(),locations:[{type:"document",documentId:"presence-debug",lastActiveAt:new Date().toISOString(),path:nf(CC)}]})),(0,em.d)()),Ck="presence_session_id",CT=function(){try{return window.sessionStorage.getItem(Ck)}catch{}return null}()||function(e){try{window.sessionStorage.setItem(Ck,e)}catch{}return e}((0,nh.x0)(16));function CA({children:e}){let t=(0,d.useMemo)(()=>{let e=new Map,t={};return{get:({namespace:n,dependencies:i})=>{let a=i.map(e=>null===e?t:e);return e.get(n)?.get(a)},set:({namespace:n,dependencies:i,value:a})=>{let r=e.get(n)||function(){let e=new WeakMap,t=new WeakMap;function n(e){return Array.from(new Set(e)).map(e=>[function(e){let n=t.get(e);if(n)return n;let i=Array.from({length:10}).map(()=>Math.floor(255*Math.random()).toString(16).padStart(2,"0")).join("");return t.set(e,i),i}(e),e]).sort(([e],[t])=>e.localeCompare(t,"en")).map(([,e])=>e)}return{get:function(t){return function e(t,n){if(!t.length)return;let[i,...a]=t,r=n.get(i);if(r)return a.length?e(a,r.next):r.value}(n(t),e)},set:function(t,i){!function e(t,n,i){if(!t.length)return;let[a,...r]=t,o=n.get(a)||{type:"multi-key-weak-map-node",value:void 0,next:new WeakMap};if(n.set(a,o),!r.length){o.value=i;return}e(r,o.next,i)}(n(t),e,i)}}}(),o=i.map(e=>null===e?t:e);e.set(n,r),r.set(o,a)}}},[]);return(0,l.jsx)(p.qP.Provider,{value:t,children:e})}function C_(){let e=(0,d.useContext)(p.qP);if(!e)throw Error("Could not find `cache` context");return e}let CS=[{id:"<system>",displayName:"Sanity",imageUrl:"https://public.sanity.io/logos/favicon-192.png"}];function CE(){let{getClient:e,currentUser:t}=AU(),n=C_(),i=e(rz);return(0,d.useMemo)(()=>{let e=n.get({namespace:"userStore",dependencies:[i,t]})||function({client:e,currentUser:t}){let n=e.withConfig({apiVersion:"2021-06-07"}),i=new ng(async e=>{let t=await n.request({uri:`/users/${e.join(",")}`,withCredentials:!0,tag:"users.get"}),i=(Array.isArray(t)?t:[t]).reduce((e,t)=>(t?.id&&(e[t.id]=t),e),{});return e.map(e=>i[e]||null)},{batchScheduleFn:e=>ie(e),maxBatchSize:400}),a=t&&{id:t.id,displayName:t.name,imageUrl:t.profileImage};return i.prime("me",a),a?.id&&i.prime(a.id,a),CS.forEach(e=>i.prime(e.id,e)),{getUser:async e=>{if(!e)return Promise.resolve(null);try{return await i.load(e)}catch(e){if(403===e.statusCode)return Promise.resolve(null);throw e}},getUsers:async e=>(await i.loadMany(e)).filter(e=>iO(e)&&"string"==typeof e.id)}}({client:i,currentUser:t});return n.set({namespace:"userStore",dependencies:[i,t],value:e}),e},[i,t,n])}function CM(){let{getClient:e}=AU(),t=e(rz),n=vh(),i=C_();return(0,d.useMemo)(()=>{let e=i.get({namespace:"grantsStore",dependencies:[t,n]})||function(e){let{client:t}=e,n=t.withConfig({apiVersion:"2021-06-07"}),i="userId"in e?e.userId:e?.currentUser?.id||null,a=(0,B.P)(()=>(0,N.of)(n.config())).pipe((0,ec.w)(({projectId:e,dataset:t})=>{if(!e||!t)throw Error("Missing projectId or dataset");return jU(n,e,t)})),r=jK.pipe((0,ec.w)(e=>e?(0,N.of)(e):a),(0,eS._)(1),function(e,t=en.E){return e=>{let n=null,i=null,a=new D.x,r=a.pipe((0,ep.R)((e,t)=>e+t,0),(0,ec.w)(a=>0===a?(0,V.H)(1e3,t).pipe((0,H.b)(()=>{n&&(n.unsubscribe(),n=null),i&&(i.unsubscribe(),i=null)})):!n&&a>0?(0,V.H)(0,t).pipe((0,H.b)(()=>{n||(n=e.connect())})):K.C));return(0,ei.g)(()=>(i||(i=r.subscribe()),a.next(1),{unsubscribe:()=>a.next(-1)}),()=>e)}}(0));return{checkDocumentPermission:(e,t)=>r.pipe((0,ec.w)(n=>jH(i,n,e,t)),(0,ea.x)(tl))}}({client:t,userId:n?.id||null});return i.set({namespace:"grantsStore",dependencies:[t,n],value:e}),e},[t,n,i])}function CN(){let e=Bi(rz),t=C_();return(0,d.useMemo)(()=>{let n=t.get({namespace:"historyStore",dependencies:[e]})||function({client:e}){return{getDocumentAtRevision:(t,n)=>Cu(e,t,n),getHistory:(t,n)=>Cd(e,t,n),getTransactions:t=>Cm(e,t),restore:(t,n,i,a)=>(0,O.D)(Cu(e,t,i)).pipe((0,eu.z)(n=>{if(!n)throw Error(`Unable to find document with ID ${t} at revision ${i}`);let a=Ch(n).map(e=>`"${e}": defined(*[_id=="${e}"]._id)`).join(",");return e.observable.fetch(`{${a}}`).pipe((0,P.U)(e=>Cg(n,e)))}),(0,P.U)(e=>{let{_updatedAt:t,...i}=e;return{...i,_id:n}}),(0,eu.z)(n=>{if(a?.useServerDocumentActions){let i={actionType:"sanity.action.document.replaceDraft",publishedId:t,attributes:n};return vk(e).observable.action(a.fromDeleted?[{actionType:"sanity.action.document.create",publishedId:t,attributes:n,ifExists:"fail"},i]:i)}return e.observable.createOrReplace(n,{visibility:"async"})}),(0,P.U)(()=>{})),getTimelineController:Cp}}({client:e});return t.set({namespace:"historyStore",dependencies:[e],value:n}),n},[e,t])}function CI(){let e=Bi(rz),t=C_();return(0,d.useMemo)(()=>{let n=t.get({namespace:"documentPreviewStore",dependencies:[e]})||function({client:e}){var t,n;let i=e.withConfig({apiVersion:"1"}),a=i.listen('*[!(_id in path("_.**"))]',{},{events:["welcome","mutation","reconnect"],includeResult:!1,includePreviousRevision:!1,includeMutations:!1,visibility:"query",tag:"preview.global"}).pipe((n="function"==typeof(t={predicate:e=>"welcome"===e.type||"reconnect"===e.type,resetOnRefCountZero:()=>(0,V.H)(1e4)})?{predicate:t}:t,e=>{let t,i=!1,{predicate:a,...r}=n,o=e.pipe((0,H.b)(e=>{n.predicate(e)&&(i=!0,t=e)}),(0,W.x)(()=>{i=!1,t=void 0}),(0,Y.B)(r)),s=new $.y(e=>{i&&e.next(t),e.complete()});return(0,R.T)(o,s)})).pipe((0,eh.h)(e=>"mutation"===e.type||"welcome"===e.type)).pipe((0,P.U)(e=>"welcome"===e.type?{type:"connected"}:e)),r=function(e){let{observeFields:t}=e;return(e,n,i)=>(function e(t,n,i,a){if(!t||"object"!=typeof t)return(0,N.of)(t);let r=(0,w.Yk)(t)?t._ref:"_id"in t?t._id:void 0,o=r?{...t,_id:r}:{...t};"reference"===o._type&&(delete o._type,delete o._ref,delete o._weak,delete o._dataset,delete o._projectId,delete o._strengthenOnPublish);let s=n.filter(e=>!(e[0]in o));if(r&&s.length>0){let o=e5(s.map(e=>e[0])),l=(0,w.Yz)(t)?{projectId:t._projectId,dataset:t._dataset}:a;return i(r,o,l).pipe((0,ec.w)(a=>null===a?(0,N.of)(null):e({...o.reduce((e,t)=>(e[t]=void 0,e),{}),...(0,w.Yk)(t)?{...t,...l}:t,...a},n,i,l)))}let l={};n.forEach(e=>{let[t,...n]=e;l[t]||(l[t]=[]),l[t].push(n)});let c=Object.keys(l).reduce((n,r)=>{let o=l[r].filter(e=>e.length>0);return 0===o.length?n[r]=iO(t)?t[r]:void 0:n[r]=e(t[r],o,i,a),n},o);return(0,N.of)(c).pipe(function(e={}){return t=>new $.y(e=>t.subscribe(e)).pipe((0,ec.w)(t=>{let n=b0(t).map(e=>{let n=t[e];return(0,J.b)(n)?(0,O.D)(n).pipe((0,P.U)(t=>[e,t])):(0,N.of)([e,n])});return e.wait?(0,U.a)(n).pipe((0,P.U)(e=>e.reduce((e,[t,n])=>({...e,[t]:n}),{}))):(0,O.D)(n).pipe((0,ej.J)(),(0,ep.R)((e,[t,n])=>({...e,[t]:n}),{}))}))}({wait:!0}))})(e,n.map(e=>"string"==typeof e?e.split("."):e),t,i)}({observeFields:function(e){let{client:t,invalidationChannel:n}=e;function i(e){return function(t){let n=n3(t.reduce((e,[t,n],i)=>{let a=C(n.join(","),n2).join(".");e[a]||(e[a]={fields:n,ids:[],map:[]});let r=e[a].ids.length;return e[a].ids[r]=t,e[a].map[r]=i,e},{}));return e.observable.fetch(`[${n.map(vs).join(",")}][0...${n.length}]`,{},{tag:"preview.document-paths"}).pipe((0,P.U)(e=>e.reduce((e,t,i)=>(n[i].map.forEach((a,r)=>{let o=n[i].ids[r],s=t.find(e=>e._id===o);e[a]=s||null}),e),[])))}}let a=bX(i(t),100),r=bX(i(t),1e3),o={},s=eD(function(e){return bX(i(t.withConfig(e)),10)},e=>e.dataset+e.projectId),l=(0,L.R)(document,"visibilitychange").pipe((0,ef.O)(0),(0,P.U)(()=>"visible"===document.visibilityState),(0,ec.w)(e=>e?(0,V.H)(0,1e4):z.E),(0,Y.B)());return function(e,t,i){let c=i?`${i.projectId}:${i.dataset}:${e}`:`$current$-${e}`;c in o||(o[c]=[]);let d=o[c];no(t,eG(d.map(e=>e.fields))).length>0&&d.push(function(e,t,i){let o=null,c=(0,R.T)((0,B.P)(()=>null===o?z.E:(0,N.of)(o)),i?l.pipe((0,ef.O)(0)).pipe((0,ec.w)(()=>s(i)(e,t))):n.pipe((0,eh.h)(t=>"connected"===t.type||t.documentId===e)).pipe((0,ec.w)(n=>"connected"===n.type||"query"===n.visibility?a(e,t).pipe((0,eu.z)(n=>(0,I.z)((0,N.of)(n),void 0===n?r(e,t):[]))):r(e,t)))).pipe((0,H.b)(e=>o=e),(0,em.d)({refCount:!0,bufferSize:1}));return{id:e,fields:t,changes$:c}}(e,t,i));let u=d.filter(e=>e.fields.some(e=>t.includes(e))).map(e=>e.changes$);return(0,U.a)(u).pipe((0,P.U)(e=>e.filter(Boolean)),(0,eh.h)(e=>(function(e,t=va){let n,i;for(let a=0;a<e.length;a++){if(0===a){n=t(e[a]);continue}if(n!==(i=t(e[a])))return!1;n=i}return!0})(e,e=>e._rev)),(0,P.U)(e=>0===e.length?null:[...bG,...t].reduce((t,n)=>{let i;let a=(e.some(e=>n in e&&(i=e[n],!0)),i);return void 0!==a&&(t[n]=a),t},{})),(0,ea.x)((e,n)=>e===n||!!e&&!!n&&"object"==typeof e&&"object"==typeof n&&t.every(t=>e[t]===n[t])))}}({client:i,invalidationChannel:a})});function o(e,t){return r({_type:"reference",_ref:e},["_type"],t).pipe((0,P.U)(e=>iO(e)&&"string"==typeof e._type?e._type:void 0),(0,ea.x)())}let s=function(e){let{observeDocumentTypeFromId:t,observePaths:n}=e;return function e(i,a,r={}){let{viewOptions:o={},apiConfig:s}=r;if((0,w.mz)(a)){if(!(0,w.Yz)(i))return(0,N.of)({snapshot:void 0});let n={projectId:i._projectId,dataset:i._dataset};return t(i._ref,n).pipe((0,ec.w)(t=>{if(t){let r=a.to.find(e=>e.type===t);if(r)return e(i,r,{apiConfig:n,viewOptions:o})}return(0,N.of)({snapshot:void 0})}))}if((0,w.dD)(a))return tn(i)?t(i._ref).pipe((0,ec.w)(t=>{if(t){let n=a.to.find(e=>e.name===t);if(n)return e(i,n)}return(0,N.of)({snapshot:void 0})})):(0,N.of)({snapshot:void 0});let l=b2(a.preview);return l?n(i,l,s).pipe((0,P.U)(e=>({type:a,snapshot:e?vi(e,a,o):null}))):(0,N.of)({type:a,snapshot:i&&tn(i)?vt(a,i,o).returnValue:null})}}({observeDocumentTypeFromId:o,observePaths:r}),l=function(e,t){function n(e){return t({_ref:e},[["_rev"]]).pipe((0,P.U)(e=>iO(e)&&!!("_rev"in e&&e?._rev)),(0,ea.x)(),(0,ec.w)(t=>t?(0,N.of)(bH):i(e)))}let i=bX(function(e){let t=[...new Set(eG(e))];return(0,O.D)(function(e){let t=[],n=0,i=[];for(let a of e)n+a.length+1>=11164&&(i.push(t),t=[],n=0),n+=a.length+1,t.push(a);return i.includes(t)||i.push(t),i}(t)).pipe((0,eu.z)(a,10),(0,e_.u)(bQ,[]),(0,P.U)(n=>e.map(([e])=>n[t.indexOf(e)])))},1);function a(t){return(0,B.P)(()=>{let n={uri:e.getDataUrl("doc",t.join(",")),json:!0,query:{excludeContent:"true"},tag:"preview.documents-availability"};return e.observable.request(n).pipe((0,P.U)(e=>{let n=nY(e.omitted||[],e=>e.id);return t.map(e=>{let t=n[e];if(!t)return bH;if("existence"===t.reason)return bY;if("permission"===t.reason)return bW;throw Error(`Unexpected reason for omission: "${t.reason}"`)})}))})}return function(e){let t=i_(e),i=iS(e);return(0,U.a)([n(t),n(i)]).pipe((0,ea.x)(tl),(0,P.U)(([e,t])=>({draft:e,published:t})))}}(i,r),c=function(e){let{observeDocumentPairAvailability:t,observePaths:n}=e,i=[["_updatedAt"],["_createdAt"],["_type"]];return function(e,a){let{draftId:r,publishedId:o}=iA(e);return t(r).pipe((0,ec.w)(e=>{if(!e.draft.available&&!e.published.available)return(0,N.of)({id:o,type:null,draft:{availability:e.draft,snapshot:void 0},published:{availability:e.published,snapshot:void 0}});let t=[...a,...i];return(0,U.a)([n({_type:"reference",_ref:r},t),n({_type:"reference",_ref:o},t)]).pipe((0,P.U)(([t,n])=>{let i=iO(t)&&"_type"in t&&t._type||iO(n)&&"_type"in n&&n._type||null;return{id:o,type:"string"==typeof i?i:null,draft:{availability:e.draft,snapshot:t},published:{availability:e.published,snapshot:n}}}))}))}}({observeDocumentPairAvailability:l,observePaths:r});return{observePaths:r,observeForPreview:s,observeDocumentTypeFromId:o,unstable_observeDocumentPairAvailability:l,unstable_observePathsDocumentPair:c}}({client:e});return t.set({namespace:"documentPreviewStore",dependencies:[e],value:n}),n},[e,t])}function Cz(){let{getClient:e,i18n:t}=AU(),n=NQ(),i=Bk(),a=C_(),r=CN(),o=CI(),s=dR(),l=(0,d.useMemo)(()=>{let t=s.__internal_serverDocumentActions?.enabled;return"boolean"==typeof t?(0,N.of)(t):jN(e(rz))},[e,s.__internal_serverDocumentActions?.enabled]);return(0,d.useMemo)(()=>{let c=a.get({namespace:"documentStore",dependencies:[e,o,r,n,t,s]})||function({getClient:e,documentPreviewStore:t,historyStore:n,initialValueTemplates:i,schema:a,i18n:r,serverActionsEnabled:o}){let s=t.unstable_observeDocumentPairAvailability,l=e(rz),c={client:l,getClient:e,observeDocumentPairAvailability:s,historyStore:n,schema:a,i18n:r,serverActionsEnabled:o};return{checkoutPair:e=>vS(l,e,o),initialValue:(e,n)=>(function(e,t,n,i,a){let r=n.observePaths({_type:"reference",_ref:i_(i.documentId)},["_type"]),o=n.observePaths({_type:"reference",_ref:iS(i.documentId)},["_type"]);return(0,R.T)(r.pipe((0,P.U)(e=>({draft:e}))),o.pipe((0,P.U)(e=>({published:e})))).pipe((0,ep.R)((e,t)=>({...e,...t}),{}),(0,eh.h)(e=>"draft"in e&&"published"in e),(0,P.U)(e=>e.draft||e.published),(0,ea.x)((e,t)=>!!e!=!!t),(0,eI.b)(25)).pipe((0,ec.w)(n=>{if(n)return(0,N.of)({type:"success",value:null});if(!i.templateName)return(0,N.of)({isResolving:!1,initialValue:void 0});let r=t.find(e=>e.id===i.templateName);if(!r)return console.warn('Template "%s" not defined, using empty initial value',i.templateName),(0,N.of)({isResolving:!1,initialValue:void 0});let o=(0,O.D)(jh(e,r,i.templateParams,a)).pipe((0,P.U)(e=>({isResolving:!1,initialValue:e}))).pipe((0,F.K)(e=>(console.group("Failed to resolve initial value"),console.error(e),console.error("Template ID: %s",i.templateName),console.error("Parameters: %o",i.templateParams),console.groupEnd(),(0,N.of)({type:"error",error:e}))));return(0,R.T)((0,N.of)({isResolving:!0}),o).pipe((0,ec.w)(({isResolving:e,initialValue:t,resolveError:n})=>n?(0,N.of)({type:"error",message:"Failed to resolve initial value"}):e?(0,N.of)(jb):(0,N.of)({type:"success",value:t})))}),(0,ef.O)(jb),(0,ea.x)())})(a,i,t,e,n),listenQuery:(e,t,n)=>(function(e,t,n={},i={}){let a="string"==typeof t?t:t.fetch,r=jj(e,"string"==typeof t?t:t.listen,n,i).pipe((0,eu.z)((e,t)=>0!==t||jC(e)?(0,N.of)(e):(0,q._)(()=>Error("reconnect"===e.type?"Could not establish EventSource connection":`Received unexpected type of first event "${e.type}"`))),(0,Y.B)()),[o,s]=(0,Q.u)(r,jC),l=()=>jv(e,a,n,i);return(0,R.T)(o.pipe((0,eo.q)(1)),s.pipe((0,eh.h)(e=>!i.transitions||"mutation"!==e.type||i.transitions.includes(e.transition)),(0,eT.p)(i.throttleTime||1e3,G.z,{leading:!0,trailing:!0}))).pipe((0,n5.q)(e=>"mutation"===e.type&&"query"!==e.visibility?(0,V.H)(1200).pipe((0,eu.z)(l)):l()))})(l,e,t,n),resolveTypeForDocument:(e,t)=>(function(e,t,n="*"){if(n&&"*"!==n)return(0,N.of)(n);let i=iS(t),a=i_(i);return e.observable.fetch("*[_id in [$documentId, $draftId]]._type",{documentId:i,draftId:a}).pipe((0,P.U)(e=>e[0]))})(l,e,t),pair:{consistencyStatus:(e,t)=>vR(c.client,jw(e),t,o),documentEvents:(e,t)=>jt(c.client,jw(e),t,o),editOperations:(e,t)=>js(c,jw(e),t),editState:(e,t)=>vD(c,jw(e),t),operationEvents:(e,t)=>v7({client:l,historyStore:n,schema:a,serverActionsEnabled:o}).pipe((0,eh.h)(n=>n.args.idPair.publishedId===e&&n.args.typeName===t),(0,P.U)(e=>{let{operationName:t,idPair:n}=e.args;return"success"===e.type?{type:"success",op:t,id:n.publishedId}:{type:"error",op:t,id:n.publishedId,error:e.error}})),validation:(e,t)=>je(c,jw(e),t)}}}({getClient:e,documentPreviewStore:o,historyStore:r,initialValueTemplates:i,schema:n,i18n:t,serverActionsEnabled:l});return a.set({namespace:"documentStore",dependencies:[e,o,r,n,t],value:c}),c},[a,e,o,r,n,t,s,i,l])}function C$(){let{__internal:{bifur:e}}=AU(),t=C_(),n=CE(),i=function(){let{bifur:e}=AU().__internal,t=C_();return(0,d.useMemo)(()=>{let n=t.get({namespace:"connectionStatusStore",dependencies:[e]})||function({bifur:e}){var t;return{connectionStatus$:(0,R.T)(e.heartbeats,r1.pipe((0,eg.j)((0,q._)(Error("The browser went offline"))))).pipe((0,P.U)(e=>({type:"connected",lastHeartbeat:e})),(t=(e,t,n)=>{let i=Math.min(24e4,r2(t)),a=new Date(new Date().getTime()+i),r=(0,V.H)(a),o=!navigator.onLine,s=r8({error:e,retryAt:a,isOffline:o,attemptNo:t}),l=K.C.pipe((0,ex.R)(o?r0:(0,R.T)(r,r0,r5)));return(0,I.z)((0,N.of)(s),l.pipe((0,eo.q)(1)),n)},e=>{let n=[],i=(0,F.K)((e,a)=>(n.push(e),t(e,n.length,a).pipe(i)));return e.pipe((0,H.b)(()=>{n=[]}),i)}),(0,ef.O)(r3))}}({bifur:e});return t.set({namespace:"connectionStatusStore",dependencies:[e],value:n}),n},[e,t])}();return(0,d.useMemo)(()=>{let a=t.get({namespace:"presenceStore",dependencies:[e,i,n]})||function(e){let{bifur:t,connectionStatusStore:n,userStore:i}=e,[a,r]=Cj(t,CT),o=new X.X([]),s=o.pipe((0,ea.x)()),l=e=>r({type:"state",locations:e}),c=()=>r({type:"rollCall"}),d=a.pipe((0,eh.h)(e=>"rollCall"===e.type),(0,eh.h)(e=>e.sessionId!==CT)),u=(0,V.H)(0,3e4),p=(0,B.P)(()=>(0,R.T)(s,d)).pipe((0,ec.w)(()=>u),(0,eM.M)(o),(0,P.U)(([,e])=>e),(0,ez.e)(200),(0,ec.w)(e=>l(e)),(0,eg.j)(z.E),(0,Y.B)()),m=(0,B.P)(()=>c()).pipe((0,eg.j)(z.E)),h=n.connectionStatus$.pipe((0,P.U)(e=>e.type),(0,eh.h)(e=>"connected"===e||"error"===e),(0,ea.x)()),f=jR.pipe((0,P.U)(e=>e.find(e=>e.startsWith("presence="))),(0,P.U)(e=>e?.split("presence=")[1].split(",").map(e=>e.trim())||[])),g=f.pipe((0,eh.h)(e=>e.includes("fake_others")),(0,H.b)(()=>{console.log('Faking other users present in the studio. They will hang out in the document with _type: "presence" and _id: "presence-debug"')}),(0,e$.c)(Cw)),x=f.pipe((0,P.U)(e=>e.includes("show_own"))),y=(0,R.T)(m,a).pipe((0,eh.h)(e=>"state"===e.type||"disconnect"===e.type)),b=e=>({lastActiveAt:e.timestamp,locations:e.locations,sessionId:e.sessionId,userId:e.userId}),v=(0,R.T)(y,g).pipe((0,ep.R)((e,t)=>"disconnect"===t.type?t7(e,t.sessionId):{...e,[t.sessionId]:b(t)},{})),j=h.pipe((0,ec.w)(e=>"connected"===e?(0,R.T)(v,p):K.C),(0,P.U)(e=>Object.values(e)),(0,ec.w)(e=>{let t=e5(e.map(e=>e.userId));return(0,O.D)(i.getUsers(t)).pipe((0,P.U)(t=>e.map(e=>({user:t.find(t=>t.id===e.userId),session:e})).filter(C)))}),(0,ex.R)((0,L.R)(window,"beforeunload").pipe((0,ec.w)(()=>r({type:"disconnect"})))),(0,em.d)({refCount:!0,bufferSize:1}));function C(e){return!!(e.user&&e.session)}let w=j.pipe((0,P.U)(e=>{let t=eH(e.map(e=>e.session),e=>e.userId);return Object.keys(t).map(n=>({user:e.find(e=>e.user.id===n)?.user,sessions:t[n]}))}),(0,eM.M)(x),(0,P.U)(([e,t])=>e.filter(e=>!!t||!e.sessions.some(e=>e.sessionId===CT))),(0,P.U)(e=>e.map(e=>({user:e.user,status:"online",lastActiveAt:e.sessions.sort()[0]?.lastActiveAt,locations:eG((e.sessions||[]).map(e=>e.locations||[])).map(e=>({type:e.type,documentId:e.documentId,path:e.path,lastActiveAt:e.lastActiveAt})).reduce((e,t)=>e.concat(t),[])})))),k=(0,U.a)([j,x]).pipe((0,P.U)(([e,t])=>e.flatMap(e=>(e.session.locations||[]).map(t=>({documentId:t.documentId,presence:{user:e.user,lastActiveAt:e.session.lastActiveAt,path:t.path||[],sessionId:e.session.sessionId,selection:t?.selection}}))).filter(e=>t||e.presence.sessionId!==CT)),(0,em.d)(1));return{setLocation:e=>{o.next(e)},reportLocations:l,debugPresenceParam$:f,globalPresence$:w,documentPresence:e=>k.pipe((0,P.U)(t=>t.filter(t=>t.documentId===e).map(e=>e.presence)),(0,ea.x)((e,t)=>eF(e,t)))}}({bifur:e,connectionStatusStore:i,userStore:n});return t.set({namespace:"presenceStore",dependencies:[e,i,n],value:a}),a},[e,i,t,n])}function CO(){let e=C_(),t=dR(),n=Bi(rz);return(0,d.useMemo)(()=>{let i=e.get({dependencies:[t],namespace:"KeyValueStore"})||function({client:e}){let t=function({client:e}){let t=e.withConfig(rz),n=new ng(async e=>{let n=(await t.request({uri:`/users/me/keyvalue/${e.join(",")}`,withCredentials:!0}).catch(t=>(console.error("Error fetching data:",t),Array(e.length).fill(null)))).reduce((e,t)=>(t?.key&&(e[t.key]=t.value),e),{});return e.map(e=>n[e]||null)}),i=e=>(0,O.D)(n.loadMany(e)),a=e=>(0,O.D)(t.request({method:"PUT",uri:"/users/me/keyvalue",body:e,withCredentials:!0})).pipe((0,P.U)(e=>e.map(e=>(n.clear(e.key),n.prime(e.key,e.value),e.value))),(0,F.K)(t=>(console.error("Error setting data:",t),(0,N.of)(Array(e.length).fill(null)))));return{getKey:e=>i([e]).pipe((0,P.U)(e=>e[0])),setKey:(e,t)=>a([{key:e,value:t}]).pipe((0,P.U)(e=>e[0])),getKeys:i,setKeys:a}}({client:e}),n=new D.x,i=n.pipe((0,ec.w)(e=>t.setKey(e.key,e.value).pipe((0,P.U)(t=>({key:e.key,value:t})))),(0,em.d)(1));return{getKey:e=>(0,R.T)(t.getKey(e),i.pipe((0,eh.h)(t=>t.key===e),(0,P.U)(e=>e.value))),setKey:(e,t)=>(n.next({key:e,value:t}),i.pipe((0,eh.h)(t=>t.key===e),(0,P.U)(e=>e.value),(0,eo.q)(1)))}}({client:n});return e.set({dependencies:[t],namespace:"KeyValueStore",value:i}),i},[n,e,t])}function CP(e){let t=C$(),[n,i]=(0,d.useState)([]);return(0,d.useEffect)(()=>{let n=t.documentPresence(e).subscribe(i);return()=>{n.unsubscribe()}},[e,t]),n}function CF(e){if(!("diff"in e))return(0,l.jsx)(CD,{...e});let{diff:t,path:n=[],...i}=e,a=rw(t,n);return(0,l.jsx)(CD,{...i,annotations:a?[a]:[]})}function CD(e){let{annotations:t,children:n,description:i,...a}=e,{t:r}=i1();if(!t)return n;let o=(0,l.jsxs)(h.Kq,{space:2,children:[(0,l.jsx)(h.xv,{muted:!0,size:1,weight:"medium",children:i||r("changes.changed-label")}),(0,l.jsx)(h.Kq,{space:2,children:t.map((e,t)=>(0,l.jsx)(CR,{annotation:e},t))})]});return(0,l.jsx)(qP,{zOffset:"paneFooter",children:(0,l.jsx)(x.u,{content:o,portal:!0,...a,children:n})})}function CR({annotation:e}){let{author:t,timestamp:n}=e,[i]=vm(t),a=rC(rk(),e),r=Bv(n,{minimal:!0}),{t:o}=i1();return(0,l.jsxs)(h.gF,{space:2,children:[(0,l.jsxs)(h.kC,{align:"center",paddingRight:3,style:{backgroundColor:a.background,color:a.text,borderRadius:"calc(23px / 2)"},children:[(0,l.jsx)(oP,{user:t}),(0,l.jsx)(h.gF,{paddingLeft:2,children:(0,l.jsx)(h.xv,{muted:!0,size:1,style:{color:a.text},children:i?i.displayName:o("changes.loading-author")})})]}),(0,l.jsx)(h.xv,{as:"time",muted:!0,size:1,dateTime:n,children:r})]})}let CL=(0,j.zo)(h.Zb)`
  --diff-card-radius: ${({theme:e})=>(0,h.hO)(e.sanity.radius[2])};
  --diff-card-bg-color: ${({theme:e})=>e.sanity.color.card.enabled.bg};

  max-width: 100%;
  position: relative;
  border-radius: var(--diff-card-radius);
  background-color: ${({$annotationColor:e})=>e.backgroundColor};
  color: ${({$annotationColor:e})=>e.color};

  &:not(del) {
    text-decoration: none;
  }

  &[data-hover] {
    &::after {
      content: '';
      display: block;
      position: absolute;
      left: 0;
      right: 0;
      bottom: 0;
    }

    &:hover {
      border-bottom-left-radius: 0;
      border-bottom-right-radius: 0;

      &::after {
        bottom: -3px;
        border-top: 1px solid var(---diff-card-bg-color);
        border-bottom: 2px solid currentColor;
        border-bottom-left-radius: var(--diff-card-radius);
        border-bottom-right-radius: var(--diff-card-radius);
      }
    }

    [data-from-to-layout]:hover & {
      border-bottom-left-radius: 0;
      border-bottom-right-radius: 0;

      &::after {
        bottom: -3px;
        border-top: 1px solid var(---diff-card-bg-color);
        border-bottom: 2px solid currentColor;
        border-bottom-left-radius: var(--diff-card-radius);
        border-bottom-right-radius: var(--diff-card-radius);
      }
    }
  }
`,CB=[],Cq=(0,d.forwardRef)(function(e,t){let{annotation:n,as:i="div",children:a,className:r,diff:o,disableHoverEffect:s,path:c=CB,style:u={},tooltip:p,...m}=e,h=(0,d.useMemo)(()=>n||rw(o,c),[n,o,c]),f=rC(rk(),h),g=(0,l.jsx)(CL,{...m,as:i,className:r,"data-hover":s||!h?void 0:"","data-ui":"diff-card",ref:t,radius:1,$annotationColor:{backgroundColor:f.background,color:f.text},style:u,children:a});return p&&h?(0,l.jsx)(CF,{annotations:[h],description:p&&"object"==typeof p&&p.description,children:g}):g}),CV=j.zo.div`
  border-radius: ${({theme:e})=>(0,h.hO)(e.sanity.radius[2])};
  padding: ${({theme:e})=>(0,h.hO)(e.sanity.space[1])};
`,CK=(0,j.zo)(h.xv)`
  &:not([hidden]) {
    color: inherit;
  }
`;function CU(e){let{change:t,segment:n}=e;if("string"==typeof n)return(0,l.jsx)(h.xu,{children:(0,l.jsx)(h.xv,{title:n,size:1,weight:"medium",textOverflow:"ellipsis",children:n})});let{hasMoved:i,fromIndex:a,toIndex:r,annotation:o}=n,s=typeof r>"u";if(typeof a>"u")return(0,l.jsx)(CZ,{annotation:o,change:t,toIndex:r});if(s)return(0,l.jsx)(CG,{annotation:o,fromIndex:a});if(i&&"u">typeof r&&"u">typeof a)return(0,l.jsx)(CH,{annotation:o,fromIndex:a,toIndex:r});let c=(r||0)+1;return(0,l.jsx)(h.xu,{padding:1,children:(0,l.jsxs)(h.xv,{size:1,weight:"medium",children:["#",c]})})}function CZ(e){let{annotation:t,change:n,toIndex:i=0}=e,{t:a}=i1(),r=i+1,o=a("changes.array.item-added-in-position",{position:r}),s=(0,l.jsxs)(l.Fragment,{children:["#",r]}),c=(n?.diff?rw(n.diff,[]):void 0)||t;return c?(0,l.jsx)(Cq,{annotation:c,tooltip:{description:o},as:CV,children:(0,l.jsx)(CK,{size:1,weight:"medium",forwardedAs:"ins",style:{textDecoration:"none"},children:s})}):(0,l.jsx)(h.xv,{size:1,weight:"medium",children:s})}function CG(e){let{annotation:t,fromIndex:n=0}=e,{t:i}=i1(),a=n+1,r=i("changes.array.item-removed-from-position",{position:a});return(0,l.jsx)(Cq,{annotation:t||null,as:CV,tooltip:{description:r},children:(0,l.jsxs)(CK,{size:1,weight:"medium",forwardedAs:"del",children:["#",a]})})}function CH(e){let{annotation:t,fromIndex:n,toIndex:i}=e,{t:a}=i1(),r=i-n,o=a("changes.array.item-moved",{count:Math.abs(r),context:r<0?"up":"down"});return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(h.xu,{padding:1,children:(0,l.jsxs)(CK,{size:1,weight:"medium",children:["#",i+1]})}),(0,l.jsx)(Cq,{annotation:t,as:CV,tooltip:{description:o},children:(0,l.jsxs)(CK,{size:1,weight:"medium",children:[r<0?"↑":"↓",Math.abs(r)]})})]})}function CW(e){let{change:t,titlePath:n}=e;return(0,l.jsx)(h.Oo,{maxLength:4,separator:(0,l.jsx)(h.xv,{muted:!0,size:1,children:(0,l.jsx)(_.XCv,{})}),children:n.map((e,n)=>"string"==typeof e||!t||t.showIndex?(0,l.jsx)(CU,{change:t,segment:e},n):null)})}let CY=e=>{let{checkProperty:t=!1,checkPropertyKey:n,document:i,parent:a,value:r}=e,o=ij(r);return function(e,t,n){let{currentUser:i,document:a,parent:r,value:o}=n,s=(0,d.useRef)(!1);return(0,d.useMemo)(()=>{var n;let l=!1;if("boolean"==typeof e||void 0===e)return e||!1;try{l=e({document:a,parent:r,value:o,currentUser:i})}catch(e){return console.error(`An error occurred while running the callback from \`${t}\`: ${e.message}`),!1}return iO(n=l)&&"function"==typeof n?.then&&!s.current?(console.warn(`The \`${t}\` option is either a promise or a promise returning function. Async callbacks for \`${t}\` option is not currently supported.`),!1):(typeof l>"u"&&console.warn(`The \`${t}\` option is or returned \`undefined\`. \`${t}\` should return a boolean.`),l)},[e,a,r,o,i,t])}(t,n,{currentUser:vh(),document:i,parent:a,value:o})};function CJ(e,t){let n=(0,w.ay)(t)?t._type:Array.isArray(t)?"array":null===t?"null":typeof t;return e.of.find(e=>e.name===n)||(1===e.of.length?e.of[0]:void 0)}let CX=[["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""]],CQ=[["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""],["",""]],C0=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],C1=CQ.map(e=>e[0]).concat(CX.map(e=>e[0])),C2=CQ.map(e=>e[1]).concat(CX.map(e=>e[1])),C3=C1.concat(C2).concat(C0).concat("").concat("⁠"),C4=RegExp(`${C3.join("|")}`,"g"),C5=RegExp(`${C3.join("|")}|
`,"g");function C8(e){return"object"===e.jsonType&&"block"===e.name}function C6(e,t){return e.fields.children.items.filter(e=>e.diff.isChanged&&(e.diff.toValue===t||e.diff.fromValue===t)).map(e=>e.diff).map(e=>e)[0]}function C7(e,t){let n=e.find(e=>"children"===e.name);return n&&n.type&&"array"===n.type.jsonType&&n.type.of.find(e=>e.name===t._type)||void 0}function C9(e){return e.decorators?eW(e.decorators,["value"],["asc"]):[]}function we(e,t){return C9(t).some(t=>t.value===e)}function wt(e,t,n,i,a){return t?t.children.map(t=>{let r=(0,w.NG)(t)?t.text?.replace(C4,""):"";if((0,w.NG)(t)){let a=wi(e,t)?.fields.text;a&&a.toValue===t.text&&"string"===a.type&&"unchanged"!==a.action&&(r=a.segments.filter(e=>"removed"!==e.action).map(e=>e.text.replace(C4,"")).join("⁠")),t.marks&&t.marks.forEach(e=>{n[e]?r=`${n[e][0]}${r}${n[e][1]}`:i[e]&&(r=`${i[e][0]}${r}${i[e][1]}`)})}else r=a[t._key];return`\uF0D0${r}`}).join(""):""}function wn(e){let t=[...e.toValue?e.toValue.children.filter(e=>"span"!==e._type):[]];return(e.fromValue?e.fromValue.children.filter(e=>"span"!==e._type):[]).forEach(e=>{t.some(t=>e._key===t._key)||t.push(e)}),eW(t,["_key"],["asc"])}function wi(e,t){let n=e.fields.children&&"unchanged"!==e.fields.children.action&&"array"===e.fields.children.type&&e.fields.children.items.find(e=>e.diff&&"object"===e.diff.type&&("removed"===e.diff.action?e.diff.fromValue&&e.diff.fromValue._key===t._key:(e.diff.toValue&&e.diff.toValue._key)===t._key));if(n)return n.diff}function wa(e){return e&&eF(Object.keys(e),["_key","_type"])||!1}function wr(e){let t=[...e.toValue&&e.toValue.markDefs?e.toValue.markDefs:[]];return(e.fromValue&&e.fromValue.markDefs?e.fromValue.markDefs:[]).forEach(e=>{t.some(t=>e._key===t._key)||t.push(e)}),eW(t,["_key"],["asc"])}function wo(e){let t=typeof e;if("object"===t){if(null===e)return"null";if(Array.isArray(e))return"array";if(e instanceof Object&&"Object"!==e.constructor.name)return e.constructor.name}return t}function ws(e,t){let{jsonType:n}=t,i=Array.isArray(e)?"array":typeof e;if(!(null===e||"undefined"===i)){var a;if(i!==n)return{messageKey:"changes.error.incorrect-type-message",value:e,expectedType:n,actualType:wo(e)};if("object"===t.jsonType&&null!==(a=e)&&!Array.isArray(a)&&"object"==typeof a)for(let n of t.fields){let t=ws(e[n.name],n.type);if(t)return t}}}function wl(e){return"field"===e.type}let wc=[];function wd({checked:e,color:t}){return(0,l.jsxs)("svg",{width:"17",height:"17",viewBox:"0 0 17 17",xmlns:"http://www.w3.org/2000/svg",fill:t?.background,children:[(0,l.jsx)("rect",{x:"0",y:"0",width:"17",height:"17",rx:"2.5"}),typeof e>"u"&&(0,l.jsx)("path",{d:"M4.07996 8.5H12.92",stroke:t?.text,strokeWidth:"2"}),e&&(0,l.jsx)("path",{d:"M3.5 8L7 11.5L13.5 5",stroke:t?.text,strokeWidth:"2"})]})}function wu({checked:e,color:t}){return(0,l.jsxs)("svg",{width:"38",height:"22",viewBox:"0 0 38 22",xmlns:"http://www.w3.org/2000/svg",children:[(0,l.jsx)("rect",{width:"38",height:"22",rx:"11",fill:e?t?.border:t?.background}),typeof e>"u"&&(0,l.jsx)("rect",{x:"11",y:"3",width:"16",height:"16",rx:"8",fill:"white"}),e&&(0,l.jsx)("rect",{x:"18",y:"3",width:"16",height:"16",rx:"8",fill:"white"}),"boolean"==typeof e&&!e&&(0,l.jsx)("rect",{x:"4",y:"3",width:"16",height:"16",rx:"8",fill:"white"})]})}let wp=j.zo.div`
  display: inline-block;
  word-wrap: break-word;
`,wm=function({value:e,schemaType:t}){return(0,l.jsx)(h.xu,{as:wp,paddingX:2,paddingY:1,children:function(e,t){let{options:n,name:i}=t,a=n?.dateFormat||eq.K_,r=n?.timeFormat||eq._r;return eq.WU(new Date(e),"date"===i?a:`${a} ${r}`)}(e,t)})},wh=({diff:e,schemaType:t})=>(0,l.jsx)(kD,{align:"center",diff:e,layout:"grid",previewComponent:wm,schemaType:t});function wf(){let e=(0,d.useContext)(p.H7);if(!e)throw Error("DocumentChange: missing context value");return e}function wg(e){let[t,n]=(0,d.useState)(void 0),i=Bi(rz);return(0,d.useEffect)(()=>{if(!e)return;let t=i.observable.getDocument(e).subscribe(n);return()=>{t.unsubscribe()}},[i,e]),e?t:void 0}function wx(e,t){return e<1e3?t(e,"byte"):e<1e6?t(e/1e3,"kilobyte"):e<1e9?t(e/1e6,"megabyte"):e<1e12?t(e/1e9,"gigabyte"):t(e/1e12,"terabyte")}let wy=j.zo.div`
  ${({theme:e})=>`
    --size-diff-positive: ${e.sanity.color.solid.positive.enabled.bg};
    --size-diff-negative: ${e.sanity.color.solid.critical.enabled.bg};
  `}
  &:not([hidden]) {
    display: inline-block;
  }

  [data-number='positive'] {
    color: var(--size-diff-positive);
  }

  [data-number='negative'] {
    color: var(--size-diff-negative);
  }
`;function wb(e,t){return`rgba(${(/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e)||[]).slice(1).map(e=>parseInt(e,16)).concat(t).join(", ")})`}function wv(e){let{crop:t,diff:n,hash:i,hotspot:a,width:r=100,height:o=100,...s}=e,{t:c}=i1(),d=rI(n,"crop"),u=rI(n,"hotspot");return(0,l.jsxs)("svg",{...s,fill:"none",width:r,height:o,viewBox:`0 0 ${r} ${o}`,children:[(0,l.jsx)("defs",{children:t&&a&&(0,l.jsxs)("mask",{id:`mask-hotspot-${i}`,children:[(0,l.jsx)("rect",{x:0,y:0,width:r,height:o,fill:"#fff"}),(0,l.jsx)(wC,{hotspot:a,fill:"#000",offset:1,width:r,height:o,stroke:"#000",strokeWidth:3})]})}),t&&(0,l.jsx)(CF,{diff:n,path:"crop",description:c("changes.image.crop-changed"),children:(0,l.jsx)("g",{children:(0,l.jsx)(wj,{crop:t,fill:wb(d.border,.25),mask:a?`url(#mask-hotspot-${i})`:void 0,stroke:d.border,strokeWidth:1,width:r,height:o})})}),a&&(0,l.jsx)(CF,{diff:n,path:"hotspot",description:c("changes.image.crop-changed"),children:(0,l.jsx)("g",{children:(0,l.jsx)(wC,{hotspot:a,fill:wb(u.border,.25),stroke:u.border,strokeWidth:1,width:r,height:o})})})]})}function wj({crop:e,width:t,height:n,...i}){let a={x:e.left*t,y:e.top*n,width:(1-e.right-e.left)*t,height:(1-e.bottom-e.top)*n};return(0,l.jsx)("rect",{...i,...a,style:{vectorEffect:"non-scaling-stroke"}})}function wC({hotspot:e,offset:t=0,width:n,height:i,...a}){let r={cx:e.x*n,cy:e.y*i,rx:e.width/2*n+t,ry:e.height/2*i+t};return(0,l.jsx)("ellipse",{...a,...r,style:{vectorEffect:"non-scaling-stroke"}})}let ww=["originalFilename"],wk=()=>{let{t:e}=i1();return(0,l.jsx)(h.Zb,{flex:1,tone:"transparent",padding:4,radius:2,height:"stretch",children:(0,l.jsx)(h.kC,{align:"center",justify:"center",height:"fill",children:(0,l.jsx)(h.xv,{size:1,muted:!0,children:e("changes.image.no-image-placeholder")})})})},wT=j.zo.div`
  height: 100%;
  max-height: 190px;
  position: relative;

  /* Ideally the checkerboard component currently in the form builder should be made available and used here */
  background-color: ${M.VG.gray[100].hex};
  background-image: linear-gradient(45deg, ${M.VG.gray[50].hex} 25%, transparent 25%),
    linear-gradient(-45deg, ${M.VG.gray[50].hex} 25%, transparent 25%),
    linear-gradient(45deg, transparent 75%, ${M.VG.gray[50].hex} 75%),
    linear-gradient(-45deg, transparent 75%, ${M.VG.gray[50].hex} 75%);
  background-size: 16px 16px;
  background-position:
    0 0,
    0 8px,
    8px -8px,
    -8px 0;

  &::after {
    content: '';
    display: block;
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    box-shadow: inset 0 0 0 1px var(--card-border-color);
    pointer-events: none;
  }

  &[data-changed] {
    opacity: 0.45;
  }
`,wA=j.zo.img`
  display: block;
  flex: 1;
  min-height: 0;
  object-fit: contain;
  width: 100%;
  height: 100%;

  &[data-action='removed'] {
    opacity: 0.45;
  }
`,w_=j.zo.div`
  svg {
    display: block;
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
  }
`;function wS(e){let t;let{id:n,action:i,diff:a,hotspot:r,crop:o,is:s}=e,{t:c}=i1(),u=Bi(rz),[p,m]=(0,d.useState)(),{value:f}=function(e,t){let n=CI();return iW((0,d.useMemo)(()=>e?n.observePaths({_type:"reference",_ref:e},t):(0,N.of)(void 0),[e,n,t]))}(n,ww),g=(0,eU.pz)(n),x=(0,d.useMemo)(()=>eZ(u),[u]),y=null===f,b=f&&f.originalFilename,v=x.image(n).height(190).dpr(Math.min(3,Math.max(1,Math.ceil(window.devicePixelRatio||1)))).fit("max"),j=a.fromValue?.asset?._ref!==a.toValue?.asset?._ref;return i&&"changed"!==i&&(t=c("added"===i?"changes.added-label":"changes.removed-label")),(0,l.jsxs)(h.kC,{direction:"column",height:"fill",flex:1,children:[(0,l.jsx)(h.xu,{flex:1,padding:2,paddingBottom:0,children:(0,l.jsxs)(h.kC,{as:wT,direction:"column","data-changed":"from"===s&&j?"":void 0,"data-error":p?"":void 0,children:[!y&&!p&&(0,l.jsx)(wA,{src:v.toString()||"",alt:b,"data-action":"changed"===i?void 0:i,onError:m,width:g.width,height:g.height}),(y||p)&&(0,l.jsx)(h.xu,{paddingY:5,children:(0,l.jsx)(h.xv,{size:1,muted:!0,align:"center",children:c(y?"changes.image.deleted":"changes.image.error-loading-image")})}),(0,l.jsx)(w_,{children:(0,l.jsx)(wv,{crop:o&&!(0,eU.aM)(o)?o:void 0,diff:a,hash:function(e){let t=0;if(0==e.length)return t.toString();for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t&=t;return t.toString()}(`${v.toString()||""}-${s}`),hotspot:r&&!(0,eU.Rq)(r)?r:void 0,width:g.width,height:g.height})})]})}),(0,l.jsx)(k4,{title:b||c("changes.image.meta-info-fallback-title"),icon:_.XBm,markRemoved:j&&"from"===s,children:t?(0,l.jsx)("div",{children:t}):(0,l.jsxs)("div",{children:[g.width," \xd7 ",g.height]})})]})}let wE=["asset","crop","hotspot"],wM={flex:1},wN=j.zo.div`
  display: inline-block;
  word-break: break-all;
`,wI=e=>{let{value:t}=e;return(0,l.jsx)(h.xu,{as:wN,paddingX:2,paddingY:1,children:t})},wz=(0,j.zo)(h.xu)`
  &:not([hidden]) {
    display: inline;
    align-items: center;

    &[data-changed] {
      cursor: pointer;
    }
  }
`,w$=(0,j.zo)(h.xv)`
  &:not([hidden]) {
    display: inline;
    color: inherit;
  }
`,wO=(0,j.zo)(h.xu)`
  &:not([hidden]) {
    display: inline-flex;
    align-items: center;

    ${wz} [data-ui="Text"] {
      opacity: 0.5;
    }
  }
`,wP=(0,j.zo)(h.xu)`
  min-width: 160px;
  max-height: 40vh;
  overflow-y: auto;
`,wF=j.zo.div`
  text-decoration: none;
  display: inline;
  position: relative;
  border: 0;
  padding: 0;
  border-bottom: 2px dotted currentColor;
  box-shadow: inset 0 0 0 1px var(--card-border-color);
  white-space: nowrap;
  align-items: center;
  background-color: color(var(--card-fg-color) a(10%));

  &[data-changed] {
    cursor: pointer;
  }

  &[data-removed] {
    text-decoration: line-through;
  }

  &:hover ${wO} {
    opacity: 1;
  }
`;function wD({children:e,diff:t,object:n,schemaType:i,path:a,...r}){let{t:o}=i1();return i?t&&"unchanged"!==t.action?(0,l.jsx)(wR,{...r,diff:t,object:n,schemaType:i,path:a,children:e}):(0,l.jsx)(wF,{children:e}):(0,l.jsx)(wF,{...r,children:o("changes.portable-text.unknown-annotation-schema-type")})}function wR({diff:e,children:t,object:n,schemaType:i,path:a,...r}){let{onSetFocus:o}=(0,d.useContext)(p.In),{path:s}=(0,d.useContext)(p.AO),u=(0,d.useRef)(null),{t:m}=i1(),f=rI(e,[]),g=(0,d.useMemo)(()=>f?{background:f.background,color:f.text}:{},[f]),y="removed"===e.action,[b,v]=(0,d.useState)(!1),j=n&&wa(n),C=(0,d.useMemo)(()=>[a[0]].concat(["markDefs",{_key:n._key}]),[n._key,a]),k=(0,d.useMemo)(()=>s.slice(0,s.findIndex(e=>(0,w.Fd)(e)&&e._key===n._key)),[s,n._key]),T=(0,d.useMemo)(()=>k.concat(a),[a,k]),A=(0,d.useMemo)(()=>k.concat(C),[C,k]),S=`field-${(0,c.BB)(A)}`,E=iy(),M=(0,d.useMemo)(()=>E.filter(([e])=>e.startsWith(S)).length>0,[S,E]);(0,d.useEffect)(()=>{!b&&M&&(v(!0),o(A))},[M,A,o,b]);let N=(0,d.useCallback)(e=>{e.stopPropagation(),v(!0),y||(e.preventDefault(),o(T),setTimeout(()=>o(A),10))},[T,y,A,o]);(0,h.Of)(!M&&(()=>v(!1)),()=>[u.current]);let I="unchanged"!==e.action&&e.annotation||null,z=(0,d.useMemo)(()=>I?[I]:[],[I]),$=(0,d.useMemo)(()=>({path:A}),[A]),O=(0,l.jsx)(p.AO.Provider,{value:$,children:(0,l.jsx)(wP,{padding:3,children:(0,l.jsxs)("div",{children:[j&&(0,l.jsx)(h.xv,{muted:!0,size:1,weight:"medium",children:m("changes.portable-text.empty-object-annotation",{annotationType:i.title||i.name})}),!j&&(0,l.jsx)(kX,{diff:e,schemaType:i})]})})});return(0,l.jsx)(wF,{...r,onClick:N,style:g,"data-changed":"","data-removed":"removed"===e.action?"":void 0,children:(0,l.jsx)(x.J2,{content:O,open:b,ref:u,portal:!0,children:(0,l.jsx)(wO,{paddingLeft:1,children:(0,l.jsx)(CF,{annotations:z,description:m("changes.portable-text.annotation",{context:e.action}),children:(0,l.jsxs)(wz,{style:{display:"inline-flex"},children:[(0,l.jsx)("span",{children:t}),(0,l.jsx)(h.kC,{align:"center",paddingX:1,children:(0,l.jsx)(w$,{size:0,children:(0,l.jsx)(_.v4q,{})})})]})})})})})}let wL=j.zo.blockquote`
  margin: 0;
`;function wB({children:e}){return(0,l.jsx)("div",{children:(0,l.jsx)(wL,{children:e})})}let wq={h1:2,h2:1,h3:0,h4:0,h5:0,h6:0},wV=(0,j.zo)(h.X6)`
  &:not([hidden]) {
    display: inline;
    text-transform: none;
    margin: 0;

    &::before,
    &::after {
      content: unset;
    }
  }
`;function wK({style:e,children:t}){return(0,l.jsx)(wV,{size:wq[e],children:t})}let wU=j.zo.div`
  text-transform: none;
  white-space: wrap;
  overflow-wrap: break-word;
  margin: 0;
`;function wZ({children:e}){return(0,l.jsx)(wU,{children:e})}let wG=[];function wH(e){let t;let{diff:n,block:i,children:a}=e,r=rI(n,wG),{path:o}=(0,d.useContext)(p.AO),{onSetFocus:s}=(0,d.useContext)(p.In),{t:c}=i1(),u="removed"===n.action,m=a,f=(0,d.useCallback)(e=>{e.stopPropagation(),u||s(o)},[o,u,s]);if(m="blockquote"===i.style?(0,l.jsx)(wB,{children:m}):i.style&&(0,w.DG)(i)&&i.style&&["h1","h2","h3","h4","h5","h6"].includes(i.style)?(0,l.jsx)(wK,{style:i.style,children:m}):(0,l.jsx)(wZ,{children:m}),"changed"===n.origin.action&&n.origin.fields.style&&"changed"===n.origin.fields.style.action&&n.origin.fields.style.annotation){t=n?.origin?.fromValue?.style;let e=r?{background:r.background,color:r.text}:{};m=(0,l.jsx)(h.Zb,{padding:3,border:!0,radius:2,style:{borderStyle:"dotted"},"diff-block-action":n.action,"data-block-note":`changed_from_style_${t||"undefined"}`,children:(0,l.jsxs)(h.Kq,{space:2,children:[(0,l.jsx)(CF,{annotations:[n.origin.fields.style?.annotation],diff:n.origin.fields.style,children:(0,l.jsx)(h.xv,{size:0,children:c("changes.portable-text.block-style-changed",{fromStyle:t,toStyle:i.style})})}),(0,l.jsx)(h.xu,{style:e,children:m})]})})}return(0,l.jsx)("div",{onClick:f,"data-diff-block-action":n.action,"data-block-note":`changed_from_style_${t||"undefined"}`,children:m})}let wW=j.zo.span`
  display: inline;
  ${({theme:e,decoration:t})=>{switch(t){case"strong":return"font-weight: bold;";case"em":return"font-style: italic;";case"underline":return"text-decoration: underline;";case"overline":return"text-decoration: overline;";case"strike-through":return"text-decoration: line-through;";case"code":return`
          font-family: ${e.sanity.fonts.code.family};
          background: ${e.sanity.color.muted.default.enabled.bg};
        `;default:return""}}}
`;function wY({mark:e,children:t}){return(0,l.jsx)(wW,{decoration:e,children:t})}let wJ=(0,j.zo)(h.Zb)`
  &:not([hidden]) {
    display: inline;
    cursor: pointer;
    white-space: nowrap;
    align-items: center;

    &[data-removed] {
      text-decoration: line-through;
    }

    ${wz} {
      display: inline-flex;
    }
  }
`;function wX({diff:e,object:t,schemaType:n,...i}){let{t:a}=i1();return n?e?(0,l.jsx)(wQ,{...i,diff:e,object:t,schemaType:n}):(0,l.jsx)(wJ,{children:(0,l.jsx)(bq,{schemaType:n,value:t,layout:"inline"})}):(0,l.jsx)(wJ,{...i,border:!0,radius:1,children:a("changes.portable-text.unknown-inline-object-schema-type",{schemaType:t._type})})}function wQ({diff:e,object:t,path:n,schemaType:i,...a}){let{path:r}=(0,d.useContext)(p.AO),{onSetFocus:o}=(0,d.useContext)(p.In),{t:s}=i1(),u=rI(e,[]),m=(0,d.useMemo)(()=>u?{background:u.background,color:u.text}:{},[u]),[f,g]=(0,d.useState)(!1),y=t&&wa(t),b="removed"===e.action,v=r.slice(0,r.findIndex(e=>(0,w.Fd)(e)&&e._key===t._key)).concat(n),j=`field-${(0,c.BB)(v)}`,C=iy().filter(([e])=>e.startsWith(j)).length>0,k=r.slice(0,-1).concat(n).concat([c.Zg]);(0,d.useEffect)(()=>{C&&(g(!0),o(k))},[k,C,o]);let T=(0,d.useCallback)(e=>{if(e.stopPropagation(),g(!0),!b){o(k);return}e.preventDefault()},[k,b,o]),A=(0,d.useCallback)(()=>{g(!1)},[]),S=(0,d.useMemo)(()=>({path:v}),[v]),E=(0,l.jsx)(p.AO.Provider,{value:S,children:(0,l.jsx)(w0,{diff:e,emptyObject:y,onClose:A,schemaType:i})}),M="unchanged"!==e.action&&e.annotation||null;return(0,l.jsx)(wJ,{...a,onClick:T,style:m,"data-removed":"removed"===e.action?"":void 0,border:!0,radius:2,children:(0,l.jsx)(x.J2,{content:E,open:f,portal:!0,children:(0,l.jsx)(wO,{children:(0,l.jsx)(CF,{annotations:M?[M]:[],description:s("changes.portable-text.inline-object",{context:e.action}),children:(0,l.jsxs)(wz,{children:[(0,l.jsx)(bq,{schemaType:i,value:t,layout:"inline"}),(0,l.jsx)(h.kC,{align:"center",paddingX:1,children:(0,l.jsx)(w$,{size:0,children:(0,l.jsx)(_.v4q,{})})})]})})})})})}function w0({diff:e,emptyObject:t,onClose:n,schemaType:i}){let{t:a}=i1(),r=(0,d.useRef)(null);return(0,h.Of)(n,()=>[r.current]),(0,l.jsxs)(wP,{ref:r,padding:3,children:[t&&(0,l.jsx)(h.xv,{muted:!0,size:1,weight:"medium",children:a("changes.portable-text.empty-inline-object",{inlineObjectType:i.title||i.name})}),!t&&(0,l.jsx)(kX,{diff:e,schemaType:i})]})}function w1({diff:e,childDiff:t,children:n,path:i,segment:a,...r}){let o=e||t;return o&&"unchanged"!==o.action&&"unchanged"!==a.action?(0,l.jsx)(w2,{...r,childDiff:t,diff:e,segment:a,path:i,children:n}):(0,l.jsx)(wz,{children:n})}function w2({diff:e,childDiff:t,children:n,path:i,segment:a,...r}){let{onSetFocus:o}=(0,d.useContext)(p.In),{path:s}=(0,d.useContext)(p.AO),c=(0,d.useMemo)(()=>i.slice(-2,1)[0],[i]),{t:u}=i1(),m=e&&"removed"===e.action,h=s.slice(0,s.findIndex(e=>(0,w.Fd)(e)&&(0,w.Fd)(c)&&e._key===c._key)).concat(i),f=(0,d.useCallback)(e=>{e.stopPropagation(),m||(e.preventDefault(),o(h))},[h,m,o]),g=e&&e.segments.find(e=>e.text===a.text)||e||t,x=g&&"unchanged"!==g.action&&g.annotation||null,y=x&&"unchanged"!==a.action?(0,l.jsx)(Cq,{annotation:x,as:"removed"===a.action?"del":"ins",tooltip:{description:u("changes.portable-text.text",{context:a.action})},children:n}):null;return(0,l.jsx)(wz,{...r,onClick:f,"data-changed":"",children:(0,l.jsx)("span",{children:(0,l.jsx)(l.Fragment,{children:y||n})})})}let w3=CQ.map(e=>e[0]),w4=CQ.map(e=>e[1]),w5=CX.map(e=>e[0]),w8=CX.map(e=>e[1]),w6=w3.concat(w5),w7=w4.concat(w8),w9=w3.concat(w4),ke=RegExp(`${w9.concat(w7).join("|")}`,"g");function kt(e){let{diff:t,schemaType:n}=e,i=t.origin.toValue||t.origin.fromValue,{t:a}=i1(),r=(0,d.useMemo)(()=>t.origin.toValue?wn(t.origin):[],[t.origin]),o=(0,d.useCallback)(e=>{let o=C7(n.fields,e),s=[];if(o){let e;s=C9(o);let c=t.fields.children,u=c.items[0].diff&&"object"===c.items[0].diff.type&&"string"===c.items[0].diff.fields.text.type&&c.items[0].diff.fields.text.segments||[],p=[],m={};if(1===i.children.length&&"span"===i.children[0]._type&&"string"==typeof i.children[0].text&&""===i.children[0].text&&"unchanged"!==t.origin.action&&("added"===t.origin.action||"removed"===t.origin.action)){let e=C6(t.origin,i.children[0])||t.origin;if(e&&"unchanged"!==e.action)return(0,l.jsx)(Cq,{annotation:e.annotation,as:"removed"===e.action?"del":"ins",tooltip:{description:a("changes.portable-text.empty-text",{context:e.action})},children:(0,l.jsx)("span",{children:"↲"})},`empty-block-${i._key}`)}let h=-1,f=-1,g=[],x=wr(t.origin);return u.forEach(c=>{f++;let d=C0.includes(c.text),u=w6.includes(c.text),y=w7.includes(c.text),b=""===c.text,v="removed"===c.action;if(b)v||h++;else if(u||y){if(u&&w5.includes(c.text)){let e=x[w5.indexOf(c.text)];e&&g.push({mark:e._key,symbols:[c.text,w8[w5.indexOf(c.text)]],object:e})}y&&w8.includes(c.text)&&(e=g.pop())}else if(d){let e=C0.findIndex(e=>e===c.text),a=r[e]?._key,o=r[e];if(a){let e=C7(n.fields,o),a=C6(t.origin,o);p.push((0,l.jsx)(wX,{object:o,path:[{_key:i._key},"children",{_key:o._key}],diff:a,schemaType:e},`inline-object-${o._key}`))}}else if(c.text){let n=i.children[h]||t.origin.fromValue?.children.find(e=>e.text&&e.text.match(c.text.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"))),r=n&&wi(t.origin,n);if(!n)throw Error("Could not find child");let d=r?.fields?.text?r?.fields?.text:void 0,u=(0,l.jsx)(w1,{diff:d,path:[{_key:i._key},"children",{_key:n._key}],childDiff:r,segment:c,children:function({diff:e,child:t,decoratorTypes:n,seg:i,segIndex:a,spanSchemaType:r,t:o}){if(i.text===`
`)return(0,l.jsx)("br",{});let s=(0,l.jsx)("span",{children:i.text.replace(/ /g," ")},`text-${a}`),c=t&&wi(e.origin,t),d=(0,w.NG)(t)&&t.marks||[];return c&&(s=function({activeMarks:e,decoratorTypes:t,diff:n,children:i,seg:a,segIndex:r,spanDiff:o,spanSchemaType:s,t:c}){let d=(0,l.jsx)("span",{children:i},`text-segment-${r}`),u=n.origin.fromValue&&n.fromValue&&n.fromValue.children[0].text||"",p=o&&"unchanged"!==o.action&&o.annotation||void 0,m=o?.fields?.marks,h=m&&"unchanged"!==m.action&&m.annotation||p,f=[],g=u.split("").filter(e=>!!e).join(""),x=g.slice(0,Math.max(0,g.indexOf(a.text)+a.text.length)),y=x.slice(0,Math.max(0,x.indexOf(a.text))),b=[];return[...y.matchAll(ke)].forEach(e=>{let n=e[0],i=CQ.concat(CX).find(e=>e.indexOf(n)>-1);if(i){let e=n===i[0],a=t[e?w3.indexOf(n):w4.indexOf(n)]?.value||n;y.lastIndexOf(n)>y.lastIndexOf(i[1])&&b.push(a)}}),f=id(e,e5(b)),h&&f.length>0&&f.some(e=>we(e,s))&&(d=(0,l.jsx)(Cq,{annotation:h,as:"ins",tooltip:{description:c("changes.portable-text.changed-formatting")},children:d},`diffcard-annotation-${r}-${f.join("-")}`)),d}({activeMarks:d,decoratorTypes:n,diff:e,children:s,seg:i,segIndex:a,spanDiff:c,spanSchemaType:r,t:o})),d&&d.length>0&&d.forEach(e=>{we(e,r)&&(s=(0,l.jsx)(wY,{mark:e,children:s},`decorator-${e}-${t._key}-${a}`))}),s}({diff:t,child:n,decoratorTypes:s,seg:c,segIndex:f,spanSchemaType:o,t:a})},`text-${n._key}-${f}`);if(g.length>0&&g.forEach(e=>{m[e.mark]=m[e.mark]||[],m[e.mark].push(u)}),e){let a=`annotation-${e.object._key}`,r=p[p.length-1];if(r&&r.key!==a){var j,C;let r=(j=t.origin,C=e.mark,j.fields.markDefs&&j.fields.markDefs.isChanged&&"array"===j.fields.markDefs.type&&j.fields.markDefs.items.find(e=>e.diff&&"object"===e.diff.type&&(e.diff.toValue&&e.diff.toValue._key&&e.diff.toValue._key===C||e.diff.fromValue&&e.diff.fromValue._key&&e.diff.fromValue._key===C))?.diff||void 0),s=e&&o.annotations&&o.annotations.find(t=>e&&e.object&&t.name===e.object._type);p.push((0,l.jsx)(wD,{object:e.object,diff:r,path:[{_key:i._key},"children",{_key:n._key}],schemaType:s,children:(0,l.jsx)(l.Fragment,{children:m[e.mark]})},a))}e=void 0}0===g.length&&p.push(u)}}),(0,d.createElement)("div",{key:i._key},...p)}throw Error("'span' schemaType not found")},[i,t,r,n,a]);return(0,l.jsx)(wH,{block:t.displayValue,diff:t,children:(0,l.jsx)(l.Fragment,{children:(t.displayValue.children||[]).map(e=>o(e))})})}let kn=j.zo.div`
  word-wrap: break-word;
`,ki=({value:e,schemaType:t})=>(0,l.jsx)(h.xu,{as:kn,padding:2,children:(0,l.jsx)(bq,{schemaType:t,value:e,layout:"default"})}),ka=j.zo.div`
  display: inline-block;
  word-break: break-all;
  white-space: pre-wrap;
`,kr=e=>{let{value:t}=e;return(0,l.jsx)(h.xu,{as:ka,paddingX:2,paddingY:1,children:t})},ko=j.zo.div`
  white-space: pre-wrap;
  word-wrap: break-word;
`,ks={block:e=>{let{diff:t,schemaType:n}=e,i=(0,d.useMemo)(()=>(function(e,t){let n="removed"===e.action?e.fromValue:e.toValue,i={...e,origin:e,displayValue:n};if(n){let a={},r={},o={},s=C7(t.fields,{_key:"bogus",_type:"span"});s&&C9(s).forEach((e,t)=>{r[e.value]=CQ[t]}),wr(i.origin).forEach((e,t)=>{a[e._key]=CX[t]}),wn(i.origin).forEach((e,t)=>{o[e._key]=C0[t]});let l=wt(i.origin,i.fromValue,r,a,o),c=wt(i.origin,i.toValue,r,a,o),d={...n,children:[{_type:"span",_key:"pseudoSpanKey",text:c,marks:[]}]},u={displayValue:n,children:[{_type:"span",_key:"pseudoSpanKey",text:l,marks:[]}]};return{origin:e,action:"changed",type:"object",displayValue:d,fromValue:u,toValue:d,isChanged:!0,fields:{children:{action:"changed",type:"array",isChanged:!0,items:[{diff:{action:"changed",type:"object",isChanged:!0,fields:{text:{type:"string",action:"changed",isChanged:!0,fromValue:l,toValue:c,segments:(function(e,t){let n=[],i=(0,nr.Hy)((0,nr.$T)(e,t)),a=0,r=0;for(let[o,s]of i)switch(o){case nr.JZ:n.push({type:"stringSegment",action:"unchanged",text:s}),a+=s.length,r+=s.length;break;case nr.NL:n.push({type:"stringSegment",action:"removed",text:e.slice(a,a+s.length),annotation:null}),a+=s.length;break;case nr.D$:n.push({type:"stringSegment",action:"added",text:t.slice(r,r+s.length),annotation:null}),r+=s.length}return eG(n.map(e=>{let t=[];if(e.text.length>1){let n=[...e.text.matchAll(C5)],i=-1;n.forEach(a=>{let r=a.index||0;r>i&&(t.push({...e,text:e.text.slice(i+1,r)}),t.push({...e,text:a[0]})),a===n[n.length-1]&&t.push({...e,text:e.text.slice(Math.max(0,r+1))}),i=r}),0===n.length&&t.push(e)}else t.push(e);return t}))})(l,c).map(e=>({...e,..."unchanged"!==i.action&&i.annotation?{annotation:i.annotation}:{}}))}},fromValue:u.children[0],toValue:d.children[0]},annotation:null,fromIndex:0,toIndex:0,hasMoved:!1}],fromValue:u.children,toValue:d.children}}}}throw Error("Can not display this diff")})(t,n),[t,n]);return(0,l.jsx)("div",{"data-diff-action":t.action,children:(0,l.jsx)(kt,{diff:i,schemaType:n})})},boolean:{component:({diff:e,schemaType:t})=>{let{fromValue:n,toValue:i}=e,{title:a,options:r}=t,o=r?.layout==="checkbox"?wd:wu,s=rI(e,[]),{showFromValue:c}=wf(),d=null!=i;return(0,l.jsxs)(h.kC,{align:"center",children:[(0,l.jsx)(CF,{diff:e,children:(0,l.jsxs)(h.kC,{align:"center",children:[c&&(0,l.jsx)(o,{checked:n,color:s}),d&&(0,l.jsxs)(l.Fragment,{children:[c&&(0,l.jsx)(h.xu,{marginX:2,children:(0,l.jsx)(kT,{})}),(0,l.jsx)(o,{checked:i,color:s})]})]})}),d&&a&&(0,l.jsx)(h.xu,{marginLeft:2,children:(0,l.jsx)(h.xv,{size:1,weight:"medium",children:a})})]})},showHeader:!1},date:wh,datetime:wh,file:({diff:e,schemaType:t})=>{var n,i;let{fromValue:a,toValue:r,fields:o}=e,s=a?.asset,c=r?.asset,{t:u}=i1(),p=wg(s?._ref),m=wg(c?._ref),f=Ac({unitDisplay:"short",maximumFractionDigits:2}),g=Object.entries(o).filter(([e,t])=>t.isChanged&&"_type"!==e).map(([e])=>e),x=g.includes("asset"),y=t.fields.filter(e=>"asset"!==e.name&&g.includes(e.name)).map(e=>e.name),b=(n=p?.size,i=m?.size,n&&i?Math.round((i-n)/n*100):0),v=p?.size&&wx(p.size,f),j=m?.size&&wx(m.size,f),C=(0,d.useMemo)(()=>({display:"block",flex:1}),[]),w=p&&(0,l.jsx)(Cq,{as:"del",diff:e,path:"asset._ref",style:C,children:(0,l.jsx)(k4,{title:p.originalFilename||u("changes.file.meta-info-fallback-title"),icon:_.$lS,children:(0,l.jsx)(h.xv,{size:0,style:{color:"inherit"},children:v})})}),k=m&&(0,l.jsx)(Cq,{as:"ins",diff:e,path:"asset._ref",style:C,children:(0,l.jsx)(k4,{title:m.originalFilename||u("changes.file.meta-info-fallback-title"),icon:_.$lS,children:(0,l.jsxs)(h.kC,{align:"center",children:[(0,l.jsx)(h.xv,{size:0,style:{color:"inherit"},children:j}),0!==b&&(0,l.jsx)(h.Zb,{radius:2,padding:1,as:wy,marginLeft:2,children:(0,l.jsxs)(h.xv,{size:0,"data-number":b>0?"positive":"negative",children:[b>0?"+":"-",b,"%"]})})]})})}),T=(0,l.jsxs)(l.Fragment,{children:[w&&!k&&(0,l.jsx)(CF,{diff:e,path:"asset._ref",description:u("changes.removed-label"),children:w}),w&&k&&(0,l.jsx)(CF,{diff:e,path:"asset._ref",children:(0,l.jsx)(kP,{from:w,layout:"grid",to:k})}),!w&&k&&(0,l.jsx)(CF,{diff:e,path:"asset._ref",description:u("changes.added-label"),children:k})]});return(0,l.jsxs)(l.Fragment,{children:[x&&T,y.length>0&&(0,l.jsx)(h.xu,{marginTop:x?4:3,children:(0,l.jsx)(kX,{diff:e,schemaType:t,fields:y})})]})},image:({diff:e,schemaType:t})=>{let{t:n}=i1(),{showFromValue:i}=wf(),{fromValue:a,toValue:r,fields:o,isChanged:s}=e,c=a?.asset?._ref,d=r?.asset?._ref,u=rw(e,["asset","_ref"]),p=Object.keys(o).filter(e=>o[e].isChanged&&"_type"!==e),m=t.fields.filter(e=>!wE.includes(e.name)&&p.includes(e.name)).map(e=>e.name),f="changed";!c&&d?f="added":!d&&c&&(f="removed");let g=p.includes("asset"),x=p.includes("crop"),y=p.includes("hotspot"),b=x||y,v=g||b,j=b&&!g,C=a&&c?(0,l.jsx)(Cq,{annotation:u,style:wM,children:(0,l.jsx)(wS,{is:"from",id:c,diff:e,action:f,hotspot:j&&y?a.hotspot:void 0,crop:j&&x?a.crop:void 0})}):(0,l.jsx)(wk,{}),w=r&&d?(0,l.jsx)(Cq,{annotation:u,style:wM,children:(0,l.jsx)(wS,{is:"to",id:d,diff:e,hotspot:j&&y?r.hotspot:void 0,crop:j&&x?r.crop:void 0})}):(0,l.jsx)(wk,{});if(!C&&!w)return(0,l.jsx)(h.Zb,{padding:4,radius:2,tone:"transparent",children:(0,l.jsx)(h.xv,{muted:!0,size:1,align:"center",children:n("changes.image.no-asset-set")})});if(!s)return d?(0,l.jsx)(Cq,{annotation:u,style:wM,children:(0,l.jsx)(wS,{id:d,is:"to",diff:e})}):null;let k=(0,l.jsx)(kP,{align:"center",from:i?C:void 0,layout:"grid",to:w});return(0,l.jsxs)(l.Fragment,{children:[v&&(g?(0,l.jsx)(CF,{annotations:u?[u]:[],description:function(e,t){switch(e){case"changed":return t("changes.changed-label");case"added":return t("changes.added-label");case"removed":return t("changes.removed-label");default:return"Unknown change"}}(f,n),children:k}):k),m.length>0&&(0,l.jsx)(h.xu,{marginTop:v?4:3,children:(0,l.jsx)(kX,{diff:e,schemaType:t,fields:m})})]})},number:({diff:e,schemaType:t})=>(0,l.jsx)(kD,{diff:e,schemaType:t,previewComponent:wI,layout:"inline"}),reference:({diff:e,schemaType:t})=>(0,l.jsx)(kD,{align:"center",diff:e,layout:"grid",path:"_ref",previewComponent:ki,schemaType:t}),string:({diff:e,schemaType:t})=>{let{options:n}=t;return n?.list?(0,l.jsx)(kD,{diff:e,previewComponent:kr,schemaType:t}):(0,l.jsx)(ko,{children:(0,l.jsx)(k2,{diff:e})})}};function kl(e,t){let n=e;for(;n;){let e=n?.components?.diff||function(e,t){let n;for(let i of wc){if("function"!=typeof i){console.error("Diff component resolver is not a function: ",i);continue}if(n=i({schemaType:e,parentSchemaType:t}))return n}}(n,t)||ks[n.name];if(e)return e;n=n.type}return ks[["date","datetime"].includes(e.name)?e.name:e.jsonType]}function kc(e,t,n=[],i=[],a={}){if(!kl(e,a.parentSchema)){if("object"===e.jsonType&&"object"===t.type)return kd(e,t,n,i,a);if("array"===e.jsonType&&"array"===t.type)return function(e,t,n=[],i=[]){let a=t.items.filter(e=>e.hasMoved&&e.fromIndex!==e.toIndex||"unchanged"!==e.diff.action);if(0===a.length)return[];let r=e.of.some(C8),o=a.reduce((a,o)=>{var s;let l="added"===(s=o.diff).action?{toType:CJ(e,s.toValue)}:"changed"===s.action?{fromType:CJ(e,s.fromValue),toType:CJ(e,s.toValue)}:"removed"===s.action?{fromType:CJ(e,s.fromValue)}:{toType:CJ(e,s.toValue)},c=l.toType||l.fromType;if(!c)return console.warn("Could not determine schema type for item at %s",rg(n)),a;let d=rj(o.diff.fromValue)||rj(o.diff.toValue)||t.items.indexOf(o),u=n.concat(d),p={itemDiff:o,parentDiff:t,parentSchema:e},m=i.concat({hasMoved:o.hasMoved,toIndex:o.toIndex,fromIndex:o.fromIndex,annotation:"unchanged"===o.diff.action?o.annotation:o.diff.annotation}),h=kc(c,o.diff,u,m,p).map(e=>("field"===e.type&&rb(u,e.path)&&(e.itemDiff=o),e));return r&&h.filter(wl).forEach((e,t,n)=>{e.showHeader=1===n.length,e.showIndex=o.fromIndex!==o.toIndex&&o.hasMoved}),0===h.length?a.push(...ku(c,o.diff,u,m,p)):a.push(...h),a},[]);return o.length>1?[{type:"group",key:rg(n)||"root",path:n,titlePath:i,changes:kp(o,i.length),schemaType:e}]:o}(e,t,n,i)}return ku(e,t,n,i,a)}function kd(e,t,n=[],i=[],a={}){let r=[],o={...a,parentSchema:e};for(let a of e.fieldsets||e.fields.map(e=>({single:!0,field:e})))a.single?r.push(...function(e,t,n,i,a={}){let{fieldFilter:r,...o}=a,s=t.fields[e.name];if(!s||!s.isChanged||r&&!r.includes(e.name))return[];let l=n.concat([e.name]),c=i.concat([e.type.title||e.name]);return kc(e.type,s,l,c,o)}(a.field,t,n,i,o)):r.push(...function(e,t,n,i,a={}){let{fields:r,name:o,title:s,readOnly:l,hidden:c}=e,{fieldFilter:d,...u}=a,p=i.concat([s||o]),m=[];for(let e of r){let i=t.fields[e.name];if(!i||!i.isChanged||d&&!d.includes(e.name))continue;let a=n.concat([e.name]),r=p.concat([e.type.title||e.name]);m.push(...kc({readOnly:l,hidden:c,...e.type},i,a,r,u))}return m.length<2?m:[{type:"group",key:rg(n)||"root",fieldsetName:o,path:n,titlePath:p,changes:kp(m,p.length),readOnly:l,hidden:c}]}(a,t,n,i,o));return r.length<2?r:[{type:"group",key:rg(n)||"root",path:n,titlePath:i,changes:kp(r,i.length),schemaType:e}]}function ku(e,t,n,i,{itemDiff:a,parentDiff:r,parentSchema:o}={}){let s;let{fromValue:l,toValue:c,type:d}=t;if("array"===d&&km(l)&&km(c))return[];"u">typeof l&&(s=ws(l,e)),!s&&"u">typeof c&&(s=ws(c,e));let u=!0,p,m=kl(e,o);return m&&"function"==typeof m?p=m:m&&(p=m.component,u=typeof m.showHeader>"u"?u:m.showHeader),[{type:"field",diff:t,path:n,error:s,itemDiff:a,parentDiff:r,titlePath:i,schemaType:e,showHeader:u,showIndex:!0,key:rg(n)||"root",diffComponent:s?void 0:p,parentSchema:o}]}function kp(e,t=1){return e.map(e=>(e.titlePath=e.titlePath.slice(t),e))}function km(e){return Array.isArray(e)&&0===e.length||null===e||typeof e>"u"}let kh=e=>"field"===e.type&&"added"===e.diff.action,kf=e=>{if("group"!==e.type)return[e];let t=[];return e.changes.forEach(e=>{t.push(...kf(e))}),t},kg=(e,t)=>{if(t.length>=e.length)return!1;for(let n=0;n<t.length;n++)if(t[n]!==e[n])return!1;return!0},kx=(e,t)=>{let n=rv(e[t]);return n?{_key:n}:Array.isArray(e)?parseInt(t,10):t},ky={diffMatchPatch:{enabled:!1,lengthThresholdAbsolute:30,lengthThresholdRelative:1.2}};function kb(e,t,n){if(!t)return;let i=[];if("group"===e.type){let a=kf(e),r=a.filter(kh);a.filter(e=>!kh(e)).forEach(e=>kb(e,t,n)),i.push(...kv(t,r.map(e=>e.path).reverse()))}else"added"===e.diff.action?i.push(...kv(t,[e.path])):"field"===e.type&&e.itemDiff&&e.parentDiff&&"array"===e.parentDiff.type&&e.itemDiff.hasMoved?i.push(...function(e,t,n){let i;let a=n.slice(0,-1),{parentValue:r,fromIndex:o,fromValue:s}=function(e,t){if(e.fromValue&&"number"==typeof t.fromIndex){let n=e.fromValue[t.fromIndex];return{parentValue:e.fromValue,fromIndex:t.fromIndex,fromValue:n}}throw Error(`Failed to find item at index ${t.fromIndex}`)}(t,e);if(0===o)i={before:rg([...a,0])};else{let e=o-1;i={after:rg([...a,rj(r[e])||e])}}return[{unset:[rg(n)]},{insert:{...i,items:[s]}}]}(e.itemDiff,e.parentDiff,e.path)):i.push(...function(e,t,n){let i=(0,iu.C)(e.toValue,e.fromValue,ky,n),a=i.filter(e=>"insert"===e.op).map(({after:e,items:t})=>({insert:{after:rg(e),items:t}})),r=i.filter(e=>"unset"===e.op).reduce((e,t)=>e.concat(rg(t.path)),[]),o=new Set,s=[],l=!1,c=i.filter(e=>"set"===e.op).reduce((e,n)=>(l=!0,s.push(...function(e,t,n){let i=t.fromValue,a=t.toValue,r=[];for(let t=1;t<=e.length;t++){let o=e.slice(0,t),s=rg(o);if(n.has(s))continue;let l=e[t],c=(0,w.Fd)(l)||(0,w.dw)(l),d=rx(i,o),u=kj(d);if(c&&Array.isArray(d)&&!rx(a,e.slice(0,t+1))){let e=function(e,t){return"number"==typeof t||(0,w.Fd)(t)?"number"==typeof t?t:e.findIndex(e=>(0,w.fU)(e)&&e._key===t._key):-1}(d,l),n=d[e-1],a=rx(i,o.concat(l)),c=(0,w.fU)(n)?{_key:n._key}:e-1,u=rg(o.concat(e<1?0:c));r.push({setIfMissing:{[s]:[]}}),r.push({insert:{after:u,items:[kj(a)]}}),t++;continue}typeof u>"u"||(n.add(s),r.push({setIfMissing:{[s]:u}}))}return r}(n.path,t,o)),e[rg(n.path)]=n.value,e),{});return[...s,...a,...r.length>0?[{unset:r}]:[],...l?[{set:c}]:[]]}(e.diff,t,e.path));n.patch.execute(i)}function kv(e,t){let n=[];for(let a=0;a<t.length;a++){var i;n.some(e=>kg(t[a],e))||n.push((i=t[a],function e(t,n,i=[],a){if(n.length<=0)throw Error("Root has no ancestor");let r=n.slice(0,-1),o=rx(t,r),s=[r,...i.filter(e=>!kg(e,r))];return!function e(t,n,i){let a=i?.some(e=>rg(e)===rg(n)),r=Array.isArray(t)&&t.length<=0;return a||null==t||r||"object"==typeof t&&null!==t&&Object.keys(t).length<=0||function(t,n,i){if(!iO(t)||!Array.isArray(t))return!1;for(let a in t){if(!Object.prototype.hasOwnProperty.call(t,a)||"_type"===a||"_key"===a)continue;let r=[...n,kx(t,a)];if(!e(t[a],r,i))return!1}return!0}(t,n,i)}(o,r,i)?n:e(t,r,s)}(e.toValue,i,t)))}return[{unset:[...new Set(n.map(rg))]}]}function kj(e){if(Array.isArray(e))return[];if("object"!=typeof e||null===e)return;let t={};return(0,w.fU)(e)&&(t._key=e._key),(0,w.ay)(e)&&(t._type=e._type),t}let kC=j.zo.div`
  display: grid;
  grid-template-columns: minmax(0, 1fr);
`;class kw extends d.Component{static getDerivedStateFromError(e){return{error:e}}state={};componentDidCatch(e){console.error("Error rendering diff component: "),console.error(e)}render(){let{t:e}=this.props,{error:t}=this.state;return t?(0,l.jsx)(h.Zb,{padding:3,radius:2,tone:"critical",children:(0,l.jsxs)(h.kC,{children:[(0,l.jsx)(h.xv,{size:1,children:(0,l.jsx)(_.uIy,{})}),(0,l.jsxs)(h.xu,{paddingLeft:3,children:[(0,l.jsx)(h.xv,{as:"h3",size:1,weight:"medium",children:e("changes.error-boundary.title")}),lR&&(0,l.jsx)(h.xu,{marginTop:2,children:(0,l.jsx)(h.xv,{as:"p",size:1,children:e("changes.error-boundary.developer-info")})})]})]})}):this.props.children}}let kk={down:_.veu,right:_.LZ3};function kT(e){let{direction:t="right",...n}=e,i=kk[t];return(0,l.jsx)(h.xv,{muted:!0,size:1,...n,children:(0,d.createElement)(i)})}let kA=j.zo.pre`
  overflow-x: auto;
  position: relative;
`,k_=j.zo.div`
  position: absolute;
  top: 0;
  right: 0;
`;function kS(e){let{children:t,as:n,change:i,...a}=e,r=(0,d.useRef)(!1),[o,s]=(0,d.useState)(!1),c=(0,d.useCallback)(()=>s(e=>!e),[s]),u=(0,d.useCallback)(()=>r.current=!0,[]),p=(0,d.useCallback)(()=>r.current=!1,[r]);return(0,d.useEffect)(()=>{function e(e){let{metaKey:t,key:n}=e;t&&"i"===n&&r.current&&c()}return window.addEventListener("keydown",e,!1),()=>window.removeEventListener("keydown",e,!1)},[c]),(0,l.jsx)(h.xu,{as:n,onMouseEnter:u,onMouseLeave:p,...a,children:o?(0,l.jsx)(kM,{change:i}):t})}let kE=({title:e})=>(0,l.jsx)(h.xu,{padding:3,display:"inline-block",as:k_,children:(0,l.jsx)(h.xv,{muted:!0,size:1,weight:"medium",children:e})});function kM({change:e}){let{t}=i1();return(0,l.jsxs)(h.Kq,{space:3,children:[(0,l.jsxs)(h.Zb,{padding:3,tone:"transparent",as:kA,radius:1,children:[(0,l.jsx)(kE,{title:t("changes.inspector.meta-label")}),(0,l.jsx)(h.EK,{language:"json",size:1,children:function(e){let t=[];return Object.entries(e).forEach(([e,n])=>{"u">typeof n&&null!==n&&t.push(`${e}: ${n}`)}),t.join(`
`)}({path:rg(e.path),fromIndex:e.itemDiff?.fromIndex,toIndex:e.itemDiff?.toIndex,hasMoved:e.itemDiff?.hasMoved,action:e.diff.action,isChanged:e.diff.isChanged})})]}),(0,l.jsxs)(h.Zb,{as:kA,tone:"critical",padding:3,radius:1,children:[(0,l.jsx)(kE,{title:t("changes.inspector.from-label")}),(0,l.jsx)(h.EK,{language:"json",size:1,children:kN(e.diff.fromValue)})]}),(0,l.jsx)(h.Zb,{children:(0,l.jsx)(kT,{direction:"down",align:"center"})}),(0,l.jsxs)(h.Zb,{as:kA,tone:"positive",padding:3,radius:1,children:[(0,l.jsx)(kE,{title:t("changes.inspector.to-label")}),(0,l.jsx)(h.EK,{language:"json",size:1,children:kN(e.diff.toValue)})]})]})}function kN(e){return typeof e>"u"?"undefined":JSON.stringify(e,null,2)}function kI(e){return null!==e&&"u">typeof e&&""!==e}let kz={flexShrink:0},k$={alignItems:"stretch"},kO={top:"flex-start",center:"center",bottom:"flex-end",default:"flex-start"},kP=(0,d.forwardRef)(function(e,t){let{align:n="top",layout:i="inline",from:a,to:r,style:o,...s}=e,c=(0,h.Fg)(),u="inline"===i?h.kC:h.rj,p=(0,d.useMemo)(()=>({...o,..."inline"===i?{maxWidth:"100%",display:"inline-flex"}:{gridTemplateColumns:`minmax(0, 1fr) ${(0,h.hO)(c.sanity.space[5])} minmax(0, 1fr)`}}),[i,o,c]),m="inline"===i?kz:k$;return(0,l.jsxs)(u,{...s,ref:t,style:p,"data-from-to-layout":!0,children:[a&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(h.kC,{align:kO[n],style:m,children:a}),(0,l.jsx)(h.kC,{align:"center",justify:"center",padding:2,children:(0,l.jsx)(kT,{})})]}),(0,l.jsx)(h.kC,{align:kO[n],style:m,children:r})]})}),kF={flex:1,minWidth:0,display:"block",whiteSpace:"break-spaces"};function kD(e){let{align:t,cardClassName:n,diff:i,layout:a,path:r,previewComponent:o,schemaType:s}=e,{action:c}=i,u=function(e){let{t}=i1(),n=kI(e.fromValue),i=kI(e.toValue);return t(!n&&i?"changes.added-label":!i&&n?"changes.removed-label":"changes.changed-label")}(i);if("unchanged"===c)return(0,l.jsx)(Cq,{className:n,style:kF,children:(0,d.createElement)(o,{schemaType:s,value:i.toValue})});let p=void 0!==i.fromValue&&null!==i.fromValue&&(0,l.jsx)(Cq,{as:"del",className:n,diff:i,path:r,style:kF,children:(0,d.createElement)(o,{schemaType:s,value:i.fromValue})}),m=void 0!==i.toValue&&null!==i.toValue&&(0,l.jsx)(Cq,{as:"ins",className:n,diff:i,path:r,style:kF,children:(0,d.createElement)(o,{schemaType:s,value:i.toValue})});return p&&!m?(0,l.jsx)(CF,{description:u,diff:i,path:r,children:p}):!p&&m?(0,l.jsx)(CF,{description:u,diff:i,path:r,children:m}):(0,l.jsx)(CF,{description:u,diff:i,path:r,children:(0,l.jsx)(kP,{align:t,from:p,layout:a,to:m})})}let kR=({value:e,schemaType:t})=>(0,l.jsx)(h.xu,{padding:2,children:(0,l.jsx)(bq,{schemaType:t,value:e,layout:"default"})}),kL=e=>{let{diff:t,schemaType:n}=e;return(0,l.jsx)(kD,{diff:t,schemaType:n,previewComponent:kR,layout:"grid"})},kB=j.zo.div`
  --field-change-error: ${({theme:e})=>e.sanity.color.solid.critical.enabled.bg};
  &[data-revert-all-changes-hover] [data-revert-all-hover]::before {
    border-left: 2px solid var(--field-change-error);
  }
`,kq=j.zo.div`
  --field-change-error: ${({theme:e})=>e.sanity.color.solid.critical.enabled.bg};
  --diff-inspect-padding-xsmall: ${({theme:e})=>(0,h.hO)(e.sanity.space[1])};
  --diff-inspect-padding-small: ${({theme:e})=>(0,h.hO)(e.sanity.space[2])};

  position: relative;
  padding: var(--diff-inspect-padding-xsmall) 0 var(--diff-inspect-padding-xsmall)
    var(--diff-inspect-padding-small);

  &::before {
    content: '';
    display: block;
    position: absolute;
    top: 0;
    left: 0;
    bottom: 0;
    border-left: 1px solid var(--card-border-color);
  }

  &[data-error]:hover::before,
  &[data-revert-field-hover]:hover::before {
    border-left: 2px solid var(--field-change-error);
  }
`,kV=(0,j.zo)(x.zx)`
  [data-ui='Text'] {
    font-weight: normal;
  }

  div[data-ui='Box'] {
    display: none;
  }

  &:not([data-disabled='true']):hover,
  &:not([data-disabled='true']):focus {
    --card-fg-color: ${({theme:e})=>e.sanity.color.solid.critical.enabled.bg};
    --card-bg-color: transparent;
    --card-border-color: transparent;

    div[data-ui='Box'] {
      display: block;
    }
  }
`,kK=(0,d.forwardRef)(function(e,t){let{selected:n,changeCount:i,...a}=e,{t:r}=i1();return(0,l.jsx)(kV,{icon:_.V13,selected:n,text:r("changes.action.revert-changes-confirm-change",{count:i}),mode:"bleed",ref:t,tooltipProps:null,...a})});function kU({error:e}){let{t}=i1();return(0,l.jsx)(h.Zb,{tone:"critical",padding:3,children:(0,l.jsxs)(h.kC,{align:"flex-start",children:[(0,l.jsx)(h.xu,{children:(0,l.jsx)(h.xv,{children:(0,l.jsx)(_.uIy,{})})}),(0,l.jsx)(h.xu,{flex:1,paddingLeft:3,children:(0,l.jsx)(h.xv,{size:1,as:"p",children:t(e.messageKey,{expectedType:e.expectedType,actualType:e.actualType})})})]})})}function kZ(e){let{change:t,hidden:n,readOnly:i}=e,a=t.diffComponent||kL,{documentId:r,schemaType:o,rootDiff:s,isComparingCurrent:c,FieldWrapper:u=d.Fragment}=wf(),m=Bs(r,o.name),[f,g]=(0,d.useState)(!1),[y,b]=(0,d.useState)(!1),v=(0,d.useRef)(null),{t:j}=i1(),[C,w]=jz({id:r,type:o.name,permission:"update"}),k=(0,d.useCallback)(()=>{kb(t,s,m)},[t,s,m]),T=(0,d.useCallback)(()=>{g(!0)},[]),A=(0,d.useCallback)(()=>{g(!1)},[]),_=(0,d.useCallback)(()=>{b(!0)},[]),S=(0,d.useCallback)(()=>{b(!1)},[]);(0,h.Of)(()=>g(!1),()=>[v.current]);let E=t.parentSchema?.jsonType==="array"?t.path.slice(0,-1):t.path,M=(0,d.useMemo)(()=>({path:t.path}),[t.path]);return(0,d.useMemo)(()=>n?null:(0,l.jsxs)(h.Kq,{space:1,as:kB,children:[t.showHeader&&(0,l.jsx)(CW,{change:t,titlePath:t.titlePath}),(0,l.jsx)(u,{path:E,hasHover:y,children:(0,l.jsxs)(kS,{change:t,as:kq,"data-revert-field-hover":y?"":void 0,"data-error":t.error?"":void 0,"data-revert-all-hover":!0,"data-ui":"field-diff-inspect-wrapper",children:[t.error?(0,l.jsx)(kU,{error:t.error}):(0,l.jsx)(kw,{t:j,children:(0,l.jsx)(p.AO.Provider,{value:M,children:(0,l.jsx)(a,{diff:t.diff,schemaType:t.schemaType})})}),c&&!w&&C?.granted&&(0,l.jsx)(x.J2,{content:(0,l.jsxs)(h.Kq,{space:3,children:[(0,l.jsx)(h.xu,{paddingY:3,children:(0,l.jsx)(h.xv,{size:1,children:j("changes.action.revert-changes-description",{count:1})})}),(0,l.jsxs)(h.kC,{gap:3,justify:"flex-end",children:[(0,l.jsx)(x.zx,{mode:"ghost",onClick:A,text:j("changes.action.revert-all-cancel")}),(0,l.jsx)(x.zx,{tone:"critical",onClick:k,text:j("changes.action.revert-changes-confirm-change",{count:1})})]})]}),open:f,padding:3,portal:!0,placement:"left",ref:v,children:(0,l.jsx)(kK,{changeCount:1,onClick:T,onMouseEnter:_,onMouseLeave:S,selected:f,disabled:i,"data-testid":`single-change-revert-button-${t?.key}`})})]})})]}),[n,t,u,E,y,j,M,a,c,w,C?.granted,A,k,f,T,_,S,i])}let kG=j.zo.div`
  display: grid;
  grid-template-columns: minmax(0, 1fr);
`,kH=j.zo.div`
  --field-change-error: ${({theme:e})=>e.sanity.color.solid.critical.enabled.bg};
  --diff-inspect-padding-xsmall: ${({theme:e})=>(0,h.hO)(e.sanity.space[1])};
  --diff-inspect-padding-small: ${({theme:e})=>(0,h.hO)(e.sanity.space[2])};

  position: relative;
  padding: var(--diff-inspect-padding-xsmall) var(--diff-inspect-padding-small);

  &::before {
    content: '';
    display: block;
    position: absolute;
    top: 0;
    left: 0;
    bottom: 0;
    border-left: 1px solid var(--card-border-color);
  }

  &[data-error]:hover::before,
  &[data-revert-group-hover]:hover::before,
  &[data-revert-all-groups-hover]::before {
    border-left: 2px solid var(--field-change-error);
  }
`;function kW(e){let{change:t,readOnly:n,hidden:i,...a}=e,{titlePath:r,changes:o,path:s}=t,{path:c}=(0,d.useContext)(p.AO),{documentId:u,schemaType:m,FieldWrapper:f,rootDiff:g,isComparingCurrent:y}=wf(),{t:b}=i1(),v=o.every(e=>wl(e)&&C8(e.schemaType)),j=rb(c,s),[C,w]=function(){let e=(0,d.useRef)(null),[t,n]=(0,d.useState)(!1);return(0,d.useEffect)(()=>{let t=e.current;if(!t)return()=>{};let i=()=>n(!0),a=()=>n(!1);return t.addEventListener("mouseover",i),t.addEventListener("mouseout",a),()=>{t.removeEventListener("mouseover",i),t.removeEventListener("mouseout",a)}},[]),[e,t]}(),k=Bs(u,m.name),[T,A]=(0,d.useState)(!1),_=(0,d.useRef)(null),[S,E]=jz({id:u,type:m.name,permission:"update"}),M=(0,d.useCallback)(()=>kb(t,g,k),[t,g,k]),N=(0,d.useCallback)(()=>{A(!0)},[]),I=(0,d.useCallback)(()=>{A(!1)},[]);(0,h.Of)(()=>A(!1),()=>[_.current]);let z=(0,d.useMemo)(()=>i?null:(0,l.jsxs)(h.Kq,{space:1,as:kH,"data-ui":"group-change-content","data-revert-group-hover":w?"":void 0,"data-portable-text":v?"":void 0,children:[(0,l.jsx)(h.Kq,{as:kG,space:5,"data-ui":"group-change-list",children:o.map(e=>(0,l.jsx)(kY,{change:e,readOnly:n,hidden:i},e.key))}),y&&!E&&S?.granted&&(0,l.jsx)(x.J2,{content:(0,l.jsxs)(h.Kq,{space:3,children:[(0,l.jsx)(h.xu,{paddingY:3,children:(0,l.jsx)(h.xv,{size:1,children:b("changes.action.revert-changes-description",{count:o.length})})}),(0,l.jsxs)(h.kC,{gap:3,justify:"flex-end",children:[(0,l.jsx)(x.zx,{mode:"ghost",onClick:I,text:b("changes.action.revert-all-cancel")}),(0,l.jsx)(x.zx,{tone:"critical",onClick:M,text:b("changes.action.revert-changes-confirm-change",{count:1})})]})]}),padding:3,portal:!0,placement:"left",open:T,ref:_,children:(0,l.jsx)(h.xu,{children:(0,l.jsx)(kK,{changeCount:o.length,onClick:N,ref:C,selected:T,disabled:n,"data-testid":`group-change-revert-button-${t.fieldsetName}`})})})]}),[o,I,T,t.fieldsetName,M,N,i,y,E,v,w,S?.granted,n,C,b]);return i?null:(0,l.jsxs)(h.Kq,{space:1,...a,children:[(0,l.jsx)(CW,{titlePath:r}),j||!f?z:(0,l.jsx)(f,{hasHover:w,path:t.path,children:z})]})}function kY(e){let{change:t,hidden:n,readOnly:i}=e,{value:a}=wf(),r=CY({document:a,checkProperty:n||t.schemaType?.hidden,checkPropertyKey:"hidden",value:"field"===t.type?t.diff.toValue:void 0}),o=CY({document:a,checkProperty:i||t.schemaType?.readOnly,checkPropertyKey:"readOnly",value:"field"===t.type?t.diff.toValue:void 0});return r?null:"field"===t.type?(0,l.jsx)(kZ,{change:t,readOnly:o}):"group"===t.type?(0,l.jsx)(kW,{change:t,"data-testid":`group-change-${t.fieldsetName}`,readOnly:o}):(0,l.jsxs)(h.xv,{children:["Unknown change type: ",(0,l.jsx)("code",{children:t.type||"undefined"})]})}function kJ(){let{t:e}=i1();return(0,l.jsxs)(h.Kq,{space:3,children:[(0,l.jsx)(h.xv,{size:1,weight:"medium",as:"h3",children:e("changes.no-changes-title")}),(0,l.jsx)(h.xv,{as:"p",size:1,muted:!0,children:e("changes.no-changes-description")})]})}function kX({diff:e,fields:t,schemaType:n}){let{documentId:i,isComparingCurrent:a,value:r}=wf(),o=Bs(i,n.name),{path:s}=(0,d.useContext)(p.AO),c=0===s.length,[u,m]=(0,d.useState)(!1),[f,g]=(0,d.useState)(!1),{t:y}=i1(),b=CY({document:r,value:void 0,checkProperty:n.readOnly,checkPropertyKey:"readOnly"});if("object"!==n.jsonType)throw Error("Only object schema types are allowed in ChangeList");let[v,j]=jz({id:i,type:n.name,permission:"update"}),C=(0,d.useMemo)(()=>kd(n,e,s,[],{fieldFilter:t}),[n,t,s,e]),w=(0,d.useMemo)(()=>t&&0===t.length?[]:1===C.length&&"group"===C[0].type&&0===C[0].path.length?C[0].changes:C,[C,t]),k=C[0],T=(0,d.useCallback)(()=>{kb(k,e,o),m(!1)},[k,e,o]),A=(0,d.useCallback)(()=>{m(!0)},[]),S=(0,d.useCallback)(()=>{g(!0)},[]),E=(0,d.useCallback)(()=>{g(!1)},[]),M=(0,d.useCallback)(()=>{m(!1)},[]),N=(0,d.useRef)(null);if((0,h.Of)(()=>m(!1),()=>[N.current]),0===w.length)return c?(0,l.jsx)(kJ,{}):null;let I=c&&w.length>1;return(0,l.jsx)(h.Zb,{children:(0,l.jsxs)(h.Kq,{space:5,children:[(0,l.jsx)(h.Kq,{as:kC,space:5,children:w.map(e=>(0,l.jsx)("div",{children:(0,l.jsx)(kY,{change:e,"data-revert-all-changes-hover":f?"":void 0,readOnly:b||e?.readOnly,hidden:e?.hidden},e.key)},e.key))}),I&&a&&!j&&v?.granted&&(0,l.jsx)(x.J2,{content:(0,l.jsxs)(h.Kq,{space:3,children:[(0,l.jsx)(h.xu,{paddingY:3,children:(0,l.jsx)(h.xv,{size:1,children:y("changes.action.revert-all-description",{count:w.length})})}),(0,l.jsxs)(h.kC,{gap:3,justify:"flex-end",children:[(0,l.jsx)(x.zx,{mode:"ghost",text:y("changes.action.revert-all-cancel"),onClick:M}),(0,l.jsx)(x.zx,{tone:"critical",text:y("changes.action.revert-all-confirm"),onClick:T})]})]}),open:u,padding:3,placement:"left",portal:!0,ref:N,children:(0,l.jsx)(h.Kq,{children:(0,l.jsx)(x.zx,{tone:"critical",mode:"ghost",text:y("changes.action.revert-all-confirm"),icon:_.V13,onClick:A,onMouseEnter:S,onMouseLeave:E,disabled:b,size:"large"})})})]})})}let kQ=j.zo.span`
  border-radius: ${({theme:e})=>(0,h.hO)(e.sanity.radius[1])};
`,k0=(0,j.zo)(h.xv)`
  &:not([hidden]) {
    display: inline;
    line-height: calc(1.25em + 2px);
  }

  &:hover {
    background-color: none !important;
    background-image: linear-gradient(
      to bottom,
      var(--card-bg-color) 0,
      var(--card-bg-color) 33.333%,
      currentColor 33.333%,
      currentColor 100%
    );
    background-size: 1px 3px;
    background-repeat: repeat-x;
    background-position-y: bottom;
    padding-bottom: 3px;
    box-shadow: 0 0 0 1px var(--card-bg-color);
    z-index: 1;
  }
`;function k1(e){let{segment:t}=e,{text:n}=t,{t:i}=i1();return"added"===t.action?(0,l.jsx)(Cq,{annotation:t.annotation,disableHoverEffect:!0,tooltip:{description:i("changes.added-label")},as:kQ,children:(0,l.jsx)(k0,{as:"ins",style:{textDecoration:"none"},children:n})}):"removed"===t.action?(0,l.jsx)(Cq,{annotation:t.annotation,as:kQ,disableHoverEffect:!0,tooltip:{description:i("changes.removed-label")},children:(0,l.jsx)(k0,{as:"del",children:n})}):(0,l.jsx)(h.Zb,{as:"span",radius:2,style:{display:"inline"},children:n})}function k2(e){let{diff:t}=e;return(0,l.jsx)(l.Fragment,{children:(t.segments||[]).map((e,t)=>(0,l.jsx)(k1,{segment:e},t))})}let k3=(0,j.zo)(h.xv)`
  color: inherit;
`;function k4(e){let{title:t,action:n,icon:i,children:a,markRemoved:r}=e;return(0,l.jsxs)(h.kC,{padding:2,align:"center",children:[i&&(0,l.jsx)(h.xu,{padding:2,children:(0,l.jsx)(k3,{size:4,forwardedAs:r?"del":"div",children:(0,d.createElement)(i)})}),(0,l.jsxs)(h.Kq,{space:2,paddingLeft:2,children:[(0,l.jsx)(k3,{size:1,weight:"medium",forwardedAs:r?"del":"h3",textOverflow:"ellipsis",children:t}),n&&(0,l.jsx)("div",{children:n}),(0,l.jsx)(k3,{size:0,textOverflow:"ellipsis",children:a})]})]})}function k5(e){let t=(0,d.useRef)(e.value);t.current=e.value;let n=(0,d.useCallback)(e=>rx(t.current,e),[t]);return(0,l.jsx)(p.Yx.Provider,{value:n,children:e.children})}function k8(){let e=(0,d.useContext)(p.Yx);if(!e)throw Error("useGetFormValue must be used within a GetFormValueProvider");return e}j.zo.div`
  display: inline-block;
  word-break: break-all;
  white-space: pre-wrap;
`;let k6=(e,{document:t},n)=>{let i=t?.unstable_fieldActions;if(!i)return e;if("function"==typeof i)return i(e,n);if(Array.isArray(i))return[...e,...i];throw Error(`Expected \`document.unstable_fieldActions\` to be an array or a function, but received ${typeof i}`)},k7=[{name:"copyField",useAction({path:e}){let t=k8(),{onCopy:n}=LF(),{t:i}=i1("copy-paste"),a=0===e.length,r=i("copy-paste.field-action-copy-button.document.title"),o=i("copy-paste.field-action-copy-button.field.title"),s=a?r:o,l=(0,d.useCallback)(()=>{n(e,t([]),{context:{source:a?"documentFieldAction":"fieldAction"}})},[e,a,n,t]);return{type:"action",icon:_.TIy,onAction:l,title:s}}},{name:"pasteField",useAction({path:e}){let{t}=i1("copy-paste"),n=(0,tX.QRq)(),i=0===e.length,a=t("copy-paste.field-action-paste-button.document.title"),r=t("copy-paste.field-action-paste-button.field.title"),o=i?a:r,{onPaste:s}=LF(),l=(0,d.useCallback)(()=>{s(e,n([]),{context:{source:i?"documentFieldAction":"fieldAction"}})},[n,s,e,i]);return{type:"action",icon:_.Kmg,onAction:l,title:o}}}],k9=aU({name:"sanity/deprecated/scheduled-publishing",studio:{components:{layout:function(e){let t=(0,h.pm)();return(0,d.useEffect)(()=>{console.error(`Scheduled publishing plugin is added by default, please remove this plugin from your config. 
        
If you have a custom date config, you can use the scheduledPublishing API to customize the date input.
        
See: https://www.sanity.io/docs/scheduled-publishing.
        `),t.push({id:"scheduled-publishing-deprecated",closable:!0,duration:6e4,status:"error",title:"Scheduled publishing plugin is deprecated",description:"The scheduled publishing plugin is now deprecated, you should remove the plugin from your configuration. If you have a custom date config, you can use the scheduledPublishing API to customize the date input. See: https://www.sanity.io/docs/scheduled-publishing."})},[t]),e.renderDefault(e)}}}}),Te=["scheduled-publishing"],Tt=({plugins:e=[],...t},n)=>{let i={config:t,path:[...n,t.name]},a=e.flatMap(e=>Tt(e,[...n,t.name])),r=a.find(e=>"scheduled-publishing"===e.config.name);return r&&a.push({path:r.path,config:k9()}),[...a.filter(e=>!Te.includes(e.config.name)),i]},Tn={referringDocuments:[],isLoading:!0};function Ti(e){let t=Cz(),n=(0,d.useMemo)(()=>t.listenQuery("*[references($docId)] [0...101]",{docId:e},{tag:"use-referring-documents"}).pipe((0,P.U)(e=>({referringDocuments:e,isLoading:!1})),(0,ef.O)(Tn)),[t,e]);return(0,eR.m)(n,Tn)}let Ta=({asset:e,assetType:t,referringDocuments:n})=>{let{t:i}=i1(),a=n.length;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(h.Zb,{borderBottom:a>0,marginTop:2,paddingBottom:2,marginBottom:1,children:(0,l.jsx)(h.xv,{size:1,as:"h2",weight:"medium",children:(0,l.jsx)(rm,{t:i,i18nKey:`asset-source.usage-list.documents-using-${t}`,context:e.originalFilename?"named":"unnamed",values:{filename:e.originalFilename,count:a}})})}),n.map(e=>(0,l.jsx)(Tr,{document:e},e._id))]})},Tr=({document:e})=>{let t=NQ(),n=(0,d.useCallback)(t=>(0,l.jsx)(ny.nR,{...t,params:{id:e._id,type:e._type},intent:"edit"}),[e]);return(0,l.jsx)(h.Zb,{as:n,radius:2,"data-as":"a",tabIndex:0,children:(0,l.jsx)(h.kC,{align:"center",gap:2,children:(0,l.jsx)(bq,{layout:"default",value:{_type:"reference",_ref:e._id},schemaType:t.get(e._type)})})},e._id)},To={maxWidth:"100%",height:"120px",objectFit:"contain",objectPosition:"center"},Ts={gridColumn:"span 1",overflow:"hidden",display:"flex",alignSelf:"center",justifyContent:"center"},Tl={height:"100%"},Tc=({asset:e,assetType:t,hasResults:n=!1})=>{let i="image"===t,{t:a}=i1();return n?(0,l.jsx)(h.Zb,{tone:"caution",padding:[3,3,4],border:!0,radius:2,marginBottom:3,children:(0,l.jsxs)(h.rj,{columns:3,gap:[2,3,4],children:[(0,l.jsxs)(h.kC,{gap:[3,4],align:"center",style:{gridColumn:i?"span 2":"span 3"},children:[(0,l.jsx)(h.xv,{children:(0,l.jsx)(_.foC,{})}),(0,l.jsx)(h.xv,{size:1,children:a(`asset-source.delete-dialog.usage-list.warning-${t}-is-in-use`,{context:e.originalFilename?"named":"unnamed",filename:e.originalFilename})})]}),i&&(0,l.jsx)(h.Zb,{__unstable_checkered:!0,border:!0,radius:1,style:Ts,children:(0,l.jsx)(h.kC,{align:"center",justify:"center",style:Tl,children:(0,l.jsx)("img",{src:`${e.url}?w=200`,style:To,alt:a("asset-source.usage-list.image-alt"),referrerPolicy:"strict-origin-when-cross-origin"})})})]})}):(0,l.jsx)(h.Zb,{paddingX:[2,3,4],paddingY:[3,3,3,4],children:(0,l.jsxs)(h.rj,{columns:3,gap:3,children:[(0,l.jsx)(h.kC,{style:{gridColumn:i?"span 2":"span 3"},align:"center",children:(0,l.jsx)(h.xv,{children:(0,l.jsx)(rm,{t:a,i18nKey:`asset-source.delete-dialog.usage-list.confirm-delete-${t}`,context:e.originalFilename?"named":"unnamed",values:{filename:e.originalFilename}})})}),i&&(0,l.jsx)(h.Zb,{__unstable_checkered:!0,border:!0,radius:1,style:Ts,children:(0,l.jsx)(h.kC,{align:"center",justify:"center",style:Tl,children:(0,l.jsx)("img",{src:`${e.url}?w=200`,style:To,alt:a("asset-source.asset-list.table.preview-alt"),referrerPolicy:"strict-origin-when-cross-origin"})})})]})})};function Td({asset:e,assetType:t,isDeleting:n=!1,onClose:i,onDelete:a}){let{isLoading:r,referringDocuments:o}=Ti(e._id),s=(0,d.useMemo)(()=>{let e=o.reduce((e,t)=>t._id.startsWith("drafts.")?e.concat(t._id.slice(7)):e,[]);return o.filter(t=>!e.includes(t._id))},[o]),c=s.length>0,{t:u}=i1();return(0,l.jsx)(x.Vq,{__unstable_autoFocus:r,footer:{cancelButton:{onClick:i,text:u("asset-source.delete-dialog.action.cancel")},confirmButton:{disabled:c,icon:_.XHJ,loading:n,onClick:a,text:u("asset-source.delete-dialog.action.delete")}},header:u("asset-source.delete-dialog.header",{context:t}),id:"asset-dialog",onClickOutside:i,onClose:i,width:1,children:r?(0,l.jsx)(h.xu,{padding:4,children:(0,l.jsx)(aW,{showText:!0})}):(0,l.jsxs)(h.Kq,{paddingX:c?[2,3,4]:0,paddingY:c?[3,3,3,4]:0,space:1,children:[(0,l.jsx)(Tc,{asset:e,assetType:t,hasResults:c}),c&&(0,l.jsx)(Ta,{asset:e,referringDocuments:s,assetType:t})]})})}let Tu={portal:!0,placement:"right"};function Tp({isSelected:e,border:t=!0,onAction:n}){let{t:i}=i1();return(0,l.jsx)(x.j2,{button:(0,l.jsx)(aI,{mode:t?"ghost":e?"default":"bleed",tone:t?"default":e?"primary":"default"}),id:"asset-menu",menu:(0,l.jsxs)(h.v2,{children:[(0,l.jsx)(x.sN,{text:i("asset-source.asset-list.menu.show-usage"),icon:_.xPt,onClick:()=>{n({type:"showUsage"})}}),(0,l.jsx)(x.sN,{text:i("asset-source.asset-list.menu.delete"),icon:_.XHJ,tone:"critical",onClick:()=>{n({type:"delete"})}})]}),popover:Tu})}function Tm({asset:e,assetType:t,onClose:n}){let{isLoading:i,referringDocuments:a}=Ti(e._id),r=(0,d.useMemo)(()=>{let e=a.reduce((e,t)=>t._id.startsWith("drafts.")?e.concat(t._id.slice(7)):e,[]);return a.filter(t=>!e.includes(t._id))},[a]),{t:o}=i1();return(0,l.jsx)(x.Vq,{__unstable_autoFocus:!0,header:o("asset-source.asset-usage-dialog.header",{context:t}),id:"asset-dialog",onClickOutside:n,onClose:n,width:1,children:i?(0,l.jsx)(aW,{showText:!0}):(0,l.jsx)(Ta,{asset:e,referringDocuments:r,assetType:t})})}let Th={"image/bmp":{title:"Bitmap Image"},"image/jpeg":{title:"JPEG Image"},"image/gif":{title:"GIF Image"},"image/vnd.microsoft.icon":{title:"Icon"},"image/png":{title:"PNG Image"},"image/svg+xml":{title:"SVG Image"},"image/webp":{title:"WebP Image"},"image/tiff":{title:"TIFF Image"},"image/heic":{title:"HEIC Image"},"audio/midi":{title:"MIDI Audio"},"audio/midi-x":{title:"MIDI Audio"},"audio/mpeg":{title:"MP3 Audio"},"audio/ogg":{title:"OGG Audio"},"audio/wav":{title:"WAV Audio"},"audio/webm":{title:"WebM Audio"},"audio/aac":{title:"AAC Audio"},"video/x-msvideo":{title:"AVI Video"},"video/mp4":{title:"MP4 Video"},"video/mpeg":{title:"MPEG Video"},"video/ogg":{title:"OGG Video"},"video/webm":{title:"WebM Video"},"video/quicktime":{title:"QuickTime Video"},"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":{title:"Excel Spreadsheet"},"application/vnd.ms-excel":{title:"Excel Spreadsheet"},"text/plain":{title:"Text"},"text/javascript":{title:"JavaScript"},"text/markdown":{title:"Markdown"},"text/csv":{title:"CSV"},"text/css":{title:"CSS"},"application/pdf":{title:"PDF Document"},"application/xml":{title:"XML Document"},"text/xml":{title:"XML Document"},"application/zip":{title:"ZIP Archive"},"application/vnd.rar":{title:"RAR Archive"},"application/x-7z-compressed":{title:"7-zip Archive"},"application/octet-stream":{title:"Binary"}},Tf=j.zo.span`
  background-color: transparent;
  flex-shrink: 0;
`,Tg=(0,j.zo)(h.kC)``,Tx=(0,j.zo)(h.Zb)`
  ${e=>e.isSelected&&(0,j.iv)`
      --card-muted-fg-color: var(--card-bg-color);
      --card-fg-color: var(--card-bg-color);
    `}
`,Ty=(0,j.zo)(h.zx)`
  box-shadow: none;
  min-width: 0;
  cursor: pointer;
  position: initial;

  &:before,
  &:after {
    content: '';
    position: absolute;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    z-index: 2;
  }

  &:before {
    z-index: 0;
    pointer-events: none;
    border-radius: inherit;
  }

  ${e=>e.isSelected&&(0,j.iv)`
      --card-muted-fg-color: var(--card-bg-color);
      --card-fg-color: var(--card-bg-color);

      &:before {
        background-color: var(--card-focus-ring-color);
      }

      ${Tf} {
        --card-muted-fg-color: var(--card-bg-color);
      }

      ${Tg} {
        --card-muted-fg-color: var(--card-bg-color);
        --card-fg-color: var(--card-bg-color);
      }
    `}

  ${e=>!e.isSelected&&(0,j.iv)`
      &:hover:before {
        background-color: var(--card-bg-color);
      }

      &:focus:before {
        background-color: var(--card-code-bg-color);
      }

      &:focus-within:before {
        background-color: var(--card-bg-color);
      }
    `}
`,Tb=(0,j.zo)(h.xv)`
  overflow-wrap: anywhere;
`,Tv={position:"relative"},Tj={flexShrink:0},TC={minWidth:0},Tw={zIndex:3,marginTop:"-0.5rem",marginBottom:"-0.5rem"},Tk=e=>{let t=Bi(rz),n=(0,h.pm)(),i=(0,d.useRef)(),[a,r]=(0,d.useState)(!1),[o,s]=(0,d.useState)(!1),[c,u]=(0,d.useState)(!1),[p,m]=(0,d.useState)(!1),{asset:f,onClick:g,onKeyPress:y,onDeleteFinished:b,isSelected:v,isMobile:j}=e,{originalFilename:C,_id:w,mimeType:k,size:T,_createdAt:A}=f,S=Bv(A,{useTemporalPhrase:!0}),E=Th?.[k]?Th[k].title:function(e){let t=e.replace("x-","").split("/")[1];return t.charAt(0).toUpperCase()+t.slice(1)}(k),M=wx(T,Ac({unitDisplay:"short",maximumFractionDigits:2})),N=(C||"").length>37,{t:I}=i1(),z=(0,d.useCallback)(()=>{s(!0)},[]),$=(0,d.useCallback)(e=>{n.push({closable:!0,status:"error",title:I("asset-source.file.asset-list.delete-failed"),description:e.message})},[I,n]),O=(0,d.useCallback)(()=>{n.push({status:"success",title:I("asset-source.file.asset-list.delete-successful")})},[I,n]),P=(0,d.useCallback)(()=>{u(!0),i.current=t.observable.delete(f._id).subscribe({next:()=>{u(!1),b?.(f._id),s(!1),O()},error:e=>{u(!1),$(e),console.error("Could not delete asset",e)}})},[f._id,$,O,b,t.observable]),F=()=>{r(!1),s(!1)},D=()=>{r(!0)},R=(0,d.useMemo)(()=>a&&(0,l.jsx)(Tm,{assetType:"file",asset:f,onClose:F}),[f,a]),L=(0,d.useMemo)(()=>o&&(0,l.jsx)(Td,{assetType:"file",asset:f,onClose:F,onDelete:P,isDeleting:c}),[f,P,c,o]);return j?(0,l.jsxs)(h.Zb,{paddingBottom:2,style:Tv,children:[(0,l.jsxs)(h.rj,{columns:4,gap:1,style:{position:"relative",gridTemplateColumns:"1fr 30px",opacity:c?.5:1},children:[(0,l.jsx)(Ty,{asset:f,mode:"bleed",padding:0,"data-id":w,onClick:g,paddingY:1,radius:2,children:(0,l.jsxs)(h.kC,{gap:2,flex:2,align:"center",children:[(0,l.jsx)(h.Zb,{as:Tf,padding:2,tone:"transparent",radius:2,children:(0,l.jsx)(h.xv,{muted:!0,size:2,style:Tj,children:(0,l.jsx)(_.$lS,{})})}),(0,l.jsx)(h.xv,{size:1,align:"left",textOverflow:"ellipsis",style:TC,children:C})]})}),(0,l.jsx)(h.kC,{justify:"flex-end",align:"center",paddingRight:1,style:Tw,children:(0,l.jsx)(h.zx,{mode:"bleed",fontSize:1,padding:2,onClick:()=>{m(!p)},icon:p?_.g8U:_.v4q})})]}),p&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(h.rj,{marginTop:3,columns:3,gap:1,children:[(0,l.jsxs)(h.Kq,{space:2,children:[(0,l.jsx)(h.xv,{size:1,muted:!0,weight:"medium",children:I("asset-source.file.asset-list.header.size")}),(0,l.jsx)(h.xv,{size:1,muted:!0,children:M})]}),(0,l.jsxs)(h.Kq,{space:2,children:[(0,l.jsx)(h.xv,{size:1,muted:!0,weight:"medium",children:I("asset-source.file.asset-list.header.type")}),(0,l.jsx)(h.xv,{size:1,muted:!0,children:E})]}),(0,l.jsxs)(h.Kq,{space:2,children:[(0,l.jsx)(h.xv,{size:1,muted:!0,weight:"medium",children:I("asset-source.file.asset-list.header.date-added")}),(0,l.jsx)(h.xv,{size:1,muted:!0,children:S})]})]}),(0,l.jsxs)(h.Kq,{space:2,marginTop:3,children:[(0,l.jsx)(h.zx,{fontSize:1,tone:"default",mode:"ghost",text:I("asset-source.file.asset-list.action.show-usage.title"),onClick:D,icon:_.xPt}),(0,l.jsx)(h.zx,{fontSize:1,tone:"critical",mode:"ghost",text:I("asset-source.file.asset-list.action.delete.title"),icon:_.XHJ,disabled:v,title:I(v?"asset-source.file.asset-list.action.delete.disabled-cannot-delete-current-file":"asset-source.file.asset-list.action.delete.title"),onClick:z})]})]}),R||L]}):(0,l.jsxs)(Tx,{asset:f,paddingBottom:1,style:Tv,radius:0,overflow:"hidden",isSelected:v,"aria-selected":"true",children:[(0,l.jsxs)(h.rj,{columns:4,gap:1,"data-id":w,paddingY:1,style:{position:"relative",gridTemplateColumns:"3fr 1fr 1fr 2fr 30px",opacity:c?.5:1},children:[(0,l.jsx)(Ty,{asset:f,mode:"bleed","data-id":w,onClick:g,padding:0,onKeyPress:y,title:I("asset-source.file.asset-list.item.select-file-tooltip",{filename:C}),isSelected:v,radius:2,children:(0,l.jsxs)(Tg,{gap:2,flex:2,paddingRight:1,align:"center",onClick:g,onKeyPress:y,"data-id":w,children:[(0,l.jsx)(h.Zb,{as:Tf,padding:2,tone:"transparent",radius:2,style:Tj,children:(0,l.jsx)(h.xv,{muted:!0,size:2,children:(0,l.jsx)(_.$lS,{})})}),N&&(0,l.jsx)(x.u,{content:C,children:(0,l.jsx)(h.xv,{size:1,align:"left",textOverflow:"ellipsis",style:TC,children:C})}),!N&&(0,l.jsx)(h.xv,{size:1,align:"left",textOverflow:"ellipsis",style:TC,children:C})]})}),(0,l.jsx)(Tg,{align:"center",children:(0,l.jsx)(h.xv,{size:1,muted:!0,children:M})}),(0,l.jsx)(Tg,{align:"center",children:(0,l.jsx)(h.xu,{children:(0,l.jsx)(Tb,{size:1,muted:!0,textOverflow:"ellipsis",children:E})})}),(0,l.jsx)(Tg,{align:"center",children:(0,l.jsx)(h.xv,{as:"time",size:1,muted:!0,dateTime:A,children:S})}),(0,l.jsx)(Tg,{justify:"flex-end",align:"center",paddingX:1,paddingY:1,style:Tw,children:(0,l.jsx)(Tp,{border:!1,isSelected:!1,onAction:e=>{"delete"===e.type&&z(),"showUsage"===e.type&&D()}})})]}),R||L]})},TT={paddingLeft:"2.2rem"},TA={gridTemplateColumns:"3fr 1fr 1fr 2fr 30px"};function T_(e){let t=2>(0,h.d2)(),{assets:n,onClick:i,onKeyPress:a,onDeleteFinished:r,selectedAssets:o,isLoading:s}=e,{t:c}=i1();return(0,l.jsxs)(h.xu,{children:[(0,l.jsx)(h.Zb,{borderBottom:!0,paddingBottom:2,marginBottom:1,children:t?(0,l.jsx)(h.rj,{style:TA,children:(0,l.jsx)(h.xu,{flex:2,paddingLeft:5,children:(0,l.jsx)(h.xv,{muted:!0,size:1,weight:"medium",children:c("asset-source.file.asset-list.header.filename")})})}):(0,l.jsxs)(h.rj,{gap:1,style:TA,children:[(0,l.jsx)(h.xu,{flex:2,style:TT,children:(0,l.jsx)(h.xv,{muted:!0,size:1,weight:"medium",children:c("asset-source.file.asset-list.header.filename")})}),(0,l.jsx)(h.xu,{flex:1,children:(0,l.jsx)(h.xv,{muted:!0,size:1,weight:"medium",children:c("asset-source.file.asset-list.header.size")})}),(0,l.jsx)(h.xu,{flex:1,children:(0,l.jsx)(h.xv,{muted:!0,size:1,weight:"medium",children:c("asset-source.file.asset-list.header.type")})}),(0,l.jsx)(h.xu,{flex:1,children:(0,l.jsx)(h.xv,{muted:!0,size:1,weight:"medium",children:c("asset-source.file.asset-list.header.date-added")})})]})}),(0,l.jsxs)(h.Kq,{children:[s&&0===n.length&&(0,l.jsx)(h.xu,{paddingTop:4,paddingBottom:2,children:(0,l.jsx)(h.kC,{justify:"center",children:(0,l.jsx)(h.$j,{muted:!0})})}),n.map(e=>(0,l.jsx)(Tk,{asset:e,isMobile:t,isSelected:o.some(t=>t._id===e._id),onClick:i,onKeyPress:a,onDeleteFinished:r},e._id))]})]})}let TS=typeof window>"u"||!window.devicePixelRatio?1:Math.round(window.devicePixelRatio),TE=j.zo.img`
  position: absolute;
  z-index: 1;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: block;
  object-fit: contain;
`,TM=(0,j.zo)(h.Zb)`
  position: relative;
  z-index: 1;
  padding-bottom: 100%;
`,TN=j.zo.div`
  position: relative;
  display: inherit;
`,TI=j.zo.div`
  box-sizing: border-box;
  position: absolute;
  z-index: 2;
  top: 3px;
  right: 3px;

  & button[data-selected] {
    display: block;
  }

  @media (hover: hover) {
    // If hover is supported, hide the buttons until the user hovers or focuses the asset
    // Use opacity to enable the buttons to still be focusable
    & button {
      opacity: 0;
    }

    ${TN}:hover & {
      button {
        opacity: 1;
      }
    }

    ${TN}:focus-within & {
      button {
        opacity: 1;
      }
    }
  }
`,Tz=(0,d.memo)(function(e){let t=Bi(rz),n=(0,h.pm)(),i=(0,d.useRef)(),{asset:a,onClick:r,onKeyPress:o,onDeleteFinished:s,isSelected:c}=e,[u,p]=(0,d.useState)(!1),[m,f]=(0,d.useState)(!1),[g,x]=(0,d.useState)(!1),{t:y}=i1();(0,d.useEffect)(()=>()=>{i.current&&i.current.unsubscribe()},[]);let b=(0,d.useCallback)(()=>{f(!0)},[f]),v=(0,d.useCallback)(()=>{p(!1),f(!1)},[p,f]),j=(0,d.useCallback)(()=>{p(!0)},[p]),C=(0,d.useCallback)(e=>{n.push({closable:!0,status:"error",title:y("asset-source.image.asset-list.delete-failed"),description:e.message})},[y,n]),w=(0,d.useCallback)(()=>{n.push({status:"success",title:y("asset-source.image.asset-list.delete-successful")})},[y,n]),k=(0,d.useCallback)(()=>{x(!0),i.current=t.observable.delete(a._id).subscribe({next:()=>{x(!1),s(a._id),f(!1),w()},error:e=>{x(!1),C(e),console.error("Could not delete asset",e)}})},[a._id,C,w,s,t.observable]),T=(0,d.useCallback)(e=>{"delete"===e.type&&b(),"showUsage"===e.type&&j()},[b,j]),A=(0,d.useMemo)(()=>u&&(0,l.jsx)(Tm,{assetType:"file",asset:a,onClose:v}),[a,v,u]),_=(0,d.useMemo)(()=>m&&(0,l.jsx)(Td,{assetType:"file",asset:a,onClose:v,onDelete:k,isDeleting:g}),[a,k,v,g,m]),{originalFilename:S,_id:E,url:M}=a,N=200*Math.max(1,TS),I=M.includes(".gif")?`${M}?h=${N}&fit=max&fm=jpg`:`${M}?h=${N}&fit=max`;return(0,l.jsxs)(TN,{children:[(0,l.jsx)(h.zx,{selected:c,tabIndex:0,"data-id":E,mode:"ghost",onKeyPress:o,padding:0,style:{padding:2},children:(0,l.jsxs)(TM,{__unstable_checkered:!0,children:[(0,l.jsx)(TE,{alt:S,src:I,onClick:r,"data-id":E}),g&&(0,l.jsx)(aW,{})]})}),(0,l.jsx)(TI,{children:(0,l.jsx)(Tp,{isSelected:c,onAction:T})}),A||_]})}),T$=(0,j.zo)(h.rj)`
  grid-template-columns: repeat(auto-fill, minmax(120px, 1fr));
`;function TO(e){let{isLoading:t,assets:n,selectedAssets:i,onItemClick:a,onItemKeyPress:r,onDeleteFinished:o}=e;return(0,l.jsxs)(h.xu,{padding:4,children:[(0,l.jsx)(T$,{gap:2,children:n.map(e=>(0,l.jsx)(Tz,{asset:e,isSelected:i.some(t=>t._id===e._id),onClick:a,onKeyPress:r,onDeleteFinished:o},e._id))}),t&&0===n.length&&(0,l.jsx)(h.kC,{justify:"center",children:(0,l.jsx)(h.$j,{muted:!0})}),!t&&0===n.length&&(0,l.jsx)(h.xv,{align:"center",muted:!0})]})}let TP=200,TF="sanity.imageAsset",TD=e=>{let t=["image/*","audio/*","video/*"],n=e.split(",").map(e=>e.trim()).reduce((e,n)=>t.includes(n)?{...e,wildcards:`mimeType match '${n}' || ${e.wildcards}`}:0===n.indexOf(".")?{...e,extensions:`'${n.replace(".","")}', ${e.extensions}`}:{...e,mimes:`'${n}', ${e.mimes}`},{mimes:"",extensions:"",wildcards:""});return`&&
  (
    ${n.wildcards}
    extension in [${n.extensions}] ||
    mimeType in [${n.mimes}]
  )`},TR=(e=0,t=TP,n=TF,i)=>{let a=i.length>0?TD(i):"";return`
  *[_type == "${n}" ${a}] | order(_updatedAt desc) [${e}...${t}] {
    _id,
    _updatedAt,
    _createdAt,
    url,
    originalFilename,
    mimeType,
    extension,
    size,
    metadata {dimensions}
  }
`},TL=(0,j.zo)(h.Zb)`
  border-top: 1px solid var(--card-border-color);
  position: sticky;
  bottom: 0;
  z-index: 200;
`,TB=(0,d.memo)((0,d.forwardRef)(function(e,t){let n=Bi(rz),i=(0,d.useMemo)(()=>n.withConfig({apiVersion:"2023-02-14"}),[n]),a=(0,d.useRef)(`default-asset-source-${eY()}`),r=(0,d.useRef)(0),{t:o}=i1(),s=(0,d.useRef)(),[c,u]=(0,d.useState)([]),[p,m]=(0,d.useState)(!1),[f,g]=(0,d.useState)(!1),[y,b]=(0,d.useState)(!0),{selectedAssets:v,assetType:j="image",dialogHeaderTitle:C,onClose:w,onSelect:k,accept:T}=e,A=T&&"image/*"===T&&"image"===j,S=(0,d.useCallback)(e=>{let t=e*TP,n="image"===j,a=n?TF:"sanity.fileAsset";b(!0),"u">typeof T&&(s.current=i.observable.fetch(TR(t,t+TP,a,T),{},{tag:n?"asset.image-list":"asset.file-list"}).subscribe(e=>{m(e.length<TP),u(t=>t.concat(e)),b(!1)}))},[j,T,i]),E=(0,d.useCallback)(e=>{u(t=>t.filter(t=>t._id!==e))},[u]),M=(0,d.useCallback)(e=>{c.find(t=>t._id===e)&&k([{kind:"assetDocumentId",value:e}])},[c,k]),N=(0,d.useCallback)(e=>{e.preventDefault();let t=e.currentTarget.getAttribute("data-id");if(!t)throw Error("Missing data-id attribute on item");M(t)},[M]),I=(0,d.useCallback)(e=>{if("Enter"===e.key){e.preventDefault();let t=e.currentTarget.getAttribute("data-id");if(!t)throw Error("Missing data-id attribute on item");M(t)}},[M]),z=(0,d.useCallback)(()=>{w&&w()},[w]),$=(0,d.useCallback)(e=>{e.preventDefault(),S(++r.current)},[S]);(0,d.useEffect)(()=>(S(r.current),()=>{s.current&&s.current.unsubscribe()}),[S]),(0,d.useEffect)(()=>{y||r.current&&0!==r.current||g(!0)},[y]);let O=ri({style:"narrow"});return(0,l.jsx)(x.Vq,{__unstable_autoFocus:f,header:C||o("asset-source.dialog.default-title",{context:j}),id:a.current,onClickOutside:z,onClose:z,ref:t,width:2,children:(0,l.jsxs)(h.Kq,{space:5,children:[!A&&!y&&T?.length>0&&(0,l.jsx)(h.Zb,{tone:"primary",padding:3,border:!0,radius:2,children:(0,l.jsxs)(h.kC,{gap:3,align:"center",children:[(0,l.jsx)(h.xv,{size:1,children:(0,l.jsx)(_.hQ6,{})}),(0,l.jsx)(h.xv,{size:1,children:(0,l.jsx)(rm,{t:o,i18nKey:"asset-source.dialog.accept-message",values:{acceptTypes:O.format(T.split(",").map(e=>e.trim()))}})})]})}),"file"===j&&(0,l.jsx)(T_,{assets:c,onDeleteFinished:E,onClick:N,onKeyPress:I,isLoading:y,selectedAssets:v}),"image"===j&&(0,l.jsx)(TO,{assets:c,onDeleteFinished:E,onItemClick:N,onItemKeyPress:I,isLoading:y,selectedAssets:v}),c.length>0&&!p&&(0,l.jsx)(TL,{tone:"default",padding:4,children:(0,l.jsx)(h.kC,{direction:"column",children:(0,l.jsx)(x.zx,{type:"button",icon:_._8t,loading:y,onClick:$,size:"large",text:o("asset-source.dialog.load-more"),tone:"primary"})})})]})})})),Tq={name:"sanity-default",title:"Uploaded files",i18nKey:"asset-source.file.title",component:TB,icon:_.TAM},TV={name:"sanity-default",title:"Uploaded images",i18nKey:"asset-source.image.title",component:TB,icon:_.XBm},TK=[],TU=[],TZ=[],TG=(e,{schema:t},n)=>{let i=t?.types;if(!i)return e;if("function"==typeof i)return i(e,n);if(Array.isArray(i))return[...e,...i];throw Error(`Expected \`schema.types\` to be an array or a function, but received ${wo(i)}`)},TH=async(e,{document:t},n)=>{let i=t?.productionUrl;return i?await i(e,n):e},TW=(e,{tools:t},n)=>{if(!t)return e;if("function"==typeof t)return t(e,n);if(Array.isArray(t))return[...e,...t];throw Error(`Expected \`tools\` to be an array or a function, but received ${wo(t)}`)},TY=(e,{schema:t},n)=>{let i=t?.templates;if(!i)return e;if("function"==typeof i)return i(e,n);if(Array.isArray(i))return[...e,...i];throw Error(`Expected \`schema.templates\` to be an array or a function, but received ${wo(i)}`)},TJ=(e,{i18n:t},n)=>{let i=t?.locales;if(!i)return e;if("function"==typeof i)return i(e,n);if(Array.isArray(i))return[...e,...i];throw Error(`Expected \`i18n.locales\` to be an array or a function, but received ${wo(i)}`)},TX=(e,{i18n:t},n)=>{let i=t?.bundles;if(!i)return e;if(Array.isArray(i))return[...e,...i];if("function"==typeof i)return i(e,n);throw Error(`Expected \`i18n.bundles\` to be an array or a function, but received ${typeof i}`)},TQ=(e,{document:t},n)=>{let i=t?.badges;if(!i)return e;if("function"==typeof i)return i(e,n);if(Array.isArray(i))return[...e,...i];throw Error(`Expected \`document.badges\` to be an array or a function, but received ${wo(i)}`)},T0=(e,{document:t},n)=>{let i=t?.actions;if(!i)return e;if("function"==typeof i)return i(e,n);if(Array.isArray(i))return[...e,...i];throw Error(`Expected \`document.actions\` to be an array or a function, but received ${wo(i)}`)},T1=(e,{document:t},n)=>{let i=t?.newDocumentOptions;if(!i)return e;if("function"!=typeof i)throw Error(`Expected \`document.resolveNewDocumentOptions\` to be a function, but received ${wo(i)}`);return i(e,n)},T2=(e,{form:t},n)=>{let i=t?.file?.assetSources;if(!i)return e;if("function"==typeof i)return i(e,n);if(Array.isArray(i))return[...e,...i];throw Error(`Expected \`form.file.assetSources\` to be an array or a function, but received ${wo(i)}`)},T3=(e,{form:t},n)=>{let i=t?.image?.assetSources;if(!i)return e;if("function"==typeof i)return i(e,n);if(Array.isArray(i))return[...e,...i];throw Error(`Expected \`form.image.assetSources\` to be an array or a function, but received ${wo(i)}`)},T4=(e,{document:t},n)=>{let i=t?.unstable_languageFilter;if(!i)return e;if("function"==typeof i)return i(e,n);if(Array.isArray(i))return[...e,...i];throw Error(`Expected \`document.unstable_languageFilter\` to be an array or a function, but received ${wo(i)}`)},T5=(e,{document:t},n)=>{let i=t?.inspectors;if(!i)return e;if("function"==typeof i)return i(e,n);if(Array.isArray(i))return[...e,...i];throw Error(`Expected \`document.inspectors\` to be an array or a function, but received ${wo(i)}`)},T8=e=>{let{config:t,context:n,initialValue:i}=e;return Tt(t,[]).reduce((e,{config:t})=>{let i=t.document?.comments?.enabled??t.document?.unstable_comments?.enabled;if(!i&&"boolean"!=typeof i)return e;if("function"==typeof i)return i(n);if("boolean"==typeof i)return i;throw Error(`Expected \`document.comments.enabled\` to be a boolean or a function, but received ${wo(i)}`)},i)},T6=e=>{let{config:t}=e;return Tt(t,[]).reduce((e,{config:t})=>{let n=t.__internal_tasks;if(!n)return e;if("object"==typeof n&&n.footerAction)return n;throw Error(`Expected \`__internal__tasks\` to be an object with footerAction, but received ${wo(n)}`)},void 0)},T7=e=>{let{config:t,initialValue:n}=e;return Tt(t,[]).reduce((e,{config:t})=>{let n=t.search?.unstable_partialIndexing?.enabled;if(!n&&"boolean"!=typeof n)return e;if("boolean"==typeof n)return n;throw Error(`Expected \`search.unstable_partialIndexing.enabled\` to be a boolean, but received ${wo(n)}`)},n)},T9=(e,{search:t})=>"u">typeof t?.enableLegacySearch?t.enableLegacySearch:e;function Ae({config:e,context:t,initialValue:n,propertyName:i,...a}){let r=Tt(e,[]);if("reducer"in a)return r.reduce((e,{config:n,path:r})=>{try{return a.reducer(e,n,t)}catch(e){throw new aB({propertyName:i,path:r,cause:e})}},n);let o=a.asyncReducer;return(async()=>{let e=n;for(let{config:n,path:a}of r)try{e=await o(e,n,t)}catch(e){throw new aB({propertyName:i,path:a,cause:e})}return e})()}async function At(e){let t=await Promise.all(e.map(async e=>({...e,resources:await An(e)}))),n={};for(let e of t){let t=e.deep??!0,i=e.overwrite??!0;t?function e(t,n,i=!1){for(let a in n){if("__proto__"===a||"constructor"===a)continue;if(!(a in t)){t[a]=n[a];continue}let r=t[a],o=n[a],s=Ai(r),l=Ai(o);if((s||l)&&i){t[a]=n[a];continue}if(s||l)continue;let c=Array.isArray(o),d=Array.isArray(r);if(c||d){i&&(t[a]=o);continue}e(r,o,i)}return t}(n,e.resources,i):i?Object.assign(n,e.resources):Object.assign({},e.resources,n)}return n}async function An(e){var t,n;return"function"!=typeof e.resources?e.resources:"default"in(n=t=await e.resources())&&"object"==typeof n.default&&tn(n.default)?t.default:t}function Ai(e){return"string"==typeof e||e instanceof String}let Aa={ns:[a0],defaultNS:a0,partialBundledLanguages:!0,fallbackLng:a1.id,lng:a1.id,debug:!!iJ,load:"currentOnly",initImmediate:!0,interpolation:{escapeValue:!1},react:{bindI18nStore:"added"}};function Ar(e){let{bundles:t,...n}=e;return n}function Ao(e){return e.reduce((e,t)=>(e[t.name]=t,e),{})}let As=[{fieldPath:"_updatedAt",icon:_.Que,operators:[{name:"dateTimeLast",type:"item"},{type:"divider"},{name:"dateTimeRange",type:"item"},{name:"dateTimeAfter",type:"item"},{name:"dateTimeBefore",type:"item"},{type:"divider"},{name:"dateTimeEqual",type:"item"},{name:"dateTimeNotEqual",type:"item"}],title:"Edited at",name:"updatedAt",type:"pinned"},{fieldPath:"_createdAt",icon:_.Que,operators:[{name:"dateTimeLast",type:"item"},{type:"divider"},{name:"dateTimeRange",type:"item"},{name:"dateTimeAfter",type:"item"},{name:"dateTimeBefore",type:"item"},{type:"divider"},{name:"dateTimeEqual",type:"item"},{name:"dateTimeNotEqual",type:"item"}],title:"Created at",name:"createdAt",type:"pinned"},{icon:_.xPt,operators:[{name:"referencesDocument",type:"item"},{name:"referencesAssetImage",type:"item"},{name:"referencesAssetFile",type:"item"}],title:"Contains document, image or file",name:"references",type:"pinned"},{fieldType:"array",icon:_.AEM,name:"array",operators:[{name:"defined",type:"item"},{name:"notDefined",type:"item"},{type:"divider"},{name:"arrayCountEqual",type:"item"},{name:"arrayCountNotEqual",type:"item"},{type:"divider"},{name:"arrayCountGt",type:"item"},{name:"arrayCountGte",type:"item"},{name:"arrayCountLt",type:"item"},{name:"arrayCountLte",type:"item"},{type:"divider"},{name:"arrayCountRange",type:"item"}],type:"field"},{fieldType:"array",icon:_.AEM,name:"arrayList",operators:[{name:"arrayListIncludes",type:"item"},{name:"arrayListNotIncludes",type:"item"},{type:"divider"},{name:"defined",type:"item"},{name:"notDefined",type:"item"},{type:"divider"},{name:"arrayCountEqual",type:"item"},{name:"arrayCountNotEqual",type:"item"},{type:"divider"},{name:"arrayCountGt",type:"item"},{name:"arrayCountGte",type:"item"},{name:"arrayCountLt",type:"item"},{name:"arrayCountLte",type:"item"},{type:"divider"},{name:"arrayCountRange",type:"item"}],type:"field"},{fieldType:"array",icon:_.AEM,name:"arrayReferences",operators:[{name:"arrayReferenceIncludes",type:"item"},{name:"arrayReferenceNotIncludes",type:"item"},{type:"divider"},{name:"defined",type:"item"},{name:"notDefined",type:"item"},{type:"divider"},{name:"arrayCountEqual",type:"item"},{name:"arrayCountNotEqual",type:"item"},{type:"divider"},{name:"arrayCountGt",type:"item"},{name:"arrayCountGte",type:"item"},{name:"arrayCountLt",type:"item"},{name:"arrayCountLte",type:"item"},{type:"divider"},{name:"arrayCountRange",type:"item"}],type:"field"},{fieldType:"boolean",icon:_.nSX,name:"boolean",operators:[{name:"booleanEqual",type:"item"},{type:"divider"},{name:"notDefined",type:"item"}],type:"field"},{fieldType:"date",icon:_.Que,name:"date",operators:[{name:"dateLast",type:"item"},{type:"divider"},{name:"dateRange",type:"item"},{name:"dateAfter",type:"item"},{name:"dateBefore",type:"item"},{type:"divider"},{name:"dateEqual",type:"item"},{name:"dateNotEqual",type:"item"},{type:"divider"},{name:"defined",type:"item"},{name:"notDefined",type:"item"}],type:"field"},{fieldType:"datetime",icon:_.Que,name:"datetime",operators:[{name:"dateTimeLast",type:"item"},{type:"divider"},{name:"dateTimeRange",type:"item"},{name:"dateTimeAfter",type:"item"},{name:"dateTimeBefore",type:"item"},{type:"divider"},{name:"dateTimeEqual",type:"item"},{name:"dateTimeNotEqual",type:"item"},{type:"divider"},{name:"defined",type:"item"},{name:"notDefined",type:"item"}],type:"field"},{fieldType:"email",icon:_.Rhe,name:"email",operators:[{name:"stringMatches",type:"item"},{name:"stringNotMatches",type:"item"},{type:"divider"},{name:"stringEqual",type:"item"},{name:"stringNotEqual",type:"item"},{type:"divider"},{name:"defined",type:"item"},{name:"notDefined",type:"item"}],type:"field"},{fieldType:"file",icon:_.$lS,name:"file",operators:[{name:"assetFileEqual",type:"item"},{name:"assetFileNotEqual",type:"item"},{type:"divider"},{name:"defined",type:"item"},{name:"notDefined",type:"item"}],type:"field"},{fieldType:"image",icon:_.XBm,name:"image",operators:[{name:"assetImageEqual",type:"item"},{name:"assetImageNotEqual",type:"item"},{type:"divider"},{name:"defined",type:"item"},{name:"notDefined",type:"item"}],type:"field"},{fieldType:"number",icon:_.yEv,name:"number",operators:[{name:"numberEqual",type:"item"},{name:"numberNotEqual",type:"item"},{type:"divider"},{name:"numberGt",type:"item"},{name:"numberGte",type:"item"},{name:"numberLt",type:"item"},{name:"numberLte",type:"item"},{type:"divider"},{name:"numberRange",type:"item"},{type:"divider"},{name:"defined",type:"item"},{name:"notDefined",type:"item"}],type:"field"},{fieldType:"array",icon:_.aI,name:"portableText",operators:[{name:"portableTextMatches",type:"item"},{name:"portableTextNotMatches",type:"item"},{type:"divider"},{name:"portableTextEqual",type:"item"},{name:"portableTextNotEqual",type:"item"},{type:"divider"},{name:"defined",type:"item"},{name:"notDefined",type:"item"}],type:"field"},{fieldType:"reference",icon:_.xPt,name:"reference",operators:[{name:"referenceEqual",type:"item"},{name:"referenceNotEqual",type:"item"},{type:"divider"},{name:"defined",type:"item"},{name:"notDefined",type:"item"}],type:"field"},{fieldType:"slug",icon:_.Rhe,name:"slug",operators:[{name:"slugMatches",type:"item"},{name:"slugNotMatches",type:"item"},{type:"divider"},{name:"slugEqual",type:"item"},{name:"slugNotEqual",type:"item"},{type:"divider"},{name:"defined",type:"item"},{name:"notDefined",type:"item"}],type:"field"},{fieldType:"string",icon:_.Rhe,name:"string",operators:[{name:"stringMatches",type:"item"},{name:"stringNotMatches",type:"item"},{type:"divider"},{name:"stringEqual",type:"item"},{name:"stringNotEqual",type:"item"},{type:"divider"},{name:"defined",type:"item"},{name:"notDefined",type:"item"}],type:"field"},{fieldType:"string",icon:_.v4q,name:"stringList",operators:[{name:"stringListEqual",type:"item"},{name:"stringListNotEqual",type:"item"},{type:"divider"},{name:"stringMatches",type:"item"},{name:"stringNotMatches",type:"item"},{type:"divider"},{name:"defined",type:"item"},{name:"notDefined",type:"item"}],type:"field"},{fieldType:"text",icon:_.Rhe,name:"text",operators:[{name:"stringMatches",type:"item"},{name:"stringNotMatches",type:"item"},{type:"divider"},{name:"stringEqual",type:"item"},{name:"stringNotEqual",type:"item"},{type:"divider"},{name:"defined",type:"item"},{name:"notDefined",type:"item"}],type:"field"},{fieldType:"url",icon:_.Rhe,name:"url",operators:[{name:"stringMatches",type:"item"},{name:"stringNotMatches",type:"item"},{type:"divider"},{name:"stringEqual",type:"item"},{name:"stringNotEqual",type:"item"},{type:"divider"},{name:"defined",type:"item"},{name:"notDefined",type:"item"}],type:"field"}];function Al(e={}){let t=a7().id;return re.dateTimeFormat(t,e)}function Ac(e={}){let t=a7().id,n={unitDisplay:"long",...e,style:"unit"};return function(e,i){return re.numberFormat(t,{...n,unit:i}).format(e)}}function Ad({documentId:e,schemaType:t}){let n=CI(),i=(0,d.useMemo)(()=>vc(n,t,e,""),[e,n,t]),{draft:a,published:r,isLoading:o}=(0,eR.m)(i,{draft:null,isLoading:!0,published:null}),s=vu({draft:a,published:r,value:(0,d.useMemo)(()=>({_id:e,_type:t.name}),[e,t.name])});return o?(0,l.jsx)(h.Od,{animated:!0,marginLeft:1,radius:2,style:{width:"10ch",height:"1em"}}):(0,l.jsx)(l.Fragment,{children:s.title||e.slice(0,8)})}function Au({value:e}){let t=Al({dateStyle:"medium",timeStyle:e.includeTime?"short":void 0}),n=e?.date?new Date(e.date):null;return n&&(0,tu.Z)(n)?(0,l.jsx)(l.Fragment,{children:t.format(n)}):null}function Ap({value:e}){let t=Al({dateStyle:"medium",timeStyle:e.includeTime?"short":void 0}),n=e?.from?new Date(e.from):null,i=e?.to?new Date(e.to):null;if(!i||!n||!(0,tu.Z)(i)||!(0,tu.Z)(n))return null;let a=t.format(n),r=t.format(i);return(0,l.jsx)(l.Fragment,{children:`${a} \u2192 ${r}`})}function Am({value:e}){let t=NQ(),n=e._ref,i=t.get(e._type);return i?(0,l.jsx)(Ad,{documentId:n,schemaType:i}):null}function Ah(){let e=(0,d.useContext)(p.ci);if(void 0===e)throw Error("useSearchState must be used within an SearchProvider");return e}function Af({value:e,onChange:t}){let[n,i]=(0,d.useState)(e??""),{state:{fullscreen:a}}=Ah(),{t:r}=i1(),o=(0,d.useCallback)(e=>{i(e.currentTarget.value);let n=parseFloat(e.currentTarget.value);t(Number.isFinite(n)?n:null)},[t]);return(0,l.jsx)(h.oi,{fontSize:a?2:1,onChange:o,placeholder:r("search.filter-number-value-placeholder"),radius:2,step:"any",type:"number",value:n})}function Ag({onChange:e,value:t}){let[n,i]=(0,d.useState)(t?.to??""),[a,r]=(0,d.useState)(t?.from??""),{state:{fullscreen:o}}=Ah(),{t:s}=i1(),c=(0,d.useCallback)(n=>{i(n.currentTarget.value);let a=parseFloat(n.currentTarget.value);e({to:Number.isFinite(a)?a:null,from:t?.from??null})},[t?.from,e]),u=(0,d.useCallback)(n=>{r(n.currentTarget.value);let i=parseFloat(n.currentTarget.value);e({to:t?.to??null,from:Number.isFinite(i)?i:null})},[t?.to,e]);return(0,l.jsxs)(h.kC,{gap:2,children:[(0,l.jsx)(h.xu,{flex:1,children:(0,l.jsx)(h.oi,{fontSize:o?2:1,onChange:u,placeholder:s("search.filter-number-min-value-placeholder"),radius:2,step:"any",type:"number",value:a})}),(0,l.jsx)(h.xu,{flex:1,children:(0,l.jsx)(h.oi,{fontSize:o?2:1,onChange:c,placeholder:s("search.filter-number-max-value-placeholder"),radius:2,step:"any",type:"number",value:n})})]})}function Ax(e,t){let n=t.split("."),i=n[0];if(i&&(0,w.m$)(e)){let t=e.fields.find(e=>e.name===i);if(t){let e=n.slice(1).join(".");return e?Ax(t.type,e):t}}}let Ay=(0,j.zo)(h.xu)`
  @supports (-webkit-overflow-scrolling: touch) {
    * [data-ui='Box'] {
      background-attachment: scroll;
    }
  }
`;function Ab({documentId:e,layout:t,presence:n,schemaType:i,showBadge:a=!0}){let r=CI(),o=(0,d.useMemo)(()=>vc(r,i,e,""),[e,r,i]),{draft:s,published:c,isLoading:u}=(0,eR.m)(o,{draft:null,isLoading:!0,published:null}),p=(0,d.useMemo)(()=>({_id:e,_type:i.name}),[e,i.name]),m=(0,d.useMemo)(()=>u?null:(0,l.jsxs)(h.kC,{align:"center",gap:3,children:[n&&n.length>0&&(0,l.jsx)(oI,{presence:n}),a&&(0,l.jsx)(h.Ct,{children:i.title}),(0,l.jsx)(cM,{draft:s,published:c})]}),[s,u,n,c,i.title,a]),f=(0,l.jsx)(BE,{draft:s,published:c});return(0,l.jsx)(Ay,{children:(0,l.jsx)(bU,{...vu({draft:s,published:c,value:p}),isPlaceholder:u??!0,layout:t||"default",icon:i.icon,status:m,tooltip:f})})}function Av({disableIntentLink:e,documentId:t,documentType:n,layout:i,onClick:a,onItemSelect:r,...o}){let s=NQ().get(n),c=CP(t),u=(0,d.useMemo)(()=>({id:t,type:s?.name}),[t,s?.name]),{onClick:p,href:m}=(0,ny.PM)({intent:"edit",params:u}),f=(0,d.useCallback)(i=>{r?.({_id:t,_type:n}),e||p(i),a?.()},[r,t,n,e,a,p]);return s?(0,l.jsx)(h.xu,{...o,children:(0,l.jsx)(BZ,{as:"a","data-as":"a",flex:1,href:e?void 0:m,onClick:f,radius:2,tabIndex:-1,children:(0,l.jsx)(Ab,{documentId:t,layout:i,presence:c,schemaType:s})})}):null}let Aj="u">typeof window&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform)?"Cmd":"Ctrl",AC=h.Lg.space[4];function Aw({allowEmptyQueries:e,terms:t}){let n=!!e||t.query.length>0,i=!!t.filter,a=t.types.length>0;return n||i||a}function Ak(e){return da(e).filter(e=>!1!==e.__experimental_omnisearch_visibility)}function AT(e,t){return(e.title??e.name).localeCompare(t.title??t.name)}let AA={error:null,hits:[],loading:!1,terms:{query:"",types:[]}};function A_(e){return null!==e}function AS(e){return{...e,terms:{...e.terms,filter:e.terms.filter?.trim(),query:e.terms.query.trim()}}}function AE({allowEmptyQueries:e,initialState:t,onComplete:n,onError:i,onStart:a,schema:r}){let[o,s]=(0,d.useState)(t),l=Bi(rz),c=dq(),{enableLegacySearch:u=!1}=dR().search,p=(0,d.useMemo)(()=>dy(Ak(r),l,{tag:"search.global",unique:!0,enableLegacySearch:u,maxDepth:c}),[l,c,r,u]),m=(0,eR.H)(t=>t.pipe((0,eh.h)(A_),(0,P.U)(AS),(0,ea.x)(eF),(0,el.D)(e=>(0,V.H)(e?.debounceTime||300)),(0,H.b)(a),(0,ec.w)(t=>(0,I.z)((0,N.of)({...AA,loading:!0,options:t.options,terms:t.terms}),(0,er.s)(()=>Aw({allowEmptyQueries:e,terms:t.terms}),p(t.terms,t.options).pipe((0,H.b)(({hits:e,nextCursor:t})=>n?.({hits:e,nextCursor:t})),(0,F.K)(e=>(i?.(e),(0,N.of)({...AA,error:e,loading:!1,options:t.options,terms:t.terms})))),(0,N.of)(z.E).pipe((0,H.b)(()=>n?.({hits:[],nextCursor:void 0})))),(0,N.of)({loading:!1}))),(0,ep.R)((e,t)=>({...e,...t}),AA),(0,H.b)(s)));return{handleSearch:(0,d.useCallback)(e=>m(e),[m]),searchState:o}}function AM({availableCharacters:e=40,types:t}){let n;if(0===t.length)return{remainingCount:0,types:[]};let i=t.reduce((n=e,function(t,i,a){let r=AI(i);return n-=r.length,(0===a||e>r.length&&n>r.length)&&t.push(i),t}),[]);return{remainingCount:t.length-i.length,types:i.map(AI)}}function AN({t:e,availableCharacters:t,types:n}){if(0===n.length)return e("search.document-type-list-all-types");let{remainingCount:i,types:a}=AM({availableCharacters:t,types:n});return e(i>0?"search.document-type-list-truncated":"search.document-type-list",{count:i,types:a,formatParams:{types:{style:"short",type:"unit"}}})}function AI(e){return e.title??e.name}let Az=()=>!0,A$=(0,j.zo)(h.xv)`
  word-break: break-word;
`,AO=(0,d.forwardRef)(function({onSelect:e,types:t=[],value:n},i){let a=(0,d.useRef)(null),r=NQ(),{state:{fullscreen:o}}=Ah(),{t:s}=i1(),c=(0,d.useId)(),[u,p]=(0,d.useState)([]),{handleSearch:m,searchState:f}=AE({allowEmptyQueries:!0,initialState:{hits:[],loading:!1,error:null,terms:{query:"",types:t}},onComplete:e=>{p(e.hits.map(({hit:e})=>({value:e._id,hit:e})))},schema:r}),g=(0,d.useCallback)(()=>{m({debounceTime:0,options:{limit:100},terms:{query:"",types:t}})},[m,t]),y=(0,d.useCallback)(e=>{m(e?{options:{limit:100},terms:{query:e||"",types:t}}:{debounceTime:0,options:{limit:0},terms:{query:"",types:t}})},[m,t]),b=(0,d.useCallback)(t=>{let n=u.find(e=>e.value===t)?.hit;n&&e?.({_ref:iS(n._id),_type:n._type})},[u,e]),v=(0,d.useMemo)(()=>{if(0===t.length)return s("search.action.search-all-types");let{remainingCount:e,types:n}=AM({types:t});return s(e>0?"search.action.search-specific-types-truncated":"search.action.search-specific-types",{count:e,types:n,formatParams:{types:{style:"short",type:"unit"}}})},[t,s]),j=(0,d.useCallback)(e=>(0,l.jsx)(Av,{disableIntentLink:!0,documentId:e.value,documentType:e.hit._type,layout:"compact"}),[]),C=(0,d.useCallback)((e,t)=>{let{content:n,hidden:i,onMouseEnter:r,onMouseLeave:o}=e,c=u&&u.length>0;return(0,l.jsx)(x.J2,{constrainSize:!0,content:(0,l.jsx)("div",{ref:t,children:c?n:f.terms.query&&(0,l.jsx)(h.xu,{padding:4,children:(0,l.jsx)(h.kC,{align:"center",height:"fill",justify:"center",children:(0,l.jsx)(A$,{align:"center",muted:!0,children:(0,l.jsx)(rm,{t:s,i18nKey:"new-document.no-results",values:{searchQuery:f.terms.query}})})})})}),fallbackPlacements:["bottom","bottom-end"],matchReferenceWidth:!0,onMouseEnter:r,onMouseLeave:o,open:!f.loading&&!i,overflow:"auto",placement:"bottom-start",radius:3,referenceElement:a.current})},[u,f.loading,f.terms.query,s]);return(0,l.jsx)("div",{ref:a,children:(0,l.jsx)(h.F2,{"aria-label":v,filterOption:Az,fontSize:o?2:1,id:c,loading:f.loading,openButton:{onClick:g},options:u,onQueryChange:y,onSelect:b,placeholder:v,radius:2,ref:i,renderOption:j,renderPopover:C,value:n?._ref})})});function AP({fieldDefinition:e,onChange:t,value:n}){let{onClose:i,state:{documentTypesNarrowed:a}}=Ah(),r=NQ(),{t:o}=i1(),s=(0,d.useCallback)(e=>t(e),[t]),c=(0,d.useMemo)(()=>e?e.documentTypes.filter(e=>a.includes(e)).flatMap(t=>{let n=r.get(t);if(n){let t=Ax(n,e.fieldPath);if((0,w.jB)(t?.type))return t?.type.of.filter(w.dD).flatMap(e=>e.to);if((0,w.dD)(t?.type))return t?.type.to}return[]}).reduce((e,t)=>(0>e.findIndex(e=>e.name===t?.name)&&e.push(t),e),[]):[],[a,e,r]),u=(0,d.useCallback)(()=>s(null),[s]),p=(0,d.useCallback)(()=>{i?.()},[i]);return(0,l.jsx)(h.xu,{style:{width:"min(calc(100vw - 40px), 420px)"},children:n?._ref&&n?._type?(0,l.jsxs)(h.Kq,{space:3,children:[(0,l.jsx)(h.Zb,{padding:1,radius:1,shadow:1,children:(0,l.jsx)(Av,{documentId:n._ref,documentType:n._type,layout:"compact",onClick:p})}),(0,l.jsx)(x.zx,{mode:"ghost",onClick:u,text:o("search.filter-reference-clear"),tone:"critical"})]}):(0,l.jsx)(AO,{onSelect:s,types:c,value:n})})}function AF({onClick:e,selected:t,title:n,value:i}){let a=(0,d.useCallback)(()=>e(i),[e,i]),r=`${n}`;return"u">typeof i&&n!==i&&(r+=` (${i})`),(0,l.jsx)(x.sN,{onClick:a,pressed:t,tone:"default",text:r})}function AD({fieldDefinition:e,onChange:t,value:n}){let i=(0,d.useId)(),{state:{documentTypesNarrowed:a}}=Ah(),{t:r}=i1(),o=NQ(),s=(0,d.useMemo)(()=>e?e.documentTypes.filter(e=>a.includes(e)).map(t=>{let n=o.get(t);return n?Ax(n,e.fieldPath)?.type.options:null}).filter(iw).map(e=>e.list).flatMap(e=>e?.map(e=>(0,w.n4)(e)?e:{title:ti(`${e}`),value:e})).filter(iw).reduce((e,t)=>{let n=e.findIndex(e=>e.value===t?.value);if(n>-1){let i=e[n];e[n]={...e[n],title:e5([...i.title,t.title]).sort()}}else e.push({...t,title:[t.title]});return e},[]):[],[a,e,o]),c=(0,d.useCallback)(e=>{t(e)},[t]);return(0,l.jsx)(x.j2,{button:(0,l.jsx)(x.zx,{mode:"ghost",iconRight:_.v4q,text:n?String(n):r("search.filter-string-value-select-predefined-value")}),id:i||"",menu:(0,l.jsx)(h.v2,{children:s.map((e,t)=>(0,l.jsx)(AF,{onClick:c,selected:e.value===n,title:e.title.join(", "),value:e.value||""},t))}),popover:{constrainSize:!0,placement:"bottom-start",portal:!1,radius:2}})}let AR=()=>(0,l.jsx)("svg",{width:"1em",height:"1em",viewBox:"0 0 25 25",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,l.jsx)("path",{d:"M7.04 19V17.512H17.36V19H7.04ZM7.04 15.328V13.624L12.08 11.872L15.32 10.816V10.72L12.08 9.664L7.04 7.912V6.208L17.36 9.88V11.656L7.04 15.328Z",fill:"currentColor"})}),AL=()=>(0,l.jsx)("svg",{width:"1em",height:"1em",viewBox:"0 0 25 25",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,l.jsx)("path",{d:"M7.568 18.848V16.952L14.792 12.08V11.984L7.568 7.112V5.216L16.52 11.288V12.776L7.568 18.848Z",fill:"currentColor"})}),AB=()=>(0,l.jsx)("svg",{width:"1em",height:"1em",viewBox:"0 0 25 25",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,l.jsx)("path",{d:"M7.04 19V17.512H17.36V19H7.04ZM17.36 15.328L7.04 11.656V9.88L17.36 6.208V7.912L12.32 9.664L9.08 10.72V10.816L12.32 11.872L17.36 13.624V15.328Z",fill:"currentColor"})}),Aq=()=>(0,l.jsx)("svg",{width:"1em",height:"1em",viewBox:"0 0 25 25",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,l.jsx)("path",{d:"M16.952 19.632L8 13.56V12.072L16.952 6V7.896L9.728 12.768V12.864L16.952 17.736V19.632Z",fill:"currentColor"})});function AV(e){return JSON.stringify(e)}function AK({children:e,...t}){let n=(0,d.useContext)(p.yo),{unstable_sources:i}=dR();if("source"in t){let{source:n}=t;return(0,l.jsx)(p.yo.Provider,{value:n,children:e})}if("name"in t){let{name:a}=t,r=i.find(e=>e.name===a);if(!r)throw Error(`Could not find source with name \`${a}\` in current workspace`);return n===r?(0,l.jsx)(l.Fragment,{children:e}):(0,l.jsx)(p.yo.Provider,{value:r,children:e})}throw Error("Invalid props passed into SourceProvider. A `name` or a `source` object is required.")}function AU(){let e=(0,d.useContext)(p.yo);if(!e)throw Error("Could not find `source` context");return e}function AZ(e){let{t}=i1();return(0,l.jsx)(h.xu,{...e,children:(0,l.jsxs)(h.kC,{align:"flex-start",gap:3,children:[(0,l.jsx)(F0,{tone:"caution",children:(0,l.jsx)(_.foC,{})}),(0,l.jsxs)(h.Kq,{space:4,children:[(0,l.jsx)(F0,{size:1,tone:"caution",weight:"medium",children:t("search.error.no-valid-asset-source-title")}),(0,l.jsx)(F0,{size:1,tone:"caution",children:t("search.error.no-valid-asset-source-only-default-description")}),(0,l.jsx)(F0,{size:1,tone:"caution",children:t("search.error.no-valid-asset-source-check-config-description")})]})]})})}function AG({reference:e}){let t=CI(),n=(0,d.useCallback)(e=>ly(t,e),[t]);return(0,l.jsx)(fo,{observeAsset:n,reference:e,waitPlaceholder:(0,l.jsx)(AW,{}),children:e=>(0,l.jsx)(AH,{asset:e})})}function AH({asset:e}){return(0,l.jsx)(h.Zb,{padding:2,shadow:1,children:(0,l.jsxs)(h.kC,{align:"center",justify:"space-between",wrap:"nowrap",children:[(0,l.jsx)(h.Zb,{padding:3,radius:1,shadow:1,tone:"transparent",children:(0,l.jsx)(h.xv,{children:(0,l.jsx)(_.bg6,{})})}),(0,l.jsxs)(h.Kq,{flex:1,space:2,marginLeft:3,children:[(0,l.jsx)(h.xv,{muted:!0,size:1,textOverflow:"ellipsis",weight:"medium",children:e?.originalFilename||e._id}),(0,l.jsx)(h.xv,{size:1,muted:!0,children:fT(e.size)})]})]})})}function AW(){return(0,l.jsx)(h.Zb,{padding:2,shadow:1,children:(0,l.jsxs)(h.kC,{align:"center",justify:"flex-start",children:[(0,l.jsx)(h.Zb,{padding:3,radius:1,shadow:1,tone:"transparent",children:(0,l.jsx)(h.xv,{children:(0,l.jsx)(_.bg6,{})})}),(0,l.jsxs)(h.Kq,{flex:1,space:2,marginLeft:3,children:[(0,l.jsx)(h.Qr,{animated:!0,style:{width:"100%"},radius:1}),(0,l.jsx)(h.Qr,{animated:!0,style:{width:"100%"},radius:1})]})]})})}let AY=(0,j.zo)(h.Zb)`
  position: relative;
  padding-bottom: 100%;
`,AJ=j.zo.img`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  display: block;
  object-fit: contain;
`;function AX({reference:e}){let t=CI(),n=(0,d.useCallback)(e=>ly(t,e),[t]);return(0,l.jsx)(fo,{observeAsset:n,reference:e,children:e=>(0,l.jsx)(AQ,{asset:e})})}function AQ({asset:e}){let[t,n]=(0,d.useState)(!1),i=`${e.url}?h=800&fit=max`,a=(0,d.useCallback)(()=>n(!0),[]);return(0,l.jsxs)(AY,{__unstable_checkered:!0,border:!0,children:[!t&&(0,l.jsx)(aW,{fill:!0,showText:!0}),(0,l.jsx)(AJ,{onLoad:a,src:i})]})}function A0({reference:e}){return e?e._type.startsWith("sanity.fileAsset")?(0,l.jsx)(AG,{reference:e}):e._type.startsWith("sanity.imageAsset")?(0,l.jsx)(AX,{reference:e}):null:null}let A1={file:"sanity.fileAsset",image:"sanity.imageAsset"},A2=(0,j.zo)(h.xu)`
  width: min(calc(100vw - 40px), 320px);
`;function A3(e){return function({onChange:t,value:n}){let[i,a]=(0,d.useState)(null),[r,o]=(0,d.useState)(null);Ah();let{file:s,image:c}=AU().form,{t:u}=i1(),p=(0,d.useMemo)(()=>{switch(e){case"file":return s.assetSources.filter(e=>e.name===Tq.name);case"image":return c.assetSources.filter(e=>e.name===TV.name);default:throw Error("Unknown asset source found")}},[s.assetSources,c.assetSources]),m=(0,d.useId)(),f=Bi(rz),g=(0,d.useCallback)(()=>{o(null),t(null)},[t]),y=(0,d.useCallback)(()=>{a(null)},[]),b=(0,d.useCallback)(e=>{o(e[0]),y()},[y]),v=(0,d.useCallback)(e=>a(e),[]);(0,d.useEffect)(()=>{r?.kind==="assetDocumentId"&&"string"==typeof r?.value&&e&&t({_ref:r.value,_type:A1[e]})},[f,t,r]);let j=i?.component,C=u(n?"search.filter-asset-change":"search.filter-asset-select",{context:e}),w=e7(e,"options.accept","image"===e?"image/*":"");return(0,l.jsx)(A2,{children:(0,l.jsxs)(h.Kq,{space:3,children:[i&&j&&(0,l.jsx)(h.h_,{children:(0,l.jsx)(j,{assetType:e,dialogHeaderTitle:u("search.action.select-asset",{context:e}),onClose:y,onSelect:b,selectedAssets:[],selectionType:"single",accept:w})}),n&&(0,l.jsx)(A0,{reference:n}),(0,l.jsxs)(h.kC,{gap:2,children:[0===p.length&&(0,l.jsx)(AZ,{padding:2}),p.length>0&&(0,l.jsx)(l.Fragment,{children:p.length>1?(0,l.jsx)(x.j2,{button:(0,l.jsx)(x.zx,{icon:n?_.UEU:_.W1M,iconRight:_.v4q,mode:"ghost",width:n?"fill":void 0,text:C}),id:m,menu:(0,l.jsx)(h.v2,{children:p.map(e=>(0,l.jsx)(x.sN,{icon:e.icon||_.XBm,onClick:()=>v(e),text:(e.i18nKey?u(e.i18nKey):e.title)||tt(e.name)},e.name))}),popover:{constrainSize:!0,portal:!1,radius:2}}):(0,l.jsx)(x.zx,{icon:n?_.UEU:_.W1M,mode:"ghost",onClick:()=>v(p[0]),width:n?"fill":void 0,text:C})}),n&&(0,l.jsx)(x.zx,{mode:"ghost",onClick:g,width:"fill",text:u("search.filter-asset-clear"),tone:"critical"})]})]})})}}let A4={assetFileEqual:{nameKey:"search.operator.asset-file-equal.name",descriptionKey:"search.operator.asset-file-equal.description",buttonValueComponent:Am,groqFilter:({fieldPath:e,value:t})=>t?._ref&&e?`${e}.asset._ref == ${AV(t._ref)}`:null,initialValue:null,inputComponent:A3("file"),label:"is",type:"assetFileEqual"},assetFileNotEqual:{nameKey:"search.operator.asset-file-not-equal.name",descriptionKey:"search.operator.asset-file-not-equal.description",buttonValueComponent:Am,groqFilter:({fieldPath:e,value:t})=>t?._ref&&e?`${e}.asset._ref != ${AV(t._ref)}`:null,initialValue:null,inputComponent:A3("file"),label:"is not",type:"assetFileNotEqual"},assetImageEqual:{nameKey:"search.operator.asset-image-equal.name",descriptionKey:"search.operator.asset-image-equal.description",buttonValueComponent:Am,groqFilter:({fieldPath:e,value:t})=>t?._ref&&e?`${e}.asset._ref == ${AV(t._ref)}`:null,initialValue:null,inputComponent:A3("image"),label:"is",type:"assetImageEqual"},assetImageNotEqual:{nameKey:"search.operator.asset-image-not-equal.name",descriptionKey:"search.operator.asset-image-not-equal.description",buttonValueComponent:Am,groqFilter:({fieldPath:e,value:t})=>t?._ref&&e?`${e}.asset._ref != ${AV(t._ref)}`:null,initialValue:null,inputComponent:A3("image"),label:"is not",type:"assetImageNotEqual"}},A5=(0,j.zo)(h.xv)`
  cursor: default;
`;function A8({onChange:e,value:t}){let{t:n}=i1();return(0,l.jsxs)(h.kC,{align:"center",gap:2,justify:"flex-end",marginTop:1,children:[(0,l.jsx)(h.Kq,{children:(0,l.jsx)(A5,{muted:!0,onClick:e,size:1,weight:"medium",children:n("calendar.action.include-time-label")})}),(0,l.jsx)(h.rs,{checked:t,label:n("calendar.action.include-time-label"),onChange:e})]})}function A6(){let e=(0,d.useContext)(p.Ah);if(void 0===e)throw Error("useCalendar must be used within an CalendarContext.Provider");return e}function A7(e){let{t}=i1(),n=Al({month:"long",year:"numeric"}),{focusedDate:i}=A6(),{moveFocusedDate:a,onNowClick:r}=e,o=(0,d.useCallback)(()=>a(-1),[a]),s=(0,d.useCallback)(()=>a(1),[a]);return(0,l.jsxs)(h.kC,{align:"center",flex:1,justify:"space-between",children:[(0,l.jsx)(h.gF,{paddingLeft:2,space:1,children:(0,l.jsx)(h.xv,{size:1,weight:"medium",children:n1(n.format(i))})}),(0,l.jsxs)(h.kC,{align:"center",children:[(0,l.jsx)(x.zx,{"aria-label":t("calendar.action.go-to-today-aria-label"),mode:"bleed",onClick:r,text:t("calendar.action.go-to-today")}),(0,l.jsx)(x.zx,{icon:_.wyc,mode:"bleed",onClick:o,tooltipProps:{content:t("calendar.action.go-to-previous-month")}}),(0,l.jsx)(x.zx,{icon:_.XCv,mode:"bleed",onClick:s,tooltipProps:{content:t("calendar.action.go-to-next-month")}})]})]})}let A9=j.zo.svg(({theme:e})=>(0,j.iv)`
    bottom: 0;
    left: 0;
    position: absolute;
    right: 0;
    top: 0;

    circle {
      stroke: ${e.sanity.color.card.enabled.border};
      stroke-width: 3;
      fill: none;
    }
  `),_e=(0,j.zo)(h.Zb)`
  position: relative;

  &[data-focused='true'] {
    z-index: 1;
  }

  &[data-start-date='true'] {
    border-top-right-radius: 0;
    border-bottom-right-radius: 0;
  }

  &[data-end-date='true'] {
    border-top-left-radius: 0;
    border-bottom-left-radius: 0;
  }

  &[data-within-range='true'] {
    border-radius: 0;
  }
`;function _t({date:e,onSelect:t}){let n=(0,d.useCallback)(()=>{t(e)},[e,t]),{date:i,endDate:a,focusedDate:r,selectRange:o}=A6(),s=i&&(0,tx.Z)(e,i),c=o&&i&&(0,tx.Z)(e,i),u=o&&a&&(0,tx.Z)(e,a),p=(0,ty.Z)(e,r),m=r&&(0,tx.Z)(e,r),f=(0,tx.Z)(e,new Date),g=i&&a&&!c&&!u&&(0,t_.Z)(e,i)&&(0,tS.Z)(e,a);return(0,l.jsxs)(_e,{__unstable_focusRing:!0,"aria-label":e.toDateString(),"aria-pressed":s,"data-end-date":!!u||void 0,"data-focused":m?"true":"","data-ui":"CalendarDay","aria-selected":s,"data-start-date":!!c||void 0,"data-within-range":!!g||void 0,forwardedAs:"button",onClick:n,paddingX:3,paddingY:2,radius:2,role:"button",selected:s||c||u,tabIndex:-1,tone:g?"primary":"default",children:[f&&(0,l.jsx)(A9,{height:"100%",preserveAspectRatio:"xMidYMid meet",vectorEffect:"non-scaling-stroke",viewBox:"0 0 100 100",width:"100%",children:(0,l.jsx)("circle",{cx:"50",cy:"50",r:"40%"})}),(0,l.jsx)(h.xv,{align:"center",muted:!s&&!p,size:1,weight:p?"medium":"regular",children:e.getDate()})]})}let _n=["calendar.weekday-names.short.monday","calendar.weekday-names.short.tuesday","calendar.weekday-names.short.wednesday","calendar.weekday-names.short.thursday","calendar.weekday-names.short.friday","calendar.weekday-names.short.saturday","calendar.weekday-names.short.sunday"];tY(0,24);let _i=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],_a=[1,2,3,4,5,6],_r=(e,t)=>{let n=(0,tp.Z)(e);return(0,tm.Z)({start:n,end:(0,th.Z)(n)},{weekStartsOn:7===t?0:t})},_o=e=>e.map(e=>[e,..._a.map(t=>(0,tf.Z)(e,t))]),_s=e=>{let{weekInfo:t}=a7();return _o(_r(e,t.firstDay)).map(e=>({number:(0,tg.Z)(e[0]),days:e}))},_l={1:_n,7:[_n[6],..._n.slice(0,6)]},_c=(0,j.zo)(h.rj)`
  grid-template-columns: repeat(7, minmax(44px, auto));
`;function _d({hidden:e,onSelect:t}){let{focusedDate:n,firstWeekDay:i}=A6(),{t:a}=i1();return(0,l.jsx)(h.xu,{"aria-hidden":e||!1,"data-ui":"CalendarMonth",children:(0,l.jsxs)(_c,{gapY:1,children:[_l[i].map(e=>(0,l.jsx)(h.xu,{paddingBottom:3,paddingTop:2,children:(0,l.jsx)(h.xv,{align:"center",size:1,weight:"medium",children:a(e)})},e)),_s(n).map((e,n)=>e.days.map((e,i)=>(0,l.jsx)(_t,{date:e,onSelect:t},`${n}-${i}`)))]})})}let _u=(0,l.jsx)("span",{"data-preserve-focus":!0,style:{overflow:"hidden",position:"absolute",outline:"none"},tabIndex:-1});function _p(e){let{date:t,endDate:n,onSelect:i,selectRange:a,selectTime:r}=e,[o,s]=(0,d.useState)(null),[c,u]=(0,d.useState)(!1),[m,f]=(0,d.useState)(t||new Date),g=(0,d.useRef)(t||null),x=(0,d.useRef)(n||null),{weekInfo:{firstDay:y}}=a7(),b=(0,d.useCallback)(()=>{o?.querySelector('[data-focused="true"]')?.focus()},[o]),v=(0,d.useCallback)(e=>{let r=(0,tE.Z)(e,{hours:e.getHours(),minutes:e.getMinutes(),seconds:0,milliseconds:0}),o=t&&(0,tS.Z)(r,t),s=n&&(0,t_.Z)(r,n);if(a){if(o||s){i({date:r,endDate:null});return}i(c?{date:t||null,endDate:r}:{date:r,endDate:t?null:n||null})}else i({date:r})},[t,n,i,c,a]),j=(0,d.useCallback)(()=>{let e=new Date;a?f(e):i({date:e})},[i,a,f]),C=(0,d.useCallback)(e=>{if(_i.includes(e.key)){if(e.preventDefault(),e.target.hasAttribute("data-calendar-grid")){b();return}"ArrowUp"===e.key&&f((0,tf.Z)(m,-7)),"ArrowDown"===e.key&&f((0,tf.Z)(m,7)),"ArrowLeft"===e.key&&f((0,tf.Z)(m,-1)),"ArrowRight"===e.key&&f((0,tf.Z)(m,1)),o?.querySelector("[data-preserve-focus]")?.focus()}},[o,b,m,f]),w=(0,d.useCallback)(e=>f((0,tj.Z)(m,e)),[m,f]);(0,d.useEffect)(()=>{b()},[b]),(0,d.useEffect)(()=>{document.activeElement?.matches("[data-calendar-grid], [data-calendar-grid] [data-preserve-focus]")&&b()},[b,m]),(0,d.useEffect)(()=>{let e=t?.getTime()!==g.current?.getTime(),a=n?.getTime()!==x.current?.getTime(),r=t&&n&&(0,t_.Z)(t,n);e&&!a&&(r&&(u(!0),i({date:t,endDate:null})),u(!!t),t&&f(t)),!e&&a&&(r&&(u(!0),i({date:n,endDate:null})),u(!!t&&!n),n&&f(n)),e&&a&&(u(!0),t&&f(t)),g.current=t||null,x.current=n||null},[t,n,i]);let k=(0,d.useMemo)(()=>({date:t,endDate:n,focusedDate:m,selectRange:a,selectTime:r,firstWeekDay:y}),[t,n,y,m,a,r]);return(0,l.jsx)(p.Ah.Provider,{value:k,children:(0,l.jsxs)(h.xu,{"data-ui":"Calendar",ref:s,children:[(0,l.jsx)(h.kC,{children:(0,l.jsx)(h.xu,{flex:1,children:(0,l.jsx)(A7,{moveFocusedDate:w,onNowClick:j})})}),(0,l.jsxs)(h.xu,{"data-calendar-grid":!0,onKeyDown:C,marginTop:2,overflow:"hidden",tabIndex:0,children:[(0,l.jsx)(_d,{onSelect:v}),_u]})]})})}function _m({date:e,endDate:t,onChange:n,selectRange:i,selectTime:a}){let r=(0,d.useCallback)(e=>{n(e)},[n]);return(0,l.jsx)(_p,{date:e,endDate:t,onSelect:r,selectRange:i,selectTime:a})}let _h=(0,j.zo)(h.xu)(({$background:e,$smallClearButton:t})=>(0,j.iv)`
    width: 100%;

    input + span {
      background: ${({theme:t})=>e?t.sanity.color.card.disabled.bg2:"transparent"};
    }

    [data-qa='clear-button'] {
      background: none;
      box-shadow: none;
      display: flex; /* TODO: hack, currently used to vertically center <TextInput>'s clearButton */
      transform: ${t?"scale(0.8)":"scale(1)"};
      &:hover {
        opacity: 0.5;
      }
    }
  `),_f=(0,d.forwardRef)(function(e,t){let{$background:n,$smallClearButton:i,...a}=e;return(0,l.jsx)(_h,{$background:n,$smallClearButton:i,children:(0,l.jsx)(h.oi,{...a,ref:t})})});function _g({date:e,dateOnly:t,roundDay:n}){let i;switch(n){case"end":i=(0,tM.Z)(e);break;case"start":i=(0,tN.Z)(e);break;default:i=e}return t?i.toISOString().split("T")[0]:i.toISOString()}let _x={date:{exampleDate:"Jan 1, 2000",pattern:"MMM d, yyyy"},datetime:{exampleDate:"Jan 1, 2000 12:00 AM",pattern:"MMM d, yyyy p"}};function _y({isDateTime:e,onChange:t,placeholderDate:n,isDateTimeFormat:i,value:a,...r}){let{t:o}=i1(),s=i?_x.datetime.pattern:_x.date.pattern,[c,u]=(0,d.useState)(void 0),[p,m]=(0,d.useState)(()=>{if(!a)return"";let e=new Date(a);return(0,tI.Z)(e,s)}),h=(0,d.useMemo)(()=>(0,tI.Z)(n||new Date,s),[s,n]),f=(0,d.useCallback)(({dateString:n,triggerOnChange:i})=>{if(!n)return;let a=(0,tz.Z)(n,s,new Date),r=(0,tu.Z)(a);r&&(i&&t(_g({date:a,dateOnly:!e})),m((0,tI.Z)(a,s))),u(r?void 0:`Invalid ${e?"datetime":"date"}`)},[s,e,t]),g=(0,d.useCallback)(()=>{f({dateString:p,triggerOnChange:!0})},[p,f]),y=(0,d.useCallback)(e=>{m(e.currentTarget.value)},[]),b=(0,d.useCallback)(()=>{t(null),u(void 0),m("")},[t]),v=(0,d.useCallback)(e=>{"Enter"===e.key&&f({dateString:p,triggerOnChange:!0})},[p,f]);return(0,d.useEffect)(()=>{let e=a&&new Date(a);e&&f({dateString:(0,tI.Z)(e,s),triggerOnChange:!1})},[s,f,i,a]),(0,l.jsx)(x.u,{content:o("calendar.error.must-be-in-format",{exampleDate:i?_x.datetime.exampleDate:_x.date.exampleDate}),disabled:!c,placement:"top",portal:!0,children:(0,l.jsx)(_f,{...r,clearButton:!!p,customValidity:c,onBlur:g,onChange:y,onClear:b,onKeyDown:v,placeholder:h,value:p})})}function _b({direction:e,isDateTime:t,onChange:n,value:i}){let{state:{fullscreen:a}}=Ah(),{t:r}=i1(),o=(0,d.useMemo)(()=>{switch(e){case"after":return"end";case"before":return"start";default:return}},[e]),s=(0,d.useCallback)(({date:e})=>{let a=null;e&&(a=_g({date:e,dateOnly:!t,roundDay:i?.includeTime?void 0:o})),n({includeTime:i?.includeTime,date:a})},[t,n,o,i?.includeTime]),c=(0,d.useCallback)(()=>{let e=!i?.includeTime,a=i?.date?new Date(i.date):null,r=null;a&&(r=_g({date:a,dateOnly:!t,roundDay:e?"start":o})),n({includeTime:e,date:r})},[t,n,o,i]),u=(0,d.useCallback)(e=>{n({includeTime:i?.includeTime,date:e||null})},[n,i?.includeTime]);return(0,l.jsxs)(h.Kq,{space:3,children:[(0,l.jsx)(_y,{"aria-label":r("search.filter-date-aria-label"),fontSize:a?2:1,isDateTime:t,isDateTimeFormat:t&&i?.includeTime,onChange:u,radius:2,value:i?.date}),(0,l.jsx)(_m,{date:i?.date?new Date(i.date):void 0,onChange:s,selectTime:t}),t&&(0,l.jsx)(A8,{onChange:c,value:!!i?.includeTime})]})}function _v({isDateTime:e,onChange:t,value:n}){let{state:{fullscreen:i}}=Ah(),{t:a}=i1(),r=(0,d.useCallback)(({date:i})=>{if(i){let a=_g({date:i,dateOnly:!e});t({includeTime:n?.includeTime,date:a})}else t(null)},[e,t,n?.includeTime]),o=(0,d.useCallback)(()=>{let i=!n?.includeTime,a=n?.date?new Date(n.date):null,r=null;a&&(r=_g({date:a,dateOnly:!e})),t({includeTime:i,date:r})},[e,t,n]),s=(0,d.useCallback)(e=>{t({includeTime:n?.includeTime,date:e||null})},[t,n?.includeTime]);return(0,l.jsxs)(h.Kq,{space:3,children:[(0,l.jsx)(_y,{"aria-label":a("search.filter-date-aria-label"),fontSize:i?2:1,isDateTime:e,isDateTimeFormat:e&&n?.includeTime,onChange:s,radius:2,value:n?.date}),(0,l.jsx)(_m,{date:n?.date?new Date(n.date):void 0,onChange:r,selectTime:e}),e&&(0,l.jsx)(A8,{onChange:o,value:!!n?.includeTime})]})}function _j(e){return(0,l.jsx)(_v,{...e,isDateTime:!1})}let _C=[{unit:"day",key:"search.filter-date-unit_days"},{unit:"month",key:"search.filter-date-unit_months"},{unit:"year",key:"search.filter-date-unit_years"}];function _w({onChange:e,value:t}){let[n,i]=(0,d.useState)(t?.unitValue||""),a=(0,d.useRef)("day"),r=(0,d.useRef)(t?.unitValue||null),{t:o}=i1(),{state:{fullscreen:s}}=Ah(),c=(0,d.useCallback)(()=>{e({unit:a?.current,unitValue:r?.current})},[e]),u=(0,d.useCallback)(e=>{a.current=e.currentTarget.value,c()},[c]),p=(0,d.useCallback)(e=>{i(e.currentTarget.value);let t=parseFloat(e.currentTarget.value);r.current=Number.isFinite(t)?t:null,c()},[c]);return(0,l.jsxs)(h.kC,{gap:2,children:[(0,l.jsx)(h.xu,{flex:1,children:(0,l.jsx)(h.oi,{"aria-label":o("search.filter-date-value-aria-label"),fontSize:s?2:1,onChange:p,pattern:"\\d*",radius:2,step:"1",type:"number",value:n})}),(0,l.jsx)(h.xu,{flex:1,children:(0,l.jsx)(h.Ph,{"aria-label":o("search.filter-date-unit-aria-label"),fontSize:s?2:1,onChange:u,radius:2,value:t?.unit,children:_C.map(e=>(0,l.jsx)("option",{value:e.unit,children:o(e.key)},e.key))})})]})}function _k({isDateTime:e,onChange:t,value:n}){let{t:i}=i1(),{state:{fullscreen:a}}=Ah(),r=(0,d.useMemo)(()=>(0,tf.Z)(new Date,-7),[]),o=(0,d.useMemo)(()=>new Date,[]),s=(0,d.useCallback)(({date:i,endDate:a})=>{t(_T({date:i,endDate:a,includeTime:n?.includeTime,isDateTime:e}))},[e,t,n?.includeTime]),c=(0,d.useCallback)(()=>{let i=!n?.includeTime;t(_T({date:n?.from?new Date(n.from):null,endDate:n?.to?new Date(n.to):null,includeTime:i,isDateTime:e}))},[e,t,n]),u=(0,d.useCallback)(e=>{t({includeTime:n?.includeTime,to:e||null,from:n?.from||null})},[t,n]),p=(0,d.useCallback)(e=>{t({includeTime:n?.includeTime,to:n?.to||null,from:e||null})},[t,n]);return(0,l.jsx)("div",{children:(0,l.jsxs)(h.Kq,{space:3,children:[(0,l.jsxs)(h.kC,{direction:"column",gap:3,children:[(0,l.jsx)(_y,{"aria-label":i("search.filter-date-range-start-date-aria-label"),fontSize:a?2:1,isDateTime:e,isDateTimeFormat:e&&n?.includeTime,onChange:p,placeholderDate:r,radius:2,value:n?.from}),(0,l.jsx)(_y,{"aria-label":i("search.filter-date-range-end-date-aria-label"),fontSize:a?2:1,isDateTime:e,isDateTimeFormat:e&&n?.includeTime,onChange:u,placeholderDate:o,radius:2,value:n?.to})]}),(0,l.jsx)(_m,{date:n?.from?new Date(n.from):void 0,endDate:n?.to?new Date(n.to):void 0,onChange:s,selectRange:!0,selectTime:e}),e&&(0,l.jsx)(A8,{onChange:c,value:!!n?.includeTime})]})})}function _T({date:e,endDate:t,includeTime:n,isDateTime:i}){return n?{includeTime:n,to:t?_g({date:t,dateOnly:!i,roundDay:"start"}):null,from:e?_g({date:e,dateOnly:!i,roundDay:"start"}):null}:{includeTime:n,to:t?_g({date:t,dateOnly:!i,roundDay:"end"}):null,from:e?_g({date:e,dateOnly:!i,roundDay:"start"}):null}}function _A(e){return(0,l.jsx)(_v,{...e,isDateTime:!0})}let __={buttonValueComponent:Au,initialValue:null},_S={buttonValueComponent:Au,initialValue:null},_E={buttonValueComponent:Au,initialValue:{date:null,includeTime:!1}},_M={buttonValueComponent:function({value:e}){let t=Ac();return(0,l.jsx)(l.Fragment,{children:t(Math.floor(e?.unitValue??0),e.unit)})}},_N={buttonValueComponent:Au,initialValue:{date:null,includeTime:!1}},_I={initialValue:null},_z={dateAfter:{...__,nameKey:"search.operator.date-after.name",descriptionKey:"search.operator.date-after.description",groqFilter:({fieldPath:e,value:t})=>t?.date&&e?`${e} > ${AV(t?.date)}`:null,inputComponent:function(e){return(0,l.jsx)(_b,{...e,direction:"after",isDateTime:!1})},type:"dateAfter"},dateBefore:{..._S,nameKey:"search.operator.date-before.name",descriptionKey:"search.operator.date-before.description",groqFilter:({fieldPath:e,value:t})=>t?.date&&e?`${e} < ${AV(t?.date)}`:null,inputComponent:function(e){return(0,l.jsx)(_b,{...e,direction:"before",isDateTime:!1})},type:"dateBefore"},dateEqual:{..._E,nameKey:"search.operator.date-equal.name",descriptionKey:"search.operator.date-equal.description",groqFilter:({fieldPath:e,value:t})=>t?.date&&e?`${e} == ${AV(t.date)}`:null,inputComponent:_j,type:"dateEqual"},dateLast:{..._M,nameKey:"search.operator.date-last.name",descriptionKey:"search.operator.date-last.description",groqFilter:({fieldPath:e,value:t})=>{let n="number"==typeof t?.unitValue?Math.floor(t.unitValue):void 0,i=Number.isFinite(n)?(0,t$.Z)(new Date,{days:t?.unit==="day"?n:0,months:t?.unit==="month"?n:0,years:t?.unit==="year"?n:0}).toISOString().split("T")[0]:null;return i&&e?`${e} > ${AV(i)}`:null},inputComponent:_w,initialValue:{unit:"day",unitValue:7},type:"dateLast"},dateNotEqual:{..._N,nameKey:"search.operator.date-not-equal.name",descriptionKey:"search.operator.date-not-equal.description",groqFilter:({fieldPath:e,value:t})=>t?.date&&e?`${e} != ${AV(t.date)}`:null,inputComponent:_j,type:"dateNotEqual"},dateRange:{..._I,nameKey:"search.operator.date-range.name",descriptionKey:"search.operator.date-range.description",buttonValueComponent:Ap,groqFilter:({fieldPath:e,value:t})=>t?.to&&t?.from&&e?`${e} >= ${AV(t.from)} && ${e} <= ${AV(t.to)}`:null,initialValue:{includeTime:!1,to:(0,tO.Z)().toISOString(),from:null},inputComponent:function(e){return(0,l.jsx)(_k,{...e,isDateTime:!1})},type:"dateRange"},dateTimeAfter:{...__,nameKey:"search.operator.date-time-after.name",descriptionKey:"search.operator.date-time-after.description",groqFilter:({fieldPath:e,value:t})=>t?.date&&e?`dateTime(${e}) > dateTime(${AV(t.date)})`:null,inputComponent:function(e){return(0,l.jsx)(_b,{...e,direction:"after",isDateTime:!0})},type:"dateTimeAfter"},dateTimeBefore:{..._S,nameKey:"search.operator.date-time-before.name",descriptionKey:"search.operator.date-time-before.description",groqFilter:({fieldPath:e,value:t})=>t?.date&&e?`dateTime(${e}) < dateTime(${AV(t.date)})`:null,inputComponent:function(e){return(0,l.jsx)(_b,{...e,direction:"before",isDateTime:!0})},type:"dateTimeBefore"},dateTimeEqual:{..._E,nameKey:"search.operator.date-time-equal.name",descriptionKey:"search.operator.date-time-equal.description",groqFilter:({fieldPath:e,value:t})=>{let n=t?.date&&new Date(t.date);if(!n||!(0,tu.Z)(n)||!e)return null;let i=(t?.includeTime?(0,tP.Z)(n):(0,tN.Z)(n)).toISOString(),a=(t?.includeTime?(0,tF.Z)(n):(0,tM.Z)(n)).toISOString();return`dateTime(${e}) > dateTime(${AV(i)}) && dateTime(${e}) < dateTime(${AV(a)})`},inputComponent:_A,type:"dateTimeEqual"},dateTimeLast:{..._M,nameKey:"search.operator.date-time-last.name",descriptionKey:"search.operator.date-time-last.description",groqFilter:({fieldPath:e,value:t})=>{let n="number"==typeof t?.unitValue?Math.floor(t.unitValue):void 0,i=Number.isFinite(n)?(0,t$.Z)(new Date,{days:t?.unit==="day"?n:0,months:t?.unit==="month"?n:0,years:t?.unit==="year"?n:0}).toISOString():null;return i&&e?`dateTime(${e}) > dateTime(${AV(i)})`:null},initialValue:{unit:"day",unitValue:7},inputComponent:_w,type:"dateTimeLast"},dateTimeNotEqual:{..._N,nameKey:"search.operator.date-time-not-equal.name",descriptionKey:"search.operator.date-time-not-equal.description",groqFilter:({fieldPath:e,value:t})=>{let n=t?.date&&new Date(t.date);if(!n||!(0,tu.Z)(n)||!e)return null;let i=(t?.includeTime?(0,tP.Z)(n):(0,tN.Z)(n)).toISOString(),a=(t?.includeTime?(0,tF.Z)(n):(0,tM.Z)(n)).toISOString();return`dateTime(${e}) < dateTime(${AV(i)}) || dateTime(${e}) > dateTime(${AV(a)})`},inputComponent:_A,type:"dateTimeNotEqual"},dateTimeRange:{..._I,nameKey:"search.operator.date-time-range.name",descriptionKey:"search.operator.date-time-range.description",buttonValueComponent:Ap,groqFilter:({fieldPath:e,value:t})=>t?.to&&t?.from&&e?`dateTime(${e}) >= dateTime(${AV(t.from)}) && dateTime(${e}) <= dateTime(${AV(t.to)})`:null,initialValue:{includeTime:!1,to:(0,tO.Z)().toISOString(),from:null},inputComponent:function(e){return(0,l.jsx)(_k,{...e,isDateTime:!0})},type:"dateTimeRange"}};function _$({onChange:e,value:t}){let{state:{fullscreen:n}}=Ah(),{t:i}=i1(),a=(0,d.useCallback)(t=>e(t.currentTarget.value||null),[e]);return(0,l.jsx)(h.oi,{fontSize:n?2:1,onChange:a,placeholder:i("search.filter-string-value-placeholder"),radius:2,value:t||""})}let _O={referenceEqual:{nameKey:"search.operator.reference-equal.name",descriptionKey:"search.operator.reference-equal.description",buttonValueComponent:Am,groqFilter:({fieldPath:e,value:t})=>t?._ref&&e?`${e}._ref == ${AV(t._ref)}`:null,initialValue:null,inputComponent:AP,type:"referenceEqual"},referenceNotEqual:{nameKey:"search.operator.reference-not-equal.name",descriptionKey:"search.operator.reference-not-equal.description",buttonValueComponent:Am,groqFilter:({fieldPath:e,value:t})=>t?._ref&&e?`${e}._ref != ${AV(t._ref)}`:null,initialValue:null,inputComponent:AP,type:"referenceNotEqual"},referencesAssetFile:{nameKey:"search.operator.reference-asset-file.name",descriptionKey:"search.operator.reference-asset-file.description",buttonValueComponent:Am,groqFilter:({value:e})=>e?._ref?`references(${AV(e._ref)})`:null,initialValue:null,inputComponent:A3("file"),type:"referencesAssetFile"},referencesAssetImage:{nameKey:"search.operator.reference-asset-image.name",descriptionKey:"search.operator.reference-asset-image.description",buttonValueComponent:Am,groqFilter:({value:e})=>e?._ref?`references(${AV(e._ref)})`:null,initialValue:null,inputComponent:A3("image"),type:"referencesAssetImage"},referencesDocument:{nameKey:"search.operator.reference-document.name",descriptionKey:"search.operator.reference-document.description",buttonValueComponent:Am,groqFilter:({value:e})=>e?._ref?`references(${AV(e._ref)})`:null,initialValue:null,inputComponent:AP,type:"referencesDocument"}},_P=Object.values({arrayCountEqual:{nameKey:"search.operator.array-count-equal.name",descriptionKey:"search.operator.array-count-equal.description",groqFilter:({fieldPath:e,value:t})=>Number.isFinite(t)&&e?`count(${e}) == ${AV(t)}`:null,initialValue:null,inputComponent:Af,type:"arrayCountEqual"},arrayCountGt:{nameKey:"search.operator.array-count-gt.name",descriptionKey:"search.operator.array-count-gt.description",groqFilter:({fieldPath:e,value:t})=>Number.isFinite(t)&&e?`count(${e}) > ${AV(t)}`:null,icon:AL,initialValue:null,inputComponent:Af,type:"arrayCountGt"},arrayCountGte:{nameKey:"search.operator.array-count-gte.name",descriptionKey:"search.operator.array-count-gte.description",groqFilter:({fieldPath:e,value:t})=>Number.isFinite(t)&&e?`count(${e}) >= ${AV(t)}`:null,icon:AR,initialValue:null,inputComponent:Af,type:"arrayCountGte"},arrayCountLt:{nameKey:"search.operator.array-count-lt.name",descriptionKey:"search.operator.array-count-lt.description",groqFilter:({fieldPath:e,value:t})=>Number.isFinite(t)&&e?`count(${e}) < ${AV(t)}`:null,icon:Aq,initialValue:null,inputComponent:Af,type:"arrayCountLt"},arrayCountLte:{nameKey:"search.operator.array-count-lte.name",descriptionKey:"search.operator.array-count-lte.description",groqFilter:({fieldPath:e,value:t})=>Number.isFinite(t)&&e?`count(${e}) <= ${AV(t)}`:null,icon:AB,initialValue:null,inputComponent:Af,type:"arrayCountLte"},arrayCountNotEqual:{nameKey:"search.operator.array-count-not-equal.name",descriptionKey:"search.operator.array-count-not-equal.description",groqFilter:({fieldPath:e,value:t})=>Number.isFinite(t)&&e?`count(${e}) != ${AV(t)}`:null,initialValue:null,inputComponent:Af,type:"arrayCountNotEqual"},arrayCountRange:{nameKey:"search.operator.array-count-range.name",descriptionKey:"search.operator.array-count-range.description",groqFilter:({fieldPath:e,value:t})=>Number.isFinite(t?.to)&&Number.isFinite(t?.from)&&e?`count(${e}) > ${AV(t?.from)} && count(${e}) < ${AV(t?.to)}`:"",initialValue:null,inputComponent:Ag,type:"arrayCountRange"},arrayListIncludes:{nameKey:"search.operator.array-list-includes.name",descriptionKey:"search.operator.array-list-includes.description",groqFilter:({fieldPath:e,value:t})=>t&&e?`${AV(t)} in ${e}`:null,initialValue:null,inputComponent:AD,type:"arrayListIncludes"},arrayListNotIncludes:{nameKey:"search.operator.array-list-not-includes.name",descriptionKey:"search.operator.array-list-not-includes.description",groqFilter:({fieldPath:e,value:t})=>t&&e?`!(${AV(t)} in ${e})`:null,initialValue:null,inputComponent:AD,type:"arrayListNotIncludes"},arrayReferenceIncludes:{nameKey:"search.operator.array-reference-includes.name",descriptionKey:"search.operator.array-reference-includes.description",buttonValueComponent:Am,groqFilter:({fieldPath:e,value:t})=>t?._ref&&e?`${AV(t._ref)} in ${e}[]._ref`:null,initialValue:null,inputComponent:AP,type:"arrayReferenceIncludes"},arrayReferenceNotIncludes:{nameKey:"search.operator.array-reference-not-includes.name",descriptionKey:"search.operator.array-reference-not-includes.description",buttonValueComponent:Am,groqFilter:({fieldPath:e,value:t})=>t?._ref&&e?`!(${AV(t._ref)} in ${e}[]._ref)`:null,initialValue:null,inputComponent:AP,type:"arrayReferenceNotIncludes"},...A4,booleanEqual:{nameKey:"search.operator.boolean-equal.name",descriptionKey:"search.operator.boolean-equal.description",groqFilter:({fieldPath:e,value:t})=>"u">typeof t&&e?`${e} == ${AV(t)}`:null,initialValue:!0,inputComponent:function({onChange:e,value:t}){let{state:{fullscreen:n}}=Ah(),{t:i}=i1(),a=(0,d.useCallback)(t=>{e("true"===t.currentTarget.value)},[e]);return(0,l.jsxs)(h.Ph,{fontSize:n?2:1,onChange:a,radius:2,value:String(t??!0),children:[(0,l.jsx)("option",{value:"true",children:i("search.filter-boolean-true")}),(0,l.jsx)("option",{value:"false",children:i("search.filter-boolean-false")})]})},type:"booleanEqual"},..._z,defined:{nameKey:"search.operator.defined.name",descriptionKey:"search.operator.defined.description",groqFilter:({fieldPath:e})=>e?`defined(${e})`:null,type:"defined"},notDefined:{nameKey:"search.operator.not-defined.name",descriptionKey:"search.operator.not-defined.description",i18nKey:"search.operator.not-defined",groqFilter:({fieldPath:e})=>e?`!defined(${e})`:null,type:"notDefined"},numberEqual:{nameKey:"search.operator.number-equal.name",descriptionKey:"search.operator.number-equal.description",groqFilter:({fieldPath:e,value:t})=>Number.isFinite(t)&&e?`${e} == ${AV(t)}`:null,initialValue:null,inputComponent:Af,type:"numberEqual"},numberGt:{nameKey:"search.operator.number-gt.name",descriptionKey:"search.operator.number-gt.description",groqFilter:({fieldPath:e,value:t})=>Number.isFinite(t)&&e?`${e} > ${AV(t)}`:null,icon:AL,initialValue:null,inputComponent:Af,type:"numberGt"},numberGte:{nameKey:"search.operator.number-gte.name",descriptionKey:"search.operator.number-gte.description",groqFilter:({fieldPath:e,value:t})=>Number.isFinite(t)&&e?`${e} >= ${AV(t)}`:null,icon:AR,initialValue:null,inputComponent:Af,type:"numberGte"},numberLt:{nameKey:"search.operator.number-lt.name",descriptionKey:"search.operator.number-lt.description",groqFilter:({fieldPath:e,value:t})=>Number.isFinite(t)&&e?`${e} < ${AV(t)}`:null,icon:Aq,initialValue:null,inputComponent:Af,type:"numberLt"},numberLte:{nameKey:"search.operator.number-lte.name",descriptionKey:"search.operator.number-lte.description",groqFilter:({fieldPath:e,value:t})=>Number.isFinite(t)&&e?`${e} <= ${AV(t)}`:null,icon:AB,initialValue:null,inputComponent:Af,type:"numberLte"},numberNotEqual:{nameKey:"search.operator.number-not-equal.name",descriptionKey:"search.operator.number-not-equal.description",groqFilter:({fieldPath:e,value:t})=>Number.isFinite(t)&&e?`${e} != ${AV(t)}`:null,initialValue:null,inputComponent:Af,type:"numberNotEqual"},numberRange:{nameKey:"search.operator.number-range.name",descriptionKey:"search.operator.number-range.description",groqFilter:({fieldPath:e,value:t})=>Number.isFinite(t?.to)&&Number.isFinite(t?.from)&&e?`${e} > ${AV(t?.from)} && ${e} < ${AV(t?.to)}`:"",initialValue:null,inputComponent:Ag,type:"numberRange"},portableTextEqual:{nameKey:"search.operator.portable-text-equal.name",descriptionKey:"search.operator.portable-text-equal.description",groqFilter:({fieldPath:e,value:t})=>t&&e?`pt::text(${e}) == ${AV(t)}`:null,initialValue:null,inputComponent:_$,type:"portableTextEqual"},portableTextMatches:{nameKey:"search.operator.portable-text-contains.name",descriptionKey:"search.operator.portable-text-contains.description",groqFilter:({fieldPath:e,value:t})=>t&&e?`pt::text(${e}) match ${AV(t)}`:null,initialValue:null,inputComponent:_$,type:"portableTextMatches"},portableTextNotEqual:{nameKey:"search.operator.portable-text-not-equal.name",descriptionKey:"search.operator.portable-text-not-equal.description",groqFilter:({fieldPath:e,value:t})=>t&&e?`pt::text(${e}) != ${AV(t)}`:null,initialValue:null,inputComponent:_$,type:"portableTextNotEqual"},portableTextNotMatches:{nameKey:"search.operator.portable-text-not-contains.name",descriptionKey:"search.operator.portable-text-not-contains.description",groqFilter:({fieldPath:e,value:t})=>t&&e?`!(pt::text(${e}) match ${AV(t)})`:null,initialValue:null,inputComponent:_$,type:"portableTextNotMatches"},..._O,slugEqual:{nameKey:"search.operator.slug-equal.name",descriptionKey:"search.operator.slug-equal.description",groqFilter:({fieldPath:e,value:t})=>t&&e?`${e}.current == ${AV(t)}`:null,initialValue:null,inputComponent:_$,type:"slugEqual"},slugMatches:{nameKey:"search.operator.slug-contains.name",descriptionKey:"search.operator.slug-contains.description",groqFilter:({fieldPath:e,value:t})=>t&&e?`${e}.current match ${AV(t)}`:null,initialValue:null,inputComponent:_$,label:"contains",type:"slugMatches"},slugNotEqual:{nameKey:"search.operator.slug-not-equal.name",descriptionKey:"search.operator.slug-not-equal.description",groqFilter:({fieldPath:e,value:t})=>t&&e?`${e}.current != ${AV(t)}`:null,initialValue:null,inputComponent:_$,type:"slugNotEqual"},slugNotMatches:{nameKey:"search.operator.slug-not-contains.name",descriptionKey:"search.operator.slug-not-contains.description",groqFilter:({fieldPath:e,value:t})=>t&&e?`!(${e}.current match ${AV(t)})`:null,initialValue:null,inputComponent:_$,type:"slugNotMatches"},stringEqual:{nameKey:"search.operator.string-equal.name",descriptionKey:"search.operator.string-equal.description",groqFilter:({fieldPath:e,value:t})=>t&&e?`${e} == ${AV(t)}`:null,initialValue:null,inputComponent:_$,type:"stringEqual"},stringListEqual:{nameKey:"search.operator.string-list-equal.name",descriptionKey:"search.operator.string-list-equal.description",groqFilter:({fieldPath:e,value:t})=>t&&e?`${e} == ${AV(t)}`:null,initialValue:null,inputComponent:AD,type:"stringListEqual"},stringListNotEqual:{nameKey:"search.operator.string-list-not-equal.name",descriptionKey:"search.operator.string-list-not-equal.description",groqFilter:({fieldPath:e,value:t})=>t&&e?`${e} != ${AV(t)}`:null,initialValue:null,inputComponent:AD,type:"stringListNotEqual"},stringMatches:{nameKey:"search.operator.string-contains.name",descriptionKey:"search.operator.string-contains.description",groqFilter:({fieldPath:e,value:t})=>t&&e?`${e} match ${AV(t)}`:null,initialValue:null,inputComponent:_$,type:"stringMatches"},stringNotEqual:{nameKey:"search.operator.string-not-equal.name",descriptionKey:"search.operator.string-not-equal.description",groqFilter:({fieldPath:e,value:t})=>t&&e?`${e} != ${AV(t)}`:null,initialValue:null,inputComponent:_$,type:"stringNotEqual"},stringNotMatches:{nameKey:"search.operator.string-not-contains.name",descriptionKey:"search.operator.string-not-contains.description",groqFilter:({fieldPath:e,value:t})=>t&&e?`!(${e} match ${AV(t)})`:null,initialValue:null,inputComponent:_$,type:"stringNotMatches"}});function _F(e){return Math.abs(16807*e.split("").reduce((e,t)=>(e<<5)-e+t.charCodeAt(0)|0,0)%2147483647)/2147483647}let _D=j.zo.text`
  font-family: ${({theme:e})=>e.sanity.fonts.text.family};
  font-weight: ${({theme:e})=>e.sanity.fonts.text.weights.medium};
  font-size: ${({theme:e})=>e.sanity.fonts.text.sizes[1].fontSize}px;
  transform: translateY(1px);
`,_R="comments";function _L(e){let{children:t}=e,[n,i]=(0,d.useState)(null),a=(0,d.useCallback)(e=>{i(e)},[]),r=(0,d.useMemo)(()=>({authoringPath:n,setAuthoringPath:a}),[n,a]);return(0,l.jsx)(p.Gj.Provider,{value:r,children:t})}function _B(e,t){let{currentUser:n,document:i,parent:a,value:r}=t;return"boolean"==typeof e||void 0===e?!!e:!0===e({document:i,parent:a,value:r,currentUser:n})}function _q(e,t,n){if(0===t.length)return{...e||{},value:n};let[i,...a]=t,r=(0,w.Fd)(i)?i._key:String(i),o=e?.children??{};return{value:e?.value,children:{...o,[r]:_q(o[r]||{},a,n)}}}let _V={name:"all-fields",title:"All fields",hidden:!1,i18n:{title:{key:"inputs.object.field-group-tabs.all-fields-title",ns:a0}}};function _K(e={},t){if(e?.collapsible===!1||e?.collapsable===!1)return{collapsible:!1,collapsed:!1};let n="boolean"==typeof e?.collapsed?e.collapsed:t>=3||void 0;return{collapsible:e?.collapsible===!0||e?.collapsable===!0||!0===n||void 0,collapsed:n}}function _U(e,t,n){return n.name===_V.name||void 0!==t&&(0===e.length&&n.name===_V.name||ii(t).includes(n.name))}function _Z(e){return typeof e>"u"||iO(e)}function _G(e,t){return!(Array.isArray(e)&&typeof t>"u"||Array.isArray(t)&&typeof e>"u")&&(!!e&&!t||!eF(e,t))}function _H(e){var t,n;let{parent:i,field:a,index:r}=e,o=(0,c.s6)([...i.path,a.name]),s=(t=a.type,n=i.level+1,(0,w.jB)(t)?function(e,t){let{options:n}=e,i=(n?.list||[])?.length>0,a=dE.includes(n?.layout||"");return i&&!a?t:0}(t,n):function(e,t){let{type:n,options:i}=e,a=function e(t,n){return t?.name&&n.includes(t?.name)?t:t?e(t.type,n):void 0}(n,d_),r=e?.jsonType==="object"?e.fields:void 0,o=a?.name||"";if(dM.includes(o))return 0;let s=d_.includes(o),l=(r?.filter(e=>!dS.includes(e.name)).length??0)>0,c=(i?.list?.length??0)>0;return l||c||!s?t:0}(t,n)),l=i.value,d=i.comparisonValue;if(!_Z(l))throw Error("Unexpected non-object value");let u=a.group?ii(a.group):[],p=_U(i.groups,a.group,i.selectedGroup);if((0,w.m$)(a.type)){let e=l?.[a.name],t=iO(d)?d?.[a.name]:void 0;if(!_Z(e))return{kind:"error",key:a.name,fieldName:a.name,error:{type:"INCOMPATIBLE_TYPE",expectedSchemaType:a.type,resolvedValueType:(0,e6.wq)(e),value:e}};let n={value:e,parent:i.value,document:i.document,currentUser:i.currentUser};if(_B(a.type.hidden,n))return{kind:"hidden",key:`field-${a.name}`,name:a.name,index:r};let m=i.readOnly||_B(a.type.readOnly,n),h=i.fieldGroupState?.children?.[a.name],f=i.collapsedPaths?.children?.[a.name],g=i.collapsedFieldSets?.children?.[a.name],x=_W({schemaType:a.type,currentUser:i.currentUser,parent:i.value,document:i.document,value:e,changed:_G(e,t),comparisonValue:t,presence:i.presence,validation:i.validation,fieldGroupState:h,path:o,level:s,focusPath:i.focusPath,openPath:i.openPath,collapsedPaths:f,collapsedFieldSets:g,readOnly:m,changesOpen:i.changesOpen});if(null===x)return null;let y=_K(a.type.options,s),b=f?f.value:y.collapsed;return{kind:"field",key:`field-${a.name}`,name:a.name,index:r,inSelectedGroup:p,groups:u,open:(0,c.Ny)(o,i.openPath),field:x,collapsed:b,collapsible:y.collapsible}}if((0,w.jB)(a.type)){let e=l?.[a.name],t=iO(d)?d?.[a.name]:void 0;if((0,w.M1)(a.type)){let n="u">typeof e;if(n&&!(typeof e>"u"||Array.isArray(e))){let t=(0,e6.wq)(e);return{kind:"error",key:a.name,fieldName:a.name,error:{type:"INCOMPATIBLE_TYPE",expectedSchemaType:a.type,resolvedValueType:t,value:e}}}if(n&&!(0===e.length||e.every(e=>iO(e))))return{kind:"error",key:a.name,fieldName:a.name,error:{type:"MIXED_ARRAY",schemaType:a.type,value:e}};if(n&&!e?.every(e=>iO(e)&&"_key"in e))return{kind:"error",key:a.name,fieldName:a.name,error:{type:"MISSING_KEYS",value:e,schemaType:a.type}};let l=n?function(e){let t=new Set;return e.reduce((e,n,i)=>(t.has(n._key)&&e.push([i,n._key]),t.add(n._key),e),[])}(e):[];if(l.length>0)return{kind:"error",key:a.name,fieldName:a.name,error:{type:"DUPLICATE_KEYS",duplicates:l,schemaType:a.type}};let d=i.fieldGroupState?.children?.[a.name],m=i.collapsedPaths?.children?.[a.name],h=i.collapsedFieldSets?.children?.[a.name],f=i.readOnly||_B(a.type.readOnly,{value:e,parent:i.value,document:i.document,currentUser:i.currentUser}),g=function(e){if(20===e.level)return null;let t={value:e.value,parent:e.parent,document:e.document,currentUser:e.currentUser};if(_B(e.schemaType.hidden,t))return null;let n=e.readOnly||_B(e.schemaType.readOnly,t),i=Array.isArray(e.value)?e.value:[],a=e.presence.filter(t=>(0,c.Xy)(t.path,e.path)),r=a.length?a:iI,o=e.validation.filter(t=>(0,c.Xy)(t.path,e.path)).map(e=>({level:e.level,message:e.message,path:e.path})),s=i.flatMap((t,n)=>(function(e){let{arrayItem:t,parent:n,index:i}=e,a=mj(n.schemaType,t),r=t._key;if(!a)return{kind:"error",key:r,index:i,error:{type:"INVALID_ITEM_TYPE",resolvedValueType:(0,e6.wq)(t),value:t,validTypes:n.schemaType.of}};let o=(0,c.s6)([...n.path,{_key:r}]),s=n.level+1,l={value:n.value,parent:e.parent,document:n.document,currentUser:n.currentUser},d=n.readOnly||_B(n.schemaType.readOnly,l),u=n.fieldGroupState?.children?.[r],p=n.collapsedPaths?.children?.[r],m=n.collapsedFieldSets?.children?.[r],h=Array.isArray(n.comparisonValue)&&n.comparisonValue.find(e=>e._key===t._key)||void 0,f=_W({schemaType:a,level:s,document:n.document,value:t,comparisonValue:h,changed:_G(t,h),path:o,focusPath:n.focusPath,openPath:n.openPath,currentUser:n.currentUser,collapsedPaths:p,collapsedFieldSets:m,presence:n.presence,validation:n.validation,fieldGroupState:u,readOnly:d},!1),g=_K(a.options,s),x=p?.value??g.collapsed;return{kind:"item",key:r,index:i,open:(0,c.Ny)(o,n.openPath),collapsed:x,collapsible:!0,parentSchemaType:n.schemaType,item:f}})({arrayItem:t,parent:e,index:n}));return{changed:e.changed||s.some(e=>"item"===e.kind&&e.item.changed),value:e.value,readOnly:n,schemaType:e.schemaType,focused:(0,c.Xy)(e.path,e.focusPath),focusPath:(0,c.vC)(e.path,e.focusPath),path:e.path,id:(0,c.BB)(e.path),level:e.level,validation:o,presence:r,members:s}}({schemaType:a.type,parent:i.value,currentUser:i.currentUser,document:i.document,value:e,changed:_G(e,t),comparisonValue:t,fieldGroupState:d,focusPath:i.focusPath,openPath:i.openPath,presence:i.presence,validation:i.validation,collapsedPaths:m,collapsedFieldSets:h,level:s,path:o,readOnly:f});return null===g?null:{kind:"field",key:`field-${a.name}`,name:a.name,index:r,open:(0,c.Ny)(o,i.openPath),inSelectedGroup:p,groups:u,collapsible:!1,collapsed:!1,field:g}}{if(!(typeof e>"u"||Array.isArray(e))){let t=(0,e6.wq)(e);return{kind:"error",key:a.name,fieldName:a.name,error:{type:"INCOMPATIBLE_TYPE",expectedSchemaType:a.type,resolvedValueType:t,value:e}}}let n=i.fieldGroupState?.children?.[a.name],l=i.collapsedPaths?.children?.[a.name],d=i.collapsedFieldSets?.children?.[a.name],m=i.readOnly||_B(a.type.readOnly,{value:e,parent:i.value,document:i.document,currentUser:i.currentUser}),h=function(e){if(20===e.level)return null;let t={comparisonValue:e.comparisonValue,value:e.value,parent:e.parent,document:e.document,currentUser:e.currentUser};if(_B(e.schemaType.hidden,t))return null;let n=e.readOnly||_B(e.schemaType.readOnly,t),i=Array.isArray(e.value)?e.value:[],a=e.presence.filter(t=>(0,c.Xy)(t.path,e.path)),r=a.length?a:iI,o=e.validation.filter(t=>(0,c.Xy)(t.path,e.path)).map(e=>({level:e.level,message:e.message,path:e.path})),s=i.flatMap((t,n)=>(function(e){let{arrayItem:t,parent:n,index:i}=e,a=function(e,t){let n=(0,e6.wq)(t);return e?.of.find(e=>e.name===n||e.jsonType===n)}(n.schemaType,t),r=(0,c.s6)([...n.path,i]),o=n.value?.[i],s=n.comparisonValue?.[i],l=n.level+1,d=`${a?.name||"invalid-type"}-${String(i)}`;if(!a)return{kind:"error",key:d,index:i,error:{type:"INVALID_ITEM_TYPE",validTypes:n.schemaType.of,resolvedValueType:(0,e6.wq)(a),value:o}};let u=n.readOnly||_B(a.readOnly,{value:o,parent:n.value,document:n.document,currentUser:n.currentUser}),p=_Y({...n,path:r,schemaType:a,level:l,value:o,comparisonValue:s,readOnly:u});return{kind:"item",key:d,index:i,parentSchemaType:n.schemaType,open:(0,c.Xy)(r,n.openPath),item:p}})({arrayItem:t,parent:e,index:n}));return{changed:e.changed||s.some(e=>"item"===e.kind&&e.item.changed),value:e.value,readOnly:n,schemaType:e.schemaType,focused:(0,c.Xy)(e.path,e.focusPath),focusPath:(0,c.vC)(e.path,e.focusPath),path:e.path,id:(0,c.BB)(e.path),level:e.level,validation:o,presence:r,members:s}}({changed:_G(e,t),comparisonValue:t,schemaType:a.type,parent:i.value,currentUser:i.currentUser,document:i.document,value:e,fieldGroupState:n,focusPath:i.focusPath,openPath:i.openPath,presence:i.presence,validation:i.validation,collapsedPaths:l,collapsedFieldSets:d,level:s,path:o,readOnly:m});return null===h?null:{kind:"field",key:`field-${a.name}`,name:a.name,index:r,inSelectedGroup:p,groups:u,open:(0,c.Ny)(o,i.openPath),collapsible:!1,collapsed:!1,field:h}}}{let e=l?.[a.name],t=iO(d)?d?.[a.name]:void 0,n={value:e,parent:i.value,document:i.document,currentUser:i.currentUser};if(_B(a.type.hidden,n))return null;let s=i.readOnly||_B(a.type.readOnly,n),m=_Y({...i,comparisonValue:t,value:e,schemaType:a.type,path:o,readOnly:s});return{kind:"field",key:`field-${a.name}`,name:a.name,index:r,open:(0,c.Ny)(o,i.openPath),inSelectedGroup:p,groups:u,collapsible:!1,collapsed:!1,field:m}}}function _W(e,t=!0){if(20===e.level)return null;let n={value:e.value,parent:e.parent,document:e.document,currentUser:e.currentUser},i=e.readOnly||_B(e.schemaType.readOnly,n),a=e.schemaType.groups||[],r=(a.find(e=>e.default)||_V)?.name,o=[_V,...a].flatMap(t=>{let i=_B(t.hidden,n),a=t.name===(e.fieldGroupState?.value||r),o=e.changesOpen?t.name===_V.name:a,s=!!e.changesOpen&&!o;return i?[]:[{disabled:s,icon:t?.icon,name:t.name,selected:o,title:t.title,i18n:t.i18n}]}),s=o.find(e=>e.selected),l=(e.schemaType.fieldsets?e.schemaType.fieldsets:e.schemaType.fields.map(e=>({single:!0,field:e}))).flatMap((t,n)=>{if(t.single){let a=_H({field:t.field,parent:{...e,readOnly:i,groups:o,selectedGroup:s},index:n});return a?[a]:[]}let a=t.fields.map(e=>e.name),r=_B(t.hidden,{currentUser:e.currentUser,document:e.document,parent:e.value,value:ne(e.value,a)}),l=_B(t.readOnly,{currentUser:e.currentUser,document:e.document,parent:e.value,value:ne(e.value,a)}),d=t.fields.flatMap(t=>{if(r)return[{kind:"hidden",key:`field-${t.name}`,name:t.name,index:n}];let a=_H({field:t,parent:{...e,readOnly:i||l,groups:o,selectedGroup:s},index:n});return a?[a]:[]}),u=_K(t.options,e.level),p=(e.collapsedFieldSets?.children||{})[t.name]?.value??u.collapsed;return[{kind:"fieldSet",key:`fieldset-${t.name}`,_inSelectedGroup:_U(o,t.group,s),groups:t.group?ii(t.group):[],fieldSet:{path:(0,c.s6)(e.path.concat(t.name)),name:t.name,title:t.title,description:t.description,hidden:!1,level:e.level+1,members:d.filter(e=>"hidden"!==e.kind),collapsible:u?.collapsible,collapsed:p,columns:t?.options?.columns}}]}),d=a.length>0,u=e.presence.filter(t=>(0,c.Xy)(t.path,e.path)),p=u.length?u:iI,m=e.validation.filter(t=>(0,c.Xy)(t.path,e.path)).map(e=>({level:e.level,message:e.message,path:e.path})),h=l.filter(e=>"hidden"!==e.kind);if(0===h.length&&t)return null;let f=d?o.flatMap(e=>e.name===_V.name||h.some(t=>"error"!==t.kind&&("field"===t.kind?t.groups.includes(e.name):t.groups.includes(e.name)||t.fieldSet.members.some(t=>"error"!==t.kind&&t.groups.includes(e.name))))?e:[]):[],g=h.flatMap(e=>{if("error"===e.kind)return[e];if("field"===e.kind)return e.inSelectedGroup?[e]:[];let t=e.fieldSet.members.filter(e=>"field"!==e.kind||e.inSelectedGroup);return t.length>0?[{...e,fieldSet:{...e.fieldSet,members:t}}]:[]}),x={value:e.value,changed:_G(e.value,e.comparisonValue),schemaType:e.schemaType,readOnly:i,path:e.path,id:(0,c.BB)(e.path),level:e.level,focused:(0,c.Xy)(e.path,e.focusPath),focusPath:(0,c.vC)(e.path,e.focusPath),presence:p,validation:m,members:g,groups:f};return Object.defineProperty(x,"_allMembers",{value:l,enumerable:!1}),x}function _Y(e){let t=e.presence.filter(t=>(0,c.Xy)(t.path,e.path)),n=t.length?t:iI,i=e.validation.filter(t=>(0,c.Xy)(t.path,e.path)).map(e=>({level:e.level,message:e.message,path:e.path}));return{schemaType:e.schemaType,changed:_G(e.value,e.comparisonValue),value:e.value,level:e.level,id:(0,c.BB)(e.path),readOnly:e.readOnly,focused:(0,c.Xy)(e.path,e.focusPath),path:e.path,presence:n,validation:i}}function _J(e,{comparisonValue:t,value:n,fieldGroupState:i,collapsedFieldSets:a,collapsedPaths:r,focusPath:o,openPath:s,presence:l,validation:u,readOnly:p,changesOpen:m}){let h=vh(),f=(0,d.useRef)(null);return(0,d.useLayoutEffect)(()=>{f.current=null},[e]),(0,d.useMemo)(()=>{let d=_W({schemaType:e,document:n,fieldGroupState:i,collapsedFieldSets:a,collapsedPaths:r,value:n,comparisonValue:t,focusPath:o,openPath:s,readOnly:p,path:(0,c.s6)([]),level:0,currentUser:h,presence:l,validation:u,changesOpen:m}),g=ot(f.current,d);return f.current=g,g},[e,n,i,a,r,t,o,s,p,h,l,u,m])}function _X(e){return"_allMembers"in e&&Array.isArray(e._allMembers)}function _Q(e,t){return[...t.map((e,n)=>({type:"expandPath",path:t.slice(0,n+1)})),..._0(e,t)]}function _0(e,t){return 0===t.length?[]:(0,w.m$)(e.schemaType)&&_X(e)?function e(t,n){if(0===n.length)return[];let[i,...a]=n,r=t._allMembers.find(e=>"fieldSet"===e.kind&&e.fieldSet.members.some(e=>"field"===e.kind&&e.name===i)),o=(r?r.fieldSet.members:t._allMembers).find(e=>null!==e&&"field"===e.kind&&e.name===i),s=t.schemaType.fields.find(e=>e.name===i),l=t.groups.find(e=>e.selected)?.name,c=s&&ii(s.group)||[],d=l&&(l===_V.name||c.includes(l)),u=[];if(!d){let e=t.groups.find(e=>c.includes(e.name))?.name||_V.name;u.push({type:"setSelectedGroup",path:t.path,groupName:e})}return r&&u.push({type:"expandFieldSet",path:r.fieldSet.path}),o&&_X(o.field)&&(lO(o)?u.push(..._1(o.field,a)):l$(o)&&u.push(...e(o.field,a))),u}(e,t):(0,w.M1)(e.schemaType)?_1(e,t):[]}function _1(e,t){if(0===t.length)return[];let[n,...i]=t;if(!(0,w.Fd)(n))throw Error("Expected path segment to be an object with a _key property");let a=e.members.find(e=>e.key===n._key);return a?_0(a.item,i):[]}let _2=/^\d+$/;function _3(e){return e.split(/[[.\]]/g).filter(Boolean).map(e=>e.includes("==")?function(e){let[t,n]=e.split("==");return{[t]:n.replace(/^['"]/,"").replace(/['"]$/,"")}}(e):_2.test(e)?Number(e):e)}function _4(e){return e.map(_6)}function _5(e,t){return eG(t.map(t=>eG(Object.keys(t).filter(_8(["id","ifRevisionID","query"])).map(n=>{if("unset"===n)return t.unset.map(t=>({type:"unset",path:_3(t),origin:e}));if("insert"===n){let n="before"in t.insert?"before":"after";return{type:"insert",position:n,path:_3(t.insert[n]),items:t.insert.items,origin:e}}return Object.keys(t[n]).map(i=>"set"===n?{type:"set",path:_3(i),value:t[n][i],origin:e}:"inc"===n||"dec"===n?{type:n,path:_3(i),value:t[n][i],origin:e}:"setIfMissing"===n?{type:"setIfMissing",path:_3(i),value:t[n][i],origin:e}:"diffMatchPatch"===n?{type:n,path:_3(i),value:t[n][i],origin:e}:(console.warn(Error(`Unsupported patch type: ${n}`)),null)).filter(Boolean)}))))}let _8=e=>t=>!e.includes(t);function _6(e){if(e.patchType!==sq&&e.type)throw Error(`Patch is missing "patchType" - import and use "${e.type}()" from "sanity/form"`);if(e.patchType!==sq)throw Error('Patch is missing "patchType" - import and use the patch method helpers from "sanity/form"');let t=(0,nt.kC)(e.path||[]);if("insert"===e.type){let{position:n,items:i}=e;return{insert:{[n]:t,items:i}}}if("unset"===e.type)return{unset:[t]};if(!e.type)throw Error(`Missing patch type in patch ${JSON.stringify(e)}`);return t?{[e.type]:{[t]:e.value}}:{[e.type]:e.value}}let _7=(0,d.memo)(function(e){let{transform:t}=e,n=sY(),i=(0,d.useCallback)(e=>{let i=t(e.patches);n.onChange(sH.from(i))},[n,t]),a=(0,d.useMemo)(()=>({...n,onChange:i}),[n,i]);return(0,l.jsx)(p.qE.Provider,{value:a,children:e.children})});function _9(e){let t=(0,d.useRef)(e);return(0,d.useMemo)(()=>!eF(t.current,e),[e])}function Se(e){return!!e&&e?.some(e=>w.DG(e)&&(e?.children||[])?.some(e=>w.NG(e)?e.text:e.userId))}function St(e){return!!e&&!!(e?.target?.path?.selection?.type==="text"&&e?.target?.path?.selection?.value)}let Sn=[];function Si(e,t){let n=(0,nr.$T)(e,t),i=(0,nr.Hy)(n),a=function(e){let t=0,n=0,i=0;for(let a=0;a<e.length;a++){let r=e[a][0],o=e[a][1];switch(r){case nr.D$:n+=o.length;break;case nr.NL:i+=o.length;break;case nr.JZ:t+=Math.max(n,i),n=0,i=0}}return t+Math.max(n,i)}(i);return{patches:(0,nr.oY)(e,i,{margin:15}),levenshtein:a}}let Sa=["",""],Sr=RegExp(`[${Sa.join("")}]`,"g"),So=[];function Ss(e){let{value:t,comments:n}=e;if(!t||0===t.length)return So;let i=n.filter(St),a=[];return i.forEach(e=>{e.target.path?.selection?.value.forEach(n=>{let i=t.find(e=>e._key===n._key);if(!i||!w.DG(i))return;let r=n.text.replaceAll(Sr,""),o=i.children.map(e=>(0,w.NG)(e)?e.text.replaceAll(""," "):"").join(""),{patches:s}=Si(r,n.text),l=(0,nr.QE)(s,o,{allowExceedingIndices:!0,margin:15})[0],c=l.indexOf(Sa[0]),d=l.replaceAll(Sa[0],"").indexOf(Sa[1]),u=l.replaceAll(Sr,""),p=n.text.slice(n.text.indexOf(Sa[0])+1,n.text.indexOf(Sa[1])),m=u.slice(c,d),{levenshtein:h}=Si(m,p),f=Math.round(m.length+p.length/2),g=!1;if(0===m.length&&(g=!0),h>f&&(g=!0),c+1===d&&(g=!0),c!==-1&&d!==-1){let t=0,n=0,r=0,o=0;for(let e=0;e<u.length&&(""===u[e]&&(e<=c&&(n=-1,t++),o=-1,r++),e<c&&n++,e<c+m.length&&o++,e!==c+m.length);e++);a.push({selection:{anchor:{path:[{_key:i._key},"children",{_key:i.children[t]._key}],offset:n},focus:{path:[{_key:i._key},"children",{_key:i.children[r]._key}],offset:o}},comment:e,range:{_key:i._key,text:g?"":l}})}})}),0===a.length?So:a}let Sl=(0,d.memo)(function(e){let{children:t,commentId:n,currentHoveredCommentId:i,onClick:a,onHoverEnd:r,onHoverStart:o,selectedThreadId:s,threadId:c}=e,u=(0,d.useRef)(null),p=(0,d.useRef)(!1),m=(0,d.useRef)(null);(0,d.useEffect)(()=>{let e=u.current?.previousSibling,t=u.current?.nextSibling;if(!e||!t){p.current=!1;return}let[n]=Object.keys(SS("")),i=e.getAttribute(n),a=t.getAttribute(n),r=!!(i&&a&&i===a);m.current=r?i:null,p.current=r},[]);let h=(0,d.useCallback)(()=>o(n),[n,o]),f=(0,d.useCallback)(()=>r(null),[r]),g=(0,d.useCallback)(()=>a(n),[n,a]),x=i===n||i===m.current&&p.current;return(0,l.jsx)(Vv,{isAdded:!0,isHovered:x||s===c,isNested:p.current,onClick:g,onMouseEnter:h,onMouseLeave:f,ref:u,...SS(c),children:t})}),Sc=/\b(https?:\/\/[^\s,()]+(?:\.[^\s,()]+)*|www\.[^\s,()]+\.[^\s,()]{2,})\b/g;function Sd(e){e.stopPropagation()}let Su=[e=>"string"==typeof e?e.split(Sc).flatMap(e=>e.match(Sc)?function(e){let t={href:e.startsWith("http")?e:`https://${e}`,target:"_blank",rel:"noopener noreferrer",key:e,onClick:Sd};return(0,d.createElement)("a",t,e)}(e):e):e];async function Sp(e){let t;let{activeTool:n,client:i,comment:a,currentUser:r,dataset:o,documentId:s,documentRevisionId:l,documentType:c,getIntent:d,getNotificationValue:u,getThreadLength:p,onCreate:m,onCreateError:h,projectId:f,createAddonDataset:g,workspace:x}=e,y=a?.id||(0,nm.Z)(),b=r.id,v=(p?.(a.threadId)||0)+1;if("task"===a.type&&(t={_id:y,_type:"comment",authorId:b,message:a.message,lastEditedAt:void 0,parentCommentId:a.parentCommentId,status:a.status,threadId:a.threadId,reactions:a.reactions,context:{payload:{workspace:x},notification:a.context.notification,tool:n?.name||""},target:{document:{_ref:s,_type:"reference",_weak:!0},documentType:c}}),"field"===a.type){let{documentTitle:e="",url:i="",workspaceTitle:r=""}=u({commentId:y})||{},p=d?.({id:s,type:c,path:a.fieldPath}),m=function e(t){if(t&&"object"==typeof t&&t.hasOwnProperty("_ref"))return{...t,_weak:!0};if(Array.isArray(t))return t.map(t=>e(t));if(t&&"object"==typeof t){let n={};return Object.keys(t).forEach(i=>{let a=t[i];"object"==typeof a&&null!==a?n[i]=e(a):n[i]=a}),n}return t}(a.contentSnapshot);t={_id:y,_type:"comment",authorId:b,message:a.message,lastEditedAt:void 0,parentCommentId:a.parentCommentId,status:a.status,threadId:a.threadId,reactions:a.reactions,context:{payload:{workspace:x},intent:p,notification:{currentThreadLength:v,documentTitle:e,url:i,workspaceTitle:r},tool:n?.name||""},contentSnapshot:m,target:{documentRevisionId:l||"",path:{field:a.fieldPath,selection:a.selection},document:{_dataset:o,_projectId:f,_ref:s,_type:"crossDatasetReference",_weak:!0},documentType:c}}}if(t){if(m?.(t),!i){try{let e=await g();if(!e)throw Error("Failed to create addon dataset client");await e.create(t)}catch(e){throw h?.(t._id,e),e}return}try{await i.create(t)}catch(e){throw h?.(t._id,e),e}}}async function Sm(e){var t,n;let{client:i,currentUser:a,id:r,reaction:o,getComment:s,onUpdate:l}=e,c=s?.(r)?.reactions||[],d=c.filter(e=>e.userId===a.id),u=(t=a.id,n=o.shortName,`${t}-${n}`),p=d.find(e=>e._key===u&&"removed"!==e._optimisticState);if(p){let e=c.map(e=>e._key===p._key?{...e,_optimisticState:"removed"}:e);l?.(r,{reactions:e}),await i.patch(r).unset([`reactions[_key=="${u}"]`]).commit();return}if(!p){let e={_key:u,addedAt:new Date().toISOString(),shortName:o.shortName,userId:a.id},t={...e,_optimisticState:"added"},n=c.concat(t).filter(t=>!(t._key===e._key&&"removed"===t._optimisticState));l?.(r,{reactions:n}),await i.patch(r).setIfMissing({reactions:[]}).append("reactions",[e]).commit()}}async function Sh(e){let{client:t,id:n,onRemove:i}=e;i?.(n),await Promise.all([t.delete({query:`*[_type == "comment" && parentCommentId == "${n}"]`}),t.delete(n)])}let Sf={trailing:!0,leading:!1},Sg=new Map;async function Sx(e){let{client:t,id:n,comment:i,transactionId:a,onUpdate:r}=e,o=a||(0,nm.Z)(),s=t?.patch(n).set(i),l=t.transaction().transactionId(o).patch(s);r?.(n,i),i.status?(await l.commit(),await t.patch({query:`*[_type == "comment" && parentCommentId == "${n}"]`}).set({status:i.status}).commit()):await l.commit(),Sg.delete(n)}async function Sy(e){let{id:t,comment:n,throttled:i}=e,a="message"in n,r={...n,lastEditedAt:new Date().toISOString()},o=a?r:n;if(!i){await Sx({...e,comment:o});return}await (function(e){if(!Sg.has(e)){let t=A(Sx,1e3,Sf);return Sg.set(e,t),t}return Sg.get(e)})(t)({...e,comment:o})}function Sb(){let e=(0,d.useContext)(p.Bw);if(!e)throw Error("useComments must be used within a CommentsProvider");return e}function Sv(){return(0,d.useContext)(p.zW)}let Sj={behavior:"smooth",inline:"center",scrollMode:"if-needed"},SC={...Sj,block:"start"},Sw={...Sj,block:"center"},Sk={...Sj,block:"center"},ST={comment:{...Sj,block:"center"},field:Sk,group:SC,"inline-comment":Sw};function SA(e){return e.replace(/[[\]_"_=.]/g,"")}function S_(e){return{"data-comments-comment-id":SA(e)}}function SS(e){return{"data-comments-inline-comment-id":SA(e)}}function SE(e){let{boundaryElement:t}=e||{},[n,i]=(0,d.useState)(null),a=(0,d.useMemo)(()=>({...ST[n?.type||"comment"],boundary:t}),[t,n?.type]),r=(0,d.useCallback)(e=>{i({type:"comment",id:e})},[]),o=(0,d.useCallback)(e=>{i({type:"group",id:e})},[]),s=(0,d.useCallback)(e=>{i({type:"field",id:e})},[]),l=(0,d.useCallback)(e=>{i({type:"inline-comment",id:e})},[]);return(0,d.useEffect)(()=>{let e=requestAnimationFrame(()=>{if(!n)return;let{type:e,id:t}=n,i=document?.querySelector(`[data-comments-${e}-id="${SA(t)}"]`);i&&(0,tc.Z)(i,a)});return()=>{cancelAnimationFrame(e)}},[a,n]),(0,d.useMemo)(()=>({scrollToComment:r,scrollToField:s,scrollToGroup:o,scrollToInlineComment:l}),[r,s,o,l])}function SM(){let e=(0,d.useContext)(p.$E);if(!e)throw Error("useCommentsSelectedPath: missing context value");return e}let SN=(0,t4.dS)({name:"Comment Link Copied",version:1,description:"The link to a comment is copied"}),SI=(0,t4.dS)({name:"Comment Viewed From Link",version:1,description:"A comment is viewed from a link"}),Sz=(0,t4.dS)({name:"Comment List View Changed",version:1,description:"The view of the comment list is changed"});function S$(){return(0,d.useContext)(p.BN)||{upsellData:null,handleOpenDialog:()=>null,upsellDialogOpen:!1,telemetryLogs:{dialogSecondaryClicked:()=>null,dialogPrimaryClicked:()=>null,panelViewed:()=>null,panelDismissed:()=>null,panelPrimaryClicked:()=>null,panelSecondaryClicked:()=>null}}}function SO(e,t){switch(t.type){case"COMMENTS_SET":{let n=t.comments.reduce((e,t)=>({...e,[t._id]:t}),{});return{...e,comments:n}}case"COMMENT_ADDED":{let n=t.payload,i={[n._id]:{...e.comments[n._id],...n,_state:n._state||void 0,_createdAt:n._createdAt||new Date().toISOString()}};return{...e,comments:{...e.comments,...i}}}case"COMMENT_RECEIVED":{let n=t.payload;return{...e,comments:{...e.comments,[n._id]:n}}}case"COMMENT_DELETED":{let{[t.id]:n,...i}=e.comments;return Object.keys(i).forEach(e=>{i[e].parentCommentId===t.id&&delete i[e]}),{...e,comments:i}}case"COMMENT_UPDATED":{let n=t.payload,i=n._id,a=e.comments[i],r=function(e,t){let n={};for(let t of e)n[t._key]={...t};for(let e of t)n[e._key]={...n[e._key],...e};return Object.values(n)}(a?.reactions?.filter(e=>e?._optimisticState)||[],n.reactions||[]),o={...a,...n,reactions:r};return{...e,comments:{...e.comments,[i]:o}}}default:return e}}let SP={comments:{}},SF={events:["welcome","mutation","reconnect"],includeResult:!0,visibility:"query"},SD=`{
  _createdAt,
  _id,
  authorId,
  contentSnapshot,
  context,
  lastEditedAt,
  message,
  parentCommentId,
  reactions,
  status,
  target,
  threadId
}`,SR=`*[_type == "comment" && target.document._ref == $documentId] ${SD} | order(_createdAt desc)`,SL=[],SB={open:SL,resolved:SL},Sq=(0,d.memo)(function(e){let{children:t,documentId:n,documentType:i,isCommentsOpen:a,onCommentsOpen:r,sortOrder:o,type:s,getCommentLink:u,onClearSelectedComment:m,selectedCommentId:h,isConnecting:f,onPathOpen:g}=e,x=Sv(),[y,b]=(0,d.useState)("open"),{client:v,createAddonDataset:j,isCreatingDataset:C}=PT(),k=iS(n),T=Bc(k,i,"low"),A=NQ().get(i),_=vh(),{name:S,dataset:E,projectId:M}=dR(),I=(0,d.useMemo)(()=>T.draft||T.published,[T.draft,T.published]),z=(0,d.useMemo)(()=>I?._rev,[I]),$=(0,d.useMemo)(()=>new Map,[]),O=(0,d.useCallback)(e=>{$.delete(e)},[$]),{dispatch:P,data:D=SL,error:R,loading:L}=function(e){let{client:t,documentId:n,onLatestTransactionIdReceived:i,transactionsIdMap:a}=e,[r,o]=(0,d.useReducer)(SO,SP),[s,l]=(0,d.useState)(null!==t),[c,u]=(0,d.useState)(null),p=(0,d.useRef)(!1),m=(0,d.useMemo)(()=>({documentId:iS(n)}),[n]),h=(0,d.useCallback)(async()=>{if(!t){l(!1);return}try{let e=await t.fetch(SR,m);o({type:"COMMENTS_SET",comments:e}),l(!1)}catch(e){u(e)}},[t,m]),f=(0,d.useCallback)(async e=>{if("welcome"!==e.type||p.current||(l(!0),await h(),l(!1),p.current=!0),"reconnect"===e.type&&(l(!0),p.current=!1),"mutation"===e.type){if("appear"===e.transition){let t=e.result;t&&o({type:"COMMENT_RECEIVED",payload:t})}if("disappear"===e.transition&&o({type:"COMMENT_DELETED",id:e.documentId}),"update"===e.transition){let t=e.result,n=e.result?._id||"",r=e.transactionId,s=a.get(n),l=r===s;if(!l&&s)return;t&&(o({type:"COMMENT_UPDATED",payload:t}),l&&i(n))}}},[h,i,a]),g=(0,d.useMemo)(()=>t?t.observable.listen(SR,m,SF).pipe((0,F.K)(e=>(u(e),(0,N.of)(e)))):(0,N.of)(),[t,m]);return(0,d.useEffect)(()=>{let e=g.subscribe(f);return()=>{e?.unsubscribe()}},[f,g]),{data:(0,d.useMemo)(()=>Object.values(r.comments),[r.comments]),dispatch:o,error:c,loading:s}}({documentId:k,client:v,transactionsIdMap:$,onLatestTransactionIdReceived:O}),B=(0,d.useCallback)((e,t)=>{$.set(e,t)},[$]),q=(0,d.useCallback)(e=>"upsell"===x.mode&&"resolved"===e?null:b(e),[b,x]),V=B_((0,d.useMemo)(()=>({documentValue:I,permission:"read"}),[I])),K=(0,d.useMemo)(()=>{if(!A||!_)return SB;let e=function(e){let{comments:t,currentUser:n,documentValue:i,schemaType:a,type:r}=e,o=t?.filter(e=>!e.parentCommentId);return"task"===r?o.map(e=>{let n=t?.filter(t=>t.parentCommentId===e._id);return{commentsCount:[e,...n].length,parentComment:e,replies:n,threadId:e.threadId,hasReferencedValue:!1,breadcrumbs:Sn,fieldPath:""}}):"field"===r?o.map(e=>{let r=function(e){let{currentUser:t,schemaType:n,fieldPath:i,documentValue:a}=e,r=c.mL(i),o=[],s=null;return r.forEach((e,i)=>{let l=r.slice(0,i+1),d=r.slice(0,i),u=function e(t,n){let i=c.mL(n),a=i[0];if(a&&(0,w.m$)(t)){let n=t?.fields?.find(e=>e.name===a);if(n){let t=c.BB(i.slice(1));return t?e(n.type,t):n}}}(n,c.BB(l)),p=e.hasOwnProperty("_key"),m=rx(a,d),h=rx(a,l),f={document:a,currentUser:t,parent:m,value:h};if(p&&Array.isArray(m)){let t=function(e,t){if("number"==typeof t)return t;let n=is(e,t);return -1!==n&&n}(m,e);o.push({invalid:!1===t,isArrayItem:!0,title:"number"==typeof t?`#${Number(t)+1}`:"Unknown array item"});return}if(u?.type){let e=_B(u.type.hidden,f);o.push({invalid:e,isArrayItem:!1,title:pM(u.type)}),s=u.type;return}if((0,w.jB)(s)){let t=rx(a,d)?._type,n=s?.of?.find(e=>e.name===t),i=n?.fields?.find(t=>t.name===e);if(!t&&h){let t=s?.of?.map(e=>e?.fields).filter(Boolean).flat()?.find(t=>t?.name===e),n=_B(t?.type?.hidden,f);t&&(o.push({invalid:n,isArrayItem:!1,title:pM(t?.type)}),s=t?.type);return}if(!i){o.push({invalid:!0,isArrayItem:!1,title:"Unknown field"});return}let r=pM(i?.type),l=_B(n?.type?.hidden,f),c=_B(i?.type.hidden,f);o.push({invalid:l||c,isArrayItem:!1,title:r}),s=i?.type;return}o.push({invalid:!0,isArrayItem:!1,title:"Unknown field"})}),o}({currentUser:n,documentValue:i,fieldPath:e.target.path?.field||"",schemaType:a}),o=!1;if(St(e)&&(o=!!(e.target.path?.selection&&e.target.path.selection.value.some(e=>e.text))),r.some(e=>e.invalid))return;let s=t?.filter(t=>t.parentCommentId===e._id),l=o;return{breadcrumbs:r,commentsCount:[e,...s].length,fieldPath:e.target.path?.field||"",parentComment:e,replies:s,threadId:e.threadId,hasReferencedValue:l}}).filter(Boolean):Sn}({comments:eW(D,["_createdAt"],[o]),currentUser:_,documentValue:I,schemaType:A,type:s});return{open:e.filter(e=>"open"===e.parentComment.status),resolved:e.filter(e=>"resolved"===e.parentComment.status)}},[_,D,I,A,o,s]),U=(0,d.useCallback)(e=>K.open.filter(t=>t.threadId===e).length,[K.open]),Z=(0,d.useCallback)(e=>D?.find(t=>t._id===e),[D]),G=(0,d.useCallback)(e=>{let t=D?.find(t=>t._id===e._id)?._state?.type==="createError";P({type:"COMMENT_ADDED",payload:{...e,_state:t?{type:"createRetrying"}:void 0}})},[D,P]),H=(0,d.useCallback)((e,t)=>{P({type:"COMMENT_UPDATED",payload:{_id:e,...t}})},[P]),W=(0,d.useCallback)((e,t)=>{P({type:"COMMENT_UPDATED",payload:{_id:e,_state:{error:t,type:"createError"}}})},[P]),{operation:Y}=function(e){let{client:t,currentUser:n,dataset:i,documentId:a,documentRevisionId:r,documentType:o,getComment:s,getThreadLength:l,onCreate:c,onCreateError:u,onRemove:m,onTransactionStart:h,onUpdate:f,projectId:g,createAddonDataset:x,workspace:y,getCommentLink:b}=e,v=(0,d.useContext)(p.tH),j=(0,ny.z)((0,d.useCallback)(e=>"string"==typeof e.tool?e.tool:void 0,[])),C=AU().tools,w=(0,d.useMemo)(()=>C.find(e=>e.name===j),[j,C]),{getNotificationValue:k}=function(e){let{documentId:t,documentType:n,getCommentLink:i}=e||{},a=NQ().get(n),{title:r}=dR(),o=CI(),s=(0,d.useMemo)(()=>t&&a?vc(o,a,t,""):(0,N.of)(null),[t,o,a]),{published:l,draft:c}=(0,eR.m)(s)||{},u=c?.title||l?.title||"Sanity document";return{getNotificationValue:(0,d.useCallback)(({commentId:e})=>({documentTitle:u,url:i?.(e),workspaceTitle:r}),[u,i,r])}}({documentId:a,documentType:o,getCommentLink:b}),T=(0,d.useCallback)(async e=>{n?.id&&await Sp({activeTool:w,client:t,comment:e,currentUser:n,dataset:i,documentId:a,documentRevisionId:r,documentType:o,getIntent:v,getNotificationValue:k,getThreadLength:l,onCreate:c,onCreateError:u,projectId:g,createAddonDataset:x,workspace:y})},[w,t,n,i,a,r,o,v,k,l,c,u,g,x,y]),A=(0,d.useCallback)(async e=>{t&&await Sh({client:t,id:e,onRemove:m})},[t,m]),_=(0,d.useCallback)(async(e,n,i)=>{if(!t)return;let{throttled:a}=i||{},r=(0,nm.Z)();h(e,r),await Sy({client:t,comment:n,throttled:a,id:e,onUpdate:f,transactionId:r})},[t,h,f]),S=(0,d.useCallback)(async(e,i)=>{t&&n?.id&&await Sm({client:t,currentUser:n,id:e,reaction:i,getComment:s,onUpdate:f})},[t,n,s,f]);return(0,d.useMemo)(()=>({operation:{create:T,react:S,remove:A,update:_}}),[T,A,_,S])}((0,d.useMemo)(()=>({client:v,currentUser:_,dataset:E,documentId:k,documentRevisionId:z,documentType:i,getComment:Z,getThreadLength:U,projectId:M,schemaType:A,workspace:S,createAddonDataset:j,onCreate:G,onCreateError:W,onUpdate:H,onTransactionStart:B,getCommentLink:u}),[v,_,E,k,z,i,Z,U,M,A,S,j,G,W,H,B,u])),J=(0,d.useMemo)(()=>({documentId:n,documentType:i,isCreatingDataset:C,status:y,setStatus:q,getComment:Z,getCommentLink:u,onClearSelectedComment:m,selectedCommentId:h,isCommentsOpen:a,onCommentsOpen:r,isConnecting:f,onPathOpen:g,comments:{data:K,error:R,loading:L||C||f||!1},operation:{create:Y.create,react:Y.react,remove:Y.remove,update:Y.update},mentionOptions:V}),[n,i,C,y,q,Z,u,m,h,a,r,f,g,K,R,L,Y.create,Y.react,Y.remove,Y.update,V]);return(0,l.jsx)(p.Bw.Provider,{value:J,children:t})}),SV=(0,d.memo)(function(e){let{children:t,documentId:n,documentType:i}=e,a=function(e,t){let{enabled:n,isLoading:i,error:a}=Bm("studioComments"),{enabled:r}=AU().document.comments,o=(0,d.useMemo)(()=>r({documentType:t,documentId:iS(e)}),[e,t,r]);return(0,d.useMemo)(()=>i||!o||a?{enabled:!1,mode:null}:{enabled:!0,mode:n?"default":"upsell"},[i,o,a,n])}(n,i);return(0,l.jsx)(p.zW.Provider,{value:a,children:t})}),SK=((0,d.memo)(function(e){let{children:t,getIntent:n}=e;return(0,l.jsx)(p.tH.Provider,{value:n,children:t})}),"sanityStudio:comments:inspector:onboarding:dismissed:v1"),SU=e=>{try{window.localStorage.setItem(SK,JSON.stringify(e))}catch{}},SZ=()=>{try{let e=window.localStorage.getItem(SK);return!!e&&JSON.parse(e)}catch{return!1}};function SG(e){let{children:t}=e,[n,i]=(0,d.useState)(SZ()),a=(0,d.useCallback)(()=>{i(!0),SU(!0)},[i]),r=(0,d.useMemo)(()=>({setDismissed:a,isDismissed:n}),[a,n]);return(0,l.jsx)(p.R0.Provider,{value:r,children:t})}let SH=(0,d.memo)(function(e){let{children:t}=e,[n,i]=(0,d.useState)(null),a=(0,d.useCallback)(e=>{eF(n,e)||i(e)},[n]),r=(0,d.useMemo)(()=>({selectedPath:n,setSelectedPath:a}),[n,a]);return(0,l.jsx)(p.$E.Provider,{value:r,children:t})}),SW={inlineIcon:(e,t,n)=>{if(!(0,w.DG)(n))return n;let i=!!(n.children[t-1]?._type==="span"&&n.children[t-1]?.text),a=!!(n.children[t+1]?._type==="span"&&n.children[t+1]?.text);return{...e,hasTextRight:a,hasTextLeft:i}}},SY=e=>e.map(e=>{if((0,w.DG)(e)&&"block"===e._type){let t=e.children.map((t,n)=>SW[t._type]?SW[t._type](t,n,e):t);return{...e,children:t}}return e}),SJ=(0,j.zo)(h.xu)`
  height: 1px;
  background: var(--card-border-color);
  width: 100%;
`,SX=j.zo.div`
  // Remove margin top of first element
  > div:first-child {
    margin-top: 0;
  }
  // Remove margin bottom to last box.
  > [data-ui='Box']:last-child {
    margin-bottom: 0;
  }
`,SQ=(0,j.zo)(h.xv)(e=>e.accent?`
    --card-icon-color: var(--card-accent-fg-color);
    `:""),S0=j.zo.span`
  color: var(--card-accent-fg-color);
  --card-icon-color: var(--card-accent-fg-color);
`,S1=j.zo.span(({theme:e})=>{let{weights:t}=e.sanity.fonts.text;return(0,j.iv)`
    font-weight: ${t.semibold};
  `}),S2=(0,j.zo)(_.JO$)`
  &[data-sanity-icon] {
    /* Forces the icon to leave the necessary space to the right or left it has surrounding text */
    margin-left: ${e=>e.$hasTextLeft?"0":""};
    margin-right: ${e=>e.$hasTextRight?"0":""};
  }
`,S3=j.zo.a`
  font-weight: 600;
  color: ${e=>e.useTextColor?"var(--card-muted-fg-color) !important":""};
`,S4=j.zo.span`
  > svg {
    display: inline;
    font-size: calc(21 / 16 * 1rem) !important;
    margin: -0.375rem 0 !important;
    *[stroke] {
      stroke: currentColor;
    }
  }
`,S5=e=>(0,l.jsx)(S0,{children:e}),S8=e=>{let[t,n]=(0,d.useState)("");return(0,d.useEffect)(()=>{let t=new AbortController,i=t.signal;return fetch(e.icon.url,{signal:i}).then(e=>{if(!e.ok)throw Error(`HTTP error! status: ${e.status}`);return e.text()}).then(e=>n(e)).catch(e=>{"AbortError"!==e.name&&console.error(e)}),()=>{t.abort()}},[e.icon.url]),(0,l.jsx)(S4,{dangerouslySetInnerHTML:{__html:t}})};function S6(e){let{children:t}=e;return(0,l.jsx)(h.xu,{paddingX:2,marginBottom:4,children:(0,l.jsx)(h.xv,{size:1,muted:!0,children:t})})}function S7(e){let{children:t}=e;return(0,l.jsx)(h.xu,{paddingX:2,marginY:4,children:(0,l.jsx)(h.X6,{size:2,as:"h2",children:t})})}let S9={block:{normal:({children:e})=>(0,l.jsx)(S6,{children:e}),h2:({children:e})=>(0,l.jsx)(S7,{children:e})},list:{bullet:({children:e})=>e,number:({children:e})=>(0,l.jsx)(l.Fragment,{children:e}),checkmarks:({children:e})=>(0,l.jsx)(l.Fragment,{children:e})},listItem:{bullet:({children:e})=>(0,l.jsx)(S6,{children:e}),number:({children:e})=>(0,l.jsx)(S6,{children:e}),checkmarks:({children:e})=>(0,l.jsx)(S6,{children:e})},marks:{strong:({children:e})=>(0,l.jsx)("strong",{children:e}),semibold:({children:e})=>(0,l.jsx)(S1,{children:e}),link:e=>(0,l.jsxs)(S3,{href:e.value.href,rel:"noopener noreferrer",target:"_blank",useTextColor:e.value.useTextColor,children:[e.children,e.value.showIcon&&(0,l.jsx)(_.xPt,{style:{marginLeft:"2px"}})]}),accent:e=>(0,l.jsx)(S0,{children:e.children})},types:{inlineIcon:e=>(0,l.jsx)(x.M2,{condition:e.value.accent,wrapper:S5,children:e.value.sanityIcon?(0,l.jsx)(S2,{symbol:e.value.sanityIcon,$hasTextLeft:e.value.hasTextLeft,$hasTextRight:e.value.hasTextRight}):(0,l.jsx)(S8,{icon:e.value.icon})}),divider:()=>(0,l.jsx)(h.xu,{marginY:3,children:(0,l.jsx)(h.xu,{paddingY:3,children:(0,l.jsx)(SJ,{})})}),iconAndText:e=>(0,l.jsxs)(h.kC,{align:"flex-start",paddingX:2,paddingTop:1,paddingBottom:2,marginTop:2,gap:2,children:[(0,l.jsxs)(h.kC,{gap:2,style:{flexShrink:0},children:[(0,l.jsx)(SQ,{size:1,accent:e.value.accent,children:e.value.sanityIcon?(0,l.jsx)(_.JO$,{symbol:e.value.sanityIcon}):(0,l.jsx)(S8,{icon:e.value.icon})}),(0,l.jsx)(h.xv,{size:1,weight:"semibold",accent:e.value.accent,children:e.value.title})]}),(0,l.jsx)(h.xv,{size:1,muted:!0,accent:e.value.accent,children:e.value.text})]})}};function Ee(e){let t=(0,d.useMemo)(()=>SY(e.blocks),[e.blocks]);return(0,l.jsx)(h.Zb,{tone:"default",children:(0,l.jsx)(SX,{children:(0,l.jsx)(t1.YI,{value:t,components:S9,onMissingComponent:!1})})})}let Et=(0,j.zo)(x.zx)(({theme:e})=>{let{space:t}=(0,b.aQ)(e);return`
      position: absolute;
      top: ${t[3]}px;
      right: ${t[3]}px;
      z-index: 20;
      background: transparent;
      border-radius: 9999px;
      box-shadow: none;
      color: ${M.ix.hex};
      --card-fg-color: ${M.ix.hex};
      :hover {
        --card-fg-color: ${M.ix.hex};
      }
    `}),En=j.zo.img`
  object-fit: cover;
  width: 100%;
  height: 100%;
  height: 200px;
`;function Ei(e){let{data:t,onClose:n,onPrimaryClick:i,onSecondaryClick:a}=e;return(0,l.jsxs)(x.Vq,{id:"upsell-dialog",onClose:n,onClickOutside:n,__unstable_hideCloseButton:!0,bodyHeight:"fill",padding:!1,footer:{cancelButton:t.secondaryButton?.text?{text:t.secondaryButton.text,mode:"bleed",tone:"default",iconRight:_.buG,...t.secondaryButton.url&&{target:"_blank",rel:"noopener noreferrer",as:"a",href:t.secondaryButton.url},onClick:a}:void 0,confirmButton:{text:t.ctaButton?.text,mode:"default",tone:"primary",...t.ctaButton.url&&{target:"_blank",rel:"noopener noreferrer",as:"a",href:t.ctaButton.url},onClick:i}},children:[(0,l.jsx)(Et,{icon:_.Two,mode:"bleed",tone:"default",onClick:n,tabIndex:-1,tooltipProps:null}),t.image&&(0,l.jsx)(En,{src:t.image.asset.url,alt:t.image.asset.altText??""}),(0,l.jsx)(h.xu,{padding:3,marginTop:2,children:(0,l.jsx)(h.Kq,{space:4,paddingBottom:2,children:(0,l.jsx)(Ee,{blocks:t.descriptionText})})})]})}let Ea="comments",Er={interpolate:/{{([\s\S]+?)}}/g},Eo="www.sanity.io";function Es(e){let[t,n]=(0,d.useState)(!1),[i,a]=(0,d.useState)(null),r=NP(),o=(0,na.f1)(),s=Bi(rz),c=(0,d.useMemo)(()=>({dialogSecondaryClicked:()=>o.log(NL,{feature:Ea,type:"modal"}),dialogPrimaryClicked:()=>o.log(NR,{feature:Ea,type:"modal"}),panelViewed:e=>o.log(NF,{feature:Ea,type:"inspector",source:e}),panelDismissed:()=>o.log(ND,{feature:Ea,type:"inspector"}),panelPrimaryClicked:()=>o.log(NR,{feature:Ea,type:"inspector"}),panelSecondaryClicked:()=>o.log(NL,{feature:Ea,type:"inspector"})}),[o]),u=(0,d.useCallback)(()=>{c.dialogPrimaryClicked()},[c]),m=(0,d.useCallback)(()=>{c.dialogSecondaryClicked()},[c]),h=(0,d.useCallback)(()=>{n(!1),o.log(ND,{feature:Ea,type:"modal"})},[o]);(0,d.useEffect)(()=>{let e=s.observable.request({uri:"/journey/comments"}).subscribe({next:e=>{if(e)try{let t=nQ(e.ctaButton.url,Er);e.ctaButton.url=t({baseUrl:Eo,projectId:r});let n=nQ(e.secondaryButton.url,Er);e.secondaryButton.url=n({baseUrl:Eo,projectId:r}),a(e)}catch{}},error:()=>{}});return()=>{e.unsubscribe()}},[s,r]);let f=(0,d.useCallback)(e=>{n(!0),o.log(NF,{feature:Ea,type:"modal",source:e})},[o]),g=(0,d.useMemo)(()=>({upsellDialogOpen:t,handleOpenDialog:f,upsellData:i,telemetryLogs:c}),[f,t,i,c]);return(0,l.jsxs)(p.BN.Provider,{value:g,children:[e.children,i&&t&&(0,l.jsx)(Ei,{data:i,onClose:h,onPrimaryClick:u,onSecondaryClick:m})]})}function El(e){return Sv().enabled?(0,l.jsx)(SH,{children:(0,l.jsx)(_L,{children:e.renderDefault(e)})}):e.renderDefault(e)}let Ec="sanity/comments",Ed="yellow",Eu=[{shortName:":+1:",title:"Thumbs up"},{shortName:":-1:",title:"Thumbs down"},{shortName:":heart:",title:"Heart"},{shortName:":rocket:",title:"Rocket"},{shortName:":heavy_plus_sign:",title:"Heavy plus sign"},{shortName:":eyes:",title:"Eyes"}],Ep={":-1:":"\uD83D\uDC4E",":+1:":"\uD83D\uDC4D",":eyes:":"\uD83D\uDC40",":heart:":"❤️",":heavy_plus_sign:":"➕",":rocket:":"\uD83D\uDE80"},Em=(0,j.zo)(h.Kq)`
  width: 320px;
`;function Eh(e){let{count:t,currentUser:n,fieldTitle:i,isCreatingDataset:a,mentionOptions:r,onChange:o,onClick:s,onClose:c,onCommentAdd:u,onDiscard:p,onInputKeyDown:m,open:f,value:g}=e,{t:y}=i1(_R),b=(0,d.useRef)(null),[v,j]=(0,d.useState)(null),C=(0,d.useRef)(null),w=t>0,k=(0,d.useCallback)(()=>{f&&(c(),v?.focus())},[v,f,c]),T=(0,d.useCallback)(()=>{u(),k()},[k,u]),A=(0,d.useMemo)(()=>Se(g),[g]),S=(0,d.useCallback)(()=>{if(!A){k();return}C.current?.discardDialogController.open()},[k,A]),E=(0,d.useCallback)(e=>{e.isDefaultPrevented()||m&&m(e)},[m]),M=(0,d.useCallback)(()=>{C.current?.discardDialogController.close()},[]),N=(0,d.useCallback)(()=>{C.current?.discardDialogController.close(),k(),p()},[k,p]),I=(0,d.useCallback)(e=>{"Escape"===e.key&&(e.preventDefault(),e.stopPropagation(),S())},[S]);return(0,h.Of)(!f&&S,()=>[b.current]),w?(0,l.jsx)(x.u,{portal:!0,placement:"top",content:y("field-button.content",{count:t}),children:(0,l.jsx)(h.zx,{"aria-label":y("field-button.aria-label-open"),mode:"bleed",onClick:s,padding:2,space:2,children:(0,l.jsxs)(h.kC,{align:"center",gap:2,children:[(0,l.jsx)(h.xv,{size:1,children:(0,l.jsx)(_.qtd,{})}),(0,l.jsx)(h.xv,{size:0,children:t>9?"9+":t})]})})}):(0,l.jsx)(x.J2,{constrainSize:!0,content:(0,l.jsx)(Em,{padding:2,space:4,children:(0,l.jsx)(Vy,{currentUser:n,focusLock:!0,focusOnMount:!0,mentionOptions:r,onChange:o,onDiscardCancel:M,onDiscardConfirm:N,onKeyDown:E,onSubmit:T,placeholder:(0,l.jsx)(rm,{t:y,i18nKey:"compose.add-comment-input-placeholder",values:{field:i}}),readOnly:a,ref:C,value:g})}),fallbackPlacements:["bottom-end"],open:f,placement:"right-start",portal:!0,ref:b,onKeyDown:I,children:(0,l.jsx)("div",{children:(0,l.jsx)(x.zx,{"aria-label":y("field-button.aria-label-add"),disabled:a,icon:_.TVl,mode:"bleed",onClick:s,ref:j,selected:f,tooltipProps:{content:y("field-button.title"),placement:"top"}})})})}let Ef=new Map,Eg=[],Ex={initial:{opacity:0},animate:{opacity:1},exit:{opacity:0}},Ey=(0,j.zo)(t5.E.div)(({theme:e})=>{let{radius:t,space:n,color:i}=e.sanity,a=M.VG[Ed][i.dark?900:50].hex;return(0,j.iv)`
    mix-blend-mode: ${i.dark?"screen":"multiply"};
    border-radius: ${t[3]}px;
    top: -${n[2]}px;
    left: -${n[2]}px;
    bottom: -${n[2]}px;
    right: -${n[2]}px;
    pointer-events: none;
    position: absolute;
    z-index: 1;
    width: calc(100% + ${2*n[2]}px);
    height: calc(100% + ${2*n[2]}px);
    background-color: ${a};
  `}),Eb=(0,j.zo)(h.Kq)`
  position: relative;
`;function Ev(e){let{mode:t}=e,n=vh(),{element:i}=(0,h.sz)(),a=(0,d.useRef)(null),{comments:r,isCommentsOpen:o,isCreatingDataset:s,mentionOptions:u,onCommentsOpen:m,operation:f,setStatus:g,status:x}=Sb(),{upsellData:y,handleOpenDialog:b}=S$(),{selectedPath:v,setSelectedPath:j}=SM(),{authoringPath:C,setAuthoringPath:w}=function(){let e=(0,d.useContext)(p.Gj);if(!e)throw Error("useCommentsAuthoringPath: missing context value");return e}(),{scrollToGroup:k}=SE({boundaryElement:i}),T=(0,d.useMemo)(()=>pM(e.schemaType),[e.schemaType]),A=(0,d.useMemo)(()=>c.BB(e.path),[e.path]),_=Ef.get(A)||null,[S,E]=(0,d.useState)(_),M=(0,d.useMemo)(()=>C===A,[C,A]),N=(0,d.useMemo)(()=>!!o&&v?.origin!=="form"&&v?.origin!=="url"&&v?.fieldPath===A,[o,v?.fieldPath,v?.origin,A]),I=(0,d.useMemo)(()=>r.data.open.filter(e=>e.threadId===v?.threadId).some(e=>St(e.parentComment)),[r.data.open,v?.threadId]),z=(0,d.useMemo)(()=>r.data.open.map(e=>e.fieldPath===A?e.commentsCount:0).reduce((e,t)=>e+t,0)||0,[r.data.open,A]),$=z>0,O=(0,d.useCallback)(()=>{E(null),Ef.delete(A)},[A]),P=(0,d.useCallback)(()=>{if($){"resolved"===x&&g("open"),w(null),m?.();let t=r.data.open.find(t=>t.fieldPath===c.BB(e.path))?.threadId;t&&(j({threadId:t,origin:"form",fieldPath:c.BB(e.path)}),k(t));return}if("upsell"===t){y?b("field_action"):m?.();return}w(M?null:A)},[r.data.open,b,$,M,t,m,e.path,k,w,j,g,x,A,y]),F=(0,d.useCallback)(()=>{if(S){let t=(0,nm.Z)(),n={type:"field",fieldPath:c.BB(e.path),message:S,parentCommentId:void 0,status:"open",threadId:t,reactions:Eg};f.create(n),m?.(),"resolved"===x&&g("open"),O(),j({threadId:t,origin:"form",fieldPath:c.BB(e.path)}),k(t)}},[m,f,e.path,O,k,j,g,x,S]),D=(0,d.useCallback)(()=>w(null),[w]),R=(0,d.useCallback)(e=>{E(e),Ef.set(A,e)},[A]),L=(0,d.useMemo)(()=>({button:n&&(0,l.jsx)(Eh,{count:Number(z),currentUser:n,fieldTitle:T,isCreatingDataset:s,mentionOptions:u,onChange:R,onClick:P,onClose:D,onCommentAdd:F,onDiscard:O,open:M,value:S}),hasComments:$,isAddingComment:M}),[n,z,T,s,u,R,P,D,F,O,M,S,$]);return(0,l.jsxs)(Eb,{"data-comments-field-id":SA(c.BB(e.path)),ref:a,children:[e.renderDefault({...e,__internal_comments:L}),(0,l.jsx)(t8.M,{children:N&&!I&&(0,l.jsx)(Ey,{animate:"animate",exit:"exit",initial:"initial",variants:Ex})})]})}let Ej=(0,j.zo)((0,t5.E)(x.J2))`
  user-select: none;
`,EC=["bottom","top"],Ew={hidden:{opacity:0,y:-4},visible:{opacity:1,y:0}};function Ek(e){let{disabled:t,onClick:n,onClickOutside:i,referenceElement:a}=e,r=(0,d.useRef)(null),{t:o}=i1(_R);(0,h.Of)(i,()=>[r.current]);let s=o("inline-add-comment-button.disabled-overlap-title"),c=o("inline-add-comment-button.title");return(0,l.jsx)(Ej,{animate:"visible",content:(0,l.jsx)(x.zx,{"data-testid":"inline-comment-button",disabled:t,icon:t?qD:_.TVl,mode:"bleed",onClick:n,ref:r,text:t?s:c}),contentEditable:!1,fallbackPlacements:EC,initial:"hidden",open:!0,padding:1,placement:"bottom",portal:!0,referenceElement:a,variants:Ew})}let ET=["bottom","top"],EA=(0,t5.E)(x.J2),E_=(0,j.zo)(h.Kq)`
  width: 250px;
`,ES={hidden:{opacity:0},visible:{opacity:1}};function EE(e){let{currentUser:t,mentionOptions:n,onChange:i,onClickOutside:a,onDiscardConfirm:r,onSubmit:o,referenceElement:s,value:c}=e,u=(0,d.useRef)(null),p=(0,d.useRef)(null),m=(0,d.useCallback)(()=>{u.current?.discardDialogController.close(),r()},[r]),f=(0,d.useCallback)(()=>{u.current?.discardDialogController.close()},[]);return(0,h.Of)(()=>{if(Se(c)){u.current?.discardDialogController.open();return}a()},()=>[p.current]),(0,l.jsx)(EA,{animate:"visible",content:(0,l.jsx)(E_,{padding:2,ref:p,children:(0,l.jsx)(Vy,{currentUser:t,focusLock:!0,focusOnMount:!0,mentionOptions:n,onChange:i,onDiscardCancel:f,onDiscardConfirm:m,onSubmit:o,ref:u,value:c})}),"data-ui":"InlineCommentInputPopover",fallbackPlacements:ET,initial:"hidden",open:!0,placement:"bottom",portal:!0,referenceElement:s,variants:ES})}let EM=[];function EN(e){let{enabled:t,mode:n}=Sv(),i="sanity.assist.instruction.prompt"===e.schemaType.name;return!t||i?e.renderDefault(e):(0,l.jsx)(EI,{...e,mode:n})}let EI=(0,d.memo)(function(e){let{mode:t}=e,n=vh(),i=(0,h.vI)(),{comments:a,getComment:r,mentionOptions:o,onCommentsOpen:s,operation:u,setStatus:p,status:f}=Sb(),{setSelectedPath:g,selectedPath:x}=SM(),{scrollToComment:y,scrollToGroup:b}=SE(),{handleOpenDialog:v}=S$(),j=(0,d.useRef)(null),C=(0,d.useRef)(!1),[k,T]=(0,d.useState)(null),[A,_]=(0,d.useState)(null),[S,E]=(0,d.useState)(null),[M,N]=(0,d.useState)(null),[I,z]=(0,d.useState)(null),[$,O]=(0,d.useState)(null),[P,F]=(0,d.useState)(!1),[D,R]=(0,d.useState)(null),[L,B]=(0,d.useState)(!1),[q,V]=(0,d.useState)(EM),K=(0,d.useMemo)(()=>c.BB(e.path),[e.path]),U=(0,d.useCallback)(()=>{z(function(){let e=window.getSelection(),t=null;return e&&e.rangeCount>0&&(t=e.getRangeAt(0)),t?.getBoundingClientRect()||null}())},[]),Z=(0,d.useCallback)(()=>{N(null),z(null),E(null),_(null),F(!1),T(null)},[]),G=(0,d.useCallback)(()=>{if("upsell"===t){v("pte");return}E(M)},[M,v,t]),H=(0,d.useCallback)(()=>{Z()},[Z]),W=(0,d.useMemo)(()=>a.data.open.filter(e=>e.fieldPath===K).filter(e=>St(e.parentComment)).map(e=>e.parentComment),[a.data.open,K]),Y=(0,d.useCallback)(()=>j.current?t2.q$.getFragment(j.current):EM,[]),J=(0,d.useCallback)(()=>{if(!S||!j.current)return;let e=Y()||EM,t=t2.q$.getValue(j.current);if(!t)return;let n=function(e){let{fragment:t,value:n,selection:i}=e;if(!i)throw Error("Selection is required");let a=i.backward?{backward:!1,anchor:i.focus,focus:i.anchor}:i;return{type:"text",value:t.map(e=>{let t=n.find(t=>t._key===e._key);if(!(0,w.DG)(t))return{_key:e._key,text:""};let i=(0,w.Fd)(a.anchor.path[0])&&a.anchor.path[0]._key,r=(0,w.Fd)(a.focus.path[0])&&a.focus.path[0]._key,o=(0,t0.Kv)([e]),s=(0,w.DG)(e)?e.children[0]:void 0,l=(0,w.DG)(e)?e.children[e.children.length-1]:void 0,c="",d=-1;if(i===t._key)for(let e of t.children){if(d++,e._key===s?._key){c+=(0,w.NG)(e)&&e.text.slice(0,Math.max(0,a.anchor.offset))||"";break}c+=e.text}let u="";if(r===t._key)for(let e of t.children.slice(d).reverse()){if(e._key===l?._key){u=((0,w.NG)(e)&&e.text.slice(a.focus.offset,e.text.length)||"")+u;break}u=e.text+u}return{_key:t._key,text:`${c}${Sa[0]}${o}${Sa[1]}${u}`}})}}({fragment:e,selection:S,value:t}),i=(0,nm.Z)();u.create({type:"field",contentSnapshot:e,fieldPath:K,message:A,parentCommentId:void 0,reactions:EM,selection:n,status:"open",threadId:i}),s?.(),"resolved"===f&&p("open"),g({fieldPath:K,threadId:i,origin:"form"}),b(i),Z()},[S,Y,u,K,A,s,f,g,b,Z,p]),X=(0,d.useCallback)(e=>{let t=r(e);t&&(g({fieldPath:t.target.path?.field||"",threadId:t.threadId,origin:"form"}),s?.(),y(t._id))},[r,s,y,g]),Q=(0,d.useCallback)(e=>{let t=e?.anchor.offset!==e?.focus.offset;if(!Y()?.every(w.DG)||!t){F(!1);return}C.current||U(),N(e),F(!0)},[Y,U]),ee=(0,d.useMemo)(()=>m(Q,200),[Q]),et=(0,d.useCallback)(()=>{C.current=!0},[]),en=(0,d.useCallback)(()=>{C.current=!1,U()},[U]),ei=(0,d.useCallback)(e=>{let{rangeDecoration:t,newSelection:n}=e,i=t.payload?.commentId;V(e=>e.map(e=>e.payload?.commentId===i?{...t,selection:n,payload:{...t.payload,dirty:!0}}:e))},[]),ea=(0,d.useCallback)(()=>{let e=q.filter(e=>e.payload?.dirty);0!==e.length&&(e.forEach(e=>{let t=r(e.payload?.commentId||"");if(!t||!j.current)return;let[n]=Ss({comments:[t],value:t2.q$.getValue(j.current)||EM}),i=n?.range?[n.range]:EM,a=n?[...t.target.path?.selection?.value.filter(e=>e._key!==i[0]?._key).concat(i).flat()||EM]:EM,o={target:{...t.target,path:{...t.target?.path||{},field:t.target.path?.field||"",selection:{type:"text",value:a}}}};u.update(t._id,o)}),V(t=>t.map(t=>e.find(e=>e.payload?.commentId===t.payload?.commentId)?.payload?.dirty?{...t,payload:{...t.payload,dirty:!1}}:t).filter(e=>null!==e.selection)))},[q,r,u]),er=(0,d.useCallback)(e=>{if(!j.current)return EM;let t=t2.q$.getValue(j.current)||EM;return function(e){let{comments:t,currentHoveredCommentId:n,onDecorationClick:i,onDecorationHoverEnd:a,onDecorationHoverStart:r,onDecorationMoved:o,selectedThreadId:s,value:c}=e;return Ss({comments:t,value:c}).map(({selection:e,comment:t,range:c})=>({component:({children:e})=>(0,l.jsx)(Sl,{commentId:t._id,currentHoveredCommentId:n,onClick:i,onHoverEnd:a,onHoverStart:r,selectedThreadId:s,threadId:t.threadId,children:e}),onMoved:o,selection:e,payload:{commentId:t._id,range:c}}))}({comments:e,currentHoveredCommentId:$,onDecorationClick:X,onDecorationHoverEnd:O,onDecorationHoverStart:O,onDecorationMoved:ei,selectedThreadId:x?.threadId||null,value:t})},[$,X,ei,x?.threadId]),eo=(0,d.useCallback)(e=>{"mutation"===e.type&&ea(),"selection"===e.type&&ee(e.selection)},[ee,ea]),es=(0,d.useMemo)(()=>S?{component:({children:e})=>(0,l.jsx)(Vv,{isAuthoring:!0,ref:T,children:e}),selection:S}:null,[S]),el=(0,d.useMemo)(()=>[...e?.rangeDecorations||EM,...es?[es]:EM,...q],[q,es,e?.rangeDecorations]),ec=(0,d.useMemo)(()=>!!M&&0!==q.length&&q.some(e=>{if(!j.current)return!1;let t=t2.q$.isSelectionsOverlapping(j.current,M,e.selection),n=t2.q$.isSelectionsOverlapping(j.current,e.selection,M);return t||n}),[q,M]),ed=L?document.body:i.elements?.documentScrollElement||document.body,eu=L?i.elements?.documentScrollElement||document.body:D,ep=function(e){let{scrollElement:t,disabled:n,selector:i}=e,a=function(e){let{scrollElement:t,disabled:n,selector:i}=e,[a,r]=(0,d.useState)(null),o=(0,d.useCallback)(()=>{if(n)return;let e=document?.querySelectorAll(i);e&&r(function(e){if(!e||!e.length)return null;let t=e.map(e=>e.getBoundingClientRect()),n=Math.min(...t.map(e=>e.x))||0,i=Math.min(...t.map(e=>e.y))||0,a=Math.max(...t.map(e=>e.right))||0,r=Math.max(...t.map(e=>e.bottom))||0;return{x:n,y:i,width:a-n,height:r-i,top:i,right:a,bottom:r,left:n}}(Array.from(e)))},[n,i]);return(0,d.useEffect)(o,[o]),(0,d.useEffect)(()=>{if(!(n||!t))return t.addEventListener("wheel",o),()=>{t.removeEventListener("wheel",o)}},[o,n,t]),a}({scrollElement:t,disabled:n,selector:i});return(0,d.useMemo)(()=>a?{getBoundingClientRect:()=>a}:null,[a])}({scrollElement:ed,disabled:!S||!k,selector:'[data-inline-comment-state="authoring"]'}),em=(0,d.useMemo)(()=>I?{getBoundingClientRect:()=>I}:null,[I]);(0,d.useEffect)(()=>{if(M)return ed?.addEventListener("wheel",U),()=>{ed?.removeEventListener("wheel",U)}},[M,ed,U]),(0,d.useEffect)(()=>{let e=er(W);V(t=>e.map(e=>{let n=t.find(t=>t.payload?.commentId===e.payload?.commentId);return n?.payload?.dirty?{...e,payload:{...e.payload,dirty:n.payload.dirty}}:e}))},[er,W]);let eh=!!(M&&P&&em&&!C.current),ef=!!(S&&ep);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(h.NM,{element:eu,children:(0,l.jsxs)(t8.M,{children:[ef&&n&&(0,l.jsx)(EE,{currentUser:n,mentionOptions:o,onChange:_,onClickOutside:Z,onDiscardConfirm:H,onSubmit:J,referenceElement:ep,value:A}),eh&&!ef&&(0,l.jsx)(Ek,{disabled:ec,onClick:G,onClickOutside:Z,referenceElement:em})]})}),(0,l.jsx)(h.Kq,{ref:R,onMouseDown:et,onMouseUp:en,children:e.renderDefault({...e,onEditorChange:eo,editorRef:j,rangeDecorations:el,onFullScreenChange:B})})]})}),Ez=j.zo.span`
  margin-right: 0.2em;
`,E$=j.zo.a`
  white-space: nowrap;
`,EO=(0,j.zo)(h.Zb)({position:"relative",zIndex:1});function EP(){let{t:e}=i1(_R);return(0,l.jsx)(EO,{padding:4,children:(0,l.jsxs)(h.xv,{muted:!0,size:1,children:[e("feature-feedback.title")," ",(0,l.jsxs)(E$,{href:"https://snty.link/comments-beta-feedback",target:"_blank",rel:"noreferrer",children:[(0,l.jsxs)(Ez,{children:[e("feature-feedback.link")," "]})," ",(0,l.jsx)(_.buG,{})]})]})})}let EF=(0,j.zo)(h.Zb)({position:"relative",zIndex:1,lineHeight:0}),ED=(0,d.forwardRef)(function(e,t){let{t:n}=i1(_R),{onClose:i,onViewChange:a,view:r,mode:o}=e,s=(0,d.useCallback)(()=>a("open"),[a]),c=(0,d.useCallback)(()=>a("resolved"),[a]);return(0,l.jsx)(EF,{ref:t,children:(0,l.jsxs)(h.kC,{padding:2,children:[(0,l.jsx)(h.kC,{align:"center",flex:1,gap:2,paddingY:2,padding:3,children:(0,l.jsx)(h.xv,{as:"h1",size:1,weight:"medium",children:n("feature-name")})}),(0,l.jsxs)(h.kC,{flex:"none",padding:1,gap:2,children:[(0,l.jsx)(x.j2,{id:"comment-status-menu-button",button:(0,l.jsx)(x.zx,{text:n("open"===r?"status-filter.status-open":"status-filter.status-resolved"),mode:"bleed",iconRight:_.v4q}),menu:(0,l.jsxs)(h.v2,{style:{width:"180px"},children:[(0,l.jsx)(x.sN,{iconRight:"open"===r?_.KML:void 0,onClick:s,text:n("status-filter.status-open-full")}),(0,l.jsx)(x.sN,{iconRight:"resolved"===r?_.KML:void 0,onClick:c,text:n("status-filter.status-resolved-full"),tooltipProps:"upsell"===o?{content:n("status-filter.status-resolved-full-upsell")}:void 0,disabled:"upsell"===o})]}),popover:{placement:"bottom-end"}}),(0,l.jsx)(x.zx,{"aria-label":n("close-pane-button-text-aria-label"),icon:_.Two,mode:"bleed",onClick:i,tooltipProps:{content:n("close-pane-button-text")}})]})]})})}),ER=(0,j.zo)(h.mh)`
  display: flex;
  flex-direction: column;
  height: 100%;
  overflow: hidden;
`;function EL(e){let{t}=i1(_R),{onClose:n,mode:i}=e,[a,r]=(0,d.useState)(!1),[o,s]=(0,d.useState)(null),[u,m]=(0,d.useState)(!1),[f,g]=(0,d.useState)(null),x=(0,d.useRef)(null),y=vh(),{comments:b,getComment:v,isCreatingDataset:j,mentionOptions:C,setStatus:w,status:k,operation:T,selectedCommentId:A,getCommentLink:_,onClearSelectedComment:S,onPathOpen:E}=Sb(),M=(0,d.useRef)(A),N=(0,d.useRef)(!1),I=(0,h.pm)().push,{isTopLayer:z}=(0,h.sJ)(),{scrollToComment:$,scrollToField:O,scrollToInlineComment:P}=SE(),{selectedPath:F,setSelectedPath:D}=SM(),{isDismissed:R,setDismissed:L}=function(){let e=(0,d.useContext)(p.R0);if(!e)throw Error("useCommentsOnboarding: missing context value");return e}(),B=function(){let e=(0,na.f1)(),t=(0,d.useCallback)(()=>{e.log(SN)},[e]),n=(0,d.useCallback)(()=>{e.log(SI)},[e]),i=(0,d.useCallback)(t=>{e.log(Sz,{view:t})},[e]);return(0,d.useMemo)(()=>({commentLinkCopied:t,commentListViewChanged:i,commentViewedFromLink:n}),[t,i,n])}(),{upsellData:q,telemetryLogs:V}=S$(),K=(0,d.useMemo)(()=>b.data[k],[b,k]),{loading:U}=b,Z=(0,d.useCallback)(e=>{w(e),D(null),B.commentListViewChanged(e)},[D,w,B]),G=(0,d.useCallback)(()=>{n(),D(null)},[n,D]),H=(0,d.useMemo)(()=>_?e=>{navigator.clipboard.writeText(_(e)).then(()=>{I({closable:!0,status:"info",title:t("copy-link-success-message")})}).catch(()=>{I({closable:!0,status:"error",title:t("copy-link-error-message")})}),B.commentLinkCopied()}:void 0,[_,I,t,B]),W=(0,d.useCallback)(e=>{let t=v(e);t&&T.create({type:"field",fieldPath:t.target.path?.field||"",id:t._id,message:t.message,parentCommentId:t.parentCommentId,reactions:t.reactions||[],status:t.status,threadId:t.threadId})},[v,T]),Y=(0,d.useCallback)(()=>{u||(r(!1),s(null))},[u]),J=(0,d.useCallback)(e=>{if(D(e),e?.fieldPath){let t=c.mL(e.fieldPath);E?.(t),O(e.fieldPath),b.data.open.filter(t=>t.threadId===e?.threadId).some(e=>St(e.parentComment))&&e.threadId&&P(e.threadId)}},[b.data.open,E,O,P,D]),X=(0,d.useCallback)(e=>{let t=e?.payload?.fieldPath||"";T.create({type:"field",fieldPath:t,message:e.message,parentCommentId:e.parentCommentId,reactions:e.reactions,status:e.status,threadId:e.threadId}),D({fieldPath:t,origin:"inspector",threadId:e.threadId})},[T,D]),Q=(0,d.useCallback)(e=>{T.create({...e,type:"field",fieldPath:e?.payload?.fieldPath||""})},[T]),ee=(0,d.useCallback)((e,t)=>{T.update(e,t)},[T]),et=(0,d.useCallback)(e=>{let t=K.find(t=>t.parentComment?._id===e),n=!!(t&&t?.replies?.length>0);r(!0),s({commentId:e,isParent:n})},[K]),en=(0,d.useCallback)(async e=>{try{m(!0),await T.remove(e),Y()}catch(e){g(e)}finally{m(!1)}},[Y,T]),ei=(0,d.useCallback)((e,t)=>{if(T.update(e,{status:t}),"open"===t){w("open");let t=v(e);t&&(D({fieldPath:t.target.path?.field||null,origin:"inspector",threadId:t.threadId||null}),$(e))}},[v,T,$,D,w]),ea=(0,d.useCallback)((e,t)=>{T.react(e,t)},[T]),er=(0,d.useCallback)(()=>{F&&z&&D(null)},[z,F,D]);(0,h.Of)(e=>{e.target instanceof HTMLElement&&e.target?.hasAttribute("data-slate-string")||er()},()=>[x.current]);let[eo,es]=(0,d.useState)(!1);(0,d.useEffect)(()=>{if(!(eo||"upsell"!==i))return es(!0),F?.origin==="form"?V.panelViewed("field_action"):M.current?V.panelViewed("link"):V.panelViewed("document_action"),()=>{V.panelDismissed()}},[eo,i,F?.origin,V]),(0,d.useEffect)(()=>{let e=v(M.current||"");!U&&e&&!1===N.current&&(w(e.status||"open"),D({fieldPath:e.target.path?.field||null,origin:"url",threadId:e.threadId||null}),$(e._id),N.current=!0,M.current=void 0,S?.(),B.commentViewedFromLink())},[v,U,S,$,D,w,B]);let el=(0,d.useMemo)(()=>"upsell"===i&&q?(0,l.jsx)(Kx,{data:q,onPrimaryClick:V.panelPrimaryClicked,onSecondaryClick:V.panelSecondaryClicked}):null,[i,V.panelPrimaryClicked,V.panelSecondaryClicked,q]);return(0,l.jsxs)(d.Fragment,{children:[o&&a&&(0,l.jsx)(qF,{...o,error:f,loading:u,onClose:Y,onConfirm:en}),(0,l.jsxs)(h.kC,{direction:"column",flex:1,height:"fill",onClick:er,overflow:"hidden",ref:x,children:[(0,l.jsx)(Kg,{onDismiss:L,open:!R,placement:"left-start",children:(0,l.jsx)(ED,{onClose:G,onViewChange:Z,view:k,mode:i})}),y&&(0,l.jsx)(Kp,{beforeListNode:el,comments:K,currentUser:y,error:b.error,loading:U,mentionOptions:C,mode:i,onCopyLink:H,onCreateRetry:W,onDelete:et,onEdit:ee,onNewThreadCreate:X,onPathSelect:J,onReactionSelect:ea,onReply:Q,onStatusChange:ei,readOnly:j,selectedPath:F,status:k}),"default"===i&&(0,l.jsx)(EP,{})]})]})}let EB=aU({name:"sanity/comments",document:{inspectors:[{name:Ec,component:function(e){let{enabled:t,mode:n}=Sv();return t?(0,l.jsx)(ER,{children:(0,l.jsx)(EL,{...e,mode:n})}):null},useMenuItem:function(){let{t:e}=i1(_R),{enabled:t}=Sv();return{hidden:!t,icon:_.qtd,showAsAction:!0,title:e("feature-name")}}}],components:{unstable_layout:function(e){let{documentId:t,documentType:n}=e;return null!==Sv().mode?(0,l.jsx)(El,{...e}):(0,l.jsx)(SV,{documentId:t,documentType:n,children:(0,l.jsx)(El,{...e})})}}},form:{components:{field:function(e){let{enabled:t,mode:n}=Sv();return t?(0,l.jsx)(Ev,{...e,mode:n}):e.renderDefault(e)},input:function(e){return(0,w.js)(e.schemaType)?(0,l.jsx)(EN,{...e}):e.renderDefault(e)}}},studio:{components:{layout:function(e){let{enabled:t,isLoading:n}=Bm("studioComments");return(0,l.jsx)(Pk,{children:(0,l.jsx)(SG,{children:(0,l.jsx)(x.M2,{condition:!t&&!n,wrapper:e=>(0,l.jsx)(Es,{children:e}),children:e.renderDefault(e)})})})}}},i18n:{bundles:[{locale:"en-US",namespace:_R,resources:()=>n.e(4250).then(n.bind(n,64250))}]}}),Eq="scheduled-publishing::time-zone",EV={publish:{actionName:"Publishing",badgeColor:"primary",badgeTone:"positive"},unpublish:{actionName:"Unpublishing",badgeColor:"danger",badgeTone:"critical"}},EK={scheduled:{title:"Upcoming"},succeeded:{title:"Completed"},cancelled:{title:"Failed"}},EU=Object.keys(EK).filter(e=>!!e),EZ="This document has validation errors that should be resolved before its publish date.",EG={SMALL:"d MMM yy',' p",MEDIUM:"d MMMM yyyy',' p",LARGE:"iiii',' d MMMM yyyy',' p"},EH={enabled:!0,inputDateTimeFormat:"dd/MM/yyyy HH:mm"},EW=e=>{let{description:t,title:n}=e;return(0,l.jsx)(h.Zb,{overflow:"hidden",padding:4,radius:2,shadow:1,tone:"critical",children:(0,l.jsxs)(h.kC,{align:"center",gap:4,children:[(0,l.jsx)(h.xv,{size:2,children:(0,l.jsx)(_.uIy,{})}),(0,l.jsxs)(h.gF,{space:2,children:[(0,l.jsx)(h.xv,{size:1,weight:"semibold",children:n}),t&&(0,l.jsx)(h.xv,{size:1,children:t})]})]})})},EY=/^[A-Za-z_+-]{1,256}(:?\/[A-Za-z_+-]{1,256}(\/[A-Za-z_+-]{1,256})?)?$/,EJ={year:0,month:1,day:2,hour:3,minute:4,second:5};function EX(e,t){return"string"==typeof e&&"string"==typeof t?e.localeCompare(t):0}function EQ(e,t,n){var i,a,r=function(e,t,n){if(n&&!n.code)throw Error("date-fns-tz error: Please set a language code on the locale object imported from date-fns, e.g. `locale.code = 'en-US'`");return new Intl.DateTimeFormat(n?[n.code,"en-US"]:void 0,{timeZone:t,timeZoneName:e})}(e,n.timeZone,n.locale);return r.formatToParts?function(e,t){for(var n=e.formatToParts(t),i=n.length-1;i>=0;--i)if("timeZoneName"===n[i].type)return n[i].value}(r,t):(i=r.format(t).replace(/\u200E/g,""),(a=/ [\w-+ ]+$/.exec(i))?a[0].substr(1):"")}var E0={year:0,month:1,day:2,hour:3,minute:4,second:5},E1={};function E2(e,t,n,i,a,r,o){var s=new Date(0);return s.setUTCFullYear(e,t,n),s.setUTCHours(i,a,r,o),s}var E3={timezoneZ:/^(Z)$/,timezoneHH:/^([+-]\d{2})$/,timezoneHHMM:/^([+-])(\d{2}):?(\d{2})$/};function E4(e,t,n){if(!e||(i=E3.timezoneZ.exec(e)))return 0;if(i=E3.timezoneHH.exec(e))return E8(r=parseInt(i[1],10))?-(36e5*r):NaN;if(i=E3.timezoneHHMM.exec(e)){r=parseInt(i[2],10);var i,a,r,o=parseInt(i[3],10);return E8(r,o)?(a=36e5*Math.abs(r)+6e4*o,"+"===i[1]?-a:a):NaN}if(function(e){if(E6[e])return!0;try{return new Intl.DateTimeFormat(void 0,{timeZone:e}),E6[e]=!0,!0}catch{return!1}}(e)){t=new Date(t||Date.now());var s,l=E5(n?t:E2((s=t).getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes(),s.getSeconds(),s.getMilliseconds()),e);return-(n?l:function(e,t,n){var i=e.getTime()-t,a=E5(new Date(i),n);if(t===a)return t;var r=E5(new Date(i-=a-t),n);return a===r?a:Math.max(a,r)}(t,l,e))}return NaN}function E5(e,t){var n,i,a,r=(a=function(e){if(!E1[e]){var t=new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:"America/New_York",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}).format(new Date("2014-06-25T04:00:00.123Z"));E1[e]="06/25/2014, 00:00:00"===t||"‎06‎/‎25‎/‎2014‎ ‎00‎:‎00‎:‎00"===t?new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"numeric",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}return E1[e]}(t)).formatToParts?function(e,t){try{for(var n=e.formatToParts(t),i=[],a=0;a<n.length;a++){var r=E0[n[a].type];r>=0&&(i[r]=parseInt(n[a].value,10))}return i}catch(e){if(e instanceof RangeError)return[NaN];throw e}}(a,e):(n=a.format(e),[(i=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(n))[3],i[1],i[2],i[4],i[5],i[6]]),o=E2(r[0],r[1]-1,r[2],r[3]%24,r[4],r[5],0).getTime(),s=e.getTime(),l=s%1e3;return o-(s-=l>=0?l:1e3+l)}function E8(e,t){return -23<=e&&e<=23&&(null==t||0<=t&&t<=59)}var E6={};function E7(e,t){var n=e?E4(e,t,!0)/6e4:t.getTimezoneOffset();if(Number.isNaN(n))throw RangeError("Invalid time zone specified: "+e);return n}function E9(e,t){for(var n=Math.abs(e).toString();n.length<t;)n="0"+n;return(e<0?"-":"")+n}function Me(e,t){var n=Math.abs(e);return(e>0?"-":"+")+E9(Math.floor(n/60),2)+(t||"")+E9(Math.floor(n%60),2)}function Mt(e,t){return e%60==0?(e>0?"-":"+")+E9(Math.abs(e)/60,2):Me(e,t)}var Mn={X:function(e,t,n,i){var a=E7(i.timeZone,e);if(0===a)return"Z";switch(t){case"X":return Mt(a);case"XXXX":case"XX":return Me(a);default:return Me(a,":")}},x:function(e,t,n,i){var a=E7(i.timeZone,e);switch(t){case"x":return Mt(a);case"xxxx":case"xx":return Me(a);default:return Me(a,":")}},O:function(e,t,n,i){var a,r,o,s,l=E7(i.timeZone,e);switch(t){case"O":case"OO":case"OOO":return"GMT"+(a=l>0?"-":"+",o=Math.floor((r=Math.abs(l))/60),0==(s=r%60)?a+String(o):a+String(o)+":"+E9(s,2));default:return"GMT"+Me(l,":")}},z:function(e,t,n,i){switch(t){case"z":case"zz":case"zzz":return EQ("short",e,i);default:return EQ("long",e,i)}}},Mi=/(Z|[+-]\d{2}(?::?\d{2})?| UTC| [a-zA-Z]+\/[a-zA-Z_]+(?:\/[a-zA-Z_]+)?)$/,Ma={dateTimePattern:/^([0-9W+-]+)(T| )(.*)/,datePattern:/^([0-9W+-]+)(.*)/,YY:/^(\d{2})$/,YYY:[/^([+-]\d{2})$/,/^([+-]\d{3})$/,/^([+-]\d{4})$/],YYYY:/^(\d{4})/,YYYYY:[/^([+-]\d{4})/,/^([+-]\d{5})/,/^([+-]\d{6})/],MM:/^-(\d{2})$/,DDD:/^-?(\d{3})$/,MMDD:/^-?(\d{2})-?(\d{2})$/,Www:/^-?W(\d{2})$/,WwwD:/^-?W(\d{2})-?(\d{1})$/,HH:/^(\d{2}([.,]\d*)?)$/,HHMM:/^(\d{2}):?(\d{2}([.,]\d*)?)$/,HHMMSS:/^(\d{2}):?(\d{2}):?(\d{2}([.,]\d*)?)$/,timeZone:Mi};function Mr(e,t){if(arguments.length<1)throw TypeError("1 argument required, but only "+arguments.length+" present");if(null===e)return new Date(NaN);var n=t||{},i=null==n.additionalDigits?2:nd(n.additionalDigits);if(2!==i&&1!==i&&0!==i)throw RangeError("additionalDigits must be 0, 1 or 2");if(e instanceof Date||"object"==typeof e&&"[object Date]"===Object.prototype.toString.call(e))return new Date(e.getTime());if("number"==typeof e||"[object Number]"===Object.prototype.toString.call(e))return new Date(e);if(!("string"==typeof e||"[object String]"===Object.prototype.toString.call(e)))return new Date(NaN);var a=function(e){var t,n={},i=Ma.dateTimePattern.exec(e);if(i?(n.date=i[1],t=i[3]):(i=Ma.datePattern.exec(e))?(n.date=i[1],t=i[2]):(n.date=null,t=e),t){var a=Ma.timeZone.exec(t);a?(n.time=t.replace(a[1],""),n.timeZone=a[1].trim()):n.time=t}return n}(e),r=function(e,t){var n,i=Ma.YYY[t],a=Ma.YYYYY[t];if(n=Ma.YYYY.exec(e)||a.exec(e)){var r=n[1];return{year:parseInt(r,10),restDateString:e.slice(r.length)}}if(n=Ma.YY.exec(e)||i.exec(e)){var o=n[1];return{year:100*parseInt(o,10),restDateString:e.slice(o.length)}}return{year:null}}(a.date,i),o=r.year,s=function(e,t){if(null===t)return null;if(0===e.length)return(i=new Date(0)).setUTCFullYear(t),i;if(n=Ma.MM.exec(e))return i=new Date(0),Md(t,a=parseInt(n[1],10)-1)?(i.setUTCFullYear(t,a),i):new Date(NaN);if(n=Ma.DDD.exec(e)){i=new Date(0);var n,i,a,r,o=parseInt(n[1],10);return!function(e,t){if(t<1)return!1;var n=Mc(e);return!(n&&t>366||!n&&t>365)}(t,o)?new Date(NaN):(i.setUTCFullYear(t,0,o),i)}if(n=Ma.MMDD.exec(e)){i=new Date(0),a=parseInt(n[1],10)-1;var s=parseInt(n[2],10);return Md(t,a,s)?(i.setUTCFullYear(t,a,s),i):new Date(NaN)}if(n=Ma.Www.exec(e))return Mu(t,r=parseInt(n[1],10)-1)?Mo(t,r):new Date(NaN);if(n=Ma.WwwD.exec(e)){r=parseInt(n[1],10)-1;var l=parseInt(n[2],10)-1;return Mu(t,r,l)?Mo(t,r,l):new Date(NaN)}return null}(r.restDateString,o);if(isNaN(s)||!s)return new Date(NaN);var l,c=s.getTime(),d=0;if(a.time&&isNaN(d=function(e){var t,n,i;if(t=Ma.HH.exec(e))return Mp(n=parseFloat(t[1].replace(",",".")))?n%24*36e5:NaN;if(t=Ma.HHMM.exec(e))return Mp(n=parseInt(t[1],10),i=parseFloat(t[2].replace(",",".")))?n%24*36e5+6e4*i:NaN;if(t=Ma.HHMMSS.exec(e)){n=parseInt(t[1],10),i=parseInt(t[2],10);var a=parseFloat(t[3].replace(",","."));return Mp(n,i,a)?n%24*36e5+6e4*i+1e3*a:NaN}return null}(a.time)))return new Date(NaN);if(a.timeZone||n.timeZone){if(isNaN(l=E4(a.timeZone||n.timeZone,new Date(c+d))))return new Date(NaN)}else l=nu(new Date(c+d)),l=nu(new Date(c+d+l));return new Date(c+d+l)}function Mo(e,t,n){t=t||0,n=n||0;var i=new Date(0);i.setUTCFullYear(e,0,4);var a=7*t+n+1-(i.getUTCDay()||7);return i.setUTCDate(i.getUTCDate()+a),i}var Ms=[31,28,31,30,31,30,31,31,30,31,30,31],Ml=[31,29,31,30,31,30,31,31,30,31,30,31];function Mc(e){return e%400==0||e%4==0&&e%100!=0}function Md(e,t,n){if(t<0||t>11)return!1;if(null!=n){if(n<1)return!1;var i=Mc(e);if(i&&n>Ml[t]||!i&&n>Ms[t])return!1}return!0}function Mu(e,t,n){return!(t<0||t>52||null!=n&&(n<0||n>6))}function Mp(e,t,n){return!(null!=e&&(e<0||e>=25)||null!=t&&(t<0||t>=60)||null!=n&&(n<0||n>=60))}var Mm=/([xXOz]+)|''|'(''|[^'])+('|$)/g;function Mh(e,t,n){var i=Mr(e,n),a=E4(t,i,!0),r=new Date(i.getTime()-a),o=new Date(0);return o.setFullYear(r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate()),o.setHours(r.getUTCHours(),r.getUTCMinutes(),r.getUTCSeconds(),r.getUTCMilliseconds()),o}function Mf(e,t,n,i){var a=nl(i);return a.timeZone=t,a.originalDate=e,function(e,t,n){var i=String(t),a=n||{},r=i.match(Mm);if(r){var o=Mr(a.originalDate||e,a);i=r.reduce(function(e,t){if("'"===t[0])return e;var n=e.indexOf(t),i="'"===e[n-1],r=e.replace(t,"'"+Mn[t[0]](o,t,null,a)+"'");return i?r.substring(0,n-1)+r.substring(n+1):r},i)}return nc(e,i,a)}(Mh(e,t),n,a)}let Mg=e=>{let{body:t,title:n}=e;return(0,l.jsxs)(h.Kq,{paddingY:1,space:3,children:[(0,l.jsxs)(h.gF,{space:2,children:[(0,l.jsx)(_.Que,{}),n&&(0,l.jsx)(h.xv,{size:2,weight:"semibold",children:n})]}),t&&(0,l.jsx)(h.xv,{size:1,children:t})]})},Mx="scheduled-publishing:";function My(e){let t=`${Mx}${e}`;return ns&&ns.enabled(t)?ns(t):ns(Mx)}function Mb(e){let t;return"object"==typeof e&&e&&"statusCode"in e&&"response"in e?t=403===e.response.statusCode?"Forbidden. Please check that your project has access to Scheduled Publishing.":e.message:(e instanceof Error&&(t=e.message),t=String(e)),t}ns(Mx);let Mv=My("useScheduleOperation"),Mj=[{name:"Pacific/Niue",alternativeName:"Niue Time",group:["Pacific/Niue"],continentCode:"OC",continentName:"Oceania",countryName:"Niue",countryCode:"NU",mainCities:["Alofi"],rawOffsetInMinutes:-660,abbreviation:"NUT",rawFormat:"-11:00 Niue Time - Alofi"},{name:"Pacific/Midway",alternativeName:"Samoa Time",group:["Pacific/Midway"],continentCode:"OC",continentName:"Oceania",countryName:"United States Minor Outlying Islands",countryCode:"UM",mainCities:["Midway"],rawOffsetInMinutes:-660,abbreviation:"SST",rawFormat:"-11:00 Samoa Time - Midway"},{name:"Pacific/Pago_Pago",alternativeName:"Samoa Time",group:["Pacific/Pago_Pago","US/Samoa","Pacific/Samoa","Pacific/Midway"],continentCode:"OC",continentName:"Oceania",countryName:"American Samoa",countryCode:"AS",mainCities:["Pago Pago"],rawOffsetInMinutes:-660,abbreviation:"SST",rawFormat:"-11:00 Samoa Time - Pago Pago"},{name:"Pacific/Rarotonga",alternativeName:"Cook Islands Time",group:["Pacific/Rarotonga"],continentCode:"OC",continentName:"Oceania",countryName:"Cook Islands",countryCode:"CK",mainCities:["Avarua"],rawOffsetInMinutes:-600,abbreviation:"CKT",rawFormat:"-10:00 Cook Islands Time - Avarua"},{name:"America/Adak",alternativeName:"Hawaii-Aleutian Time",group:["America/Adak","US/Aleutian","America/Atka"],continentCode:"NA",continentName:"North America",countryName:"United States",countryCode:"US",mainCities:["Adak"],rawOffsetInMinutes:-600,abbreviation:"HAST",rawFormat:"-10:00 Hawaii-Aleutian Time - Adak"},{name:"Pacific/Honolulu",alternativeName:"Hawaii-Aleutian Time",group:["Pacific/Honolulu","US/Hawaii","Pacific/Johnston"],continentCode:"NA",continentName:"North America",countryName:"United States",countryCode:"US",mainCities:["Honolulu","East Honolulu","Pearl City","Hilo"],rawOffsetInMinutes:-600,abbreviation:"HAST",rawFormat:"-10:00 Hawaii-Aleutian Time - Honolulu, East Honolulu, Pearl City, Hilo"},{name:"Pacific/Tahiti",alternativeName:"Tahiti Time",group:["Pacific/Tahiti"],continentCode:"OC",continentName:"Oceania",countryName:"French Polynesia",countryCode:"PF",mainCities:["Faaa","Papeete","Punaauia"],rawOffsetInMinutes:-600,abbreviation:"TAHT",rawFormat:"-10:00 Tahiti Time - Faaa, Papeete, Punaauia"},{name:"Pacific/Marquesas",alternativeName:"Marquesas Time",group:["Pacific/Marquesas"],continentCode:"OC",continentName:"Oceania",countryName:"French Polynesia",countryCode:"PF",mainCities:["Marquesas"],rawOffsetInMinutes:-570,abbreviation:"MART",rawFormat:"-09:30 Marquesas Time - Marquesas"},{name:"America/Anchorage",alternativeName:"Alaska Time",group:["America/Anchorage","America/Juneau","America/Metlakatla","America/Nome","America/Sitka","America/Yakutat","US/Alaska"],continentCode:"NA",continentName:"North America",countryName:"United States",countryCode:"US",mainCities:["Anchorage","Juneau","Fairbanks","Eagle River"],rawOffsetInMinutes:-540,abbreviation:"AKST",rawFormat:"-09:00 Alaska Time - Anchorage, Juneau, Fairbanks, Eagle River"},{name:"Pacific/Gambier",alternativeName:"Gambier Time",group:["Pacific/Gambier"],continentCode:"OC",continentName:"Oceania",countryName:"French Polynesia",countryCode:"PF",mainCities:["Gambier"],rawOffsetInMinutes:-540,abbreviation:"GAMT",rawFormat:"-09:00 Gambier Time - Gambier"},{name:"America/Los_Angeles",alternativeName:"Pacific Time",group:["America/Los_Angeles","US/Pacific"],continentCode:"NA",continentName:"North America",countryName:"United States",countryCode:"US",mainCities:["Los Angeles","San Diego","San Jose","San Francisco"],rawOffsetInMinutes:-480,abbreviation:"PST",rawFormat:"-08:00 Pacific Time - Los Angeles, San Diego, San Jose, San Francisco"},{name:"America/Tijuana",alternativeName:"Pacific Time",group:["America/Tijuana","Mexico/BajaNorte","America/Ensenada","America/Santa_Isabel"],continentCode:"NA",continentName:"North America",countryName:"Mexico",countryCode:"MX",mainCities:["Tijuana","Mexicali","Ensenada","Rosarito"],rawOffsetInMinutes:-480,abbreviation:"PST",rawFormat:"-08:00 Pacific Time - Tijuana, Mexicali, Ensenada, Rosarito"},{name:"America/Vancouver",alternativeName:"Pacific Time",group:["America/Vancouver","Canada/Pacific"],continentCode:"NA",continentName:"North America",countryName:"Canada",countryCode:"CA",mainCities:["Vancouver","Surrey","Okanagan","Victoria"],rawOffsetInMinutes:-480,abbreviation:"PST",rawFormat:"-08:00 Pacific Time - Vancouver, Surrey, Okanagan, Victoria"},{name:"Pacific/Pitcairn",alternativeName:"Pitcairn Time",group:["Pacific/Pitcairn"],continentCode:"OC",continentName:"Oceania",countryName:"Pitcairn",countryCode:"PN",mainCities:["Adamstown"],rawOffsetInMinutes:-480,abbreviation:"PST",rawFormat:"-08:00 Pitcairn Time - Adamstown"},{name:"America/Hermosillo",alternativeName:"Mexican Pacific Time",group:["America/Hermosillo","America/Mazatlan","Mexico/BajaSur"],continentCode:"NA",continentName:"North America",countryName:"Mexico",countryCode:"MX",mainCities:["Hermosillo","Culiac\xe1n","Ciudad Obreg\xf3n","Mazatl\xe1n"],rawOffsetInMinutes:-420,abbreviation:"GMT-7",rawFormat:"-07:00 Mexican Pacific Time - Hermosillo, Culiac\xe1n, Ciudad Obreg\xf3n, Mazatl\xe1n"},{name:"America/Edmonton",alternativeName:"Mountain Time",group:["America/Cambridge_Bay","America/Edmonton","America/Inuvik","America/Yellowknife","Canada/Mountain"],continentCode:"NA",continentName:"North America",countryName:"Canada",countryCode:"CA",mainCities:["Calgary","Edmonton","Red Deer","Sherwood Park"],rawOffsetInMinutes:-420,abbreviation:"MST",rawFormat:"-07:00 Mountain Time - Calgary, Edmonton, Red Deer, Sherwood Park"},{name:"America/Ciudad_Juarez",alternativeName:"Mountain Time",group:["America/Ciudad_Juarez"],continentCode:"NA",continentName:"North America",countryName:"Mexico",countryCode:"MX",mainCities:["Ciudad Ju\xe1rez"],rawOffsetInMinutes:-420,abbreviation:"MST",rawFormat:"-07:00 Mountain Time - Ciudad Ju\xe1rez"},{name:"America/Denver",alternativeName:"Mountain Time",group:["America/Boise","America/Denver","Navajo","US/Mountain","America/Shiprock"],continentCode:"NA",continentName:"North America",countryName:"United States",countryCode:"US",mainCities:["Denver","El Paso","Albuquerque","Colorado Springs"],rawOffsetInMinutes:-420,abbreviation:"MST",rawFormat:"-07:00 Mountain Time - Denver, El Paso, Albuquerque, Colorado Springs"},{name:"America/Phoenix",alternativeName:"Mountain Time",group:["America/Phoenix","US/Arizona","America/Creston"],continentCode:"NA",continentName:"North America",countryName:"United States",countryCode:"US",mainCities:["Phoenix","Tucson","Mesa","Chandler"],rawOffsetInMinutes:-420,abbreviation:"MST",rawFormat:"-07:00 Mountain Time - Phoenix, Tucson, Mesa, Chandler"},{name:"America/Whitehorse",alternativeName:"Yukon Time",group:["America/Creston","America/Dawson","America/Dawson_Creek","America/Fort_Nelson","America/Whitehorse","Canada/Yukon"],continentCode:"NA",continentName:"North America",countryName:"Canada",countryCode:"CA",mainCities:["Whitehorse","Fort St. John","Creston","Dawson"],rawOffsetInMinutes:-420,abbreviation:"YT",rawFormat:"-07:00 Yukon Time - Whitehorse, Fort St. John, Creston, Dawson"},{name:"America/Belize",alternativeName:"Central Time",group:["America/Belize"],continentCode:"NA",continentName:"North America",countryName:"Belize",countryCode:"BZ",mainCities:["Belize City","San Ignacio","San Pedro","Orange Walk"],rawOffsetInMinutes:-360,abbreviation:"CST",rawFormat:"-06:00 Central Time - Belize City, San Ignacio, San Pedro, Orange Walk"},{name:"America/Chicago",alternativeName:"Central Time",group:["America/Chicago","America/Indiana/Knox","America/Indiana/Tell_City","America/Menominee","America/North_Dakota/Beulah","America/North_Dakota/Center","America/North_Dakota/New_Salem","US/Central","US/Indiana-Starke","America/Knox_IN"],continentCode:"NA",continentName:"North America",countryName:"United States",countryCode:"US",mainCities:["Chicago","Houston","San Antonio","Dallas"],rawOffsetInMinutes:-360,abbreviation:"CST",rawFormat:"-06:00 Central Time - Chicago, Houston, San Antonio, Dallas"},{name:"America/Guatemala",alternativeName:"Central Time",group:["America/Guatemala"],continentCode:"NA",continentName:"North America",countryName:"Guatemala",countryCode:"GT",mainCities:["Guatemala City","Villa Nueva","Mixco","Cob\xe1n"],rawOffsetInMinutes:-360,abbreviation:"CST",rawFormat:"-06:00 Central Time - Guatemala City, Villa Nueva, Mixco, Cob\xe1n"},{name:"America/Managua",alternativeName:"Central Time",group:["America/Managua"],continentCode:"NA",continentName:"North America",countryName:"Nicaragua",countryCode:"NI",mainCities:["Managua","Le\xf3n","Masaya","Chinandega"],rawOffsetInMinutes:-360,abbreviation:"CST",rawFormat:"-06:00 Central Time - Managua, Le\xf3n, Masaya, Chinandega"},{name:"America/Mexico_City",alternativeName:"Central Time",group:["America/Bahia_Banderas","America/Chihuahua","America/Merida","America/Mexico_City","America/Monterrey","Mexico/General"],continentCode:"NA",continentName:"North America",countryName:"Mexico",countryCode:"MX",mainCities:["Mexico City","Iztapalapa","Le\xf3n de los Aldama","Puebla"],rawOffsetInMinutes:-360,abbreviation:"CST",rawFormat:"-06:00 Central Time - Mexico City, Iztapalapa, Le\xf3n de los Aldama, Puebla"},{name:"America/Matamoros",alternativeName:"Central Time",group:["America/Matamoros","America/Ojinaga"],continentCode:"NA",continentName:"North America",countryName:"Mexico",countryCode:"MX",mainCities:["Reynosa","Heroica Matamoros","Nuevo Laredo","Piedras Negras"],rawOffsetInMinutes:-360,abbreviation:"CST",rawFormat:"-06:00 Central Time - Reynosa, Heroica Matamoros, Nuevo Laredo, Piedras Negras"},{name:"America/Costa_Rica",alternativeName:"Central Time",group:["America/Costa_Rica"],continentCode:"NA",continentName:"North America",countryName:"Costa Rica",countryCode:"CR",mainCities:["San Jos\xe9","Lim\xf3n","San Francisco","Alajuela"],rawOffsetInMinutes:-360,abbreviation:"CST",rawFormat:"-06:00 Central Time - San Jos\xe9, Lim\xf3n, San Francisco, Alajuela"},{name:"America/El_Salvador",alternativeName:"Central Time",group:["America/El_Salvador"],continentCode:"NA",continentName:"North America",countryName:"El Salvador",countryCode:"SV",mainCities:["San Salvador","Soyapango","San Miguel","Santa Ana"],rawOffsetInMinutes:-360,abbreviation:"CST",rawFormat:"-06:00 Central Time - San Salvador, Soyapango, San Miguel, Santa Ana"},{name:"America/Regina",alternativeName:"Central Time",group:["America/Regina","America/Swift_Current","Canada/Saskatchewan"],continentCode:"NA",continentName:"North America",countryName:"Canada",countryCode:"CA",mainCities:["Saskatoon","Regina","Prince Albert","Moose Jaw"],rawOffsetInMinutes:-360,abbreviation:"CST",rawFormat:"-06:00 Central Time - Saskatoon, Regina, Prince Albert, Moose Jaw"},{name:"America/Tegucigalpa",alternativeName:"Central Time",group:["America/Tegucigalpa"],continentCode:"NA",continentName:"North America",countryName:"Honduras",countryCode:"HN",mainCities:["Tegucigalpa","San Pedro Sula","La Ceiba","Choloma"],rawOffsetInMinutes:-360,abbreviation:"CST",rawFormat:"-06:00 Central Time - Tegucigalpa, San Pedro Sula, La Ceiba, Choloma"},{name:"America/Winnipeg",alternativeName:"Central Time",group:["America/Rankin_Inlet","America/Resolute","America/Winnipeg","Canada/Central","America/Rainy_River"],continentCode:"NA",continentName:"North America",countryName:"Canada",countryCode:"CA",mainCities:["Winnipeg","Brandon","Steinbach","Kenora"],rawOffsetInMinutes:-360,abbreviation:"CST",rawFormat:"-06:00 Central Time - Winnipeg, Brandon, Steinbach, Kenora"},{name:"Pacific/Easter",alternativeName:"Easter Island Time",group:["Pacific/Easter","Chile/EasterIsland"],continentCode:"SA",continentName:"South America",countryName:"Chile",countryCode:"CL",mainCities:["Easter"],rawOffsetInMinutes:-360,abbreviation:"EAST",rawFormat:"-06:00 Easter Island Time - Easter"},{name:"Pacific/Galapagos",alternativeName:"Galapagos Time",group:["Pacific/Galapagos"],continentCode:"SA",continentName:"South America",countryName:"Ecuador",countryCode:"EC",mainCities:["Galapagos"],rawOffsetInMinutes:-360,abbreviation:"GALT",rawFormat:"-06:00 Galapagos Time - Galapagos"},{name:"America/Rio_Branco",alternativeName:"Acre Time",group:["America/Eirunepe","America/Rio_Branco","Brazil/Acre","America/Porto_Acre"],continentCode:"SA",continentName:"South America",countryName:"Brazil",countryCode:"BR",mainCities:["Rio Branco","Cruzeiro do Sul","Senador Guiomard","Sena Madureira"],rawOffsetInMinutes:-300,abbreviation:"ACT",rawFormat:"-05:00 Acre Time - Rio Branco, Cruzeiro do Sul, Senador Guiomard, Sena Madureira"},{name:"America/Bogota",alternativeName:"Colombia Time",group:["America/Bogota"],continentCode:"SA",continentName:"South America",countryName:"Colombia",countryCode:"CO",mainCities:["Bogot\xe1","Cali","Medell\xedn","Barranquilla"],rawOffsetInMinutes:-300,abbreviation:"COT",rawFormat:"-05:00 Colombia Time - Bogot\xe1, Cali, Medell\xedn, Barranquilla"},{name:"America/Havana",alternativeName:"Cuba Time",group:["America/Havana","Cuba"],continentCode:"NA",continentName:"North America",countryName:"Cuba",countryCode:"CU",mainCities:["Havana","Santiago de Cuba","Camag\xfcey","Holgu\xedn"],rawOffsetInMinutes:-300,abbreviation:"CST",rawFormat:"-05:00 Cuba Time - Havana, Santiago de Cuba, Camag\xfcey, Holgu\xedn"},{name:"America/Atikokan",alternativeName:"Eastern Time",group:["America/Atikokan"],continentCode:"NA",continentName:"North America",countryName:"Canada",countryCode:"CA",mainCities:["Atikokan"],rawOffsetInMinutes:-300,abbreviation:"EST",rawFormat:"-05:00 Eastern Time - Atikokan"},{name:"America/Cancun",alternativeName:"Eastern Time",group:["America/Cancun"],continentCode:"NA",continentName:"North America",countryName:"Mexico",countryCode:"MX",mainCities:["Canc\xfan","Chetumal","Playa del Carmen","Cozumel"],rawOffsetInMinutes:-300,abbreviation:"EST",rawFormat:"-05:00 Eastern Time - Canc\xfan, Chetumal, Playa del Carmen, Cozumel"},{name:"America/Grand_Turk",alternativeName:"Eastern Time",group:["America/Grand_Turk"],continentCode:"NA",continentName:"North America",countryName:"Turks and Caicos Islands",countryCode:"TC",mainCities:["Cockburn Town"],rawOffsetInMinutes:-300,abbreviation:"EST",rawFormat:"-05:00 Eastern Time - Cockburn Town"},{name:"America/Cayman",alternativeName:"Eastern Time",group:["America/Cayman"],continentCode:"NA",continentName:"North America",countryName:"Cayman Islands",countryCode:"KY",mainCities:["George Town","West Bay"],rawOffsetInMinutes:-300,abbreviation:"EST",rawFormat:"-05:00 Eastern Time - George Town, West Bay"},{name:"America/Jamaica",alternativeName:"Eastern Time",group:["America/Jamaica","Jamaica"],continentCode:"NA",continentName:"North America",countryName:"Jamaica",countryCode:"JM",mainCities:["Kingston","New Kingston","Spanish Town","Portmore"],rawOffsetInMinutes:-300,abbreviation:"EST",rawFormat:"-05:00 Eastern Time - Kingston, New Kingston, Spanish Town, Portmore"},{name:"America/Nassau",alternativeName:"Eastern Time",group:["America/Nassau"],continentCode:"NA",continentName:"North America",countryName:"Bahamas",countryCode:"BS",mainCities:["Nassau","Lucaya","Freeport","Killarney"],rawOffsetInMinutes:-300,abbreviation:"EST",rawFormat:"-05:00 Eastern Time - Nassau, Lucaya, Freeport, Killarney"},{name:"America/New_York",alternativeName:"Eastern Time",group:["America/Detroit","America/Indiana/Indianapolis","America/Indiana/Marengo","America/Indiana/Petersburg","America/Indiana/Vevay","America/Indiana/Vincennes","America/Indiana/Winamac","America/Kentucky/Louisville","America/Kentucky/Monticello","America/New_York","US/Michigan","US/East-Indiana","America/Indianapolis","America/Fort_Wayne","America/Louisville","US/Eastern"],continentCode:"NA",continentName:"North America",countryName:"United States",countryCode:"US",mainCities:["New York City","Brooklyn","Queens","Philadelphia"],rawOffsetInMinutes:-300,abbreviation:"EST",rawFormat:"-05:00 Eastern Time - New York City, Brooklyn, Queens, Philadelphia"},{name:"America/Panama",alternativeName:"Eastern Time",group:["America/Panama","America/Atikokan","America/Cayman","America/Coral_Harbour"],continentCode:"NA",continentName:"North America",countryName:"Panama",countryCode:"PA",mainCities:["Panam\xe1","San Miguelito","Juan D\xedaz","David"],rawOffsetInMinutes:-300,abbreviation:"EST",rawFormat:"-05:00 Eastern Time - Panam\xe1, San Miguelito, Juan D\xedaz, David"},{name:"America/Port-au-Prince",alternativeName:"Eastern Time",group:["America/Port-au-Prince"],continentCode:"NA",continentName:"North America",countryName:"Haiti",countryCode:"HT",mainCities:["Port-au-Prince","Carrefour","Delmas 73","Port-de-Paix"],rawOffsetInMinutes:-300,abbreviation:"EST",rawFormat:"-05:00 Eastern Time - Port-au-Prince, Carrefour, Delmas 73, Port-de-Paix"},{name:"America/Toronto",alternativeName:"Eastern Time",group:["America/Iqaluit","America/Toronto","America/Pangnirtung","Canada/Eastern","America/Nassau","America/Montreal","America/Nipigon","America/Thunder_Bay"],continentCode:"NA",continentName:"North America",countryName:"Canada",countryCode:"CA",mainCities:["Toronto","Montr\xe9al","Ottawa","Mississauga"],rawOffsetInMinutes:-300,abbreviation:"EST",rawFormat:"-05:00 Eastern Time - Toronto, Montr\xe9al, Ottawa, Mississauga"},{name:"America/Guayaquil",alternativeName:"Ecuador Time",group:["America/Guayaquil"],continentCode:"SA",continentName:"South America",countryName:"Ecuador",countryCode:"EC",mainCities:["Quito","Guayaquil","Cuenca","Santo Domingo de los Colorados"],rawOffsetInMinutes:-300,abbreviation:"ECT",rawFormat:"-05:00 Ecuador Time - Quito, Guayaquil, Cuenca, Santo Domingo de los Colorados"},{name:"America/Lima",alternativeName:"Peru Time",group:["America/Lima"],continentCode:"SA",continentName:"South America",countryName:"Peru",countryCode:"PE",mainCities:["Lima","Callao","Arequipa","Trujillo"],rawOffsetInMinutes:-300,abbreviation:"PET",rawFormat:"-05:00 Peru Time - Lima, Callao, Arequipa, Trujillo"},{name:"America/Manaus",alternativeName:"Amazon Time",group:["America/Boa_Vista","America/Campo_Grande","America/Cuiaba","America/Manaus","America/Porto_Velho","Brazil/West"],continentCode:"SA",continentName:"South America",countryName:"Brazil",countryCode:"BR",mainCities:["Manaus","Campo Grande","Cuiab\xe1","Porto Velho"],rawOffsetInMinutes:-240,abbreviation:"AMT",rawFormat:"-04:00 Amazon Time - Manaus, Campo Grande, Cuiab\xe1, Porto Velho"},{name:"America/St_Kitts",alternativeName:"Atlantic Time",group:["America/St_Kitts"],continentCode:"NA",continentName:"North America",countryName:"Saint Kitts and Nevis",countryCode:"KN",mainCities:["Basseterre"],rawOffsetInMinutes:-240,abbreviation:"AST",rawFormat:"-04:00 Atlantic Time - Basseterre"},{name:"America/Blanc-Sablon",alternativeName:"Atlantic Time",group:["America/Blanc-Sablon"],continentCode:"NA",continentName:"North America",countryName:"Canada",countryCode:"CA",mainCities:["Blanc-Sablon"],rawOffsetInMinutes:-240,abbreviation:"AST",rawFormat:"-04:00 Atlantic Time - Blanc-Sablon"},{name:"America/Montserrat",alternativeName:"Atlantic Time",group:["America/Montserrat"],continentCode:"NA",continentName:"North America",countryName:"Montserrat",countryCode:"MS",mainCities:["Brades","Plymouth"],rawOffsetInMinutes:-240,abbreviation:"AST",rawFormat:"-04:00 Atlantic Time - Brades, Plymouth"},{name:"America/Barbados",alternativeName:"Atlantic Time",group:["America/Barbados"],continentCode:"NA",continentName:"North America",countryName:"Barbados",countryCode:"BB",mainCities:["Bridgetown"],rawOffsetInMinutes:-240,abbreviation:"AST",rawFormat:"-04:00 Atlantic Time - Bridgetown"},{name:"America/Port_of_Spain",alternativeName:"Atlantic Time",group:["America/Port_of_Spain"],continentCode:"NA",continentName:"North America",countryName:"Trinidad and Tobago",countryCode:"TT",mainCities:["Chaguanas","Mon Repos","San Fernando","Port of Spain"],rawOffsetInMinutes:-240,abbreviation:"AST",rawFormat:"-04:00 Atlantic Time - Chaguanas, Mon Repos, San Fernando, Port of Spain"},{name:"America/Martinique",alternativeName:"Atlantic Time",group:["America/Martinique"],continentCode:"NA",continentName:"North America",countryName:"Martinique",countryCode:"MQ",mainCities:["Fort-de-France","Le Lamentin","Le Robert","Sainte-Marie"],rawOffsetInMinutes:-240,abbreviation:"AST",rawFormat:"-04:00 Atlantic Time - Fort-de-France, Le Lamentin, Le Robert, Sainte-Marie"},{name:"America/St_Lucia",alternativeName:"Atlantic Time",group:["America/St_Lucia"],continentCode:"NA",continentName:"North America",countryName:"Saint Lucia",countryCode:"LC",mainCities:["Gros Islet","Castries"],rawOffsetInMinutes:-240,abbreviation:"AST",rawFormat:"-04:00 Atlantic Time - Gros Islet, Castries"},{name:"America/St_Barthelemy",alternativeName:"Atlantic Time",group:["America/St_Barthelemy"],continentCode:"NA",continentName:"North America",countryName:"Saint Barthelemy",countryCode:"BL",mainCities:["Gustavia"],rawOffsetInMinutes:-240,abbreviation:"AST",rawFormat:"-04:00 Atlantic Time - Gustavia"},{name:"America/Halifax",alternativeName:"Atlantic Time",group:["America/Glace_Bay","America/Goose_Bay","America/Halifax","America/Moncton","Canada/Atlantic"],continentCode:"NA",continentName:"North America",countryName:"Canada",countryCode:"CA",mainCities:["Halifax","Moncton","Sydney","Dartmouth"],rawOffsetInMinutes:-240,abbreviation:"AST",rawFormat:"-04:00 Atlantic Time - Halifax, Moncton, Sydney, Dartmouth"},{name:"Atlantic/Bermuda",alternativeName:"Atlantic Time",group:["Atlantic/Bermuda"],continentCode:"NA",continentName:"North America",countryName:"Bermuda",countryCode:"BM",mainCities:["Hamilton"],rawOffsetInMinutes:-240,abbreviation:"AST",rawFormat:"-04:00 Atlantic Time - Hamilton"},{name:"America/St_Vincent",alternativeName:"Atlantic Time",group:["America/St_Vincent"],continentCode:"NA",continentName:"North America",countryName:"Saint Vincent and the Grenadines",countryCode:"VC",mainCities:["Kingstown"],rawOffsetInMinutes:-240,abbreviation:"AST",rawFormat:"-04:00 Atlantic Time - Kingstown"},{name:"America/Kralendijk",alternativeName:"Atlantic Time",group:["America/Kralendijk"],continentCode:"NA",continentName:"North America",countryName:"Bonaire, Saint Eustatius and Saba ",countryCode:"BQ",mainCities:["Kralendijk"],rawOffsetInMinutes:-240,abbreviation:"AST",rawFormat:"-04:00 Atlantic Time - Kralendijk"},{name:"America/Guadeloupe",alternativeName:"Atlantic Time",group:["America/Guadeloupe"],continentCode:"NA",continentName:"North America",countryName:"Guadeloupe",countryCode:"GP",mainCities:["Les Abymes","Baie-Mahault","Le Gosier","Petit-Bourg"],rawOffsetInMinutes:-240,abbreviation:"AST",rawFormat:"-04:00 Atlantic Time - Les Abymes, Baie-Mahault, Le Gosier, Petit-Bourg"},{name:"America/Marigot",alternativeName:"Atlantic Time",group:["America/Marigot"],continentCode:"NA",continentName:"North America",countryName:"Saint Martin",countryCode:"MF",mainCities:["Marigot"],rawOffsetInMinutes:-240,abbreviation:"AST",rawFormat:"-04:00 Atlantic Time - Marigot"},{name:"America/Aruba",alternativeName:"Atlantic Time",group:["America/Aruba"],continentCode:"NA",continentName:"North America",countryName:"Aruba",countryCode:"AW",mainCities:["Oranjestad","Noord","Tanki Leendert","San Nicolas"],rawOffsetInMinutes:-240,abbreviation:"AST",rawFormat:"-04:00 Atlantic Time - Oranjestad, Noord, Tanki Leendert, San Nicolas"},{name:"America/Lower_Princes",alternativeName:"Atlantic Time",group:["America/Lower_Princes"],continentCode:"NA",continentName:"North America",countryName:"Sint Maarten",countryCode:"SX",mainCities:["Philipsburg"],rawOffsetInMinutes:-240,abbreviation:"AST",rawFormat:"-04:00 Atlantic Time - Philipsburg"},{name:"America/Tortola",alternativeName:"Atlantic Time",group:["America/Tortola"],continentCode:"NA",continentName:"North America",countryName:"British Virgin Islands",countryCode:"VG",mainCities:["Road Town"],rawOffsetInMinutes:-240,abbreviation:"AST",rawFormat:"-04:00 Atlantic Time - Road Town"},{name:"America/Dominica",alternativeName:"Atlantic Time",group:["America/Dominica"],continentCode:"NA",continentName:"North America",countryName:"Dominica",countryCode:"DM",mainCities:["Roseau"],rawOffsetInMinutes:-240,abbreviation:"AST",rawFormat:"-04:00 Atlantic Time - Roseau"},{name:"America/St_Thomas",alternativeName:"Atlantic Time",group:["America/St_Thomas"],continentCode:"NA",continentName:"North America",countryName:"U.S. Virgin Islands",countryCode:"VI",mainCities:["Saint Croix","Charlotte Amalie"],rawOffsetInMinutes:-240,abbreviation:"AST",rawFormat:"-04:00 Atlantic Time - Saint Croix, Charlotte Amalie"},{name:"America/Grenada",alternativeName:"Atlantic Time",group:["America/Grenada"],continentCode:"NA",continentName:"North America",countryName:"Grenada",countryCode:"GD",mainCities:["Saint George's"],rawOffsetInMinutes:-240,abbreviation:"AST",rawFormat:"-04:00 Atlantic Time - Saint George's"},{name:"America/Antigua",alternativeName:"Atlantic Time",group:["America/Antigua"],continentCode:"NA",continentName:"North America",countryName:"Antigua and Barbuda",countryCode:"AG",mainCities:["Saint John’s"],rawOffsetInMinutes:-240,abbreviation:"AST",rawFormat:"-04:00 Atlantic Time - Saint John’s"},{name:"America/Puerto_Rico",alternativeName:"Atlantic Time",group:["America/Puerto_Rico","America/Virgin","America/Anguilla","America/Antigua","America/Aruba","America/Blanc-Sablon","America/Curacao","America/Dominica","America/Grenada","America/Guadeloupe","America/Kralendijk","America/Lower_Princes","America/Marigot","America/Montserrat","America/Port_of_Spain","America/St_Barthelemy","America/St_Kitts","America/St_Lucia","America/St_Thomas","America/St_Vincent","America/Tortola"],continentCode:"NA",continentName:"North America",countryName:"Puerto Rico",countryCode:"PR",mainCities:["San Juan","Bayam\xf3n","Carolina","Ponce"],rawOffsetInMinutes:-240,abbreviation:"AST",rawFormat:"-04:00 Atlantic Time - San Juan, Bayam\xf3n, Carolina, Ponce"},{name:"America/Santo_Domingo",alternativeName:"Atlantic Time",group:["America/Santo_Domingo"],continentCode:"NA",continentName:"North America",countryName:"Dominican Republic",countryCode:"DO",mainCities:["Santo Domingo","Santiago de los Caballeros","Santo Domingo Oeste","Santo Domingo Este"],rawOffsetInMinutes:-240,abbreviation:"AST",rawFormat:"-04:00 Atlantic Time - Santo Domingo, Santiago de los Caballeros, Santo Domingo Oeste, Santo Domingo Este"},{name:"America/Anguilla",alternativeName:"Atlantic Time",group:["America/Anguilla"],continentCode:"NA",continentName:"North America",countryName:"Anguilla",countryCode:"AI",mainCities:["The Valley"],rawOffsetInMinutes:-240,abbreviation:"AST",rawFormat:"-04:00 Atlantic Time - The Valley"},{name:"America/Thule",alternativeName:"Atlantic Time",group:["America/Thule"],continentCode:"NA",continentName:"North America",countryName:"Greenland",countryCode:"GL",mainCities:["Thule"],rawOffsetInMinutes:-240,abbreviation:"AST",rawFormat:"-04:00 Atlantic Time - Thule"},{name:"America/Curacao",alternativeName:"Atlantic Time",group:["America/Curacao"],continentCode:"NA",continentName:"North America",countryName:"Curacao",countryCode:"CW",mainCities:["Willemstad"],rawOffsetInMinutes:-240,abbreviation:"AST",rawFormat:"-04:00 Atlantic Time - Willemstad"},{name:"America/La_Paz",alternativeName:"Bolivia Time",group:["America/La_Paz"],continentCode:"SA",continentName:"South America",countryName:"Bolivia",countryCode:"BO",mainCities:["La Paz","Santa Cruz de la Sierra","Cochabamba","Sucre"],rawOffsetInMinutes:-240,abbreviation:"BOT",rawFormat:"-04:00 Bolivia Time - La Paz, Santa Cruz de la Sierra, Cochabamba, Sucre"},{name:"America/Santiago",alternativeName:"Chile Time",group:["America/Santiago","Chile/Continental"],continentCode:"SA",continentName:"South America",countryName:"Chile",countryCode:"CL",mainCities:["Santiago","Puente Alto","Antofagasta","Vi\xf1a del Mar"],rawOffsetInMinutes:-240,abbreviation:"CLT",rawFormat:"-04:00 Chile Time - Santiago, Puente Alto, Antofagasta, Vi\xf1a del Mar"},{name:"America/Guyana",alternativeName:"Guyana Time",group:["America/Guyana"],continentCode:"SA",continentName:"South America",countryName:"Guyana",countryCode:"GY",mainCities:["Georgetown","Linden","New Amsterdam"],rawOffsetInMinutes:-240,abbreviation:"GYT",rawFormat:"-04:00 Guyana Time - Georgetown, Linden, New Amsterdam"},{name:"America/Asuncion",alternativeName:"Paraguay Time",group:["America/Asuncion"],continentCode:"SA",continentName:"South America",countryName:"Paraguay",countryCode:"PY",mainCities:["Asunci\xf3n","Ciudad del Este","San Lorenzo","Capiat\xe1"],rawOffsetInMinutes:-240,abbreviation:"PYT",rawFormat:"-04:00 Paraguay Time - Asunci\xf3n, Ciudad del Este, San Lorenzo, Capiat\xe1"},{name:"America/Caracas",alternativeName:"Venezuela Time",group:["America/Caracas"],continentCode:"SA",continentName:"South America",countryName:"Venezuela",countryCode:"VE",mainCities:["Caracas","Maracaibo","Maracay","Valencia"],rawOffsetInMinutes:-240,abbreviation:"VET",rawFormat:"-04:00 Venezuela Time - Caracas, Maracaibo, Maracay, Valencia"},{name:"America/St_Johns",alternativeName:"Newfoundland Time",group:["America/St_Johns","Canada/Newfoundland"],continentCode:"NA",continentName:"North America",countryName:"Canada",countryCode:"CA",mainCities:["St. John's","Mount Pearl","Corner Brook","Conception Bay South"],rawOffsetInMinutes:-210,abbreviation:"NST",rawFormat:"-03:30 Newfoundland Time - St. John's, Mount Pearl, Corner Brook, Conception Bay South"},{name:"America/Argentina/Buenos_Aires",alternativeName:"Argentina Time",group:["America/Argentina/Buenos_Aires","America/Argentina/Catamarca","America/Argentina/Cordoba","America/Argentina/Jujuy","America/Argentina/La_Rioja","America/Argentina/Mendoza","America/Argentina/Rio_Gallegos","America/Argentina/Salta","America/Argentina/San_Juan","America/Argentina/San_Luis","America/Argentina/Tucuman","America/Argentina/Ushuaia","America/Buenos_Aires","America/Catamarca","America/Argentina/ComodRivadavia","America/Cordoba","America/Rosario","America/Jujuy","America/Mendoza"],continentCode:"SA",continentName:"South America",countryName:"Argentina",countryCode:"AR",mainCities:["Buenos Aires","C\xf3rdoba","Rosario","Mar del Plata"],rawOffsetInMinutes:-180,abbreviation:"ART",rawFormat:"-03:00 Argentina Time - Buenos Aires, C\xf3rdoba, Rosario, Mar del Plata"},{name:"America/Sao_Paulo",alternativeName:"Brasilia Time",group:["America/Araguaina","America/Bahia","America/Belem","America/Fortaleza","America/Maceio","America/Recife","America/Santarem","America/Sao_Paulo","Brazil/East"],continentCode:"SA",continentName:"South America",countryName:"Brazil",countryCode:"BR",mainCities:["S\xe3o Paulo","Rio de Janeiro","Belo Horizonte","Salvador"],rawOffsetInMinutes:-180,abbreviation:"BRT",rawFormat:"-03:00 Brasilia Time - S\xe3o Paulo, Rio de Janeiro, Belo Horizonte, Salvador"},{name:"Antarctica/Palmer",alternativeName:"Chile Time",group:["Antarctica/Palmer","Antarctica/Rothera"],continentCode:"AN",continentName:"Antarctica",countryName:"Antarctica",countryCode:"AQ",mainCities:["Palmer","Rothera"],rawOffsetInMinutes:-180,abbreviation:"CLT",rawFormat:"-03:00 Chile Time - Palmer, Rothera"},{name:"America/Punta_Arenas",alternativeName:"Chile Time",group:["America/Punta_Arenas"],continentCode:"SA",continentName:"South America",countryName:"Chile",countryCode:"CL",mainCities:["Punta Arenas","Puerto Natales"],rawOffsetInMinutes:-180,abbreviation:"CLT",rawFormat:"-03:00 Chile Time - Punta Arenas, Puerto Natales"},{name:"Atlantic/Stanley",alternativeName:"Falkland Islands Time",group:["Atlantic/Stanley"],continentCode:"SA",continentName:"South America",countryName:"Falkland Islands",countryCode:"FK",mainCities:["Stanley"],rawOffsetInMinutes:-180,abbreviation:"FKST",rawFormat:"-03:00 Falkland Islands Time - Stanley"},{name:"America/Cayenne",alternativeName:"French Guiana Time",group:["America/Cayenne"],continentCode:"SA",continentName:"South America",countryName:"French Guiana",countryCode:"GF",mainCities:["Cayenne","Matoury","Saint-Laurent-du-Maroni","Kourou"],rawOffsetInMinutes:-180,abbreviation:"GFT",rawFormat:"-03:00 French Guiana Time - Cayenne, Matoury, Saint-Laurent-du-Maroni, Kourou"},{name:"America/Miquelon",alternativeName:"St. Pierre & Miquelon Time",group:["America/Miquelon"],continentCode:"NA",continentName:"North America",countryName:"Saint Pierre and Miquelon",countryCode:"PM",mainCities:["Saint-Pierre"],rawOffsetInMinutes:-180,abbreviation:"PM",rawFormat:"-03:00 St. Pierre & Miquelon Time - Saint-Pierre"},{name:"America/Paramaribo",alternativeName:"Suriname Time",group:["America/Paramaribo"],continentCode:"SA",continentName:"South America",countryName:"Suriname",countryCode:"SR",mainCities:["Paramaribo","Lelydorp"],rawOffsetInMinutes:-180,abbreviation:"SRT",rawFormat:"-03:00 Suriname Time - Paramaribo, Lelydorp"},{name:"America/Montevideo",alternativeName:"Uruguay Time",group:["America/Montevideo"],continentCode:"SA",continentName:"South America",countryName:"Uruguay",countryCode:"UY",mainCities:["Montevideo","Salto","Paysand\xfa","Las Piedras"],rawOffsetInMinutes:-180,abbreviation:"UYT",rawFormat:"-03:00 Uruguay Time - Montevideo, Salto, Paysand\xfa, Las Piedras"},{name:"America/Scoresbysund",alternativeName:"East Greenland Time",group:["America/Scoresbysund"],continentCode:"NA",continentName:"North America",countryName:"Greenland",countryCode:"GL",mainCities:["Scoresbysund"],rawOffsetInMinutes:-120,abbreviation:"EGT",rawFormat:"-02:00 East Greenland Time - Scoresbysund"},{name:"America/Noronha",alternativeName:"Fernando de Noronha Time",group:["America/Noronha","Brazil/DeNoronha"],continentCode:"SA",continentName:"South America",countryName:"Brazil",countryCode:"BR",mainCities:["Noronha"],rawOffsetInMinutes:-120,abbreviation:"FNT",rawFormat:"-02:00 Fernando de Noronha Time - Noronha"},{name:"Atlantic/South_Georgia",alternativeName:"South Georgia Time",group:["Atlantic/South_Georgia"],continentCode:"AN",continentName:"Antarctica",countryName:"South Georgia and the South Sandwich Islands",countryCode:"GS",mainCities:["Grytviken"],rawOffsetInMinutes:-120,abbreviation:"GST",rawFormat:"-02:00 South Georgia Time - Grytviken"},{name:"America/Nuuk",alternativeName:"West Greenland Time",group:["America/Nuuk","America/Godthab"],continentCode:"NA",continentName:"North America",countryName:"Greenland",countryCode:"GL",mainCities:["Nuuk"],rawOffsetInMinutes:-120,abbreviation:"WGT",rawFormat:"-02:00 West Greenland Time - Nuuk"},{name:"Atlantic/Azores",alternativeName:"Azores Time",group:["Atlantic/Azores"],continentCode:"EU",continentName:"Europe",countryName:"Portugal",countryCode:"PT",mainCities:["Ponta Delgada"],rawOffsetInMinutes:-60,abbreviation:"AZOT",rawFormat:"-01:00 Azores Time - Ponta Delgada"},{name:"Atlantic/Cape_Verde",alternativeName:"Cape Verde Time",group:["Atlantic/Cape_Verde"],continentCode:"AF",continentName:"Africa",countryName:"Cabo Verde",countryCode:"CV",mainCities:["Praia","Mindelo","Espargos","Assomada"],rawOffsetInMinutes:-60,abbreviation:"CVT",rawFormat:"-01:00 Cape Verde Time - Praia, Mindelo, Espargos, Assomada"},{name:"Africa/Abidjan",alternativeName:"Greenwich Mean Time",group:["Africa/Abidjan","Iceland","Africa/Accra","Africa/Bamako","Africa/Banjul","Africa/Conakry","Africa/Dakar","Africa/Freetown","Africa/Lome","Africa/Nouakchott","Africa/Ouagadougou","Atlantic/Reykjavik","Atlantic/St_Helena","Africa/Timbuktu"],continentCode:"AF",continentName:"Africa",countryName:"Ivory Coast",countryCode:"CI",mainCities:["Abidjan","Abobo","Bouak\xe9","Korhogo"],rawOffsetInMinutes:0,abbreviation:"GMT",rawFormat:"+00:00 Greenwich Mean Time - Abidjan, Abobo, Bouak\xe9, Korhogo"},{name:"Africa/Bamako",alternativeName:"Greenwich Mean Time",group:["Africa/Bamako"],continentCode:"AF",continentName:"Africa",countryName:"Mali",countryCode:"ML",mainCities:["Bamako","Sikasso","Koutiala","S\xe9gou"],rawOffsetInMinutes:0,abbreviation:"GMT",rawFormat:"+00:00 Greenwich Mean Time - Bamako, Sikasso, Koutiala, S\xe9gou"},{name:"Africa/Bissau",alternativeName:"Greenwich Mean Time",group:["Africa/Bissau"],continentCode:"AF",continentName:"Africa",countryName:"Guinea-Bissau",countryCode:"GW",mainCities:["Bissau","Gab\xfa","Bafat\xe1"],rawOffsetInMinutes:0,abbreviation:"GMT",rawFormat:"+00:00 Greenwich Mean Time - Bissau, Gab\xfa, Bafat\xe1"},{name:"Africa/Conakry",alternativeName:"Greenwich Mean Time",group:["Africa/Conakry"],continentCode:"AF",continentName:"Africa",countryName:"Guinea",countryCode:"GN",mainCities:["Conakry","Camayenne","Nz\xe9r\xe9kor\xe9","Kankan"],rawOffsetInMinutes:0,abbreviation:"GMT",rawFormat:"+00:00 Greenwich Mean Time - Conakry, Camayenne, Nz\xe9r\xe9kor\xe9, Kankan"},{name:"Africa/Dakar",alternativeName:"Greenwich Mean Time",group:["Africa/Dakar"],continentCode:"AF",continentName:"Africa",countryName:"Senegal",countryCode:"SN",mainCities:["Dakar","Pikine","Touba","Thi\xe8s"],rawOffsetInMinutes:0,abbreviation:"GMT",rawFormat:"+00:00 Greenwich Mean Time - Dakar, Pikine, Touba, Thi\xe8s"},{name:"America/Danmarkshavn",alternativeName:"Greenwich Mean Time",group:["America/Danmarkshavn"],continentCode:"NA",continentName:"North America",countryName:"Greenland",countryCode:"GL",mainCities:["Danmarkshavn"],rawOffsetInMinutes:0,abbreviation:"GMT",rawFormat:"+00:00 Greenwich Mean Time - Danmarkshavn"},{name:"Europe/Isle_of_Man",alternativeName:"Greenwich Mean Time",group:["Europe/Isle_of_Man"],continentCode:"EU",continentName:"Europe",countryName:"Isle of Man",countryCode:"IM",mainCities:["Douglas"],rawOffsetInMinutes:0,abbreviation:"GMT",rawFormat:"+00:00 Greenwich Mean Time - Douglas"},{name:"Europe/Dublin",alternativeName:"Greenwich Mean Time",group:["Europe/Dublin","Eire"],continentCode:"EU",continentName:"Europe",countryName:"Ireland",countryCode:"IE",mainCities:["Dublin","South Dublin","Cork","Limerick"],rawOffsetInMinutes:0,abbreviation:"GMT",rawFormat:"+00:00 Greenwich Mean Time - Dublin, South Dublin, Cork, Limerick"},{name:"Africa/Freetown",alternativeName:"Greenwich Mean Time",group:["Africa/Freetown"],continentCode:"AF",continentName:"Africa",countryName:"Sierra Leone",countryCode:"SL",mainCities:["Freetown","Bo","Kenema","Koidu"],rawOffsetInMinutes:0,abbreviation:"GMT",rawFormat:"+00:00 Greenwich Mean Time - Freetown, Bo, Kenema, Koidu"},{name:"Atlantic/St_Helena",alternativeName:"Greenwich Mean Time",group:["Atlantic/St_Helena"],continentCode:"AF",continentName:"Africa",countryName:"Saint Helena",countryCode:"SH",mainCities:["Jamestown"],rawOffsetInMinutes:0,abbreviation:"GMT",rawFormat:"+00:00 Greenwich Mean Time - Jamestown"},{name:"Africa/Accra",alternativeName:"Greenwich Mean Time",group:["Africa/Accra"],continentCode:"AF",continentName:"Africa",countryName:"Ghana",countryCode:"GH",mainCities:["Kumasi","Accra","Tamale","Takoradi"],rawOffsetInMinutes:0,abbreviation:"GMT",rawFormat:"+00:00 Greenwich Mean Time - Kumasi, Accra, Tamale, Takoradi"},{name:"Africa/Lome",alternativeName:"Greenwich Mean Time",group:["Africa/Lome"],continentCode:"AF",continentName:"Africa",countryName:"Togo",countryCode:"TG",mainCities:["Lom\xe9","Sokod\xe9","Kara","Atakpam\xe9"],rawOffsetInMinutes:0,abbreviation:"GMT",rawFormat:"+00:00 Greenwich Mean Time - Lom\xe9, Sokod\xe9, Kara, Atakpam\xe9"},{name:"Europe/London",alternativeName:"Greenwich Mean Time",group:["Europe/London","GB","GB-Eire","Europe/Guernsey","Europe/Isle_of_Man","Europe/Jersey","Europe/Belfast"],continentCode:"EU",continentName:"Europe",countryName:"United Kingdom",countryCode:"GB",mainCities:["London","Birmingham","Liverpool","Glasgow"],rawOffsetInMinutes:0,abbreviation:"GMT",rawFormat:"+00:00 Greenwich Mean Time - London, Birmingham, Liverpool, Glasgow"},{name:"Africa/Monrovia",alternativeName:"Greenwich Mean Time",group:["Africa/Monrovia"],continentCode:"AF",continentName:"Africa",countryName:"Liberia",countryCode:"LR",mainCities:["Monrovia","Gbarnga","Buchanan","Ganta"],rawOffsetInMinutes:0,abbreviation:"GMT",rawFormat:"+00:00 Greenwich Mean Time - Monrovia, Gbarnga, Buchanan, Ganta"},{name:"Africa/Nouakchott",alternativeName:"Greenwich Mean Time",group:["Africa/Nouakchott"],continentCode:"AF",continentName:"Africa",countryName:"Mauritania",countryCode:"MR",mainCities:["Nouakchott","Nouadhibou","Kiffa","Dar Naim"],rawOffsetInMinutes:0,abbreviation:"GMT",rawFormat:"+00:00 Greenwich Mean Time - Nouakchott, Nouadhibou, Kiffa, Dar Naim"},{name:"Africa/Ouagadougou",alternativeName:"Greenwich Mean Time",group:["Africa/Ouagadougou"],continentCode:"AF",continentName:"Africa",countryName:"Burkina Faso",countryCode:"BF",mainCities:["Ouagadougou","Bobo-Dioulasso","Koudougou","Saaba"],rawOffsetInMinutes:0,abbreviation:"GMT",rawFormat:"+00:00 Greenwich Mean Time - Ouagadougou, Bobo-Dioulasso, Koudougou, Saaba"},{name:"Atlantic/Reykjavik",alternativeName:"Greenwich Mean Time",group:["Atlantic/Reykjavik","Iceland"],continentCode:"EU",continentName:"Europe",countryName:"Iceland",countryCode:"IS",mainCities:["Reykjav\xedk","K\xf3pavogur","Hafnarfj\xf6r\xf0ur","Reykjanesb\xe6r"],rawOffsetInMinutes:0,abbreviation:"GMT",rawFormat:"+00:00 Greenwich Mean Time - Reykjav\xedk, K\xf3pavogur, Hafnarfj\xf6r\xf0ur, Reykjanesb\xe6r"},{name:"Europe/Jersey",alternativeName:"Greenwich Mean Time",group:["Europe/Jersey"],continentCode:"EU",continentName:"Europe",countryName:"Jersey",countryCode:"JE",mainCities:["Saint Helier"],rawOffsetInMinutes:0,abbreviation:"GMT",rawFormat:"+00:00 Greenwich Mean Time - Saint Helier"},{name:"Europe/Guernsey",alternativeName:"Greenwich Mean Time",group:["Europe/Guernsey"],continentCode:"EU",continentName:"Europe",countryName:"Guernsey",countryCode:"GG",mainCities:["Saint Peter Port"],rawOffsetInMinutes:0,abbreviation:"GMT",rawFormat:"+00:00 Greenwich Mean Time - Saint Peter Port"},{name:"Africa/Banjul",alternativeName:"Greenwich Mean Time",group:["Africa/Banjul"],continentCode:"AF",continentName:"Africa",countryName:"Gambia",countryCode:"GM",mainCities:["Serekunda","Brikama","Bununka Kunda","Sukuta"],rawOffsetInMinutes:0,abbreviation:"GMT",rawFormat:"+00:00 Greenwich Mean Time - Serekunda, Brikama, Bununka Kunda, Sukuta"},{name:"Africa/Sao_Tome",alternativeName:"Greenwich Mean Time",group:["Africa/Sao_Tome"],continentCode:"AF",continentName:"Africa",countryName:"Sao Tome and Principe",countryCode:"ST",mainCities:["S\xe3o Tom\xe9"],rawOffsetInMinutes:0,abbreviation:"GMT",rawFormat:"+00:00 Greenwich Mean Time - S\xe3o Tom\xe9"},{name:"Antarctica/Troll",alternativeName:"Greenwich Mean Time",group:["Antarctica/Troll"],continentCode:"AN",continentName:"Antarctica",countryName:"Antarctica",countryCode:"AQ",mainCities:["Troll"],rawOffsetInMinutes:0,abbreviation:"GMT",rawFormat:"+00:00 Greenwich Mean Time - Troll"},{name:"Africa/Casablanca",alternativeName:"Western European Time",group:["Africa/Casablanca"],continentCode:"AF",continentName:"Africa",countryName:"Morocco",countryCode:"MA",mainCities:["Casablanca","Rabat","Fes","Tangier"],rawOffsetInMinutes:0,abbreviation:"WET",rawFormat:"+00:00 Western European Time - Casablanca, Rabat, Fes, Tangier"},{name:"Africa/El_Aaiun",alternativeName:"Western European Time",group:["Africa/El_Aaiun"],continentCode:"AF",continentName:"Africa",countryName:"Western Sahara",countryCode:"EH",mainCities:["Laayoune","Dakhla","Boujdour"],rawOffsetInMinutes:0,abbreviation:"WET",rawFormat:"+00:00 Western European Time - Laayoune, Dakhla, Boujdour"},{name:"Atlantic/Canary",alternativeName:"Western European Time",group:["Atlantic/Canary"],continentCode:"EU",continentName:"Europe",countryName:"Spain",countryCode:"ES",mainCities:["Las Palmas de Gran Canaria","Santa Cruz de Tenerife","La Laguna","Telde"],rawOffsetInMinutes:0,abbreviation:"WET",rawFormat:"+00:00 Western European Time - Las Palmas de Gran Canaria, Santa Cruz de Tenerife, La Laguna, Telde"},{name:"Europe/Lisbon",alternativeName:"Western European Time",group:["Atlantic/Madeira","Europe/Lisbon","Portugal"],continentCode:"EU",continentName:"Europe",countryName:"Portugal",countryCode:"PT",mainCities:["Lisbon","Porto","Amadora","Braga"],rawOffsetInMinutes:0,abbreviation:"WET",rawFormat:"+00:00 Western European Time - Lisbon, Porto, Amadora, Braga"},{name:"Atlantic/Faroe",alternativeName:"Western European Time",group:["Atlantic/Faroe","Atlantic/Faeroe"],continentCode:"EU",continentName:"Europe",countryName:"Faroe Islands",countryCode:"FO",mainCities:["T\xf3rshavn"],rawOffsetInMinutes:0,abbreviation:"WET",rawFormat:"+00:00 Western European Time - T\xf3rshavn"},{name:"Africa/Windhoek",alternativeName:"Central Africa Time",group:["Africa/Windhoek"],continentCode:"AF",continentName:"Africa",countryName:"Namibia",countryCode:"NA",mainCities:["Windhoek","Rundu","Walvis Bay","Swakopmund"],rawOffsetInMinutes:60,abbreviation:"CAT",rawFormat:"+01:00 Central Africa Time - Windhoek, Rundu, Walvis Bay, Swakopmund"},{name:"Africa/Algiers",alternativeName:"Central European Time",group:["Africa/Algiers"],continentCode:"AF",continentName:"Africa",countryName:"Algeria",countryCode:"DZ",mainCities:["Algiers","Oran","Constantine","Annaba"],rawOffsetInMinutes:60,abbreviation:"CET",rawFormat:"+01:00 Central European Time - Algiers, Oran, Constantine, Annaba"},{name:"Europe/Amsterdam",alternativeName:"Central European Time",group:["Europe/Amsterdam"],continentCode:"EU",continentName:"Europe",countryName:"The Netherlands",countryCode:"NL",mainCities:["Amsterdam","Rotterdam","The Hague","Utrecht"],rawOffsetInMinutes:60,abbreviation:"CET",rawFormat:"+01:00 Central European Time - Amsterdam, Rotterdam, The Hague, Utrecht"},{name:"Europe/Andorra",alternativeName:"Central European Time",group:["Europe/Andorra"],continentCode:"EU",continentName:"Europe",countryName:"Andorra",countryCode:"AD",mainCities:["Andorra la Vella","les Escaldes"],rawOffsetInMinutes:60,abbreviation:"CET",rawFormat:"+01:00 Central European Time - Andorra la Vella, les Escaldes"},{name:"Europe/Belgrade",alternativeName:"Central European Time",group:["Europe/Belgrade","Europe/Ljubljana","Europe/Podgorica","Europe/Sarajevo","Europe/Skopje","Europe/Zagreb"],continentCode:"EU",continentName:"Europe",countryName:"Serbia",countryCode:"RS",mainCities:["Belgrade","Niš","Novi Sad","Zemun"],rawOffsetInMinutes:60,abbreviation:"CET",rawFormat:"+01:00 Central European Time - Belgrade, Niš, Novi Sad, Zemun"},{name:"Europe/Berlin",alternativeName:"Central European Time",group:["Europe/Berlin","Europe/Busingen","Arctic/Longyearbyen","Europe/Copenhagen","Europe/Oslo","Europe/Stockholm","Atlantic/Jan_Mayen"],continentCode:"EU",continentName:"Europe",countryName:"Germany",countryCode:"DE",mainCities:["Berlin","Hamburg","Munich","K\xf6ln"],rawOffsetInMinutes:60,abbreviation:"CET",rawFormat:"+01:00 Central European Time - Berlin, Hamburg, Munich, K\xf6ln"},{name:"Europe/Bratislava",alternativeName:"Central European Time",group:["Europe/Bratislava"],continentCode:"EU",continentName:"Europe",countryName:"Slovakia",countryCode:"SK",mainCities:["Bratislava","Košice","Nitra","Prešov"],rawOffsetInMinutes:60,abbreviation:"CET",rawFormat:"+01:00 Central European Time - Bratislava, Košice, Nitra, Prešov"},{name:"Europe/Brussels",alternativeName:"Central European Time",group:["Europe/Brussels","Europe/Amsterdam","Europe/Luxembourg"],continentCode:"EU",continentName:"Europe",countryName:"Belgium",countryCode:"BE",mainCities:["Brussels","Antwerpen","Gent","Charleroi"],rawOffsetInMinutes:60,abbreviation:"CET",rawFormat:"+01:00 Central European Time - Brussels, Antwerpen, Gent, Charleroi"},{name:"Europe/Budapest",alternativeName:"Central European Time",group:["Europe/Budapest"],continentCode:"EU",continentName:"Europe",countryName:"Hungary",countryCode:"HU",mainCities:["Budapest","Debrecen","Szeged","Miskolc"],rawOffsetInMinutes:60,abbreviation:"CET",rawFormat:"+01:00 Central European Time - Budapest, Debrecen, Szeged, Miskolc"},{name:"Europe/Copenhagen",alternativeName:"Central European Time",group:["Europe/Copenhagen"],continentCode:"EU",continentName:"Europe",countryName:"Denmark",countryCode:"DK",mainCities:["Copenhagen","\xc5rhus","Odense","Aalborg"],rawOffsetInMinutes:60,abbreviation:"CET",rawFormat:"+01:00 Central European Time - Copenhagen, \xc5rhus, Odense, Aalborg"},{name:"Europe/Gibraltar",alternativeName:"Central European Time",group:["Europe/Gibraltar"],continentCode:"EU",continentName:"Europe",countryName:"Gibraltar",countryCode:"GI",mainCities:["Gibraltar"],rawOffsetInMinutes:60,abbreviation:"CET",rawFormat:"+01:00 Central European Time - Gibraltar"},{name:"Europe/Ljubljana",alternativeName:"Central European Time",group:["Europe/Ljubljana"],continentCode:"EU",continentName:"Europe",countryName:"Slovenia",countryCode:"SI",mainCities:["Ljubljana","Maribor","Kranj","Celje"],rawOffsetInMinutes:60,abbreviation:"CET",rawFormat:"+01:00 Central European Time - Ljubljana, Maribor, Kranj, Celje"},{name:"Arctic/Longyearbyen",alternativeName:"Central European Time",group:["Arctic/Longyearbyen"],continentCode:"EU",continentName:"Europe",countryName:"Svalbard and Jan Mayen",countryCode:"SJ",mainCities:["Longyearbyen"],rawOffsetInMinutes:60,abbreviation:"CET",rawFormat:"+01:00 Central European Time - Longyearbyen"},{name:"Europe/Luxembourg",alternativeName:"Central European Time",group:["Europe/Luxembourg"],continentCode:"EU",continentName:"Europe",countryName:"Luxembourg",countryCode:"LU",mainCities:["Luxembourg","Esch-sur-Alzette","Dudelange"],rawOffsetInMinutes:60,abbreviation:"CET",rawFormat:"+01:00 Central European Time - Luxembourg, Esch-sur-Alzette, Dudelange"},{name:"Europe/Madrid",alternativeName:"Central European Time",group:["Africa/Ceuta","Europe/Madrid"],continentCode:"EU",continentName:"Europe",countryName:"Spain",countryCode:"ES",mainCities:["Madrid","Barcelona","Valencia","Sevilla"],rawOffsetInMinutes:60,abbreviation:"CET",rawFormat:"+01:00 Central European Time - Madrid, Barcelona, Valencia, Sevilla"},{name:"Europe/Monaco",alternativeName:"Central European Time",group:["Europe/Monaco"],continentCode:"EU",continentName:"Europe",countryName:"Monaco",countryCode:"MC",mainCities:["Monaco","Monte-Carlo"],rawOffsetInMinutes:60,abbreviation:"CET",rawFormat:"+01:00 Central European Time - Monaco, Monte-Carlo"},{name:"Europe/Oslo",alternativeName:"Central European Time",group:["Europe/Oslo","Atlantic/Jan_Mayen"],continentCode:"EU",continentName:"Europe",countryName:"Norway",countryCode:"NO",mainCities:["Oslo","Bergen","Trondheim","Stavanger"],rawOffsetInMinutes:60,abbreviation:"CET",rawFormat:"+01:00 Central European Time - Oslo, Bergen, Trondheim, Stavanger"},{name:"Europe/Paris",alternativeName:"Central European Time",group:["Europe/Paris","Europe/Monaco"],continentCode:"EU",continentName:"Europe",countryName:"France",countryCode:"FR",mainCities:["Paris","Marseille","Lyon","Toulouse"],rawOffsetInMinutes:60,abbreviation:"CET",rawFormat:"+01:00 Central European Time - Paris, Marseille, Lyon, Toulouse"},{name:"Europe/Podgorica",alternativeName:"Central European Time",group:["Europe/Podgorica"],continentCode:"EU",continentName:"Europe",countryName:"Montenegro",countryCode:"ME",mainCities:["Podgorica","Nikšić","Herceg Novi","Pljevlja"],rawOffsetInMinutes:60,abbreviation:"CET",rawFormat:"+01:00 Central European Time - Podgorica, Nikšić, Herceg Novi, Pljevlja"},{name:"Europe/Prague",alternativeName:"Central European Time",group:["Europe/Prague","Europe/Bratislava"],continentCode:"EU",continentName:"Europe",countryName:"Czechia",countryCode:"CZ",mainCities:["Prague","Brno","Ostrava","Pilsen"],rawOffsetInMinutes:60,abbreviation:"CET",rawFormat:"+01:00 Central European Time - Prague, Brno, Ostrava, Pilsen"},{name:"Europe/Rome",alternativeName:"Central European Time",group:["Europe/Rome","Europe/San_Marino","Europe/Vatican"],continentCode:"EU",continentName:"Europe",countryName:"Italy",countryCode:"IT",mainCities:["Rome","Milan","Naples","Turin"],rawOffsetInMinutes:60,abbreviation:"CET",rawFormat:"+01:00 Central European Time - Rome, Milan, Naples, Turin"},{name:"Europe/San_Marino",alternativeName:"Central European Time",group:["Europe/San_Marino"],continentCode:"EU",continentName:"Europe",countryName:"San Marino",countryCode:"SM",mainCities:["San Marino"],rawOffsetInMinutes:60,abbreviation:"CET",rawFormat:"+01:00 Central European Time - San Marino"},{name:"Europe/Malta",alternativeName:"Central European Time",group:["Europe/Malta"],continentCode:"EU",continentName:"Europe",countryName:"Malta",countryCode:"MT",mainCities:["San Pawl il-Baħar","Birkirkara","Mosta","Sliema"],rawOffsetInMinutes:60,abbreviation:"CET",rawFormat:"+01:00 Central European Time - San Pawl il-Baħar, Birkirkara, Mosta, Sliema"},{name:"Europe/Sarajevo",alternativeName:"Central European Time",group:["Europe/Sarajevo"],continentCode:"EU",continentName:"Europe",countryName:"Bosnia and Herzegovina",countryCode:"BA",mainCities:["Sarajevo","Banja Luka","Zenica","Tuzla"],rawOffsetInMinutes:60,abbreviation:"CET",rawFormat:"+01:00 Central European Time - Sarajevo, Banja Luka, Zenica, Tuzla"},{name:"Europe/Skopje",alternativeName:"Central European Time",group:["Europe/Skopje"],continentCode:"EU",continentName:"Europe",countryName:"North Macedonia",countryCode:"MK",mainCities:["Skopje","Kumanovo","Prilep","Bitola"],rawOffsetInMinutes:60,abbreviation:"CET",rawFormat:"+01:00 Central European Time - Skopje, Kumanovo, Prilep, Bitola"},{name:"Europe/Stockholm",alternativeName:"Central European Time",group:["Europe/Stockholm"],continentCode:"EU",continentName:"Europe",countryName:"Sweden",countryCode:"SE",mainCities:["Stockholm","G\xf6teborg","Malm\xf6","Uppsala"],rawOffsetInMinutes:60,abbreviation:"CET",rawFormat:"+01:00 Central European Time - Stockholm, G\xf6teborg, Malm\xf6, Uppsala"},{name:"Europe/Tirane",alternativeName:"Central European Time",group:["Europe/Tirane"],continentCode:"EU",continentName:"Europe",countryName:"Albania",countryCode:"AL",mainCities:["Tirana","Durr\xebs","Elbasan","Vlor\xeb"],rawOffsetInMinutes:60,abbreviation:"CET",rawFormat:"+01:00 Central European Time - Tirana, Durr\xebs, Elbasan, Vlor\xeb"},{name:"Africa/Tunis",alternativeName:"Central European Time",group:["Africa/Tunis"],continentCode:"AF",continentName:"Africa",countryName:"Tunisia",countryCode:"TN",mainCities:["Tunis","Sfax","Sousse","Kairouan"],rawOffsetInMinutes:60,abbreviation:"CET",rawFormat:"+01:00 Central European Time - Tunis, Sfax, Sousse, Kairouan"},{name:"Europe/Vaduz",alternativeName:"Central European Time",group:["Europe/Vaduz"],continentCode:"EU",continentName:"Europe",countryName:"Liechtenstein",countryCode:"LI",mainCities:["Vaduz"],rawOffsetInMinutes:60,abbreviation:"CET",rawFormat:"+01:00 Central European Time - Vaduz"},{name:"Europe/Vatican",alternativeName:"Central European Time",group:["Europe/Vatican"],continentCode:"EU",continentName:"Europe",countryName:"Vatican",countryCode:"VA",mainCities:["Vatican City"],rawOffsetInMinutes:60,abbreviation:"CET",rawFormat:"+01:00 Central European Time - Vatican City"},{name:"Europe/Vienna",alternativeName:"Central European Time",group:["Europe/Vienna"],continentCode:"EU",continentName:"Europe",countryName:"Austria",countryCode:"AT",mainCities:["Vienna","Graz","Linz","Favoriten"],rawOffsetInMinutes:60,abbreviation:"CET",rawFormat:"+01:00 Central European Time - Vienna, Graz, Linz, Favoriten"},{name:"Europe/Warsaw",alternativeName:"Central European Time",group:["Europe/Warsaw","Poland"],continentCode:"EU",continentName:"Europe",countryName:"Poland",countryCode:"PL",mainCities:["Warsaw","Ł\xf3dź","Krak\xf3w","Wrocław"],rawOffsetInMinutes:60,abbreviation:"CET",rawFormat:"+01:00 Central European Time - Warsaw, Ł\xf3dź, Krak\xf3w, Wrocław"},{name:"Europe/Zagreb",alternativeName:"Central European Time",group:["Europe/Zagreb"],continentCode:"EU",continentName:"Europe",countryName:"Croatia",countryCode:"HR",mainCities:["Zagreb","Split","Rijeka","Osijek"],rawOffsetInMinutes:60,abbreviation:"CET",rawFormat:"+01:00 Central European Time - Zagreb, Split, Rijeka, Osijek"},{name:"Europe/Zurich",alternativeName:"Central European Time",group:["Europe/Zurich","Europe/Busingen","Europe/Vaduz"],continentCode:"EU",continentName:"Europe",countryName:"Switzerland",countryCode:"CH",mainCities:["Z\xfcrich","Gen\xe8ve","Basel","Lausanne"],rawOffsetInMinutes:60,abbreviation:"CET",rawFormat:"+01:00 Central European Time - Z\xfcrich, Gen\xe8ve, Basel, Lausanne"},{name:"Africa/Bangui",alternativeName:"West Africa Time",group:["Africa/Bangui"],continentCode:"AF",continentName:"Africa",countryName:"Central African Republic",countryCode:"CF",mainCities:["Bangui","Bimbo","B\xe9goua","Carnot"],rawOffsetInMinutes:60,abbreviation:"WAT",rawFormat:"+01:00 West Africa Time - Bangui, Bimbo, B\xe9goua, Carnot"},{name:"Africa/Malabo",alternativeName:"West Africa Time",group:["Africa/Malabo"],continentCode:"AF",continentName:"Africa",countryName:"Equatorial Guinea",countryCode:"GQ",mainCities:["Bata","Malabo","Ebebiyin"],rawOffsetInMinutes:60,abbreviation:"WAT",rawFormat:"+01:00 West Africa Time - Bata, Malabo, Ebebiyin"},{name:"Africa/Brazzaville",alternativeName:"West Africa Time",group:["Africa/Brazzaville"],continentCode:"AF",continentName:"Africa",countryName:"Republic of the Congo",countryCode:"CG",mainCities:["Brazzaville","Pointe-Noire","Dolisie","Nkayi"],rawOffsetInMinutes:60,abbreviation:"WAT",rawFormat:"+01:00 West Africa Time - Brazzaville, Pointe-Noire, Dolisie, Nkayi"},{name:"Africa/Porto-Novo",alternativeName:"West Africa Time",group:["Africa/Porto-Novo"],continentCode:"AF",continentName:"Africa",countryName:"Benin",countryCode:"BJ",mainCities:["Cotonou","Abomey-Calavi","Porto-Novo","Parakou"],rawOffsetInMinutes:60,abbreviation:"WAT",rawFormat:"+01:00 West Africa Time - Cotonou, Abomey-Calavi, Porto-Novo, Parakou"},{name:"Africa/Douala",alternativeName:"West Africa Time",group:["Africa/Douala"],continentCode:"AF",continentName:"Africa",countryName:"Cameroon",countryCode:"CM",mainCities:["Douala","Yaound\xe9","Bamenda","Bafoussam"],rawOffsetInMinutes:60,abbreviation:"WAT",rawFormat:"+01:00 West Africa Time - Douala, Yaound\xe9, Bamenda, Bafoussam"},{name:"Africa/Kinshasa",alternativeName:"West Africa Time",group:["Africa/Kinshasa"],continentCode:"AF",continentName:"Africa",countryName:"Democratic Republic of the Congo",countryCode:"CD",mainCities:["Kinshasa","Kikwit","Masina","Mbandaka"],rawOffsetInMinutes:60,abbreviation:"WAT",rawFormat:"+01:00 West Africa Time - Kinshasa, Kikwit, Masina, Mbandaka"},{name:"Africa/Lagos",alternativeName:"West Africa Time",group:["Africa/Lagos","Africa/Bangui","Africa/Brazzaville","Africa/Douala","Africa/Kinshasa","Africa/Libreville","Africa/Luanda","Africa/Malabo","Africa/Niamey","Africa/Porto-Novo"],continentCode:"AF",continentName:"Africa",countryName:"Nigeria",countryCode:"NG",mainCities:["Lagos","Kano","Ibadan","Abuja"],rawOffsetInMinutes:60,abbreviation:"WAT",rawFormat:"+01:00 West Africa Time - Lagos, Kano, Ibadan, Abuja"},{name:"Africa/Libreville",alternativeName:"West Africa Time",group:["Africa/Libreville"],continentCode:"AF",continentName:"Africa",countryName:"Gabon",countryCode:"GA",mainCities:["Libreville","Port-Gentil","Franceville","Owendo"],rawOffsetInMinutes:60,abbreviation:"WAT",rawFormat:"+01:00 West Africa Time - Libreville, Port-Gentil, Franceville, Owendo"},{name:"Africa/Luanda",alternativeName:"West Africa Time",group:["Africa/Luanda"],continentCode:"AF",continentName:"Africa",countryName:"Angola",countryCode:"AO",mainCities:["Luanda","Lubango","Huambo","Benguela"],rawOffsetInMinutes:60,abbreviation:"WAT",rawFormat:"+01:00 West Africa Time - Luanda, Lubango, Huambo, Benguela"},{name:"Africa/Ndjamena",alternativeName:"West Africa Time",group:["Africa/Ndjamena"],continentCode:"AF",continentName:"Africa",countryName:"Chad",countryCode:"TD",mainCities:["N'Djamena","Moundou","Ab\xe9ch\xe9","Sarh"],rawOffsetInMinutes:60,abbreviation:"WAT",rawFormat:"+01:00 West Africa Time - N'Djamena, Moundou, Ab\xe9ch\xe9, Sarh"},{name:"Africa/Niamey",alternativeName:"West Africa Time",group:["Africa/Niamey"],continentCode:"AF",continentName:"Africa",countryName:"Niger",countryCode:"NE",mainCities:["Niamey","Maradi","Zinder","Tahoua"],rawOffsetInMinutes:60,abbreviation:"WAT",rawFormat:"+01:00 West Africa Time - Niamey, Maradi, Zinder, Tahoua"},{name:"Africa/Bujumbura",alternativeName:"Central Africa Time",group:["Africa/Bujumbura"],continentCode:"AF",continentName:"Africa",countryName:"Burundi",countryCode:"BI",mainCities:["Bujumbura","Gitega","Ngozi","Rumonge"],rawOffsetInMinutes:120,abbreviation:"CAT",rawFormat:"+02:00 Central Africa Time - Bujumbura, Gitega, Ngozi, Rumonge"},{name:"Africa/Gaborone",alternativeName:"Central Africa Time",group:["Africa/Gaborone"],continentCode:"AF",continentName:"Africa",countryName:"Botswana",countryCode:"BW",mainCities:["Gaborone","Francistown","Mogoditshane","Maun"],rawOffsetInMinutes:120,abbreviation:"CAT",rawFormat:"+02:00 Central Africa Time - Gaborone, Francistown, Mogoditshane, Maun"},{name:"Africa/Harare",alternativeName:"Central Africa Time",group:["Africa/Harare"],continentCode:"AF",continentName:"Africa",countryName:"Zimbabwe",countryCode:"ZW",mainCities:["Harare","Bulawayo","Chitungwiza","Mutare"],rawOffsetInMinutes:120,abbreviation:"CAT",rawFormat:"+02:00 Central Africa Time - Harare, Bulawayo, Chitungwiza, Mutare"},{name:"Africa/Juba",alternativeName:"Central Africa Time",group:["Africa/Juba"],continentCode:"AF",continentName:"Africa",countryName:"South Sudan",countryCode:"SS",mainCities:["Juba","Winejok","Yei","Malakal"],rawOffsetInMinutes:120,abbreviation:"CAT",rawFormat:"+02:00 Central Africa Time - Juba, Winejok, Yei, Malakal"},{name:"Africa/Khartoum",alternativeName:"Central Africa Time",group:["Africa/Khartoum"],continentCode:"AF",continentName:"Africa",countryName:"Sudan",countryCode:"SD",mainCities:["Khartoum","Omdurman","Nyala","Port Sudan"],rawOffsetInMinutes:120,abbreviation:"CAT",rawFormat:"+02:00 Central Africa Time - Khartoum, Omdurman, Nyala, Port Sudan"},{name:"Africa/Kigali",alternativeName:"Central Africa Time",group:["Africa/Kigali"],continentCode:"AF",continentName:"Africa",countryName:"Rwanda",countryCode:"RW",mainCities:["Kigali","Gisenyi","Butare","Gitarama"],rawOffsetInMinutes:120,abbreviation:"CAT",rawFormat:"+02:00 Central Africa Time - Kigali, Gisenyi, Butare, Gitarama"},{name:"Africa/Blantyre",alternativeName:"Central Africa Time",group:["Africa/Blantyre"],continentCode:"AF",continentName:"Africa",countryName:"Malawi",countryCode:"MW",mainCities:["Lilongwe","Blantyre","Mzuzu","Zomba"],rawOffsetInMinutes:120,abbreviation:"CAT",rawFormat:"+02:00 Central Africa Time - Lilongwe, Blantyre, Mzuzu, Zomba"},{name:"Africa/Lubumbashi",alternativeName:"Central Africa Time",group:["Africa/Lubumbashi"],continentCode:"AF",continentName:"Africa",countryName:"Democratic Republic of the Congo",countryCode:"CD",mainCities:["Lubumbashi","Mbuji-Mayi","Kananga","Kisangani"],rawOffsetInMinutes:120,abbreviation:"CAT",rawFormat:"+02:00 Central Africa Time - Lubumbashi, Mbuji-Mayi, Kananga, Kisangani"},{name:"Africa/Lusaka",alternativeName:"Central Africa Time",group:["Africa/Lusaka"],continentCode:"AF",continentName:"Africa",countryName:"Zambia",countryCode:"ZM",mainCities:["Lusaka","Ndola","Kitwe","Chipata"],rawOffsetInMinutes:120,abbreviation:"CAT",rawFormat:"+02:00 Central Africa Time - Lusaka, Ndola, Kitwe, Chipata"},{name:"Africa/Maputo",alternativeName:"Central Africa Time",group:["Africa/Maputo","Africa/Blantyre","Africa/Bujumbura","Africa/Gaborone","Africa/Harare","Africa/Kigali","Africa/Lubumbashi","Africa/Lusaka"],continentCode:"AF",continentName:"Africa",countryName:"Mozambique",countryCode:"MZ",mainCities:["Maputo","Matola","Nampula","Beira"],rawOffsetInMinutes:120,abbreviation:"CAT",rawFormat:"+02:00 Central Africa Time - Maputo, Matola, Nampula, Beira"},{name:"Europe/Athens",alternativeName:"Eastern European Time",group:["Europe/Athens"],continentCode:"EU",continentName:"Europe",countryName:"Greece",countryCode:"GR",mainCities:["Athens","Thessalon\xedki","P\xe1tra","Piraeus"],rawOffsetInMinutes:120,abbreviation:"EET",rawFormat:"+02:00 Eastern European Time - Athens, Thessalon\xedki, P\xe1tra, Piraeus"},{name:"Asia/Beirut",alternativeName:"Eastern European Time",group:["Asia/Beirut"],continentCode:"AS",continentName:"Asia",countryName:"Lebanon",countryCode:"LB",mainCities:["Beirut","Ra’s Bayrūt","Tripoli","Sidon"],rawOffsetInMinutes:120,abbreviation:"EET",rawFormat:"+02:00 Eastern European Time - Beirut, Ra’s Bayrūt, Tripoli, Sidon"},{name:"Europe/Bucharest",alternativeName:"Eastern European Time",group:["Europe/Bucharest"],continentCode:"EU",continentName:"Europe",countryName:"Romania",countryCode:"RO",mainCities:["Bucharest","Sector 3","Iaşi","Sector 6"],rawOffsetInMinutes:120,abbreviation:"EET",rawFormat:"+02:00 Eastern European Time - Bucharest, Sector 3, Iaşi, Sector 6"},{name:"Africa/Cairo",alternativeName:"Eastern European Time",group:["Africa/Cairo","Egypt"],continentCode:"AF",continentName:"Africa",countryName:"Egypt",countryCode:"EG",mainCities:["Cairo","Alexandria","Giza","Shubrā al Khaymah"],rawOffsetInMinutes:120,abbreviation:"EET",rawFormat:"+02:00 Eastern European Time - Cairo, Alexandria, Giza, Shubrā al Khaymah"},{name:"Europe/Chisinau",alternativeName:"Eastern European Time",group:["Europe/Chisinau","Europe/Tiraspol"],continentCode:"EU",continentName:"Europe",countryName:"Moldova",countryCode:"MD",mainCities:["Chisinau","Tiraspol","Bălţi","Bender"],rawOffsetInMinutes:120,abbreviation:"EET",rawFormat:"+02:00 Eastern European Time - Chisinau, Tiraspol, Bălţi, Bender"},{name:"Asia/Hebron",alternativeName:"Eastern European Time",group:["Asia/Gaza","Asia/Hebron"],continentCode:"AS",continentName:"Asia",countryName:"Palestinian Territory",countryCode:"PS",mainCities:["East Jerusalem","Gaza","Khān Yūnis","Jabālyā"],rawOffsetInMinutes:120,abbreviation:"EET",rawFormat:"+02:00 Eastern European Time - East Jerusalem, Gaza, Khān Yūnis, Jabālyā"},{name:"Europe/Helsinki",alternativeName:"Eastern European Time",group:["Europe/Helsinki","Europe/Mariehamn"],continentCode:"EU",continentName:"Europe",countryName:"Finland",countryCode:"FI",mainCities:["Helsinki","Espoo","Tampere","Oulu"],rawOffsetInMinutes:120,abbreviation:"EET",rawFormat:"+02:00 Eastern European Time - Helsinki, Espoo, Tampere, Oulu"},{name:"Europe/Kaliningrad",alternativeName:"Eastern European Time",group:["Europe/Kaliningrad"],continentCode:"EU",continentName:"Europe",countryName:"Russia",countryCode:"RU",mainCities:["Kaliningrad","Chernyakhovsk","Sovetsk","Baltiysk"],rawOffsetInMinutes:120,abbreviation:"EET",rawFormat:"+02:00 Eastern European Time - Kaliningrad, Chernyakhovsk, Sovetsk, Baltiysk"},{name:"Europe/Kyiv",alternativeName:"Eastern European Time",group:["Europe/Kyiv","Europe/Uzhgorod","Europe/Zaporozhye","Europe/Kiev"],continentCode:"EU",continentName:"Europe",countryName:"Ukraine",countryCode:"UA",mainCities:["Kyiv","Kharkiv","Odesa","Dnipro"],rawOffsetInMinutes:120,abbreviation:"EET",rawFormat:"+02:00 Eastern European Time - Kyiv, Kharkiv, Odesa, Dnipro"},{name:"Europe/Mariehamn",alternativeName:"Eastern European Time",group:["Europe/Mariehamn"],continentCode:"EU",continentName:"Europe",countryName:"Aland Islands",countryCode:"AX",mainCities:["Mariehamn"],rawOffsetInMinutes:120,abbreviation:"EET",rawFormat:"+02:00 Eastern European Time - Mariehamn"},{name:"Asia/Nicosia",alternativeName:"Eastern European Time",group:["Asia/Famagusta","Asia/Nicosia","Europe/Nicosia"],continentCode:"EU",continentName:"Europe",countryName:"Cyprus",countryCode:"CY",mainCities:["Nicosia","Limassol","Larnaca","Str\xf3volos"],rawOffsetInMinutes:120,abbreviation:"EET",rawFormat:"+02:00 Eastern European Time - Nicosia, Limassol, Larnaca, Str\xf3volos"},{name:"Europe/Riga",alternativeName:"Eastern European Time",group:["Europe/Riga"],continentCode:"EU",continentName:"Europe",countryName:"Latvia",countryCode:"LV",mainCities:["Riga","Daugavpils","Liepāja","Jelgava"],rawOffsetInMinutes:120,abbreviation:"EET",rawFormat:"+02:00 Eastern European Time - Riga, Daugavpils, Liepāja, Jelgava"},{name:"Europe/Sofia",alternativeName:"Eastern European Time",group:["Europe/Sofia"],continentCode:"EU",continentName:"Europe",countryName:"Bulgaria",countryCode:"BG",mainCities:["Sofia","Plovdiv","Varna","Burgas"],rawOffsetInMinutes:120,abbreviation:"EET",rawFormat:"+02:00 Eastern European Time - Sofia, Plovdiv, Varna, Burgas"},{name:"Europe/Tallinn",alternativeName:"Eastern European Time",group:["Europe/Tallinn"],continentCode:"EU",continentName:"Europe",countryName:"Estonia",countryCode:"EE",mainCities:["Tallinn","Tartu","Narva","P\xe4rnu"],rawOffsetInMinutes:120,abbreviation:"EET",rawFormat:"+02:00 Eastern European Time - Tallinn, Tartu, Narva, P\xe4rnu"},{name:"Africa/Tripoli",alternativeName:"Eastern European Time",group:["Africa/Tripoli","Libya"],continentCode:"AF",continentName:"Africa",countryName:"Libya",countryCode:"LY",mainCities:["Tripoli","Benghazi","Misratah","Zliten"],rawOffsetInMinutes:120,abbreviation:"EET",rawFormat:"+02:00 Eastern European Time - Tripoli, Benghazi, Misratah, Zliten"},{name:"Europe/Vilnius",alternativeName:"Eastern European Time",group:["Europe/Vilnius"],continentCode:"EU",continentName:"Europe",countryName:"Lithuania",countryCode:"LT",mainCities:["Vilnius","Kaunas","Klaipėda","Šiauliai"],rawOffsetInMinutes:120,abbreviation:"EET",rawFormat:"+02:00 Eastern European Time - Vilnius, Kaunas, Klaipėda, Šiauliai"},{name:"Asia/Jerusalem",alternativeName:"Israel Time",group:["Asia/Jerusalem","Israel","Asia/Tel_Aviv"],continentCode:"AS",continentName:"Asia",countryName:"Israel",countryCode:"IL",mainCities:["Jerusalem","Tel Aviv","West Jerusalem","Haifa"],rawOffsetInMinutes:120,abbreviation:"IST",rawFormat:"+02:00 Israel Time - Jerusalem, Tel Aviv, West Jerusalem, Haifa"},{name:"Africa/Johannesburg",alternativeName:"South Africa Time",group:["Africa/Johannesburg","Africa/Maseru","Africa/Mbabane"],continentCode:"AF",continentName:"Africa",countryName:"South Africa",countryCode:"ZA",mainCities:["Johannesburg","Cape Town","Durban","Soweto"],rawOffsetInMinutes:120,abbreviation:"SAST",rawFormat:"+02:00 South Africa Time - Johannesburg, Cape Town, Durban, Soweto"},{name:"Africa/Mbabane",alternativeName:"South Africa Time",group:["Africa/Mbabane"],continentCode:"AF",continentName:"Africa",countryName:"Eswatini",countryCode:"SZ",mainCities:["Manzini","Mbabane","Lobamba"],rawOffsetInMinutes:120,abbreviation:"SAST",rawFormat:"+02:00 South Africa Time - Manzini, Mbabane, Lobamba"},{name:"Africa/Maseru",alternativeName:"South Africa Time",group:["Africa/Maseru"],continentCode:"AF",continentName:"Africa",countryName:"Lesotho",countryCode:"LS",mainCities:["Maseru","Maputsoe","Mohale's Hoek","Mafeteng"],rawOffsetInMinutes:120,abbreviation:"SAST",rawFormat:"+02:00 South Africa Time - Maseru, Maputsoe, Mohale's Hoek, Mafeteng"},{name:"Asia/Kuwait",alternativeName:"Arabian Time",group:["Asia/Kuwait"],continentCode:"AS",continentName:"Asia",countryName:"Kuwait",countryCode:"KW",mainCities:["Al Aḩmadī","Ḩawallī","As Sālimīyah","Şabāḩ as Sālim"],rawOffsetInMinutes:180,abbreviation:"AST",rawFormat:"+03:00 Arabian Time - Al Aḩmadī, Ḩawallī, As Sālimīyah, Şabāḩ as Sālim"},{name:"Asia/Bahrain",alternativeName:"Arabian Time",group:["Asia/Bahrain"],continentCode:"AS",continentName:"Asia",countryName:"Bahrain",countryCode:"BH",mainCities:["Ar Rifā‘","Manama","Al Muharraq","Dār Kulayb"],rawOffsetInMinutes:180,abbreviation:"AST",rawFormat:"+03:00 Arabian Time - Ar Rifā‘, Manama, Al Muharraq, Dār Kulayb"},{name:"Asia/Baghdad",alternativeName:"Arabian Time",group:["Asia/Baghdad"],continentCode:"AS",continentName:"Asia",countryName:"Iraq",countryCode:"IQ",mainCities:["Baghdad","Al Mawşil al Jadīdah","Al Başrah al Qadīmah","Mosul"],rawOffsetInMinutes:180,abbreviation:"AST",rawFormat:"+03:00 Arabian Time - Baghdad, Al Mawşil al Jadīdah, Al Başrah al Qadīmah, Mosul"},{name:"Asia/Qatar",alternativeName:"Arabian Time",group:["Asia/Qatar","Asia/Bahrain"],continentCode:"AS",continentName:"Asia",countryName:"Qatar",countryCode:"QA",mainCities:["Doha","Ar Rayyān","Al Maţār al ‘Atīq","Al Manşūrah"],rawOffsetInMinutes:180,abbreviation:"AST",rawFormat:"+03:00 Arabian Time - Doha, Ar Rayyān, Al Maţār al ‘Atīq, Al Manşūrah"},{name:"Asia/Riyadh",alternativeName:"Arabian Time",group:["Asia/Riyadh","Antarctica/Syowa","Asia/Aden","Asia/Kuwait"],continentCode:"AS",continentName:"Asia",countryName:"Saudi Arabia",countryCode:"SA",mainCities:["Jeddah","Riyadh","Mecca","Medina"],rawOffsetInMinutes:180,abbreviation:"AST",rawFormat:"+03:00 Arabian Time - Jeddah, Riyadh, Mecca, Medina"},{name:"Asia/Aden",alternativeName:"Arabian Time",group:["Asia/Aden"],continentCode:"AS",continentName:"Asia",countryName:"Yemen",countryCode:"YE",mainCities:["Sanaa","Aden","Al Ḩudaydah","Taiz"],rawOffsetInMinutes:180,abbreviation:"AST",rawFormat:"+03:00 Arabian Time - Sanaa, Aden, Al Ḩudaydah, Taiz"},{name:"Asia/Amman",alternativeName:"Asia/Amman",group:["Asia/Amman"],continentCode:"AS",continentName:"Asia",countryName:"Jordan",countryCode:"JO",mainCities:["Amman","Zarqa","Irbid","Russeifa"],rawOffsetInMinutes:180,abbreviation:"GMT+3",rawFormat:"+03:00 Asia/Amman - Amman, Zarqa, Irbid, Russeifa"},{name:"Asia/Damascus",alternativeName:"Asia/Damascus",group:["Asia/Damascus"],continentCode:"AS",continentName:"Asia",countryName:"Syria",countryCode:"SY",mainCities:["Aleppo","Damascus","Homs","Latakia"],rawOffsetInMinutes:180,abbreviation:"GMT+3",rawFormat:"+03:00 Asia/Damascus - Aleppo, Damascus, Homs, Latakia"},{name:"Africa/Addis_Ababa",alternativeName:"East Africa Time",group:["Africa/Addis_Ababa"],continentCode:"AF",continentName:"Africa",countryName:"Ethiopia",countryCode:"ET",mainCities:["Addis Ababa","Jijiga","Gonder","Mek'ele"],rawOffsetInMinutes:180,abbreviation:"EAT",rawFormat:"+03:00 East Africa Time - Addis Ababa, Jijiga, Gonder, Mek'ele"},{name:"Indian/Antananarivo",alternativeName:"East Africa Time",group:["Indian/Antananarivo"],continentCode:"AF",continentName:"Africa",countryName:"Madagascar",countryCode:"MG",mainCities:["Antananarivo","Toamasina","Antsirabe","Mahajanga"],rawOffsetInMinutes:180,abbreviation:"EAT",rawFormat:"+03:00 East Africa Time - Antananarivo, Toamasina, Antsirabe, Mahajanga"},{name:"Africa/Asmara",alternativeName:"East Africa Time",group:["Africa/Asmara"],continentCode:"AF",continentName:"Africa",countryName:"Eritrea",countryCode:"ER",mainCities:["Asmara","Keren","Himora","Massawa"],rawOffsetInMinutes:180,abbreviation:"EAT",rawFormat:"+03:00 East Africa Time - Asmara, Keren, Himora, Massawa"},{name:"Africa/Dar_es_Salaam",alternativeName:"East Africa Time",group:["Africa/Dar_es_Salaam"],continentCode:"AF",continentName:"Africa",countryName:"Tanzania",countryCode:"TZ",mainCities:["Dar es Salaam","Mwanza","Arusha","Mbeya"],rawOffsetInMinutes:180,abbreviation:"EAT",rawFormat:"+03:00 East Africa Time - Dar es Salaam, Mwanza, Arusha, Mbeya"},{name:"Africa/Djibouti",alternativeName:"East Africa Time",group:["Africa/Djibouti"],continentCode:"AF",continentName:"Africa",countryName:"Djibouti",countryCode:"DJ",mainCities:["Djibouti","Ali Sabih","Dikhil","Tadjoura"],rawOffsetInMinutes:180,abbreviation:"EAT",rawFormat:"+03:00 East Africa Time - Djibouti, Ali Sabih, Dikhil, Tadjoura"},{name:"Africa/Kampala",alternativeName:"East Africa Time",group:["Africa/Kampala"],continentCode:"AF",continentName:"Africa",countryName:"Uganda",countryCode:"UG",mainCities:["Kampala","Gulu","Lira","Mbarara"],rawOffsetInMinutes:180,abbreviation:"EAT",rawFormat:"+03:00 East Africa Time - Kampala, Gulu, Lira, Mbarara"},{name:"Indian/Mayotte",alternativeName:"East Africa Time",group:["Indian/Mayotte"],continentCode:"AF",continentName:"Africa",countryName:"Mayotte",countryCode:"YT",mainCities:["Mamoudzou","Koungou","Labattoir","Kaou\xe9ni"],rawOffsetInMinutes:180,abbreviation:"EAT",rawFormat:"+03:00 East Africa Time - Mamoudzou, Koungou, Labattoir, Kaou\xe9ni"},{name:"Africa/Mogadishu",alternativeName:"East Africa Time",group:["Africa/Mogadishu"],continentCode:"AF",continentName:"Africa",countryName:"Somalia",countryCode:"SO",mainCities:["Mogadishu","Borama","Hargeysa","Berbera"],rawOffsetInMinutes:180,abbreviation:"EAT",rawFormat:"+03:00 East Africa Time - Mogadishu, Borama, Hargeysa, Berbera"},{name:"Indian/Comoro",alternativeName:"East Africa Time",group:["Indian/Comoro"],continentCode:"AF",continentName:"Africa",countryName:"Comoros",countryCode:"KM",mainCities:["Moroni","Moutsamoudou","Fomboni"],rawOffsetInMinutes:180,abbreviation:"EAT",rawFormat:"+03:00 East Africa Time - Moroni, Moutsamoudou, Fomboni"},{name:"Africa/Nairobi",alternativeName:"East Africa Time",group:["Africa/Nairobi","Africa/Addis_Ababa","Africa/Asmara","Africa/Dar_es_Salaam","Africa/Djibouti","Africa/Kampala","Africa/Mogadishu","Indian/Antananarivo","Indian/Comoro","Indian/Mayotte","Africa/Asmera"],continentCode:"AF",continentName:"Africa",countryName:"Kenya",countryCode:"KE",mainCities:["Nairobi","Kakamega","Mombasa","Nakuru"],rawOffsetInMinutes:180,abbreviation:"EAT",rawFormat:"+03:00 East Africa Time - Nairobi, Kakamega, Mombasa, Nakuru"},{name:"Europe/Minsk",alternativeName:"Moscow Time",group:["Europe/Minsk"],continentCode:"EU",continentName:"Europe",countryName:"Belarus",countryCode:"BY",mainCities:["Minsk","Homyel'","Hrodna","Mahilyow"],rawOffsetInMinutes:180,abbreviation:"MSK",rawFormat:"+03:00 Moscow Time - Minsk, Homyel', Hrodna, Mahilyow"},{name:"Europe/Moscow",alternativeName:"Moscow Time",group:["Europe/Kirov","Europe/Moscow","Europe/Volgograd","W-SU"],continentCode:"EU",continentName:"Europe",countryName:"Russia",countryCode:"RU",mainCities:["Moscow","Saint Petersburg","Nizhniy Novgorod","Kazan"],rawOffsetInMinutes:180,abbreviation:"MSK",rawFormat:"+03:00 Moscow Time - Moscow, Saint Petersburg, Nizhniy Novgorod, Kazan"},{name:"Europe/Simferopol",alternativeName:"Moscow Time",group:["Europe/Simferopol"],continentCode:"EU",continentName:"Europe",countryName:"Ukraine",countryCode:"UA",mainCities:["Sevastopol","Simferopol","Kerch","Yevpatoriya"],rawOffsetInMinutes:180,abbreviation:"MSK",rawFormat:"+03:00 Moscow Time - Sevastopol, Simferopol, Kerch, Yevpatoriya"},{name:"Antarctica/Syowa",alternativeName:"Syowa Time",group:["Antarctica/Syowa"],continentCode:"AN",continentName:"Antarctica",countryName:"Antarctica",countryCode:"AQ",mainCities:["Syowa"],rawOffsetInMinutes:180,abbreviation:"SYOT",rawFormat:"+03:00 Syowa Time - Syowa"},{name:"Europe/Istanbul",alternativeName:"Turkey Time",group:["Europe/Istanbul","Turkey","Asia/Istanbul"],continentCode:"AS",continentName:"Asia",countryName:"Turkey",countryCode:"TR",mainCities:["Istanbul","Ankara","Bursa","İzmir"],rawOffsetInMinutes:180,abbreviation:"TRT",rawFormat:"+03:00 Turkey Time - Istanbul, Ankara, Bursa, İzmir"},{name:"Asia/Tehran",alternativeName:"Iran Time",group:["Asia/Tehran","Iran"],continentCode:"AS",continentName:"Asia",countryName:"Iran",countryCode:"IR",mainCities:["Tehran","Mashhad","Isfahan","Karaj"],rawOffsetInMinutes:210,abbreviation:"IRST",rawFormat:"+03:30 Iran Time - Tehran, Mashhad, Isfahan, Karaj"},{name:"Asia/Yerevan",alternativeName:"Armenia Time",group:["Asia/Yerevan"],continentCode:"AS",continentName:"Asia",countryName:"Armenia",countryCode:"AM",mainCities:["Yerevan","Gyumri","Vanadzor","Vagharshapat"],rawOffsetInMinutes:240,abbreviation:"AMT",rawFormat:"+04:00 Armenia Time - Yerevan, Gyumri, Vanadzor, Vagharshapat"},{name:"Asia/Baku",alternativeName:"Azerbaijan Time",group:["Asia/Baku"],continentCode:"AS",continentName:"Asia",countryName:"Azerbaijan",countryCode:"AZ",mainCities:["Baku","Sumqayıt","Ganja","Lankaran"],rawOffsetInMinutes:240,abbreviation:"AZT",rawFormat:"+04:00 Azerbaijan Time - Baku, Sumqayıt, Ganja, Lankaran"},{name:"Asia/Tbilisi",alternativeName:"Georgia Time",group:["Asia/Tbilisi"],continentCode:"AS",continentName:"Asia",countryName:"Georgia",countryCode:"GE",mainCities:["Tbilisi","Batumi","Kutaisi","Rustavi"],rawOffsetInMinutes:240,abbreviation:"GET",rawFormat:"+04:00 Georgia Time - Tbilisi, Batumi, Kutaisi, Rustavi"},{name:"Asia/Dubai",alternativeName:"Gulf Time",group:["Asia/Dubai","Asia/Muscat","Indian/Mahe","Indian/Reunion"],continentCode:"AS",continentName:"Asia",countryName:"United Arab Emirates",countryCode:"AE",mainCities:["Dubai","Abu Dhabi","Sharjah","Al Ain City"],rawOffsetInMinutes:240,abbreviation:"GST",rawFormat:"+04:00 Gulf Time - Dubai, Abu Dhabi, Sharjah, Al Ain City"},{name:"Asia/Muscat",alternativeName:"Gulf Time",group:["Asia/Muscat"],continentCode:"AS",continentName:"Asia",countryName:"Oman",countryCode:"OM",mainCities:["Muscat","Seeb","Bawshar","‘Ibrī"],rawOffsetInMinutes:240,abbreviation:"GST",rawFormat:"+04:00 Gulf Time - Muscat, Seeb, Bawshar, ‘Ibrī"},{name:"Indian/Mauritius",alternativeName:"Mauritius Time",group:["Indian/Mauritius"],continentCode:"AF",continentName:"Africa",countryName:"Mauritius",countryCode:"MU",mainCities:["Port Louis","Vacoas","Beau Bassin-Rose Hill","Curepipe"],rawOffsetInMinutes:240,abbreviation:"MUT",rawFormat:"+04:00 Mauritius Time - Port Louis, Vacoas, Beau Bassin-Rose Hill, Curepipe"},{name:"Indian/Reunion",alternativeName:"R\xe9union Time",group:["Indian/Reunion"],continentCode:"AF",continentName:"Africa",countryName:"Reunion",countryCode:"RE",mainCities:["Saint-Denis","Saint-Paul","Saint-Pierre","Le Tampon"],rawOffsetInMinutes:240,abbreviation:"RET",rawFormat:"+04:00 R\xe9union Time - Saint-Denis, Saint-Paul, Saint-Pierre, Le Tampon"},{name:"Europe/Samara",alternativeName:"Samara Time",group:["Europe/Astrakhan","Europe/Samara","Europe/Saratov","Europe/Ulyanovsk"],continentCode:"EU",continentName:"Europe",countryName:"Russia",countryCode:"RU",mainCities:["Samara","Saratov","Tolyatti","Izhevsk"],rawOffsetInMinutes:240,abbreviation:"SAMT",rawFormat:"+04:00 Samara Time - Samara, Saratov, Tolyatti, Izhevsk"},{name:"Indian/Mahe",alternativeName:"Seychelles Time",group:["Indian/Mahe"],continentCode:"AF",continentName:"Africa",countryName:"Seychelles",countryCode:"SC",mainCities:["Victoria"],rawOffsetInMinutes:240,abbreviation:"SCT",rawFormat:"+04:00 Seychelles Time - Victoria"},{name:"Asia/Kabul",alternativeName:"Afghanistan Time",group:["Asia/Kabul"],continentCode:"AS",continentName:"Asia",countryName:"Afghanistan",countryCode:"AF",mainCities:["Kabul","Herāt","Mazār-e Sharīf","Kandahār"],rawOffsetInMinutes:270,abbreviation:"AFT",rawFormat:"+04:30 Afghanistan Time - Kabul, Herāt, Mazār-e Sharīf, Kandahār"},{name:"Asia/Almaty",alternativeName:"East Kazakhstan Time",group:["Asia/Almaty","Asia/Qostanay"],continentCode:"AS",continentName:"Asia",countryName:"Kazakhstan",countryCode:"KZ",mainCities:["Almaty","Shymkent","Karagandy","Taraz"],rawOffsetInMinutes:300,abbreviation:"ALMT",rawFormat:"+05:00 East Kazakhstan Time - Almaty, Shymkent, Karagandy, Taraz"},{name:"Indian/Kerguelen",alternativeName:"French Southern & Antarctic Time",group:["Indian/Kerguelen"],continentCode:"AN",continentName:"Antarctica",countryName:"French Southern Territories",countryCode:"TF",mainCities:["Port-aux-Fran\xe7ais"],rawOffsetInMinutes:300,abbreviation:"FSAT",rawFormat:"+05:00 French Southern & Antarctic Time - Port-aux-Fran\xe7ais"},{name:"Indian/Maldives",alternativeName:"Maldives Time",group:["Indian/Maldives","Indian/Kerguelen"],continentCode:"AS",continentName:"Asia",countryName:"Maldives",countryCode:"MV",mainCities:["Male"],rawOffsetInMinutes:300,abbreviation:"MVT",rawFormat:"+05:00 Maldives Time - Male"},{name:"Antarctica/Mawson",alternativeName:"Mawson Time",group:["Antarctica/Mawson","Antarctica/Vostok"],continentCode:"AN",continentName:"Antarctica",countryName:"Antarctica",countryCode:"AQ",mainCities:["Mawson","Vostok"],rawOffsetInMinutes:300,abbreviation:"MAWT",rawFormat:"+05:00 Mawson Time - Mawson, Vostok"},{name:"Asia/Karachi",alternativeName:"Pakistan Time",group:["Asia/Karachi"],continentCode:"AS",continentName:"Asia",countryName:"Pakistan",countryCode:"PK",mainCities:["Karachi","Lahore","Faisalabad","Rawalpindi"],rawOffsetInMinutes:300,abbreviation:"PKT",rawFormat:"+05:00 Pakistan Time - Karachi, Lahore, Faisalabad, Rawalpindi"},{name:"Asia/Dushanbe",alternativeName:"Tajikistan Time",group:["Asia/Dushanbe"],continentCode:"AS",continentName:"Asia",countryName:"Tajikistan",countryCode:"TJ",mainCities:["Dushanbe","Isfara","Istaravshan","Kŭlob"],rawOffsetInMinutes:300,abbreviation:"TJT",rawFormat:"+05:00 Tajikistan Time - Dushanbe, Isfara, Istaravshan, Kŭlob"},{name:"Asia/Ashgabat",alternativeName:"Turkmenistan Time",group:["Asia/Ashgabat","Asia/Ashkhabad"],continentCode:"AS",continentName:"Asia",countryName:"Turkmenistan",countryCode:"TM",mainCities:["Ashgabat","T\xfcrkmenabat","Daşoguz","Mary"],rawOffsetInMinutes:300,abbreviation:"TMT",rawFormat:"+05:00 Turkmenistan Time - Ashgabat, T\xfcrkmenabat, Daşoguz, Mary"},{name:"Asia/Tashkent",alternativeName:"Uzbekistan Time",group:["Asia/Samarkand","Asia/Tashkent"],continentCode:"AS",continentName:"Asia",countryName:"Uzbekistan",countryCode:"UZ",mainCities:["Tashkent","Namangan","Samarkand","Andijon"],rawOffsetInMinutes:300,abbreviation:"UZT",rawFormat:"+05:00 Uzbekistan Time - Tashkent, Namangan, Samarkand, Andijon"},{name:"Asia/Aqtobe",alternativeName:"West Kazakhstan Time",group:["Asia/Aqtau","Asia/Aqtobe","Asia/Atyrau","Asia/Oral","Asia/Qyzylorda"],continentCode:"AS",continentName:"Asia",countryName:"Kazakhstan",countryCode:"KZ",mainCities:["Aktobe","Kyzylorda","Oral","Atyrau"],rawOffsetInMinutes:300,abbreviation:"AQTT",rawFormat:"+05:00 West Kazakhstan Time - Aktobe, Kyzylorda, Oral, Atyrau"},{name:"Asia/Yekaterinburg",alternativeName:"Yekaterinburg Time",group:["Asia/Yekaterinburg"],continentCode:"EU",continentName:"Europe",countryName:"Russia",countryCode:"RU",mainCities:["Yekaterinburg","Chelyabinsk","Ufa","Perm"],rawOffsetInMinutes:300,abbreviation:"YEKT",rawFormat:"+05:00 Yekaterinburg Time - Yekaterinburg, Chelyabinsk, Ufa, Perm"},{name:"Asia/Colombo",alternativeName:"India Time",group:["Asia/Colombo"],continentCode:"AS",continentName:"Asia",countryName:"Sri Lanka",countryCode:"LK",mainCities:["Colombo","Dehiwala-Mount Lavinia","Maharagama","Jaffna"],rawOffsetInMinutes:330,abbreviation:"IST",rawFormat:"+05:30 India Time - Colombo, Dehiwala-Mount Lavinia, Maharagama, Jaffna"},{name:"Asia/Kolkata",alternativeName:"India Time",group:["Asia/Kolkata","Asia/Calcutta"],continentCode:"AS",continentName:"Asia",countryName:"India",countryCode:"IN",mainCities:["Mumbai","Delhi","Bengaluru","Hyderābād"],rawOffsetInMinutes:330,abbreviation:"IST",rawFormat:"+05:30 India Time - Mumbai, Delhi, Bengaluru, Hyderābād"},{name:"Asia/Kathmandu",alternativeName:"Nepal Time",group:["Asia/Kathmandu","Asia/Katmandu"],continentCode:"AS",continentName:"Asia",countryName:"Nepal",countryCode:"NP",mainCities:["Kathmandu","Bharatpur","Pātan","Birga\xf1j"],rawOffsetInMinutes:345,abbreviation:"NPT",rawFormat:"+05:45 Nepal Time - Kathmandu, Bharatpur, Pātan, Birga\xf1j"},{name:"Asia/Dhaka",alternativeName:"Bangladesh Time",group:["Asia/Dhaka","Asia/Dacca"],continentCode:"AS",continentName:"Asia",countryName:"Bangladesh",countryCode:"BD",mainCities:["Dhaka","Chattogram","Khulna","Rangpur"],rawOffsetInMinutes:360,abbreviation:"BST",rawFormat:"+06:00 Bangladesh Time - Dhaka, Chattogram, Khulna, Rangpur"},{name:"Asia/Thimphu",alternativeName:"Bhutan Time",group:["Asia/Thimphu","Asia/Thimbu"],continentCode:"AS",continentName:"Asia",countryName:"Bhutan",countryCode:"BT",mainCities:["Thimphu","Phuntsholing","Tsirang","Punākha"],rawOffsetInMinutes:360,abbreviation:"BTT",rawFormat:"+06:00 Bhutan Time - Thimphu, Phuntsholing, Tsirang, Punākha"},{name:"Asia/Urumqi",alternativeName:"China Time",group:["Asia/Urumqi","Asia/Kashgar"],continentCode:"AS",continentName:"Asia",countryName:"China",countryCode:"CN",mainCities:["\xdcr\xfcmqi","Shihezi","Korla","Aksu"],rawOffsetInMinutes:360,abbreviation:"CST",rawFormat:"+06:00 China Time - \xdcr\xfcmqi, Shihezi, Korla, Aksu"},{name:"Indian/Chagos",alternativeName:"Indian Ocean Time",group:["Indian/Chagos"],continentCode:"AS",continentName:"Asia",countryName:"British Indian Ocean Territory",countryCode:"IO",mainCities:["Chagos"],rawOffsetInMinutes:360,abbreviation:"IOT",rawFormat:"+06:00 Indian Ocean Time - Chagos"},{name:"Asia/Bishkek",alternativeName:"Kyrgyzstan Time",group:["Asia/Bishkek"],continentCode:"AS",continentName:"Asia",countryName:"Kyrgyzstan",countryCode:"KG",mainCities:["Bishkek","Osh","Jalal-Abad","Karakol"],rawOffsetInMinutes:360,abbreviation:"KGT",rawFormat:"+06:00 Kyrgyzstan Time - Bishkek, Osh, Jalal-Abad, Karakol"},{name:"Asia/Omsk",alternativeName:"Omsk Time",group:["Asia/Omsk"],continentCode:"EU",continentName:"Europe",countryName:"Russia",countryCode:"RU",mainCities:["Omsk","Tara","Kalachinsk","Isil’kul’"],rawOffsetInMinutes:360,abbreviation:"OMST",rawFormat:"+06:00 Omsk Time - Omsk, Tara, Kalachinsk, Isil’kul’"},{name:"Indian/Cocos",alternativeName:"Cocos Islands Time",group:["Indian/Cocos"],continentCode:"AS",continentName:"Asia",countryName:"Cocos Islands",countryCode:"CC",mainCities:["West Island"],rawOffsetInMinutes:390,abbreviation:"CCT",rawFormat:"+06:30 Cocos Islands Time - West Island"},{name:"Asia/Yangon",alternativeName:"Myanmar Time",group:["Asia/Yangon","Indian/Cocos","Asia/Rangoon"],continentCode:"AS",continentName:"Asia",countryName:"Myanmar",countryCode:"MM",mainCities:["Yangon","Mandalay","Nay Pyi Taw","Mawlamyine"],rawOffsetInMinutes:390,abbreviation:"MMT",rawFormat:"+06:30 Myanmar Time - Yangon, Mandalay, Nay Pyi Taw, Mawlamyine"},{name:"Indian/Christmas",alternativeName:"Christmas Island Time",group:["Indian/Christmas"],continentCode:"OC",continentName:"Oceania",countryName:"Christmas Island",countryCode:"CX",mainCities:["Flying Fish Cove"],rawOffsetInMinutes:420,abbreviation:"CXT",rawFormat:"+07:00 Christmas Island Time - Flying Fish Cove"},{name:"Antarctica/Davis",alternativeName:"Davis Time",group:["Antarctica/Davis"],continentCode:"AN",continentName:"Antarctica",countryName:"Antarctica",countryCode:"AQ",mainCities:["Davis"],rawOffsetInMinutes:420,abbreviation:"DAVT",rawFormat:"+07:00 Davis Time - Davis"},{name:"Asia/Hovd",alternativeName:"Hovd Time",group:["Asia/Hovd"],continentCode:"AS",continentName:"Asia",countryName:"Mongolia",countryCode:"MN",mainCities:["Ulaangom","Khovd","\xd6lgii","Altai"],rawOffsetInMinutes:420,abbreviation:"HOVT",rawFormat:"+07:00 Hovd Time - Ulaangom, Khovd, \xd6lgii, Altai"},{name:"Asia/Bangkok",alternativeName:"Indochina Time",group:["Asia/Bangkok","Asia/Phnom_Penh","Asia/Vientiane","Indian/Christmas"],continentCode:"AS",continentName:"Asia",countryName:"Thailand",countryCode:"TH",mainCities:["Bangkok","Samut Prakan","Mueang Nonthaburi","Chon Buri"],rawOffsetInMinutes:420,abbreviation:"ICT",rawFormat:"+07:00 Indochina Time - Bangkok, Samut Prakan, Mueang Nonthaburi, Chon Buri"},{name:"Asia/Ho_Chi_Minh",alternativeName:"Indochina Time",group:["Asia/Ho_Chi_Minh","Asia/Saigon"],continentCode:"AS",continentName:"Asia",countryName:"Vietnam",countryCode:"VN",mainCities:["Ho Chi Minh City","Da Nang","Bi\xean H\xf2a","Cần Thơ"],rawOffsetInMinutes:420,abbreviation:"ICT",rawFormat:"+07:00 Indochina Time - Ho Chi Minh City, Da Nang, Bi\xean H\xf2a, Cần Thơ"},{name:"Asia/Phnom_Penh",alternativeName:"Indochina Time",group:["Asia/Phnom_Penh"],continentCode:"AS",continentName:"Asia",countryName:"Cambodia",countryCode:"KH",mainCities:["Phnom Penh","Takeo","Siem Reap","Battambang"],rawOffsetInMinutes:420,abbreviation:"ICT",rawFormat:"+07:00 Indochina Time - Phnom Penh, Takeo, Siem Reap, Battambang"},{name:"Asia/Vientiane",alternativeName:"Indochina Time",group:["Asia/Vientiane"],continentCode:"AS",continentName:"Asia",countryName:"Laos",countryCode:"LA",mainCities:["Vientiane","Savannakhet","Pakse","Thakh\xe8k"],rawOffsetInMinutes:420,abbreviation:"ICT",rawFormat:"+07:00 Indochina Time - Vientiane, Savannakhet, Pakse, Thakh\xe8k"},{name:"Asia/Novosibirsk",alternativeName:"Novosibirsk Time",group:["Asia/Barnaul","Asia/Krasnoyarsk","Asia/Novokuznetsk","Asia/Novosibirsk","Asia/Tomsk"],continentCode:"EU",continentName:"Europe",countryName:"Russia",countryCode:"RU",mainCities:["Novosibirsk","Krasnoyarsk","Barnaul","Tomsk"],rawOffsetInMinutes:420,abbreviation:"NOVT",rawFormat:"+07:00 Novosibirsk Time - Novosibirsk, Krasnoyarsk, Barnaul, Tomsk"},{name:"Asia/Jakarta",alternativeName:"Western Indonesia Time",group:["Asia/Jakarta","Asia/Pontianak"],continentCode:"AS",continentName:"Asia",countryName:"Indonesia",countryCode:"ID",mainCities:["Jakarta","Surabaya","Bekasi","Bandung"],rawOffsetInMinutes:420,abbreviation:"WIB",rawFormat:"+07:00 Western Indonesia Time - Jakarta, Surabaya, Bekasi, Bandung"},{name:"Antarctica/Casey",alternativeName:"Australian Western Time",group:["Antarctica/Casey"],continentCode:"AN",continentName:"Antarctica",countryName:"Antarctica",countryCode:"AQ",mainCities:["Casey"],rawOffsetInMinutes:480,abbreviation:"AWST",rawFormat:"+08:00 Australian Western Time - Casey"},{name:"Australia/Perth",alternativeName:"Australian Western Time",group:["Australia/Perth","Australia/West"],continentCode:"OC",continentName:"Oceania",countryName:"Australia",countryCode:"AU",mainCities:["Perth","Mandurah","Bunbury","Baldivis"],rawOffsetInMinutes:480,abbreviation:"AWST",rawFormat:"+08:00 Australian Western Time - Perth, Mandurah, Bunbury, Baldivis"},{name:"Asia/Brunei",alternativeName:"Brunei Darussalam Time",group:["Asia/Brunei"],continentCode:"AS",continentName:"Asia",countryName:"Brunei",countryCode:"BN",mainCities:["Bandar Seri Begawan","Sengkurong","Mentiri","Kuala Belait"],rawOffsetInMinutes:480,abbreviation:"BNT",rawFormat:"+08:00 Brunei Darussalam Time - Bandar Seri Begawan, Sengkurong, Mentiri, Kuala Belait"},{name:"Asia/Makassar",alternativeName:"Central Indonesia Time",group:["Asia/Makassar","Asia/Ujung_Pandang"],continentCode:"AS",continentName:"Asia",countryName:"Indonesia",countryCode:"ID",mainCities:["Makassar","Samarinda","Denpasar","Balikpapan"],rawOffsetInMinutes:480,abbreviation:"WITA",rawFormat:"+08:00 Central Indonesia Time - Makassar, Samarinda, Denpasar, Balikpapan"},{name:"Asia/Macau",alternativeName:"China Time",group:["Asia/Macau","Asia/Macao"],continentCode:"AS",continentName:"Asia",countryName:"Macao",countryCode:"MO",mainCities:["Macau","Taipa","Luhuan","Lai Chi Van"],rawOffsetInMinutes:480,abbreviation:"CST",rawFormat:"+08:00 China Time - Macau, Taipa, Luhuan, Lai Chi Van"},{name:"Asia/Shanghai",alternativeName:"China Time",group:["Asia/Shanghai","PRC","Asia/Chongqing","Asia/Harbin","Asia/Chungking"],continentCode:"AS",continentName:"Asia",countryName:"China",countryCode:"CN",mainCities:["Shanghai","Beijing","Shenzhen","Guangzhou"],rawOffsetInMinutes:480,abbreviation:"CST",rawFormat:"+08:00 China Time - Shanghai, Beijing, Shenzhen, Guangzhou"},{name:"Asia/Hong_Kong",alternativeName:"Hong Kong Time",group:["Asia/Hong_Kong","Hongkong"],continentCode:"AS",continentName:"Asia",countryName:"Hong Kong",countryCode:"HK",mainCities:["Hong Kong","New Territories","Kowloon","Hong Kong Island"],rawOffsetInMinutes:480,abbreviation:"HKT",rawFormat:"+08:00 Hong Kong Time - Hong Kong, New Territories, Kowloon, Hong Kong Island"},{name:"Asia/Irkutsk",alternativeName:"Irkutsk Time",group:["Asia/Irkutsk"],continentCode:"EU",continentName:"Europe",countryName:"Russia",countryCode:"RU",mainCities:["Irkutsk","Ulan-Ude","Bratsk","Angarsk"],rawOffsetInMinutes:480,abbreviation:"IRKT",rawFormat:"+08:00 Irkutsk Time - Irkutsk, Ulan-Ude, Bratsk, Angarsk"},{name:"Asia/Kuala_Lumpur",alternativeName:"Malaysia Time",group:["Asia/Kuala_Lumpur","Asia/Kuching","Asia/Brunei"],continentCode:"AS",continentName:"Asia",countryName:"Malaysia",countryCode:"MY",mainCities:["Kuala Lumpur","Petaling Jaya","Klang","Johor Bahru"],rawOffsetInMinutes:480,abbreviation:"MYT",rawFormat:"+08:00 Malaysia Time - Kuala Lumpur, Petaling Jaya, Klang, Johor Bahru"},{name:"Asia/Manila",alternativeName:"Philippine Time",group:["Asia/Manila"],continentCode:"AS",continentName:"Asia",countryName:"Philippines",countryCode:"PH",mainCities:["Quezon City","Davao","Manila","Caloocan City"],rawOffsetInMinutes:480,abbreviation:"PHT",rawFormat:"+08:00 Philippine Time - Quezon City, Davao, Manila, Caloocan City"},{name:"Asia/Singapore",alternativeName:"Singapore Time",group:["Asia/Singapore","Singapore","Asia/Kuala_Lumpur"],continentCode:"AS",continentName:"Asia",countryName:"Singapore",countryCode:"SG",mainCities:["Singapore","Ulu Bedok","Bedok New Town","Tampines Estate"],rawOffsetInMinutes:480,abbreviation:"SGT",rawFormat:"+08:00 Singapore Time - Singapore, Ulu Bedok, Bedok New Town, Tampines Estate"},{name:"Asia/Taipei",alternativeName:"Taipei Time",group:["Asia/Taipei","ROC"],continentCode:"AS",continentName:"Asia",countryName:"Taiwan",countryCode:"TW",mainCities:["Taipei","Kaohsiung","Taichung","Tainan"],rawOffsetInMinutes:480,abbreviation:"TWT",rawFormat:"+08:00 Taipei Time - Taipei, Kaohsiung, Taichung, Tainan"},{name:"Asia/Ulaanbaatar",alternativeName:"Ulaanbaatar Time",group:["Asia/Choibalsan","Asia/Ulaanbaatar","Asia/Ulan_Bator"],continentCode:"AS",continentName:"Asia",countryName:"Mongolia",countryCode:"MN",mainCities:["Ulan Bator","Erdenet","Darhan","M\xf6r\xf6n"],rawOffsetInMinutes:480,abbreviation:"ULAT",rawFormat:"+08:00 Ulaanbaatar Time - Ulan Bator, Erdenet, Darhan, M\xf6r\xf6n"},{name:"Australia/Eucla",alternativeName:"Australian Central Western Time",group:["Australia/Eucla"],continentCode:"OC",continentName:"Oceania",countryName:"Australia",countryCode:"AU",mainCities:["Eucla"],rawOffsetInMinutes:525,abbreviation:"ACWST",rawFormat:"+08:45 Australian Central Western Time - Eucla"},{name:"Asia/Dili",alternativeName:"East Timor Time",group:["Asia/Dili"],continentCode:"OC",continentName:"Oceania",countryName:"Timor Leste",countryCode:"TL",mainCities:["Dili","Maliana","Suai","Likis\xe1"],rawOffsetInMinutes:540,abbreviation:"TLT",rawFormat:"+09:00 East Timor Time - Dili, Maliana, Suai, Likis\xe1"},{name:"Asia/Jayapura",alternativeName:"Eastern Indonesia Time",group:["Asia/Jayapura"],continentCode:"AS",continentName:"Asia",countryName:"Indonesia",countryCode:"ID",mainCities:["Jayapura","Ambon","Sorong","Ternate"],rawOffsetInMinutes:540,abbreviation:"WIT",rawFormat:"+09:00 Eastern Indonesia Time - Jayapura, Ambon, Sorong, Ternate"},{name:"Asia/Tokyo",alternativeName:"Japan Time",group:["Asia/Tokyo","Japan"],continentCode:"AS",continentName:"Asia",countryName:"Japan",countryCode:"JP",mainCities:["Tokyo","Yokohama","Osaka","Nagoya"],rawOffsetInMinutes:540,abbreviation:"JST",rawFormat:"+09:00 Japan Time - Tokyo, Yokohama, Osaka, Nagoya"},{name:"Asia/Pyongyang",alternativeName:"Korean Time",group:["Asia/Pyongyang"],continentCode:"AS",continentName:"Asia",countryName:"North Korea",countryCode:"KP",mainCities:["Pyongyang","Hamhŭng","Namp’o","Sunch’ŏn"],rawOffsetInMinutes:540,abbreviation:"KST",rawFormat:"+09:00 Korean Time - Pyongyang, Hamhŭng, Namp’o, Sunch’ŏn"},{name:"Asia/Seoul",alternativeName:"Korean Time",group:["Asia/Seoul","ROK"],continentCode:"AS",continentName:"Asia",countryName:"South Korea",countryCode:"KR",mainCities:["Seoul","Busan","Incheon","Daegu"],rawOffsetInMinutes:540,abbreviation:"KST",rawFormat:"+09:00 Korean Time - Seoul, Busan, Incheon, Daegu"},{name:"Pacific/Palau",alternativeName:"Palau Time",group:["Pacific/Palau"],continentCode:"OC",continentName:"Oceania",countryName:"Palau",countryCode:"PW",mainCities:["Ngerulmud"],rawOffsetInMinutes:540,abbreviation:"PWT",rawFormat:"+09:00 Palau Time - Ngerulmud"},{name:"Asia/Chita",alternativeName:"Yakutsk Time",group:["Asia/Chita","Asia/Khandyga","Asia/Yakutsk"],continentCode:"EU",continentName:"Europe",countryName:"Russia",countryCode:"RU",mainCities:["Chita","Yakutsk","Blagoveshchensk","Belogorsk"],rawOffsetInMinutes:540,abbreviation:"YAKT",rawFormat:"+09:00 Yakutsk Time - Chita, Yakutsk, Blagoveshchensk, Belogorsk"},{name:"Australia/Adelaide",alternativeName:"Australian Central Time",group:["Australia/Adelaide","Australia/Broken_Hill","Australia/South","Australia/Yancowinna"],continentCode:"OC",continentName:"Oceania",countryName:"Australia",countryCode:"AU",mainCities:["Adelaide","Adelaide Hills","Mount Gambier","Morphett Vale"],rawOffsetInMinutes:570,abbreviation:"ACST",rawFormat:"+09:30 Australian Central Time - Adelaide, Adelaide Hills, Mount Gambier, Morphett Vale"},{name:"Australia/Darwin",alternativeName:"Australian Central Time",group:["Australia/Darwin","Australia/North"],continentCode:"OC",continentName:"Oceania",countryName:"Australia",countryCode:"AU",mainCities:["Darwin","Alice Springs","Palmerston"],rawOffsetInMinutes:570,abbreviation:"ACST",rawFormat:"+09:30 Australian Central Time - Darwin, Alice Springs, Palmerston"},{name:"Australia/Brisbane",alternativeName:"Australian Eastern Time",group:["Australia/Brisbane","Australia/Lindeman","Australia/Queensland"],continentCode:"OC",continentName:"Oceania",countryName:"Australia",countryCode:"AU",mainCities:["Brisbane","Gold Coast","Logan City","Townsville"],rawOffsetInMinutes:600,abbreviation:"AEST",rawFormat:"+10:00 Australian Eastern Time - Brisbane, Gold Coast, Logan City, Townsville"},{name:"Australia/Sydney",alternativeName:"Australian Eastern Time",group:["Antarctica/Macquarie","Australia/Hobart","Australia/Melbourne","Australia/Sydney","Australia/Tasmania","Australia/Currie","Australia/Victoria","Australia/ACT","Australia/NSW","Australia/Canberra"],continentCode:"OC",continentName:"Oceania",countryName:"Australia",countryCode:"AU",mainCities:["Sydney","Melbourne","Canberra","Newcastle"],rawOffsetInMinutes:600,abbreviation:"AEST",rawFormat:"+10:00 Australian Eastern Time - Sydney, Melbourne, Canberra, Newcastle"},{name:"Pacific/Guam",alternativeName:"Chamorro Time",group:["Pacific/Guam","Pacific/Saipan"],continentCode:"OC",continentName:"Oceania",countryName:"Guam",countryCode:"GU",mainCities:["Dededo Village","Yigo Village","Tamuning-Tumon-Harmon Village","Tamuning"],rawOffsetInMinutes:600,abbreviation:"ChST",rawFormat:"+10:00 Chamorro Time - Dededo Village, Yigo Village, Tamuning-Tumon-Harmon Village, Tamuning"},{name:"Pacific/Saipan",alternativeName:"Chamorro Time",group:["Pacific/Saipan"],continentCode:"OC",continentName:"Oceania",countryName:"Northern Mariana Islands",countryCode:"MP",mainCities:["Saipan"],rawOffsetInMinutes:600,abbreviation:"ChST",rawFormat:"+10:00 Chamorro Time - Saipan"},{name:"Pacific/Chuuk",alternativeName:"Chuuk Time",group:["Pacific/Chuuk","Pacific/Truk","Pacific/Yap"],continentCode:"OC",continentName:"Oceania",countryName:"Micronesia",countryCode:"FM",mainCities:["Chuuk"],rawOffsetInMinutes:600,abbreviation:"CHUT",rawFormat:"+10:00 Chuuk Time - Chuuk"},{name:"Antarctica/DumontDUrville",alternativeName:"Dumont-d’Urville Time",group:["Antarctica/DumontDUrville"],continentCode:"AN",continentName:"Antarctica",countryName:"Antarctica",countryCode:"AQ",mainCities:["DumontDUrville"],rawOffsetInMinutes:600,abbreviation:"DDUT",rawFormat:"+10:00 Dumont-d’Urville Time - DumontDUrville"},{name:"Pacific/Port_Moresby",alternativeName:"Papua New Guinea Time",group:["Pacific/Port_Moresby","Antarctica/DumontDUrville","Pacific/Chuuk","Pacific/Yap","Pacific/Truk"],continentCode:"OC",continentName:"Oceania",countryName:"Papua New Guinea",countryCode:"PG",mainCities:["Port Moresby","Lae","Mount Hagen","Popondetta"],rawOffsetInMinutes:600,abbreviation:"PGT",rawFormat:"+10:00 Papua New Guinea Time - Port Moresby, Lae, Mount Hagen, Popondetta"},{name:"Asia/Vladivostok",alternativeName:"Vladivostok Time",group:["Asia/Ust-Nera","Asia/Vladivostok"],continentCode:"EU",continentName:"Europe",countryName:"Russia",countryCode:"RU",mainCities:["Khabarovsk","Vladivostok","Khabarovsk Vtoroy","Komsomolsk-on-Amur"],rawOffsetInMinutes:600,abbreviation:"VLAT",rawFormat:"+10:00 Vladivostok Time - Khabarovsk, Vladivostok, Khabarovsk Vtoroy, Komsomolsk-on-Amur"},{name:"Australia/Lord_Howe",alternativeName:"Lord Howe Time",group:["Australia/Lord_Howe","Australia/LHI"],continentCode:"OC",continentName:"Oceania",countryName:"Australia",countryCode:"AU",mainCities:["Lord Howe"],rawOffsetInMinutes:630,abbreviation:"LHST",rawFormat:"+10:30 Lord Howe Time - Lord Howe"},{name:"Pacific/Bougainville",alternativeName:"Bougainville Time",group:["Pacific/Bougainville"],continentCode:"OC",continentName:"Oceania",countryName:"Papua New Guinea",countryCode:"PG",mainCities:["Arawa"],rawOffsetInMinutes:660,abbreviation:"BST",rawFormat:"+11:00 Bougainville Time - Arawa"},{name:"Pacific/Kosrae",alternativeName:"Kosrae Time",group:["Pacific/Kosrae","Pacific/Pohnpei"],continentCode:"OC",continentName:"Oceania",countryName:"Micronesia",countryCode:"FM",mainCities:["Kosrae","Palikir - National Government Center"],rawOffsetInMinutes:660,abbreviation:"KOST",rawFormat:"+11:00 Kosrae Time - Kosrae, Palikir - National Government Center"},{name:"Pacific/Noumea",alternativeName:"New Caledonia Time",group:["Pacific/Noumea"],continentCode:"OC",continentName:"Oceania",countryName:"New Caledonia",countryCode:"NC",mainCities:["Noum\xe9a","Mont-Dore","Dumb\xe9a"],rawOffsetInMinutes:660,abbreviation:"NCT",rawFormat:"+11:00 New Caledonia Time - Noum\xe9a, Mont-Dore, Dumb\xe9a"},{name:"Pacific/Norfolk",alternativeName:"Norfolk Island Time",group:["Pacific/Norfolk"],continentCode:"OC",continentName:"Oceania",countryName:"Norfolk Island",countryCode:"NF",mainCities:["Kingston"],rawOffsetInMinutes:660,abbreviation:"NFT",rawFormat:"+11:00 Norfolk Island Time - Kingston"},{name:"Asia/Sakhalin",alternativeName:"Sakhalin Time",group:["Asia/Magadan","Asia/Sakhalin","Asia/Srednekolymsk"],continentCode:"EU",continentName:"Europe",countryName:"Russia",countryCode:"RU",mainCities:["Yuzhno-Sakhalinsk","Magadan","Korsakov","Kholmsk"],rawOffsetInMinutes:660,abbreviation:"SAKT",rawFormat:"+11:00 Sakhalin Time - Yuzhno-Sakhalinsk, Magadan, Korsakov, Kholmsk"},{name:"Pacific/Guadalcanal",alternativeName:"Solomon Islands Time",group:["Pacific/Guadalcanal","Pacific/Pohnpei","Pacific/Ponape"],continentCode:"OC",continentName:"Oceania",countryName:"Solomon Islands",countryCode:"SB",mainCities:["Honiara"],rawOffsetInMinutes:660,abbreviation:"SBT",rawFormat:"+11:00 Solomon Islands Time - Honiara"},{name:"Pacific/Efate",alternativeName:"Vanuatu Time",group:["Pacific/Efate"],continentCode:"OC",continentName:"Oceania",countryName:"Vanuatu",countryCode:"VU",mainCities:["Port-Vila"],rawOffsetInMinutes:660,abbreviation:"VUT",rawFormat:"+11:00 Vanuatu Time - Port-Vila"},{name:"Pacific/Fiji",alternativeName:"Fiji Time",group:["Pacific/Fiji"],continentCode:"OC",continentName:"Oceania",countryName:"Fiji",countryCode:"FJ",mainCities:["Nasinu","Suva","Lautoka","Nadi"],rawOffsetInMinutes:720,abbreviation:"FJT",rawFormat:"+12:00 Fiji Time - Nasinu, Suva, Lautoka, Nadi"},{name:"Pacific/Tarawa",alternativeName:"Gilbert Islands Time",group:["Pacific/Tarawa","Pacific/Funafuti","Pacific/Majuro","Pacific/Wake","Pacific/Wallis"],continentCode:"OC",continentName:"Oceania",countryName:"Kiribati",countryCode:"KI",mainCities:["Tarawa"],rawOffsetInMinutes:720,abbreviation:"GILT",rawFormat:"+12:00 Gilbert Islands Time - Tarawa"},{name:"Pacific/Majuro",alternativeName:"Marshall Islands Time",group:["Pacific/Kwajalein","Pacific/Majuro","Kwajalein"],continentCode:"OC",continentName:"Oceania",countryName:"Marshall Islands",countryCode:"MH",mainCities:["Majuro","Kwajalein","RMI Capitol"],rawOffsetInMinutes:720,abbreviation:"MHT",rawFormat:"+12:00 Marshall Islands Time - Majuro, Kwajalein, RMI Capitol"},{name:"Pacific/Nauru",alternativeName:"Nauru Time",group:["Pacific/Nauru"],continentCode:"OC",continentName:"Oceania",countryName:"Nauru",countryCode:"NR",mainCities:["Yaren"],rawOffsetInMinutes:720,abbreviation:"NRT",rawFormat:"+12:00 Nauru Time - Yaren"},{name:"Pacific/Auckland",alternativeName:"New Zealand Time",group:["Pacific/Auckland","NZ","Antarctica/McMurdo","Antarctica/South_Pole"],continentCode:"OC",continentName:"Oceania",countryName:"New Zealand",countryCode:"NZ",mainCities:["Auckland","Wellington","Christchurch","Manukau City"],rawOffsetInMinutes:720,abbreviation:"NZST",rawFormat:"+12:00 New Zealand Time - Auckland, Wellington, Christchurch, Manukau City"},{name:"Antarctica/McMurdo",alternativeName:"New Zealand Time",group:["Antarctica/McMurdo"],continentCode:"AN",continentName:"Antarctica",countryName:"Antarctica",countryCode:"AQ",mainCities:["McMurdo"],rawOffsetInMinutes:720,abbreviation:"NZST",rawFormat:"+12:00 New Zealand Time - McMurdo"},{name:"Asia/Kamchatka",alternativeName:"Petropavlovsk-Kamchatski Time",group:["Asia/Anadyr","Asia/Kamchatka"],continentCode:"EU",continentName:"Europe",countryName:"Russia",countryCode:"RU",mainCities:["Petropavlovsk-Kamchatsky","Yelizovo","Vilyuchinsk","Anadyr"],rawOffsetInMinutes:720,abbreviation:"PETT",rawFormat:"+12:00 Petropavlovsk-Kamchatski Time - Petropavlovsk-Kamchatsky, Yelizovo, Vilyuchinsk, Anadyr"},{name:"Pacific/Funafuti",alternativeName:"Tuvalu Time",group:["Pacific/Funafuti"],continentCode:"OC",continentName:"Oceania",countryName:"Tuvalu",countryCode:"TV",mainCities:["Funafuti"],rawOffsetInMinutes:720,abbreviation:"TVT",rawFormat:"+12:00 Tuvalu Time - Funafuti"},{name:"Pacific/Wake",alternativeName:"Wake Island Time",group:["Pacific/Wake"],continentCode:"OC",continentName:"Oceania",countryName:"United States Minor Outlying Islands",countryCode:"UM",mainCities:["Wake"],rawOffsetInMinutes:720,abbreviation:"WAKT",rawFormat:"+12:00 Wake Island Time - Wake"},{name:"Pacific/Wallis",alternativeName:"Wallis & Futuna Time",group:["Pacific/Wallis"],continentCode:"OC",continentName:"Oceania",countryName:"Wallis and Futuna",countryCode:"WF",mainCities:["Mata-Utu"],rawOffsetInMinutes:720,abbreviation:"WFT",rawFormat:"+12:00 Wallis & Futuna Time - Mata-Utu"},{name:"Pacific/Chatham",alternativeName:"Chatham Time",group:["Pacific/Chatham","NZ-CHAT"],continentCode:"OC",continentName:"Oceania",countryName:"New Zealand",countryCode:"NZ",mainCities:["Chatham"],rawOffsetInMinutes:765,abbreviation:"CHAST",rawFormat:"+12:45 Chatham Time - Chatham"},{name:"Pacific/Apia",alternativeName:"Apia Time",group:["Pacific/Apia"],continentCode:"OC",continentName:"Oceania",countryName:"Samoa",countryCode:"WS",mainCities:["Apia"],rawOffsetInMinutes:780,abbreviation:"WST",rawFormat:"+13:00 Apia Time - Apia"},{name:"Pacific/Kanton",alternativeName:"Phoenix Islands Time",group:["Pacific/Kanton","Pacific/Enderbury"],continentCode:"OC",continentName:"Oceania",countryName:"Kiribati",countryCode:"KI",mainCities:["Kanton"],rawOffsetInMinutes:780,abbreviation:"PHOT",rawFormat:"+13:00 Phoenix Islands Time - Kanton"},{name:"Pacific/Fakaofo",alternativeName:"Tokelau Time",group:["Pacific/Fakaofo"],continentCode:"OC",continentName:"Oceania",countryName:"Tokelau",countryCode:"TK",mainCities:["Fakaofo"],rawOffsetInMinutes:780,abbreviation:"TKT",rawFormat:"+13:00 Tokelau Time - Fakaofo"},{name:"Pacific/Tongatapu",alternativeName:"Tonga Time",group:["Pacific/Tongatapu"],continentCode:"OC",continentName:"Oceania",countryName:"Tonga",countryCode:"TO",mainCities:["Nuku‘alofa"],rawOffsetInMinutes:780,abbreviation:"TOT",rawFormat:"+13:00 Tonga Time - Nuku‘alofa"},{name:"Pacific/Kiritimati",alternativeName:"Line Islands Time",group:["Pacific/Kiritimati"],continentCode:"OC",continentName:"Oceania",countryName:"Kiribati",countryCode:"KI",mainCities:["Kiritimati"],rawOffsetInMinutes:840,abbreviation:"LINT",rawFormat:"+14:00 Line Islands Time - Kiritimati"}].reduce(function(e,t){let n=function(e){var t;let n,i;if(!(e&&e.match(EY)))return!1;let a=new Date(Date.now());try{n=new Intl.DateTimeFormat("en-US",{hourCycle:"h23",timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"})}catch{return!1}let[r,o,s,l,c,d]=n.formatToParts?function(e,t){let n=e.formatToParts(t),i=[];for(let e=0;e<n.length;e++){let{type:t,value:a}=n[e],r=EJ[t];"u">typeof r&&(i[r]=parseInt(a,10))}return i}(n,a):function(e,t){let n=e.format(t).replace(/\u200E/g,""),[,i,a,r,o,s,l]=/(\d+)\/(\d+)\/(\d+),? (\d+):(\d+):(\d+)/.exec(n);return[r,i,a,o,s,l]}(n,a),u=(i=Date.UTC((t={year:r,month:o,day:s,hour:l,minute:c,second:d,millisecond:0}).year,t.month-1,t.day,t.hour,t.minute,t.second,t.millisecond),t.year<100&&t.year>=0&&(i=new Date(i)).setUTCFullYear(i.getUTCFullYear()-1900),+i),p=+a,m=p%1e3;return(u-(p-=m>=0?m:1e3+m))/6e4}(t.name);if(!1===n)return e;let i={...t,currentTimeOffsetInMinutes:n};return e.push({...i,currentTimeFormat:function({alternativeName:e,mainCities:t,rawOffsetInMinutes:n,currentTimeOffsetInMinutes:i},{useCurrentOffset:a=!1}={}){return`${(function(e){let t=Math.abs(e),[n,i]=[Math.floor(t/60),t%60].map(e=>e.toString().padStart(2,"0")),a=`${n}:${i}`;return`${e>=0?"+":"-"}${a}`})(a?i:n).padStart(6,"+")} ${e} - ${t.join(", ")}`}(i,{useCurrentOffset:!0})}),e},[]).sort((e,t)=>e.currentTimeOffsetInMinutes-t.currentTimeOffsetInMinutes||EX(e.alternativeName,t.alternativeName)||EX(e.mainCities[0],t.mainCities[0])).map(e=>({abbreviation:e.abbreviation,alternativeName:e.alternativeName,mainCities:e.mainCities.join(", "),name:e.name,namePretty:e.name.replaceAll("_"," "),offset:e.currentTimeFormat.split(" ")[0],value:`${e.currentTimeFormat} ${e.abbreviation} ${e.name}`}));function MC(){return Mj.find(e=>e.name===Intl.DateTimeFormat().resolvedOptions().timeZone)||Mj.find(e=>"GMT"===e.abbreviation)||Mj[0]}function Mw(){let e=localStorage.getItem(Eq);try{if(e)return JSON.parse(e)}catch{}return MC()}let Mk=()=>{let e=(0,d.useMemo)(()=>Mw(),[]),[t,n]=(0,d.useState)(e),i=(0,h.pm)();(0,d.useEffect)(()=>{let e=()=>{n(Mw())};return window.addEventListener("timeZoneEventUpdate",e),()=>{window.removeEventListener("timeZoneEventUpdate",e)}},[]);let a=(0,d.useCallback)(({date:e,format:n=EG.LARGE,includeTimeZone:i,prefix:a})=>{let r=n;return a&&(r=`'${a}'${n}`),i&&(r=`${n} (zzzz)`),Mf(e,t.name,r)},[t.name]),r=(0,d.useCallback)(()=>Mh(new Date,t.name),[t.name]),o=(0,d.useCallback)(e=>{Mv("handleNewValue:",e),n(t=>{try{t.name!==e.name&&(localStorage.setItem(Eq,JSON.stringify(e)),window.dispatchEvent(new Event("timeZoneEventUpdate"))),i.push({closable:!0,description:(0,l.jsx)(Mg,{body:`${e.alternativeName} (${e.namePretty})`,title:"Time zone updated"}),duration:15e3,status:"info"})}catch(e){console.error(e),i.push({closable:!0,description:(0,l.jsx)(Mg,{body:Mb(e),title:"Unable to update time zone"}),status:"error"})}return e})},[i]),s=(0,d.useCallback)(e=>Mh(e,t.name),[t.name]),c=(0,d.useCallback)(e=>(function(e,t,n){if("string"==typeof e&&!e.match(Mi)){var i=nl(void 0);return i.timeZone=t,Mr(e,i)}var a=Mr(e,void 0),r=E2(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds()).getTime(),o=E4(t,new Date(r));return new Date(r+o)})(e,t.name),[t.name]);return{formatDateTz:a,getCurrentZoneDate:r,setTimeZone:o,timeZone:t,utcToCurrentZoneDate:s,zoneDateToUtc:c}},MT=j.zo.span(({theme:e})=>(0,j.iv)`
    color: ${e.sanity.color.base.fg};
    font-weight: 500;
    margin-left: 1em;
  `),MA=j.zo.span(({theme:e})=>(0,j.iv)`
    color: ${e.sanity.color.input.default.readOnly.fg};
    margin-left: 1em;
  `),M_=e=>{let{onClose:t}=e,{setTimeZone:n,timeZone:i}=Mk(),[a,r]=(0,d.useState)(i),o=(0,d.useCallback)(e=>{r(Mj.find(t=>t.value===e))},[]),s=(0,d.useCallback)(()=>{r(MC())},[]),c=(0,d.useCallback)(()=>{a&&n(a),t?.()},[t,a,n]),u=a?.name!==i.name,p=(0,d.useMemo)(()=>a?.name===MC().name,[a]),m=(0,d.useCallback)(e=>(0,l.jsx)(h.Zb,{as:"button",padding:3,children:(0,l.jsxs)(h.xv,{size:1,textOverflow:"ellipsis",children:[(0,l.jsxs)("span",{children:["GMT",e.offset]}),(0,l.jsx)(MT,{children:e.alternativeName}),(0,l.jsx)(MA,{children:e.mainCities})]})}),[]),f=(0,d.useCallback)((e,t)=>t?`${t.alternativeName} (${t.namePretty})`:"",[]);return(0,l.jsx)(x.Vq,{footer:{confirmButton:{text:"Update time zone",disabled:!u||!a,onClick:c,tone:"primary"}},header:"Select time zone",id:"time-zone",onClose:t,width:1,children:(0,l.jsxs)(h.Kq,{padding:4,space:5,children:[(0,l.jsx)(h.xv,{size:1,children:"The selected time zone will change how dates are represented in schedules."}),(0,l.jsxs)(h.Kq,{space:3,children:[(0,l.jsxs)(h.kC,{align:"center",justify:"space-between",children:[(0,l.jsxs)(h.gF,{space:2,children:[(0,l.jsx)(h.xv,{size:1,weight:"semibold",children:"Time zone"}),p&&(0,l.jsx)(h.xv,{muted:!0,size:1,children:"local time"})]}),!p&&(0,l.jsx)(h.xv,{size:1,weight:"medium",children:(0,l.jsx)("a",{onClick:s,style:{cursor:"pointer"},children:"Select local time zone"})})]}),(0,l.jsx)(h.F2,{fontSize:2,icon:_.W1M,id:"timezone",onChange:o,openButton:!0,options:Mj,padding:4,placeholder:"Search for a city or time zone",popover:{boundaryElement:document.querySelector("body"),constrainSize:!0,placement:"bottom-start"},renderOption:m,renderValue:f,tabIndex:-1,value:a?.value})]})]})})};function MS(){let[e,t]=(0,d.useState)(!1),n=(0,d.useCallback)(()=>{t(!1)},[]);return{visible:e,show:(0,d.useCallback)(()=>{t(!0)},[]),hide:n}}let ME=e=>{let{useElementQueries:t}=e,{timeZone:n}=Mk(),{DialogTimeZone:i,dialogProps:a,dialogTimeZoneShow:r}=function(){let{visible:e,show:t,hide:n}=MS();return{DialogTimeZone:e?M_:null,dialogProps:{onClose:n,visible:e},dialogTimeZoneShow:t,hide:n}}();return(0,l.jsxs)(l.Fragment,{children:[i&&(0,l.jsx)(i,{...a}),(0,l.jsx)(x.u,{content:`Displaying schedules in ${n.alternativeName} (GMT${n.offset})`,portal:!0,children:(0,l.jsx)("div",{children:t?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(h.xu,{className:"button-small",children:(0,l.jsx)(x.zx,{icon:_.YE8,mode:"bleed",onClick:r,text:`${n.abbreviation}`})}),(0,l.jsx)(h.xu,{className:"button-large",children:(0,l.jsx)(x.zx,{icon:_.YE8,mode:"bleed",onClick:r,text:`${n.alternativeName} (${n.namePretty})`})})]}):(0,l.jsx)(x.zx,{icon:_.YE8,mode:"bleed",onClick:r,text:`${n.alternativeName} (${n.namePretty})`})})})]})},MM=(0,j.zo)(h.iX)`
  .button-small {
    display: block;
  }
  .button-large {
    display: none;
  }

  &[data-eq-min~='2'] {
    .button-small {
      display: none;
    }
    .button-large {
      display: block;
    }
  }
`,MN=()=>{},MI=MN(),Mz=Object,M$=e=>e===MI,MO=e=>"function"==typeof e,MP=(e,t)=>({...e,...t}),MF=e=>MO(e.then),MD=new WeakMap,MR=0,ML=e=>{let t,n;let i=typeof e,a=e&&e.constructor,r=a==Date;if(Mz(e)!==e||r||a==RegExp)t=r?e.toJSON():"symbol"==i?e.toString():"string"==i?JSON.stringify(e):""+e;else{if(t=MD.get(e))return t;if(t=++MR+"~",MD.set(e,t),a==Array){for(t="@",n=0;n<e.length;n++)t+=ML(e[n])+",";MD.set(e,t)}if(a==Mz){t="#";let i=Mz.keys(e).sort();for(;!M$(n=i.pop());)M$(e[n])||(t+=n+":"+ML(e[n])+",");MD.set(e,t)}}return t},MB=new WeakMap,Mq={},MV={},MK="undefined",MU=typeof window!=MK,MZ=typeof document!=MK,MG=()=>MU&&typeof window.requestAnimationFrame!=MK,MH=(e,t)=>{let n=MB.get(e);return[()=>!M$(t)&&e.get(t)||Mq,i=>{if(!M$(t)){let a=e.get(t);t in MV||(MV[t]=a),n[5](t,MP(a,i),a||Mq)}},n[6],()=>!M$(t)&&t in MV?MV[t]:!M$(t)&&e.get(t)||Mq]},MW=!0,[MY,MJ]=MU&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[MN,MN],MX={initFocus:e=>(MZ&&document.addEventListener("visibilitychange",e),MY("focus",e),()=>{MZ&&document.removeEventListener("visibilitychange",e),MJ("focus",e)}),initReconnect:e=>{let t=()=>{MW=!0,e()},n=()=>{MW=!1};return MY("online",t),MY("offline",n),()=>{MJ("online",t),MJ("offline",n)}}},MQ=!d.useId,M0=!MU||"Deno"in window,M1=e=>MG()?window.requestAnimationFrame(e):setTimeout(e,1),M2=M0?d.useEffect:d.useLayoutEffect,M3="u">typeof navigator&&navigator.connection,M4=!M0&&M3&&(["slow-2g","2g"].includes(M3.effectiveType)||M3.saveData),M5=e=>{if(MO(e))try{e=e()}catch{e=""}let t=e;return[e="string"==typeof e?e:(Array.isArray(e)?e.length:e)?ML(e):"",t]},M8=0,M6=()=>++M8;var M7={ERROR_REVALIDATE_EVENT:3,FOCUS_EVENT:0,MUTATE_EVENT:2,RECONNECT_EVENT:1};async function M9(...e){let[t,n,i,a]=e,r=MP({populateCache:!0,throwOnError:!0},"boolean"==typeof a?{revalidate:a}:a||{}),o=r.populateCache,s=r.rollbackOnError,l=r.optimisticData,c=e=>"function"==typeof s?s(e):!1!==s,d=r.throwOnError;if(MO(n)){let e=[];for(let i of t.keys())!/^\$(inf|sub)\$/.test(i)&&n(t.get(i)._k)&&e.push(i);return Promise.all(e.map(u))}return u(n);async function u(n){let[a]=M5(n);if(!a)return;let[s,u]=MH(t,a),[p,m,h,f]=MB.get(t),g=()=>{let e=p[a];return(MO(r.revalidate)?r.revalidate(s().data,n):!1!==r.revalidate)&&(delete h[a],delete f[a],e&&e[0])?e[0](2).then(()=>s().data):s().data};if(e.length<3)return g();let x=i,y,b=M6();m[a]=[b,0];let v=!M$(l),j=s(),C=j.data,w=j._c,k=M$(w)?C:w;if(v&&u({data:l=MO(l)?l(k,C):l,_c:k}),MO(x))try{x=x(k)}catch(e){y=e}if(x&&MF(x)){if(x=await x.catch(e=>{y=e}),b!==m[a][0]){if(y)throw y;return x}y&&v&&c(y)&&(o=!0,u({data:k,_c:MI}))}if(o&&!y&&(MO(o)?u({data:o(x,k),error:MI,_c:MI}):u({data:x,error:MI,_c:MI})),m[a][1]=M6(),Promise.resolve(g()).then(()=>{u({_c:MI})}),y){if(d)throw y;return}return x}}let Ne=(e,t)=>{for(let n in e)e[n][0]&&e[n][0](t)},[Nt,Nn]=((e,t)=>{if(!MB.has(e)){let n=MP(MX,t),i={},a=M9.bind(MI,e),r=MN,o={},s=(e,t)=>{let n=o[e]||[];return o[e]=n,n.push(t),()=>n.splice(n.indexOf(t),1)},l=(t,n,i)=>{e.set(t,n);let a=o[t];if(a)for(let e of a)e(n,i)},c=()=>{if(!MB.has(e)&&(MB.set(e,[i,{},{},{},a,l,s]),!M0)){let t=n.initFocus(setTimeout.bind(MI,Ne.bind(MI,i,0))),a=n.initReconnect(setTimeout.bind(MI,Ne.bind(MI,i,1)));r=()=>{t&&t(),a&&a(),MB.delete(e)}}};return c(),[e,a,c,r]}return[e,MB.get(e)[4]]})(new Map),Ni=MP({onLoadingSlow:MN,onSuccess:MN,onError:MN,onErrorRetry:(e,t,n,i,a)=>{let r=n.errorRetryCount,o=a.retryCount,s=~~((Math.random()+.5)*(1<<(o<8?o:8)))*n.errorRetryInterval;!M$(r)&&o>r||setTimeout(i,s,a)},onDiscarded:MN,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:M4?1e4:5e3,focusThrottleInterval:5e3,dedupingInterval:2e3,loadingTimeout:M4?5e3:3e3,compare:(e,t)=>ML(e)==ML(t),isPaused:()=>!1,cache:Nt,mutate:Nn,fallback:{}},{isOnline:()=>MW,isVisible:()=>{let e=MZ&&document.visibilityState;return M$(e)||"hidden"!==e}}),Na=(e,t)=>{let n=MP(e,t);if(t){let{use:i,fallback:a}=e,{use:r,fallback:o}=t;i&&r&&(n.use=i.concat(r)),a&&o&&(n.fallback=MP(a,o))}return n},Nr=(0,d.createContext)({}),No=MU&&window.__SWR_DEVTOOLS_USE__,Ns=No?window.__SWR_DEVTOOLS_USE__:[],Nl=e=>MO(e[1])?[e[0],e[1],e[2]||{}]:[e[0],null,(null===e[1]?e[2]:e[1])||{}],Nc=()=>MP(Ni,(0,d.useContext)(Nr)),Nd=Ns.concat(e=>(t,n,i)=>e(t,n&&((...e)=>{let[i]=M5(t),[,,,a]=MB.get(Nt);if(i.startsWith("$inf$"))return n(...e);let r=a[i];return M$(r)?n(...e):(delete a[i],r)}),i)),Nu=(e,t,n)=>{let i=t[e]||(t[e]=[]);return i.push(n),()=>{let e=i.indexOf(n);e>=0&&(i[e]=i[i.length-1],i.pop())}};No&&(window.__SWR_DEVTOOLS_REACT__=d);let Np=d.use||(e=>{if("pending"===e.status)throw e;if("fulfilled"===e.status)return e.value;throw"rejected"===e.status?e.reason:(e.status="pending",e.then(t=>{e.status="fulfilled",e.value=t},t=>{e.status="rejected",e.reason=t}),e)}),Nm={dedupe:!0},Nh=(o=(e,t,n)=>{let{cache:i,compare:a,suspense:r,fallbackData:o,revalidateOnMount:s,revalidateIfStale:l,refreshInterval:c,refreshWhenHidden:u,refreshWhenOffline:p,keepPreviousData:m}=n,[h,f,g,x]=MB.get(i),[y,b]=M5(e),v=(0,d.useRef)(!1),j=(0,d.useRef)(!1),C=(0,d.useRef)(y),w=(0,d.useRef)(t),k=(0,d.useRef)(n),T=()=>k.current,A=()=>T().isVisible()&&T().isOnline(),[_,S,E,M]=MH(i,y),N=(0,d.useRef)({}).current,I=M$(o)?n.fallback[y]:o,z=(e,t)=>{for(let n in N)if("data"===n){if(!a(e[n],t[n])&&(!M$(e[n])||!a(q,t[n])))return!1}else if(t[n]!==e[n])return!1;return!0},$=(0,d.useMemo)(()=>{let e=!!y&&!!t&&(M$(s)?!T().isPaused()&&!r&&(!!M$(l)||l):s),n=t=>{let n=MP(t);return delete n._k,e?{isValidating:!0,isLoading:!0,...n}:n},i=_(),a=M(),o=n(i),c=i===a?o:n(a),d=o;return[()=>{let e=n(_());return z(e,d)?(d.data=e.data,d.isLoading=e.isLoading,d.isValidating=e.isValidating,d.error=e.error,d):(d=e,e)},()=>c]},[i,y]),O=(0,np.useSyncExternalStore)((0,d.useCallback)(e=>E(y,(t,n)=>{z(n,t)||e()}),[i,y]),$[0],$[1]),P=!v.current,F=h[y]&&h[y].length>0,D=O.data,R=M$(D)?I:D,L=O.error,B=(0,d.useRef)(R),q=m?M$(D)?B.current:D:R,V=(!F||!!M$(L))&&(P&&!M$(s)?s:!T().isPaused()&&(r?!M$(R)&&l:M$(R)||l)),K=!!(y&&t&&P&&V),U=M$(O.isValidating)?K:O.isValidating,Z=M$(O.isLoading)?K:O.isLoading,G=(0,d.useCallback)(async e=>{let t=w.current;if(!y||!t||j.current||T().isPaused())return!1;let i,r,o=!0,s=e||{},l=!g[y]||!s.dedupe,c=()=>MQ?!j.current&&y===C.current&&v.current:y===C.current,d={isValidating:!1,isLoading:!1},u=()=>{S(d)},p=()=>{let e=g[y];e&&e[1]===r&&delete g[y]},m={isValidating:!0};M$(_().data)&&(m.isLoading=!0);try{if(l&&(S(m),n.loadingTimeout&&M$(_().data)&&setTimeout(()=>{o&&c()&&T().onLoadingSlow(y,n)},n.loadingTimeout),g[y]=[t(b),M6()]),[i,r]=g[y],i=await i,l&&setTimeout(p,n.dedupingInterval),!g[y]||g[y][1]!==r)return l&&c()&&T().onDiscarded(y),!1;d.error=MI;let e=f[y];if(!M$(e)&&(r<=e[0]||r<=e[1]||0===e[1]))return u(),l&&c()&&T().onDiscarded(y),!1;let s=_().data;d.data=a(s,i)?s:i,l&&c()&&T().onSuccess(i,y,n)}catch(n){p();let e=T(),{shouldRetryOnError:t}=e;e.isPaused()||(d.error=n,l&&c()&&(e.onError(n,y,e),(!0===t||MO(t)&&t(n))&&(!T().revalidateOnFocus||!T().revalidateOnReconnect||A())&&e.onErrorRetry(n,y,e,e=>{let t=h[y];t&&t[0]&&t[0](M7.ERROR_REVALIDATE_EVENT,e)},{retryCount:(s.retryCount||0)+1,dedupe:!0})))}return o=!1,u(),!0},[y,i]),H=(0,d.useCallback)((...e)=>M9(i,C.current,...e),[]);if(M2(()=>{w.current=t,k.current=n,M$(D)||(B.current=D)}),M2(()=>{if(!y)return;let e=G.bind(MI,Nm),t=0,n=Nu(y,h,(n,i={})=>{if(n==M7.FOCUS_EVENT){let n=Date.now();T().revalidateOnFocus&&n>t&&A()&&(t=n+T().focusThrottleInterval,e())}else if(n==M7.RECONNECT_EVENT)T().revalidateOnReconnect&&A()&&e();else{if(n==M7.MUTATE_EVENT)return G();if(n==M7.ERROR_REVALIDATE_EVENT)return G(i)}});return j.current=!1,C.current=y,v.current=!0,S({_k:b}),V&&(M$(R)||M0?e():M1(e)),()=>{j.current=!0,n()}},[y]),M2(()=>{let e;function t(){let t=MO(c)?c(_().data):c;t&&-1!==e&&(e=setTimeout(n,t))}function n(){!_().error&&(u||T().isVisible())&&(p||T().isOnline())?G(Nm).then(t):t()}return t(),()=>{e&&(clearTimeout(e),e=-1)}},[c,u,p,y]),(0,d.useDebugValue)(q),r&&M$(R)&&y){if(!MQ&&M0)throw Error("Fallback data is required when using suspense in SSR.");w.current=t,k.current=n,j.current=!1;let e=x[y];if(M$(e)||Np(H(e)),M$(L)){let e=G(Nm);M$(q)||(e.status="fulfilled",e.value=!0),Np(e)}else throw L}return{mutate:H,get data(){return N.data=!0,q},get error(){return N.error=!0,L},get isValidating(){return N.isValidating=!0,U},get isLoading(){return N.isLoading=!0,Z}}},function(...e){let t=Nc(),[n,i,a]=Nl(e),r=Na(t,a),s=o,{use:l}=r,c=(l||[]).concat(Nd);for(let e=c.length;e--;)s=c[e](s);return s(n,i||r.fetcher||null,r)});function Nf({children:e}){let{enabled:t,isLoading:n}=Bm("scheduledPublishing"),{scheduledPublishing:i}=dR(),a=i.enabled,r=(0,d.useMemo)(()=>!a||n?{enabled:!1,mode:null}:{enabled:!0,mode:t?"default":"upsell"},[t,n,a]);return(0,l.jsx)(p.Tw.Provider,{value:r,children:e})}function Ng(){let e=(0,d.useContext)(p.Tw);if(!e)throw Error("useScheduledPublishingEnabled must be used within a ScheduledPublishingEnabledProvider");return e}function Nx(e){return e?.executedAt||e?.executeAt}function Ny({reverseOrder:e}={reverseOrder:!1}){return function(t,n){let i=Nx(t),a=Nx(n);return i===a?0:null===i?1:null===a?-1:(i>a?1:-1)*(e?-1:1)}}let Nb=My("useScheduleOperation");var Nv=((s=Nv||{}).create="scheduleCreate",s.delete="scheduleDelete",s.deleteMultiple="scheduleDeleteMultiple",s.publish="schedulePublish",s.update="scheduleUpdate",s);function Nj(e,t){return`${t} ${e}${1===t?"":"s"}`}let NC=(e,t)=>new CustomEvent(e,t);function Nw(){let e=(0,h.pm)(),{formatDateTz:t}=Mk(),n=function(){let e=Bi({apiVersion:"2022-09-01"});return(0,d.useMemo)(()=>(function(e){let{dataset:t,projectId:n}=e.config();function i({scheduleId:i}){return Nb("_delete:",i),e.request({method:"DELETE",uri:`/schedules/${n}/${t}/${i}`})}return{create:function({date:i,documentId:a}){Nb("_create:",a);let r=new Date(i);return r.setSeconds(0),r.setMilliseconds(0),e.request({body:{documents:[{documentId:a}],executeAt:r,name:r},method:"POST",uri:`/schedules/${n}/${t}`})},delete:i,deleteMultiple:function({scheduleIds:e}){return Nb("_deleteMultiple:",e),Promise.allSettled(e.map(e=>i({scheduleId:e})))},publish:function({scheduleId:i}){return Nb("_publish:",i),e.request({method:"POST",uri:`/schedules/${n}/${t}/${i}/publish`})},update:function({documentSchedule:i,scheduleId:a}){return Nb("_update:",a,i),e.request({body:i,method:"PATCH",uri:`/schedules/${n}/${t}/${a}`})}}})(e),[e])}();return{createSchedule:async function({date:i,displayToast:a=!0,documentId:r}){try{let o=await n.create({date:i,documentId:r});window.dispatchEvent(NC("scheduleCreate",{detail:{date:i,documentId:r}})),a&&o?.executeAt&&e.push({closable:!0,description:(0,l.jsx)(Mg,{body:t({date:new Date(o.executeAt),includeTimeZone:!0,prefix:"Publishing on "}),title:"Schedule created"}),duration:15e3,status:"success"})}catch(t){a&&e.push({closable:!0,description:(0,l.jsx)(Mg,{body:Mb(t),title:"Unable to create schedule"}),duration:15e3,status:"error"})}},deleteSchedule:async function({displayToast:t=!0,schedule:i}){try{await n.delete({scheduleId:i?.id}),window.dispatchEvent(NC("scheduleDelete",{detail:{scheduleId:i?.id}})),t&&e.push({closable:!0,description:(0,l.jsx)(Mg,{title:"Schedule deleted"}),status:"success"})}catch(n){t&&e.push({closable:!0,description:(0,l.jsx)(Mg,{body:Mb(n),title:"Unable to delete schedule"}),duration:15e3,status:"error"})}},deleteSchedules:async function({displayToast:t=!0,schedules:i}){try{let a=i.map(e=>e.id),{fulfilledIds:r,rejectedReasons:o}=(await n.deleteMultiple({scheduleIds:a})).reduce((e,t,n)=>("fulfilled"===t.status&&e.fulfilledIds.push(i[n].id),"rejected"===t.status&&e.rejectedReasons.push(`[${i[n].id}]: ${t.reason}`),e),{fulfilledIds:[],rejectedReasons:[]}),s=r.length,c=o.length;r?.length>0&&window.dispatchEvent(NC("scheduleDeleteMultiple",{detail:{scheduleIds:r}})),t&&(r?.length>0&&e.push({closable:!0,description:(0,l.jsx)(Mg,{title:`${Nj("schedule",s)} deleted`}),status:"success"}),o?.length>0&&e.push({closable:!0,description:(0,l.jsx)(Mg,{body:o?.toString(),title:`Unable to delete ${Nj("schedule",c)}`}),duration:15e3,status:"error"}))}catch(n){t&&e.push({closable:!0,description:(0,l.jsx)(Mg,{body:Mb(n),title:"Unable to delete schedules"}),duration:15e3,status:"error"})}},publishSchedule:async function({displayToast:t=!0,schedule:i}){try{let a=i.id;await n.publish({scheduleId:a}),window.dispatchEvent(NC("schedulePublish",{detail:{scheduleId:a}})),t&&e.push({closable:!0,description:(0,l.jsx)(Mg,{title:"Document published"}),status:"success"})}catch(n){t&&e.push({closable:!0,description:(0,l.jsx)(Mg,{body:Mb(n),title:"Unable to publish schedule"}),duration:15e3,status:"error"})}},updateSchedule:async function({date:i,displayToast:a=!0,scheduleId:r}){try{await n.update({documentSchedule:{executeAt:i},scheduleId:r}),window.dispatchEvent(NC("scheduleUpdate",{detail:{date:i,scheduleId:r}})),a&&e.push({closable:!0,description:(0,l.jsx)(Mg,{body:t({date:new Date(i),includeTimeZone:!0,prefix:"Publishing on "}),title:"Schedule updated"}),duration:15e3,status:"success"})}catch(t){a&&e.push({closable:!0,description:(0,l.jsx)(Mg,{body:Mb(t),title:"Unable to update schedule"}),duration:15e3,status:"error"})}}}}let Nk=[];function NT({documentId:e,state:t}={}){let{mode:n}=Ng(),i=(0,d.useMemo)(()=>({refreshWhenHidden:!1,refreshWhenOffline:!1,revalidateOnFocus:!1,shouldRetryOnError:!1,refreshInterval:"default"===n?1e4:void 0,revalidateIfStale:"default"===n,revalidateOnReconnect:"default"===n}),[n]),a=function(){let{dataset:e,projectId:t}=Bi({apiVersion:"2022-09-01"}).config();return`/schedules/${t}/${e}`}(),r=(0,d.useMemo)(()=>({params:{documentIds:e,state:t},url:a}),[a,e,t]),o=function(e){let t=Bi({apiVersion:"2022-09-01"});return(0,d.useCallback)(()=>t.request({query:e.params,method:"GET",uri:e.url}),[t,e])}(r),{data:s,error:l,mutate:c}=Nh(r,o,i),u=(0,d.useCallback)(e=>{c(t=>({schedules:t?.schedules?.filter(t=>t.id!==e.detail.scheduleId)}),!0)},[c]),p=(0,d.useCallback)(e=>{c(t=>({schedules:t?.schedules?.filter(t=>!e.detail.scheduleIds.includes(t.id))}),!0)},[c]),m=(0,d.useCallback)(e=>{c(t=>{let n=t?.schedules||[],i=n.findIndex(t=>t.id===e.detail.scheduleId);return{schedules:[...n.slice(0,i),{...n[i],executeAt:new Date().toISOString(),state:"succeeded"},...n.slice(i+1)]}},!0)},[c]),h=(0,d.useCallback)(e=>{c(t=>{let n=t?.schedules||[],i=n.findIndex(t=>t.id===e.detail.scheduleId);return{schedules:[...n.slice(0,i),{...n[i],executeAt:e.detail.date},...n.slice(i+1)]}},!0)},[c]);(0,d.useEffect)(()=>(window.addEventListener(Nv.delete,u),window.addEventListener(Nv.deleteMultiple,p),window.addEventListener(Nv.publish,m),window.addEventListener(Nv.update,h),()=>{window.removeEventListener(Nv.delete,u),window.removeEventListener(Nv.deleteMultiple,p),window.removeEventListener(Nv.publish,m),window.removeEventListener(Nv.update,h)}),[u,p,m,h]);let f=(0,d.useMemo)(()=>s?.schedules?.sort(Ny()),[s?.schedules]);return{error:l,isInitialLoading:!l&&!s,schedules:f||Nk}}let NA=[];function N_({children:e,value:t}){let[n,i]=(0,d.useState)(t.sortBy||"executeAt"),{utcToCurrentZoneDate:a}=Mk(),r=(0,d.useCallback)(e=>function(t){let n=Nx(t);if(!n)return!1;let i=a(new Date(n));return(0,tx.Z)(i,e)},[a]),o=(0,d.useCallback)(e=>function(t){return t.state===e},[]),s=(0,d.useMemo)(()=>t.schedules.filter(e=>t.selectedDate?r(t.selectedDate)(e):o(t.scheduleState)(e)).sort((e,i)=>"createdAt"===n?e[n]<i[n]?1:-1:"executeAt"===n?Ny({reverseOrder:!("scheduled"===t.scheduleState||t.selectedDate)})(e,i):1)||[],[o,t.schedules,t.scheduleState,t.selectedDate,n,r]),c=(0,d.useCallback)(e=>t.schedules.filter(r(e)).sort(Ny()),[t.schedules,r]),u=(0,d.useMemo)(()=>({activeSchedules:s,schedules:t.schedules||NA,schedulesByDate:c,scheduleState:t.scheduleState,selectedDate:t.selectedDate,setSortBy:i,sortBy:n}),[s,c,n,t.scheduleState,t.schedules,t.selectedDate]);return(0,l.jsx)(p.AC.Provider,{value:u,children:e})}function NS(){let e=(0,d.useContext)(p.AC);if(void 0===e)throw Error("useSchedules must be used within a SchedulesProvider");return e}function NE(e,t){return(0,d.useMemo)(()=>e.filter(e=>e.state===t),[e,t])}let NM=e=>{let{selected:t,schedules:n,state:i}=e,a=NE(n,i).length,r="cancelled"===i,{href:o,onClick:s}=(0,ny.rJ)({state:{state:i}});return(0,l.jsx)(h.zx,{as:"a",href:o,mode:"bleed",onClick:s,selected:t,tone:r?"critical":"default",padding:2,children:(0,l.jsxs)(h.kC,{gap:2,align:"center",children:[(0,l.jsx)(h.xv,{size:1,weight:"medium",children:EK[i].title}),a>0&&(0,l.jsx)(h.xv,{size:0,children:a})]})})},NN=e=>{let{onClearDate:t,selectedDate:n}=e,{navigate:i}=(0,ny.tv)(),{schedules:a,scheduleState:r}=NS(),o=e=>{i(e)},s=NE(a,r);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(h.xu,{display:["block","block","none"],children:[n&&(0,l.jsx)(x.zx,{iconRight:_.Two,onClick:t,text:(0,tI.Z)(n,"d MMMM yyyy"),tone:"primary"}),r&&(0,l.jsx)(x.j2,{button:(0,l.jsx)(x.zx,{iconRight:_.GVG,mode:"ghost",text:`${EK[r].title} (${s?.length||0})`,tone:"default"}),id:"state",menu:(0,l.jsx)(h.v2,{style:{minWidth:"175px"},children:EU.map(e=>(0,l.jsx)(x.sN,{iconRight:e===r?_.KML:void 0,onClick:o.bind(void 0,{state:e}),text:EK[e].title},e))}),placement:"bottom"})]}),(0,l.jsxs)(h.xu,{display:["none","none","block"],children:[n&&(0,l.jsx)(x.zx,{iconRight:_.Two,onClick:t,text:(0,tI.Z)(n,"d MMMM yyyy"),tone:"primary"}),r&&(0,l.jsx)(h.kC,{gap:2,children:EU.map(e=>(0,l.jsx)(NM,{schedules:a,selected:r===e,state:e},e))})]})]})},NI=j.zo.img(e=>{let{media:t}=(0,b.aQ)(e.theme),n=(0,h.Lt)(t,e.$direction,e=>({width:"row"===e?"50%":"100%",height:"row"===e?"auto":"180px"}));return(0,j.iv)`
    object-fit: cover;
    ${n}
  `}),Nz=(0,j.zo)(h.xu)`
  margin: auto 0;
`,N$=[3,3,5];function NO(e){let{data:t,onPrimaryClick:n,onSecondaryClick:i,layout:a="vertical"}=e,r=["column","column","horizontal"===a?"row":"column"];return(0,l.jsx)(h.Zb,{radius:3,overflow:"hidden",border:!0,children:(0,l.jsxs)(h.kC,{direction:r,gap:2,children:[t.image&&(0,l.jsx)(NI,{src:t.image.asset.url,alt:t.image.asset.altText??"",$direction:r}),(0,l.jsxs)(Nz,{paddingX:3,paddingY:"horizontal"===a?N$:3,children:[(0,l.jsx)(h.Kq,{space:4,children:(0,l.jsx)(tX.B_,{blocks:t.descriptionText})}),(0,l.jsxs)(h.kC,{gap:2,justify:"flex-end",marginTop:5,children:[t.secondaryButton.text&&(0,l.jsx)(x.zx,{mode:"bleed",text:t.secondaryButton.text,tone:"primary",iconRight:_.buG,...t.secondaryButton.url&&{target:"_blank",rel:"noopener noreferrer",as:"a",href:t.secondaryButton.url},onClick:i}),(0,l.jsx)(x.zx,{text:t.ctaButton.text,tone:"primary",...t.ctaButton.url&&{target:"_blank",rel:"noopener noreferrer",as:"a",href:t.ctaButton.url},onClick:n})]})]})]})})}function NP(){return AU().projectId}let NF=(0,t4.dS)({name:"Upsell Dialog Viewed",version:1,description:"User viewed the upsell dialog"}),ND=(0,t4.dS)({name:"Upsell Dialog Dismissed",version:1,description:"User dismissed the upsell dialog"}),NR=(0,t4.dS)({name:"Upsell Dialog Upgrade CTA Clicked",version:1,description:'User clicked the "Upgrade" CTA in the upsell dialog'}),NL=(0,t4.dS)({name:"Upsell Dialog Learn More CTA Clicked",version:1,description:'User clicked the "Learn More" CTA in the upsell dialog'}),NB="scheduled_publishing",Nq={interpolate:/{{([\s\S]+?)}}/g},NV="www.sanity.io";function NK(e){let[t,n]=(0,d.useState)(!1),[i,a]=(0,d.useState)(null),r=NP(),o=(0,na.f1)(),s=Bi(rz),c=(0,d.useMemo)(()=>({dialogSecondaryClicked:()=>o.log(NL,{feature:NB,type:"modal"}),dialogPrimaryClicked:()=>o.log(NR,{feature:NB,type:"modal"}),panelViewed:e=>o.log(NF,{feature:NB,type:"inspector",source:e}),panelDismissed:()=>o.log(ND,{feature:NB,type:"inspector"}),panelPrimaryClicked:()=>o.log(NR,{feature:NB,type:"inspector"}),panelSecondaryClicked:()=>o.log(NL,{feature:NB,type:"inspector"})}),[o]),u=(0,d.useCallback)(()=>{c.dialogPrimaryClicked()},[c]),m=(0,d.useCallback)(()=>{c.dialogSecondaryClicked()},[c]),h=(0,d.useCallback)(()=>{n(!1),o.log(ND,{feature:NB,type:"modal"})},[o]);(0,d.useEffect)(()=>{let e=s.observable.request({uri:"/journey/scheduled-publishing"}).subscribe({next:e=>{if(e)try{let t=nQ(e.ctaButton.url,Nq);e.ctaButton.url=t({baseUrl:NV,projectId:r});let n=nQ(e.secondaryButton.url,Nq);e.secondaryButton.url=n({baseUrl:NV,projectId:r}),a(e)}catch{}},error:()=>{}});return()=>{e.unsubscribe()}},[s,r]);let f=(0,d.useCallback)(e=>{n(!0),o.log(NF,{feature:NB,type:"modal",source:e})},[o]),g=(0,d.useMemo)(()=>({upsellDialogOpen:t,handleOpenDialog:f,upsellData:i,telemetryLogs:c}),[f,t,i,c]);return(0,l.jsxs)(p.o_.Provider,{value:g,children:[e.children,i&&t&&(0,l.jsx)(Ei,{data:i,onClose:h,onPrimaryClick:u,onSecondaryClick:m})]})}function NU(){return(0,d.useContext)(p.o_)}let NZ=e=>(0,l.jsxs)("svg",{width:"100",height:"100",viewBox:"0 0 100 100",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,l.jsx)("path",{d:"M54 26C54 28.7614 49.0751 31 43 31C36.9249 31 32 28.7614 32 26C32 23.2386 36.9249 7 43 7C49.0751 7 54 23.2386 54 26Z",stroke:"#7B8CA8",strokeWidth:"1.2"}),(0,l.jsx)("path",{d:"M65 71.5V57M65 71.5L60.5789 69.0132M65 71.5L60.5789 73.9868M65 57L57 52.5L54 54.1875M65 57V42.5M65 57L57 47M65 57L58.1586 60.8483M65 57L60.5789 67.5M65 42.5L57 38L54 39.6875M65 42.5L57 47M65 42.5V27.5M57 47L65 27.5M57 47L54 39.6875M57 47L54 45.3125M57 47L54 50.75M57 23L65 27.5M57 23L54 24.6875V39.6875M57 23V60M65 27.5L57 32L54 30.3125",stroke:"#7B8CA8",strokeWidth:"1.2"}),(0,l.jsx)("path",{d:"M54 76C54 78.7614 49.0751 81 43 81C36.9249 81 32 78.7614 32 76M54 76H60.5V63L54 57M54 76V57M32 76H25V63L32 57M32 76V57M32 26V57M54 26V57M54 45C54 47.7614 49.0751 50 43 50V35C49.0751 35 54 32.7614 54 30",stroke:"#7B8CA8",strokeWidth:"1.2"}),(0,l.jsx)("path",{d:"M43 45.5701H44.8976L45.8465 43.1981L46.9679 42.7335L49.3162 43.7399L50.658 42.3981L49.6516 40.0499L50.1161 38.9284L52.4882 37.9795V36.0819L50.1161 35.1331L49.6516 34.0116M47.1334 34.9653C47.5197 35.5597 47.7441 36.269 47.7441 37.0307C47.7441 39.1268 46.0449 40.826 43.9488 40.826C43.6212 40.826 43.3033 40.7845 43 40.7064",stroke:"#7B8CA8",strokeWidth:"1.2",strokeLinejoin:"round"}),(0,l.jsx)("path",{d:"M63.5464 78.6739L64.9606 78.0321L67.4355 78.5135L68.6174 78.2913L69.6174 77.1566H71.6174L72.6174 78.2913L73.7994 78.5135L76.2743 78.0321L77.6885 78.6739M63.5464 78.6739L64.607 79.7972L64.1174 80.3336L63.5464 80.4373M63.5464 78.6739V80.4373M77.6885 78.6739L76.6278 79.7972L77.1174 80.3336L77.6885 80.4373M77.6885 78.6739V80.4373M63.5464 80.4373L61.6174 80.7875V81.6952L64.1174 82.1491L64.607 82.6855L63.5464 83.8088L64.9606 84.4506L67.4355 83.9693L68.6174 84.1915L69.6174 85.3261H71.6174L72.6174 84.1915L73.7994 83.9693L76.2743 84.4506L77.6885 83.8088L76.6278 82.6855L77.1174 82.1491L79.6174 81.6952V80.7875L77.6885 80.4373",stroke:"#7B8CA8",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,l.jsx)("path",{d:"M79.6174 81.4647V84.7162L77.6885 85.0664M76.2743 87.4716L77.6885 86.8298V85.0664M76.2743 87.4716L73.7994 86.9902L72.6174 87.2124L71.6174 88.3471M76.2743 87.4716V84.7162M61.6174 81.4647V84.7162L63.5464 85.0664M71.6174 88.3471H69.6174M71.6174 88.3471V85.3261M69.6174 88.3471L68.6174 87.2124L67.4355 86.9902L64.9606 87.4716M69.6174 88.3471V85.3261M64.9606 87.4716L64.2535 87.1507L63.5464 86.8298V85.0664M64.9606 87.4716V84.6825M63.5464 84.039V85.0664M77.6885 84.039V85.0664",stroke:"#7B8CA8",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,l.jsx)("path",{d:"M73.6174 81.2412C73.6174 81.9932 72.2743 82.6028 70.6174 82.6028C68.9606 82.6028 67.6174 81.9932 67.6174 81.2412C67.6174 80.4892 68.9606 79.8796 70.6174 79.8796C72.2743 79.8796 73.6174 80.4892 73.6174 81.2412Z",stroke:"#7B8CA8",strokeWidth:"1.2"}),(0,l.jsx)("path",{d:"M90 85.3616C90 86.1136 88.6569 86.7232 87 86.7232C85.3431 86.7232 84 86.1136 84 85.3616M90 85.3616C90 84.6096 88.6569 84 87 84C85.3431 84 84 84.6096 84 85.3616M90 85.3616V87.3616C90 88.1136 88.6569 88.7232 87 88.7232C85.3431 88.7232 84 88.1136 84 87.3616V85.3616",stroke:"#7B8CA8",strokeWidth:"1.2"}),(0,l.jsx)("path",{d:"M82 89.8648C82 90.3425 81.3284 90.7297 80.5 90.7297C79.6716 90.7297 79 90.3425 79 89.8648M82 89.8648C82 89.3872 81.3284 89 80.5 89C79.6716 89 79 89.3872 79 89.8648M82 89.8648V91.1352C82 91.6128 81.3284 92 80.5 92C79.6716 92 79 91.6128 79 91.1352V89.8648",stroke:"#7B8CA8",strokeWidth:"1.2"}),(0,l.jsx)("path",{d:"M52.7555 46.7289L52.5381 45.0136L51.2951 44.6903L50.2695 46.0824L49.4558 46.1956L48.0892 45.1364L46.9817 45.7867L47.2408 47.4962L46.7455 48.1517L45.0302 48.3691L44.7069 49.612M51.1084 47.9593C49.8968 47.6442 48.6622 48.2485 48.1434 49.3385",stroke:"#7B8CA8",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,l.jsx)("path",{d:"M39 80.5L38 83.5C38 84.8807 40.2386 86 43 86C45.7614 86 48 84.8807 48 83.5L47 80.5",stroke:"#7B8CA8",strokeWidth:"1.2"}),(0,l.jsx)("path",{d:"M32 77L31 80C31 81.3807 33.2386 82.5 36 82.5C36.9107 82.5 37.7646 82.3783 38.5 82.1655",stroke:"#7B8CA8",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round"}),(0,l.jsx)("path",{d:"M54 77L55 80C55 81.3807 52.7614 82.5 50 82.5C49.0893 82.5 48.2354 82.3783 47.5 82.1655",stroke:"#7B8CA8",strokeWidth:"1.2",strokeLinecap:"round",strokeLinejoin:"round"})]}),NG=e=>(0,l.jsxs)("svg",{width:"100",height:"100",viewBox:"0 0 100 100",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,l.jsx)("path",{d:"M35 84.5L41.7308 67H50V69.5M65 84.5L58.2692 67M32 65H42.5H50H57.5H81V23H19V65H24",stroke:"#7B8CA8",strokeWidth:"1.2"}),(0,l.jsx)("path",{d:"M84 16V23H16V16M84 16H16M84 16L82 14H18L16 16",stroke:"#7B8CA8",strokeWidth:"1.2"}),(0,l.jsx)("path",{d:"M24 65H18L17 67H83L82 65H32",stroke:"#7B8CA8",strokeWidth:"1.2"}),(0,l.jsx)("circle",{cx:"50",cy:"72",r:"2",stroke:"#7B8CA8",strokeWidth:"1.2"}),(0,l.jsx)("path",{d:"M24 63C24 61.8954 24.8954 61 26 61H30C31.1046 61 32 61.8954 32 63V67H24V63Z",stroke:"#7B8CA8",strokeWidth:"1.2"}),(0,l.jsx)("path",{d:"M24 65C24 63.8954 24.8954 63 26 63H30C31.1046 63 32 63.8954 32 65V67H24V65Z",stroke:"#7B8CA8",strokeWidth:"1.2"}),(0,l.jsx)("path",{d:"M28 44.9975C31.0617 44.62 33.5601 42.4793 35.2478 39.995C36.199 38.5947 36.9116 37.0761 36.9653 35.3597C36.9973 34.3355 36.8332 33.1459 35.8944 32.5454C35.3035 32.1675 34.4935 32.0285 33.8044 32.0022C32.7788 31.9631 32.1643 32.4357 31.8489 33.4197C30.3123 38.2145 33.0184 42.7025 36.3911 45.8977C38.1152 47.531 40.0746 48.9275 42.1179 50.1294C43.9867 51.2287 46.003 52.2595 48.1189 52.7885C48.9466 52.9954 50.4951 53.3913 51.3211 52.954C52.3579 52.4051 51.8285 49.7323 51.7091 48.9809C51.3862 46.9486 50.7293 45.0311 49.8726 43.1662C49.3791 42.0918 48.7948 40.8004 47.9999 39.8967C47.4959 39.3237 47.1331 39.4889 47.1101 40.2278C47.0699 41.5204 47.5768 42.7535 48.3103 43.7973C50.633 47.1024 54.4924 49.4656 58.2792 50.6985C59.9643 51.2471 61.8953 51.7306 63.6853 51.6193C65.3845 51.5137 65.6225 50.1321 65.7287 48.655C65.9958 44.9405 64.9629 40.7695 62.6403 37.7963C61.615 36.4839 60.3547 35.6334 58.6879 35.4476C57.7554 35.3437 56.665 35.3303 55.7391 35.5097C54.8073 35.6903 54.0162 36.297 54.3371 37.3462C54.6464 38.3572 55.8044 39.0666 56.6444 39.5759C57.983 40.3876 59.4813 40.9898 61.0262 41.2624C63.2658 41.6576 65.1745 41.1715 67.141 40.1346C67.9966 39.6835 68.8825 39.1795 69.4379 38.3861",stroke:"#7B8CA8",strokeWidth:"1.2"})]}),NH=e=>(0,l.jsxs)("svg",{width:"100",height:"100",viewBox:"0 0 100 100",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,l.jsx)("path",{d:"M35.5034 34.5961C35.6531 34.1763 35.8628 33.792 36.1352 33.4478C37.6813 31.4827 40.9503 31.2145 44.9898 32.3554M35.5034 34.5961L24.12 78.5806C23.4656 81.1092 26.1309 83.2083 28.4357 81.9796L68.4485 60.6484M35.5034 34.5961C34.2315 38.1622 37.2902 44.2842 43.0792 50.0342M68.4485 60.6484C68.8174 60.4078 69.1391 60.118 69.4084 59.7777C70.9736 57.7883 70.4521 54.4677 68.3472 50.7308M68.4485 60.6484C65.1795 62.7806 58.1999 61.0522 51.0413 56.4338M49.3164 55.2667C48.6043 54.7622 47.8933 54.2299 47.1867 53.6707C46.3331 52.9953 45.5161 52.3044 44.7387 51.6037M49.3164 55.2667C49.8913 55.674 50.4669 56.0632 51.0413 56.4338M49.3164 55.2667C52.3445 53.1871 58.7283 49.8329 66.4965 47.8874M51.0413 56.4338C55.9305 53.432 62.4593 51.6876 68.3472 50.7308M43.0792 50.0342C43.6098 50.5612 44.1634 51.0852 44.7387 51.6037M43.0792 50.0342C44.4006 45.7138 45.8116 38.387 44.9898 32.3554M44.7387 51.6037C47.6743 44.2968 48.7135 38.3712 48.6643 33.6916M63.9622 36.487C63.2905 34.23 62.35 29.5386 63.9622 28.8293C65.9774 27.9426 68.5569 33.5045 70.8139 32.2148C73.0709 30.9251 69.4435 27.7814 70.8139 25.2019C72.1842 22.6224 79.6002 28.4262 81.2123 23.4285C82.502 19.4304 79.7614 16.6574 78.2298 15.7708M66.4965 47.8874C70.7697 46.8171 75.462 46.1731 80.2449 46.4019L80.2449 49.7068C77.5329 49.6936 73.1535 49.9498 68.3472 50.7308M66.4965 47.8874C64.45 45.1054 61.6564 42.2264 58.3003 39.5859C55.0633 37.039 51.7429 35.0416 48.6643 33.6916M48.6643 33.6916C48.5822 25.8794 45.4671 21.5396 43.0792 20.043L39.941 23.4285C42.9851 25.0774 44.4569 28.4441 44.9898 32.3554",stroke:"#7B8CA8",strokeWidth:"1.2"}),(0,l.jsx)("path",{d:"M32.2094 47.3001C31.0515 50.5465 34.6857 56.6214 40.9597 61.5862C47.2404 66.5562 53.9958 68.696 56.8839 66.8122",stroke:"#7B8CA8",strokeWidth:"1.2"}),(0,l.jsx)("path",{d:"M28.8867 60.1903C28.1245 62.3275 30.5169 66.3267 34.6472 69.595C38.7818 72.8669 43.229 74.2755 45.1303 73.0354",stroke:"#7B8CA8",strokeWidth:"1.2"}),(0,l.jsx)("path",{d:"M26.2718 70.2225C25.8147 71.5039 27.2491 73.9016 29.7254 75.8611C32.2044 77.8228 34.8707 78.6673 36.0106 77.9238",stroke:"#7B8CA8",strokeWidth:"1.2"}),(0,l.jsx)("path",{d:"M28.0529 44.1724C29.5354 43.1981 32.3735 40.6904 31.8652 38.4538C31.2298 35.6581 22.8425 38.9622 22.7155 36.5477C22.5884 34.1331 27.0361 30.575 26.909 28.6688C26.7819 26.7626 18.6489 30.8291 18.6489 26.8896C18.6489 23.738 21.36 22.1029 22.7155 21.6793",stroke:"#7B8CA8",strokeWidth:"1.2"}),(0,l.jsx)("rect",{x:"21.8833",y:"50.1122",width:"3.03077",height:"3.03077",transform:"rotate(-24.7154 21.8833 50.1122)",stroke:"#7B8CA8",strokeWidth:"1.2"}),(0,l.jsx)("rect",{x:"16.0527",y:"36.722",width:"3.03077",height:"3.03077",transform:"rotate(4.36851 16.0527 36.722)",stroke:"#7B8CA8",strokeWidth:"1.2"}),(0,l.jsx)("rect",{x:"27.9448",y:"22.8353",width:"3.03077",height:"3.03077",transform:"rotate(-24.7154 27.9448 22.8353)",stroke:"#7B8CA8",strokeWidth:"1.2"}),(0,l.jsx)("rect",{x:"53.7065",y:"33.443",width:"3.03077",height:"3.03077",transform:"rotate(-24.7154 53.7065 33.443)",stroke:"#7B8CA8",strokeWidth:"1.2"}),(0,l.jsx)("rect",{x:"67.3447",y:"13.743",width:"3.03077",height:"3.03077",transform:"rotate(-24.7154 67.3447 13.743)",stroke:"#7B8CA8",strokeWidth:"1.2"}),(0,l.jsx)("rect",{x:"74.9219",y:"54.6584",width:"3.03077",height:"3.03077",transform:"rotate(-24.7154 74.9219 54.6584)",stroke:"#7B8CA8",strokeWidth:"1.2"}),(0,l.jsx)("rect",{x:"70.3755",y:"66.7814",width:"3.03077",height:"3.03077",transform:"rotate(-24.7154 70.3755 66.7814)",stroke:"#7B8CA8",strokeWidth:"1.2"}),(0,l.jsx)("rect",{x:"77.9526",y:"78.9045",width:"3.03077",height:"3.03077",transform:"rotate(-24.7154 77.9526 78.9045)",stroke:"#7B8CA8",strokeWidth:"1.2"}),(0,l.jsx)("rect",{x:"82.4985",y:"62.2353",width:"3.03077",height:"3.03077",transform:"rotate(-24.7154 82.4985 62.2353)",stroke:"#7B8CA8",strokeWidth:"1.2"})]}),NW=e=>{let t,n,i;let{scheduleState:a,selectedDate:r}=e;switch(a){case"succeeded":n="When a scheduled document is successfully published it moves to this list view.",i="No completed scheduled publications ... yet",t=NZ;break;case"cancelled":n="Schedules can fail for several reasons, for example when their documents are deleted. When they do, they show up here.",i="No failed scheduled publications",t=NH;break;case"scheduled":n="When editing a document, create a new scheduled publication from the menu next to the Publish button.",i="No upcoming scheduled publications",t=NG}return r&&(n="No schedules for this date.",i=(0,tI.Z)(r,"d MMMM yyyy"),t=NG),(0,l.jsx)(h.Zb,{paddingX:6,paddingBottom:8,paddingTop:7,radius:2,shadow:1,children:(0,l.jsxs)(h.Kq,{space:4,children:[(0,l.jsx)(h.kC,{justify:"center",children:t&&(0,l.jsx)(t,{})}),(0,l.jsxs)(h.Kq,{space:4,children:[i&&(0,l.jsx)(h.X6,{align:"center",size:1,children:i}),n&&(0,l.jsx)(h.xv,{align:"center",size:1,children:n})]})]})})},NY=e=>!0===e.liveEdit;function NJ(e){return e.documents?.[0]}function NX(e){return NJ(e)?.documentId.replaceAll("drafts.","")}function NQ(){return AU().schema}function N0(e){let t=NJ(e),n=NQ(),i=t.documentType;return(0,d.useMemo)(()=>{if(i)return n.get(i)},[i,n])}let N1=(0,j.zo)(h.iX)`
  .date-small {
    display: inline;
  }
  .date-medium {
    display: none;
  }
  .date-large {
    display: none;
  }

  &[data-eq-min~='1'] {
    .date-small {
      display: none;
    }
    .date-medium {
      display: inline;
    }
    .date-large {
      display: none;
    }
  }

  &[data-eq-min~='2'] {
    .date-small {
      display: none;
    }
    .date-medium {
      display: none;
    }
    .date-large {
      display: inline;
    }
  }
`;function N2({children:e,value:t}){return(0,l.jsx)(p._8.Provider,{value:t,children:e})}function N3(e){let[t,n]=(0,d.useState)(!1),[i,a]=(0,d.useState)(e&&e?.executeAt?{date:e.executeAt}:null);return{formData:i,isDirty:t,onFormChange:(0,d.useCallback)(t=>{let i=e?.executeAt&&new Date(e.executeAt).getTime()===new Date(t?.date).getTime();a(t),n(!i)},[e?.executeAt])}}function N4(e){let{date:t,focused:n,isCurrentMonth:i,isToday:a,customValidation:r,onSelect:o,selected:s}=e,c=(0,d.useMemo)(()=>!r||r((0,tM.Z)(t)),[t,r]),u=(0,d.useCallback)(()=>{c&&o(t)},[t,c,o]);return(0,l.jsx)("div",{"aria-selected":s,"data-ui":"CalendarDay",children:(0,l.jsx)(h.Zb,{"aria-label":t.toDateString(),"aria-pressed":s,as:"button",__unstable_focusRing:!0,"data-weekday":!0,"data-focused":n?"true":"",disabled:!c,role:"button",tabIndex:-1,onClick:u,padding:3,radius:2,selected:s,tone:a||s?"primary":"default",children:(0,l.jsx)(h.xv,{muted:!s&&!i,style:{textAlign:"center"},weight:i?"medium":"regular",children:t.getDate()})})})}let N5=["January","February","March","April","May","June","July","August","September","October","November","December"],N8=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],N6=tY(0,24),N7=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],N9=[1,2,3,4,5,6],Ie=e=>{let t=(0,tp.Z)(e);return(0,tm.Z)({start:t,end:(0,th.Z)(t)})},It=e=>e.map(e=>[e,...N9.map(t=>(0,tf.Z)(e,t))]),In=e=>It(Ie(e)).map(e=>({number:(0,tg.Z)(e[0]),days:e}));function Ii(e){let{getCurrentZoneDate:t}=Mk(),{customValidation:n}=e;return(0,l.jsx)(h.xu,{"aria-hidden":e.hidden||!1,"data-ui":"CalendarMonth",children:(0,l.jsxs)(h.rj,{gap:1,style:{gridTemplateColumns:"repeat(7, minmax(44px, 46px))"},children:[N8.map(e=>(0,l.jsx)(h.xu,{paddingY:2,children:(0,l.jsx)(h.xv,{size:1,weight:"medium",style:{textAlign:"center"},children:e})},e)),In(e.date).map((i,a)=>i.days.map((i,r)=>{let o=e.focused&&(0,tx.Z)(i,e.focused),s=e.selected&&(0,tx.Z)(i,e.selected),c=(0,tx.Z)(i,t()),d=e.focused&&(0,ty.Z)(i,e.focused);return(0,l.jsx)(N4,{date:i,focused:o,isCurrentMonth:d,isToday:c,customValidation:n,onSelect:e.onSelect,selected:s},`${a}-${r}`)}))]})})}let Ia={timePresets:!1},Ir=({onChange:e,...t})=>{let n=(0,d.useCallback)(t=>{let n=parseInt(t.currentTarget.value,10);isNaN(n)||e(n)},[e]);return(0,l.jsx)(hp,{...t,onChange:n,inputMode:"numeric"})},Io=(0,l.jsx)("span",{"data-preserve-focus":!0,style:{overflow:"hidden",position:"absolute",outline:"none"},tabIndex:-1}),Is=(0,d.forwardRef)(function(e,t){let{getCurrentZoneDate:n,zoneDateToUtc:i}=Mk(),{selectTime:a,onFocusedDateChange:r,selectedDate:o=n(),focusedDate:s=o,timeStep:c=1,onSelect:u,customValidation:p,...m}=e,f=(0,d.useCallback)(e=>r(i(e)),[r,i]),g=(0,d.useCallback)(e=>f((0,tb.Z)((0,tv.Z)(s,e),1)),[s,f]),x=(0,d.useCallback)(e=>g(Number(e.currentTarget.value)),[g]),y=(0,d.useCallback)(e=>f((0,tj.Z)(s,e)),[s,f]),b=(0,d.useCallback)(e=>f((0,tC.Z)(s,e)),[s,f]),v=(0,d.useCallback)(e=>{u(i((0,tw.Z)((0,tk.Z)(e,o.getHours()),o.getMinutes())))},[u,o,i]),j=(0,d.useCallback)(e=>{let t=Number(e.currentTarget.value);u(i((0,tw.Z)(o,t)))},[u,o,i]),C=(0,d.useCallback)(e=>{let t=Number(e.currentTarget.value);u(i((0,tk.Z)(o,t)))},[u,o,i]);(0,d.useCallback)((e,t)=>{u(i((0,tk.Z)((0,tw.Z)(o,t),e)))},[u,o,i]);let w=(0,d.useRef)(null);(0,d.useImperativeHandle)(t,()=>w.current);let k=(0,d.useCallback)(()=>{w.current?.querySelector('[data-focused="true"]')?.focus()},[w]),T=(0,d.useCallback)(e=>{if(N7.includes(e.key)){if(e.preventDefault(),e.currentTarget.hasAttribute("data-calendar-grid")){k();return}"ArrowUp"===e.key&&r(i((0,tf.Z)(s,-7))),"ArrowDown"===e.key&&r(i((0,tf.Z)(s,7))),"ArrowLeft"===e.key&&r(i((0,tf.Z)(s,-1))),"ArrowRight"===e.key&&r(i((0,tf.Z)(s,1))),w.current?.querySelector("[data-preserve-focus]")?.focus()}},[i,w,k,r,s]);(0,d.useEffect)(()=>{k()},[k]),(0,d.useEffect)(()=>{document.activeElement?.matches("[data-calendar-grid], [data-calendar-grid] [data-preserve-focus]")&&k()},[w,k,s]);let A=(0,d.useCallback)(()=>u(new Date),[u]);return(0,l.jsxs)(h.xu,{"data-ui":"Calendar",...m,ref:w,children:[(0,l.jsxs)(h.xu,{padding:2,children:[(0,l.jsxs)(h.kC,{children:[(0,l.jsx)(h.xu,{flex:1,children:(0,l.jsx)(Il,{moveFocusedDate:y,onChange:x,value:s?.getMonth()})}),(0,l.jsx)(h.xu,{marginLeft:2,children:(0,l.jsx)(Ic,{moveFocusedDate:y,onChange:b,value:s.getFullYear()})})]}),(0,l.jsxs)(h.xu,{"data-calendar-grid":!0,onKeyDown:T,marginTop:2,overflow:"hidden",tabIndex:0,children:[(0,l.jsx)(Ii,{date:s,focused:s,customValidation:p,onSelect:v,selected:o}),Io]})]}),a&&(0,l.jsxs)(h.xu,{padding:2,style:{borderTop:"1px solid var(--card-border-color)"},children:[(0,l.jsxs)(h.kC,{align:"center",children:[(0,l.jsxs)(h.kC,{align:"center",flex:1,children:[(0,l.jsx)(h.xu,{children:(0,l.jsx)(h.Ph,{"aria-label":"Select hour",value:o?.getHours(),onChange:C,children:N6.map(e=>(0,l.jsx)("option",{value:e,children:`${e}`.padStart(2,"0")},e))})}),(0,l.jsx)(h.xu,{paddingX:1,children:(0,l.jsx)(h.xv,{children:":"})}),(0,l.jsx)(h.xu,{children:(0,l.jsx)(h.Ph,{"aria-label":"Select minutes",value:o?.getMinutes(),onChange:j,children:tY(0,60,c).map(e=>(0,l.jsx)("option",{value:e,children:`${e}`.padStart(2,"0")},e))})})]}),(0,l.jsx)(h.xu,{marginLeft:2,children:(0,l.jsx)(h.zx,{text:"Set to current time",mode:"bleed",onClick:A})})]}),Ia.timePresets]})]})});function Il(e){let{moveFocusedDate:t,onChange:n,value:i}=e,a=(0,d.useCallback)(()=>t(-1),[t]),r=(0,d.useCallback)(()=>t(1),[t]);return(0,l.jsxs)(h.kC,{flex:1,children:[(0,l.jsx)(h.zx,{"aria-label":"Go to previous month",onClick:a,mode:"bleed",icon:_.wyc,paddingX:2,radius:0}),(0,l.jsx)(h.xu,{flex:1,children:(0,l.jsx)(h.Ph,{radius:0,value:i,onChange:n,children:N5.map((e,t)=>(0,l.jsx)("option",{value:t,children:e},t))})}),(0,l.jsx)(h.zx,{"aria-label":"Go to next month",mode:"bleed",icon:_.XCv,onClick:r,paddingX:2,radius:0})]})}function Ic(e){let{moveFocusedDate:t,onChange:n,value:i}=e,a=(0,d.useCallback)(()=>t(-12),[t]),r=(0,d.useCallback)(()=>t(12),[t]);return(0,l.jsxs)(h.kC,{children:[(0,l.jsx)(h.zx,{"aria-label":"Previous year",onClick:a,mode:"bleed",icon:_.wyc,paddingX:2,radius:0}),(0,l.jsx)(Ir,{value:i,onChange:n,radius:0,style:{width:65}}),(0,l.jsx)(h.zx,{"aria-label":"Next year",onClick:r,mode:"bleed",icon:_.XCv,paddingX:2,radius:0})]})}let Id=(0,d.forwardRef)(function(e,t){let{utcToCurrentZoneDate:n}=Mk(),{value:i=new Date,onChange:a,customValidation:r,...o}=e,[s,c]=(0,d.useState)(),u=(0,d.useCallback)(e=>{a(e),c(void 0)},[a]);return(0,l.jsx)(Is,{...o,ref:t,selectedDate:n(i),onSelect:u,focusedDate:n(s||i),onFocusedDateChange:c,customValidation:r})}),Iu=(0,d.forwardRef)(function(e,t){let{value:n,inputValue:i,customValidation:a,onInputChange:r,onChange:o,selectTime:s,timeStep:c,...u}=e,p=(0,d.useRef)(null),m=(0,d.useRef)(null),f=(0,d.useRef)(null);(0,d.useImperativeHandle)(t,()=>m.current);let[g,y]=(0,d.useState)(!1),b=(0,h.vI)();(0,h.Of)(()=>y(!1),()=>[p.current]);let v=(0,d.useCallback)(()=>{m.current?.focus(),m.current?.select()},[m]),j=(0,d.useCallback)(e=>{"Escape"===e.key&&y(!1)},[]),C=(0,d.useCallback)(()=>y(!0),[]),w=(0,l.jsx)(h.xu,{style:{padding:"5px"},children:(0,l.jsx)(h.zx,{ref:f,icon:_.Que,mode:"bleed",padding:2,onClick:C,style:{display:"block"},"data-testid":"select-date-button"})});return(0,l.jsx)(hp,{ref:m,...u,value:i,onChange:r,suffix:g?(0,l.jsx)(h.li,{zOffset:1e3,children:(0,l.jsx)(x.J2,{constrainSize:!0,content:(0,l.jsx)(h.xu,{overflow:"auto",children:(0,l.jsx)(S.ZP,{onDeactivation:v,children:(0,l.jsx)(Id,{selectTime:s,timeStep:c,onKeyUp:j,value:n,onChange:o,customValidation:a})})}),"data-testid":"date-input-dialog",fallbackPlacements:["bottom","bottom-start","top-end","top","top-start"],floatingBoundary:b.element,open:!0,placement:"bottom-end",portal:!0,radius:2,ref:p,children:w})}):w})}),Ip=(0,d.forwardRef)(function(e,t){let{value:n,markers:i,title:a,description:r,placeholder:o,parseInputValue:s,formatInputValue:c,deserialize:u,serialize:p,selectTime:m,timeStep:f,readOnly:g,level:x,onChange:y,customValidation:b,...v}=e,[j,C]=(0,d.useState)(null);(0,d.useEffect)(()=>{C(null)},[n]);let{zoneDateToUtc:w}=Mk(),k=typeof n>"u",T=(0,d.useCallback)(e=>{let t=e.currentTarget.value,n=""===t?null:s(t);null===n?(y(null),k&&j&&C(null)):n.isValid?y(p(w(n.date))):C(t)},[k,w,j,p,y,s]),A=(0,d.useCallback)(e=>{y(e?p(e):null)},[p,y]),_=(0,d.useRef)(null);(0,d.useImperativeHandle)(t,()=>_.current);let S=(0,d.useId)(),E=j?s(j):n?u(n):null,M=j||(E?.isValid?c(E.date):n),N=(0,d.useMemo)(()=>i.map(e=>({level:e.level,path:e.path,message:e.message??e.item?.message})),[i]);return(0,l.jsx)(sM,{validation:E?.error?[...N,{level:"error",message:E.error,path:[]}]:N,title:a,level:x,description:r,inputId:S,children:g?(0,l.jsx)(h.oi,{value:M,readOnly:!0}):(0,l.jsx)(Iu,{...v,id:S,selectTime:m,timeStep:f,placeholder:o||`e.g. ${c(new Date)}`,ref:_,value:E?.date,inputValue:M||"",readOnly:!!g,onInputChange:T,onChange:A,customValidity:E?.error,customValidation:b})})});function Im(e){return e.toISOString()}function Ih(e){let t=new Date(e);return t instanceof Date&&!isNaN(t.valueOf())?{isValid:!0,date:t}:{isValid:!1,error:`Invalid date value: "${e}"`}}let If=(0,d.forwardRef)(function(e,t){let{type:n,onChange:i,...a}=e,{title:r,description:o,placeholder:s}=n,{scheduledPublishing:c}=dR(),u=c.inputDateTimeFormat,{getCurrentZoneDate:p,timeZone:m}=Mk(),{customValidation:h,customValidationMessage:f,timeStep:g}=function(e={}){return{customValidation:e.customValidation||function(){return!0},customValidationMessage:e.customValidationMessage||"Invalid date.",calendarTodayLabel:e.calendarTodayLabel||"Today",timeStep:"timeStep"in e&&Number(e.timeStep)||1}}(n.options),x=(0,d.useCallback)(e=>{let t=e;null!==t&&g>1&&(t=function(e,t){if(!t||1===t)return e;let n=(0,tT.Z)(e),i=(0,tA.Z)(n),a=i%t;return Im(0!==a?(0,tw.Z)(n,i-a):n)}(t,g)),i(t)},[i,g]),y=(0,d.useCallback)(e=>Mf(e,m.name,`${u}`),[u,m.name]),b=(0,d.useCallback)(e=>{let t=(0,tz.Z)(e,`${u}`,p());return(0,tu.Z)(t)?h(t)?{isValid:!0,date:t}:{isValid:!1,error:f}:{isValid:!1,error:`Invalid date. Must be in the format "${u}"`}},[h,f,p,u]);return(0,l.jsx)(Ip,{...a,onChange:x,ref:t,selectTime:!0,timeStep:g,title:r,description:o,placeholder:s,serialize:Im,deserialize:Ih,formatInputValue:y,customValidation:h,parseInputValue:b})}),Ig=e=>{let{onChange:t,value:n}=e,{getCurrentZoneDate:i}=Mk(),[a,r]=(0,d.useState)();return(0,l.jsx)(h.Kq,{space:4,children:(0,l.jsx)(h.Zb,{children:(0,l.jsx)(If,{level:0,markers:[],onChange:e=>{e&&t&&(t({date:e}),r(e))},type:{name:"date",options:{customValidation:e=>e>i(),customValidationMessage:"Date cannot be in the past."},title:"Date and time"},value:void 0===a?n?.date:a})})})};function Ix(e){let{onChange:t,value:n}=e;return(0,l.jsxs)(h.Kq,{space:4,children:[e.children,(0,l.jsx)(Ig,{onChange:t,value:n})]})}let Iy=e=>{let{title:t}=e;return(0,l.jsx)(MM,{children:(0,l.jsxs)(h.kC,{align:"center",children:[t,(0,l.jsx)("input",{style:{opacity:0,position:"absolute",width:0},tabIndex:-1,type:"button"}),(0,l.jsx)(h.xu,{marginLeft:2,style:{marginTop:"-1em",marginBottom:"-1em"},children:(0,l.jsx)(ME,{useElementQueries:!0})})]})})},Ib=e=>{let{onClose:t,schedule:n}=e,{updateSchedule:i}=Nw(),{formData:a,isDirty:r,onFormChange:o}=N3(n),s=(0,d.useCallback)(()=>{a?.date&&i({date:a.date,scheduleId:n.id}).then(t)},[n.id,i,t,a?.date]);return(0,l.jsx)(x.Vq,{footer:{confirmButton:{text:"Update",disabled:!r,onClick:s}},header:(0,l.jsx)(Iy,{title:"Edit schedule"}),id:"time-zone",onClose:t,width:1,children:(0,l.jsx)(Ix,{onChange:o,value:a})})};function Iv(e){let{visible:t,show:n,hide:i}=MS();return{DialogScheduleEdit:t?Ib:null,dialogProps:{onClose:i,schedule:e,visible:t},dialogScheduleEditShow:n,hide:i}}let Ij=[];function IC({currentUser:e,context:t}){let{t:n}=i1(),i=ri({style:"short",type:"unit"}),a=e?.roles||Ij,r=(0,d.useCallback)(()=>(0,l.jsx)(l.Fragment,{children:i.formatToParts(a.map(e=>e.title||tt(e.name))).map((e,t)=>"element"===e.type?(0,l.jsx)("code",{children:e.value},`${e.value}-${t}`):(0,l.jsx)(d.Fragment,{children:e.value},`${e.value}-${t}`))}),[a,i]);return(0,l.jsxs)(h.xu,{children:[(0,l.jsxs)(h.gF,{space:2,children:[(0,l.jsx)(h.xv,{size:0,children:(0,l.jsx)(_.vaB,{})}),(0,l.jsx)(h.xv,{size:1,weight:"medium",children:n("insufficient-permissions-message.title")})]}),(0,l.jsx)(h.gF,{marginTop:4,children:(0,l.jsx)(h.xv,{size:1,children:(0,l.jsx)(rm,{i18nKey:"insufficient-permissions-message.not-authorized-explanation",t:n,context:t})})}),(0,l.jsx)(h.gF,{marginTop:4,marginBottom:1,children:(0,l.jsx)(h.xv,{size:1,children:(0,l.jsx)(rm,{i18nKey:"insufficient-permissions-message.roles",t:n,components:{Roles:r}})})})]})}let Iw=e=>{let{currentUser:t,hasPermission:n,icon:i,onClick:a,permissionsOperationLabel:r,title:o,tone:s,disabled:c}=e;return(0,l.jsx)(x.u,{content:(0,l.jsx)(h.xu,{paddingX:2,paddingY:1,children:(0,l.jsx)(IC,{currentUser:t,context:r})}),disabled:n,placement:"left",portal:!0,children:(0,l.jsx)("div",{children:(0,l.jsx)(x.sN,{disabled:!n||c,icon:i,onClick:a,text:o,tone:s})})})},Ik=e=>{let{actions:t,onDelete:n,onEdit:i,schedule:a,schemaType:r}=e,{mode:o}=Ng(),s=NJ(a),c=vh(),[d,u]=jz({id:s.documentId,type:r?.name,permission:"publish"}),{deleteSchedule:p,publishSchedule:m}=Nw(),h=!u&&!d?.granted,f=()=>{p({schedule:a}).then(()=>n?.())};return c?(0,l.jsxs)(l.Fragment,{children:[t?.edit&&(0,l.jsx)(Iw,{currentUser:c,hasPermission:!h,icon:_.Que,onClick:()=>{i?.()},permissionsOperationLabel:"edit-schedules",title:"Edit schedule",disabled:"upsell"===o}),t?.execute&&(0,l.jsx)(Iw,{currentUser:c,hasPermission:!h,icon:_.EI4,onClick:()=>{m({schedule:a})},permissionsOperationLabel:"execute-schedules",title:"Publish now",disabled:"upsell"===o}),t?.delete&&(0,l.jsx)(Iw,{currentUser:c,hasPermission:!h,icon:_.XHJ,onClick:f,permissionsOperationLabel:"delete-schedules",title:"Delete schedule",tone:"critical",disabled:"upsell"===o}),t?.clear&&(0,l.jsx)(Iw,{currentUser:c,hasPermission:!h,icon:_.nSX,onClick:f,permissionsOperationLabel:"delete-schedules",title:"Clear completed schedule",disabled:"upsell"===o})]}):null},IT=e=>{let{actions:t,onDelete:n,onEdit:i,schedule:a,schemaType:r}=e;return(0,l.jsx)(x.j2,{button:(0,l.jsx)(aI,{}),id:"contextMenu",menu:(0,l.jsx)(h.v2,{children:(0,l.jsx)(Ik,{actions:t,onDelete:n,onEdit:i,schedule:a,schemaType:r})}),placement:"left",popover:{portal:!0,tone:"default"}})},IA={validation:[],isValidating:!1};function I_(e){return(0,d.useMemo)(()=>(function(e=IA.validation){let t=e.filter(w.YN).length>0,n=e.filter(w.WQ).length>0,i="default";return n&&(i="default"),t&&(i="critical"),{markers:e,validationTone:i,hasError:t,hasWarning:n}})(e),[e])}let IS={validation:[],isValidating:!1};function IE(e,t){let n=Cz(),i=(0,d.useMemo)(()=>n.pair.validation(e,t),[t,n.pair,e]);return(0,eR.m)(i,IS)}function IM({schedule:e,updateValidation:t}){let n=N0(e),i=NX(e);return i&&n?.name?(0,l.jsx)(IN,{id:i,schemaName:n.name,updateValidation:t}):null}function IN({id:e,schemaName:t,updateValidation:n}){let[i,a]=(0,d.useState)(!1);return(0,d.useEffect)(()=>{let e=setTimeout(()=>{a(!0)},1500);return()=>{clearTimeout(e)}},[]),i?(0,l.jsx)(II,{id:e,schemaName:t,updateValidation:n}):null}function II({id:e,schemaName:t,updateValidation:n}){let i=IE(e,t);return(0,d.useEffect)(()=>{i.isValidating||n(i)},[n,i]),null}function Iz(e){return(0,d.useMemo)(()=>e?e.replaceAll("drafts.",""):void 0,[e])}let I$=(0,j.zo)(h.xv)`
  white-space: initial;
`,IO={error:"critical",warning:"caution",info:"primary"};function IP(e){let{marker:t,onClick:n,path:i,truncate:a}=e,r=(0,d.useCallback)(()=>{n&&n(t.path)},[t.path,n]),o=IO[t?.level]||void 0,s=t.message??t.item?.message,c=(0,l.jsxs)(h.kC,{children:[(0,l.jsx)(h.xu,{children:(0,l.jsxs)(h.xv,{size:1,children:["error"===t.level&&(0,l.jsx)(_.uIy,{}),"warning"===t.level&&(0,l.jsx)(_.foC,{}),"info"===t.level&&(0,l.jsx)(_.hQ6,{})]})}),(0,l.jsxs)(h.Kq,{space:2,flex:1,paddingLeft:3,children:[i&&(0,l.jsx)(I$,{size:1,weight:"semibold",children:i}),s&&(0,l.jsx)(I$,{muted:!0,size:1,textOverflow:a?"ellipsis":void 0,children:s})]})]});return(0,l.jsx)(h.sN,{padding:1,onClick:r,radius:2,tone:o,children:(0,l.jsx)(h.xu,{padding:2,children:c})})}function IF(e){let{documentType:t,kind:n,validation:i,onFocus:a,onClose:r,truncate:o}=e,s=i.filter(w.YN),c=i.filter(w.WQ),u=i.filter(w.Ny),p=(0,d.useCallback)((e=[])=>{a&&a(e),r&&r()},[a,r]),m=e=>{let n=t&&t.fields,i=n&&n.find(t=>t.name===e[0]);return i&&i.type.title||""},f=s.length>0,g=c.length>0,x=u.length>0;return f||g||x?(0,l.jsxs)(h.W2,{width:0,"data-kind":n,"data-testid":"validation-list",children:[f&&s.map((e,t)=>(0,l.jsx)(IP,{truncate:o,path:m(e.path),marker:e,onClick:p},t)),g&&c.map((e,t)=>(0,l.jsx)(IP,{truncate:o,path:m(e.path),marker:e,onClick:p},t)),x&&u.map((e,t)=>(0,l.jsx)(IP,{truncate:o,path:m(e.path),marker:e,onClick:p},t))]}):null}let ID={portal:!0,constrainSize:!0,preventOverflow:!0,tone:"default",width:0,placement:"bottom-end"};function IR(e){let{type:t,markers:n,menuHeader:i,documentId:a}=e,r=(0,ny.tv)(),{hasError:o,hasWarning:s}=I_(n),u=(0,d.useId)()||"",p=Iz(a),m=(0,d.useCallback)(e=>{p&&r.navigateIntent("edit",{id:p,path:encodeURIComponent(c.BB(e))})},[r,p]);return(0,l.jsx)(x.j2,{id:u||"",button:(0,l.jsx)(x.zx,{tooltipProps:{content:"Show validation issues"},mode:"bleed","data-testid":"schedule-validation-list-button",icon:o?_.uIy:_.foC,style:{visibility:o||s?"visible":"hidden"},tone:o?"critical":"default"}),menu:(0,l.jsx)(h.v2,{padding:1,children:(0,l.jsx)(h.W2,{width:0,children:(0,l.jsxs)(h.Kq,{space:1,children:[i??null,(0,l.jsx)(IF,{documentType:t,validation:n,onFocus:m})]})})}),popover:ID})}let IL=e=>{let{date:t,useElementQueries:n}=e,{formatDateTz:i}=Mk(),a=(0,tD.Z)(t,new Date,{addSuffix:!0}),r=i({date:t,format:EG.LARGE}),o=i({date:t,format:EG.MEDIUM}),s=i({date:t,format:EG.SMALL});return(0,l.jsx)(h.xv,{size:1,textOverflow:"ellipsis",children:(0,l.jsx)(x.u,{content:a,portal:!0,children:(0,l.jsx)("span",{children:n?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("span",{className:"date-small",children:s}),(0,l.jsx)("span",{className:"date-medium",children:o}),(0,l.jsx)("span",{className:"date-large",children:r})]}):r})})})},IB={portal:!0,constrainSize:!0,preventOverflow:!0,tone:"default",width:0},Iq=e=>{let{stateReason:t}=e;return(0,l.jsx)(x.j2,{id:"stateReason",button:(0,l.jsx)(x.zx,{tooltipProps:{content:"Schedule failed"},mode:"bleed","data-testid":"schedule-validation-list-button",icon:_.uIy,tone:"critical"}),menu:(0,l.jsx)(h.v2,{padding:1,children:(0,l.jsxs)(h.W2,{padding:2,width:0,children:[(0,l.jsx)(h.xv,{size:1,children:"This schedule failed to run."}),(0,l.jsxs)(h.kC,{gap:3,marginTop:4,padding:1,children:[(0,l.jsx)(h.xv,{size:1,style:{color:M.Q6[700].hex},children:(0,l.jsx)(_.uIy,{})}),(0,l.jsx)(h.xv,{size:1,style:{color:M.Q6[700].hex},weight:"medium",children:t})]})]})}),popover:IB})},IV=e=>{let{id:t}=e;return(0,l.jsx)(oP,{user:t,withTooltip:!0})},IK=(0,j.zo)(h.xu)`
  width: 9px;
`,IU=e=>{let{children:t,contextMenu:n,linkComponent:i,onClick:a,previewState:r,publishedDocumentId:o,schedule:s,schemaType:c,useElementQueries:u}=e,{mode:p}=Ng(),[m,f]=(0,d.useState)(IA),{validation:g}=m,{hasError:y,validationTone:b}=I_(g),{formatDateTz:v}=Mk(),j=Nx(s),C=j?new Date(j):null;return(0,l.jsx)(h.Zb,{padding:1,radius:2,shadow:1,tone:b,style:"upsell"===p&&"scheduled"===s.state?{opacity:.7}:void 0,children:(0,l.jsxs)(h.kC,{align:"center",gap:1,justify:"space-between",children:[(0,l.jsx)(x.u,{delay:{open:400},placement:"bottom-end",content:(0,l.jsx)(BE,{draft:r?.draft,published:r?.published}),disabled:!r?.draft&&!r?.published,children:(0,l.jsx)(h.Zb,{__unstable_focusRing:!0,as:i||void 0,"data-as":a||i?"a":void 0,flex:1,onClick:a,padding:1,radius:2,tabIndex:0,tone:b,children:(0,l.jsxs)(h.kC,{align:"center",gap:3,justify:"flex-start",paddingLeft:t?0:[1,2],children:[t&&(0,l.jsx)(h.xu,{style:{flexBasis:"auto",flexGrow:1},children:t}),"unpublish"===s.action&&(0,l.jsx)(h.kC,{style:{flexShrink:0},children:(0,l.jsx)(h.Ct,{fontSize:0,mode:"outline",tone:EV[s.action].badgeTone,children:s.action})}),(0,l.jsx)(h.xu,{display:["block","none"],style:{flexShrink:0,width:"90px"},children:(0,l.jsx)(h.Kq,{space:2,children:C?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(h.xv,{size:1,children:v({date:C,format:"dd/MM/yyyy"})}),(0,l.jsx)(h.xv,{size:1,children:v({date:C,format:"p"})})]}):(0,l.jsx)(h.xv,{muted:!0,size:1,children:(0,l.jsx)("em",{children:"No date specified"})})})}),(0,l.jsx)(h.xu,{display:["none","block"],style:{flexShrink:0,maxWidth:"250px",width:t?"35%":"auto"},children:C?(0,l.jsx)(IL,{date:C,useElementQueries:u}):(0,l.jsx)(h.xv,{muted:!0,size:1,children:(0,l.jsx)("em",{children:"No date specified"})})}),!t&&(0,l.jsx)(h.xu,{style:{visibility:"hidden"},children:(0,l.jsx)(bU,{isPlaceholder:!0})}),(0,l.jsxs)(h.kC,{align:"center",style:{flexShrink:0,marginLeft:"auto"},children:[(0,l.jsx)(h.xu,{display:["none","none","block"],marginX:3,style:{flexShrink:0},children:(0,l.jsx)(IV,{id:s?.author})}),(0,l.jsx)(h.xu,{display:["none","block"],marginX:[2,2,3],style:{flexShrink:0},children:r?.draft||r?.published?(0,l.jsx)(cM,{draft:r?.draft,published:r?.published}):(0,l.jsx)(IK,{})})]})]})})}),(0,l.jsxs)(h.kC,{justify:"center",style:{width:"38px"},children:["scheduled"===s.state&&(0,l.jsxs)(h.xu,{children:[(0,l.jsx)(IM,{schedule:s,updateValidation:f}),(0,l.jsx)(IR,{markers:g,type:c,documentId:o,menuHeader:(0,l.jsx)(h.xu,{padding:2,children:(0,l.jsx)(h.xv,{size:1,children:y?EZ:"This document has validation warnings."})})})]}),"cancelled"===s.state&&(0,l.jsx)(Iq,{stateReason:s.stateReason})]}),"cancelled"===s.state&&(0,l.jsx)(Iq,{stateReason:s.stateReason}),n&&(0,l.jsx)(h.xu,{style:{flexShrink:0},paddingRight:2,children:n})]})})},IZ=e=>{let{schedule:t,schemaType:n}=e,{DialogScheduleEdit:i,dialogProps:a,dialogScheduleEditShow:r}=Iv(t),{onComplete:o}=function(){let e=(0,d.useContext)(p._8);if(void 0===e)throw Error("useDocumentActionProps must be used within a DocumentActionPropsProvider");return e}(),s=(0,d.useMemo)(()=>NX(t),[t]);return(0,l.jsxs)(l.Fragment,{children:[i&&(0,l.jsx)(i,{...a}),(0,l.jsx)(IU,{contextMenu:(0,l.jsx)(IT,{actions:{delete:!0,edit:!0},onDelete:o,onEdit:r,schedule:t,schemaType:n}),onClick:r,publishedDocumentId:s,schedule:t,schemaType:n})]})},IG=e=>{let{onDelete:t,schedule:n}=e,{deleteSchedule:i}=Nw();return(0,l.jsx)(x.j2,{button:(0,l.jsx)(aI,{}),id:"contextMenu",menu:(0,l.jsx)(h.v2,{children:(0,l.jsx)(x.sN,{icon:_.XHJ,onClick:()=>{i({schedule:n}).then(()=>t?.())},text:"Delete schedule",tone:"critical"})}),placement:"left",popover:{portal:!0,tone:"default"}})},IH=({schedule:e})=>(0,l.jsx)(IU,{contextMenu:(0,l.jsx)(IG,{schedule:e}),schedule:e,useElementQueries:!0,children:(0,l.jsx)(bU,{icon:_.Tzq,layout:"default",subtitle:(0,l.jsx)("em",{children:"It may have been deleted"}),title:(0,l.jsx)("em",{style:{color:M.Q6[600].hex},children:"Document not found"})})}),IW=e=>{let{previewState:t,schedule:n,schemaType:i}=e,a=t.draft||t.published,r="succeeded"===n.state,o="scheduled"===n.state,{DialogScheduleEdit:s,dialogProps:c,dialogScheduleEditShow:u}=Iv(n),p=Iz(a?._id),m=(0,d.useMemo)(()=>{let e=(0,d.forwardRef)((e,t)=>(0,l.jsx)(ny.nR,{...e,intent:"edit",params:{type:i.name,id:a&&iS(a?._id)},ref:t}));return e.displayName="ForwardRef(LinkComponent)",e},[i,a]);return(0,l.jsxs)(l.Fragment,{children:[s&&(0,l.jsx)(s,{...c}),(0,l.jsx)(IU,{contextMenu:(0,l.jsx)(IT,{actions:{clear:r,delete:!r,edit:o,execute:o},onEdit:u,schedule:n,schemaType:i}),linkComponent:m,previewState:t,publishedDocumentId:p,schedule:n,schemaType:i,useElementQueries:!0,children:t.isLoading?(0,l.jsx)(bU,{icon:i?.icon,isPlaceholder:t.isLoading,layout:"default"}):(0,l.jsx)(bq,{layout:"default",schemaType:i,value:a})})]})},IY=e=>{let{schedule:t,type:n}=e,i=NJ(t),a=N0(t),r=function(e,t){let n=CI(),[i,a]=(0,d.useState)({});return(0,d.useEffect)(()=>{if(!t)return;let i=(function(e,t,n,i){let a=NY(t)?(0,N.of)({snapshot:null}):e.observeForPreview({_type:"reference",_ref:i_(n)},t),r=e.observeForPreview({_type:"reference",_ref:iS(n)},t);return(0,U.a)([a,r]).pipe((0,P.U)(([e,t])=>({draft:e.snapshot?{title:"",...e.snapshot||{}}:null,isLoading:!1,published:t.snapshot?{title:"",...t.snapshot||{}}:null})),(0,ef.O)({draft:null,isLoading:!0,published:null}))})(n,t,e,0).subscribe(e=>{a(e)});return()=>{i?.unsubscribe()}},[n,t,e]),i}(i?.documentId,a),o=!(r.draft||r.published)&&!r.isLoading,s=(0,d.useMemo)(()=>!a||o?(0,l.jsx)(IH,{schedule:t}):"document"===n?(0,l.jsx)(IZ,{schedule:t,schemaType:a}):"tool"===n?(0,l.jsx)(IW,{previewState:r,schedule:t,schemaType:a}):null,[o,n,r,t,a]);return(0,l.jsx)(N1,{children:s})};function IJ(e){let{item:{content:t,virtualRow:n},measureElement:i}=e,a=(0,d.useMemo)(()=>({position:"absolute",top:0,left:0,width:"100%",transform:`translateY(${n.start}px)`}),[n]);return(0,l.jsx)(h.xu,{"data-index":n.index,paddingBottom:2,ref:i,style:a,children:"string"==typeof t?(0,l.jsx)(IQ,{content:t}):(0,l.jsx)(IX,{schedule:t})},n.key)}function IX({schedule:e}){let[t,n]=(0,d.useState)((0,l.jsx)(I0,{}));return(0,d.useEffect)(()=>{let t=!0,i=setTimeout(()=>{t&&n((0,l.jsx)(IY,{schedule:e,type:"tool"}))},200);return()=>{t=!1,clearTimeout(i)}},[e]),t}function IQ({content:e}){return(0,l.jsx)(h.kC,{align:"flex-end",paddingBottom:2,paddingTop:4,children:(0,l.jsx)(h.__,{muted:!0,size:1,children:e})})}function I0(){return(0,l.jsx)(h.Zb,{padding:1,radius:2,shadow:1,children:(0,l.jsx)(h.Zb,{padding:1,children:(0,l.jsx)(bU,{isPlaceholder:!0})})})}function I1(e){return new Date(e).toLocaleString("default",{month:"long",year:"numeric"})}let I2=()=>{let{activeSchedules:e,scheduleState:t,sortBy:n}=NS(),{measureElement:i,virtualList:a,totalSize:r,containerRef:o}=function(e,t){let n=(0,d.useRef)(null),i=(0,d.useMemo)(()=>{let n=[];return e.forEach((i,a)=>{if("executeAt"==t){let t=Nx(e[a-1]),r=a>0&&t?I1(t):null,o=Nx(i),s=o?I1(o):null;s!==r&&n.push(s||"No date specified")}n.push(i)}),n},[e,t]),a=(0,k.MG)({count:i.length,getScrollElement:()=>n.current,estimateSize:()=>50,overscan:5}),r=a.getVirtualItems().map(e=>{let t=i[e.index];return{content:t,key:"string"==typeof t?t:t.id,virtualRow:e}});return{containerRef:n,measureElement:a.measureElement,totalSize:a.getTotalSize(),virtualList:r}}(e,n),{deleteSchedules:s}=Nw();return(0,d.useEffect)(()=>{o?.current?.scrollTo(0,0)},[t,n,o]),(0,l.jsxs)(h.xu,{paddingBottom:6,paddingTop:1,paddingX:4,ref:o,style:{position:"relative",overflowX:"hidden",overflowY:"auto",height:"100%",boxSizing:"border-box"},children:[(0,l.jsx)(h.xu,{style:{height:`${r}px`,width:"100%",position:"relative"},children:a.map(e=>(0,l.jsx)(IJ,{item:e,measureElement:i},e.key))}),"succeeded"===t&&(0,l.jsx)(h.kC,{justify:"center",marginTop:6,children:(0,l.jsx)(x.zx,{icon:_.nSX,mode:"ghost",onClick:()=>{s({schedules:e||[]})},text:"Clear all completed schedules"})})]})},I3=(0,j.zo)(h.W2)`
  width: auto;
`,I4=()=>{let{activeSchedules:e,selectedDate:t,scheduleState:n}=NS(),{upsellData:i,telemetryLogs:a}=NU(),{mode:r}=Ng(),o="upsell"===r&&"scheduled"===n;return(0,l.jsxs)(h.xu,{style:{height:"100%"},children:["upsell"===r&&i&&(0,l.jsx)(I3,{width:1,padding:4,paddingBottom:1,children:(0,l.jsx)(NO,{layout:"horizontal",data:i,onPrimaryClick:a.panelPrimaryClicked,onSecondaryClick:a.panelSecondaryClicked})}),0===e.length?(0,l.jsx)(I3,{width:1,padding:4,paddingTop:4,children:(0,l.jsx)(NW,{scheduleState:n,selectedDate:t})}):(0,l.jsxs)(l.Fragment,{children:[o&&(0,l.jsx)(h.Zb,{margin:4,marginBottom:2,padding:3,tone:"caution",radius:3,shadow:1,children:(0,l.jsxs)(h.kC,{gap:3,align:"center",children:[(0,l.jsx)(h.xv,{size:1,children:(0,l.jsx)(_.foC,{})}),(0,l.jsx)(h.xv,{size:1,children:"Your scheduled documents won't be published automatically unless you upgrade your plan. You can still publish them manually."})]})}),(0,l.jsx)(h.xu,{paddingTop:o?0:4,children:(0,l.jsx)(I2,{})})]})]})},I5=()=>{let{setSortBy:e,sortBy:t}=NS();return(0,l.jsx)(x.j2,{button:(0,l.jsx)(aI,{}),id:"sort",menu:(0,l.jsxs)(h.v2,{style:{minWidth:"250px"},children:[(0,l.jsx)(x.sN,{icon:_.fzI,iconRight:"createdAt"===t?_.KML:void 0,onClick:()=>e("createdAt"),text:"Sort by time added"}),(0,l.jsx)(x.sN,{icon:_.fzI,iconRight:"executeAt"===t?_.KML:void 0,onClick:()=>e("executeAt"),text:"Sort by time scheduled"})]})})},I8=e=>{let{mode:t="default",selected:n}=e;return(0,l.jsx)(h.xu,{style:{..."default"===t?{background:M.MA[n?100:300].hex}:{},..."failed"===t?{background:M.Q6[500].hex}:{},borderRadius:"2px",height:"2px",width:"100%"}})};function I6(e){let t;let{date:n,focused:i,isCurrentMonth:a,isToday:r,onSelect:o,selected:s}=e,{schedulesByDate:c}=NS(),u=c(n),p=(0,d.useCallback)(()=>{o(s?void 0:n)},[n,o,s]);r||s?t="primary":((0,tR.Z)(n),t="default");let m=u.length>0,{completed:f,failed:g,upcoming:y}=(0,d.useMemo)(()=>({completed:u.filter(e=>"succeeded"===e.state),failed:u.filter(e=>"cancelled"===e.state),upcoming:u.filter(e=>"scheduled"===e.state)}),[u]);return(0,l.jsx)("div",{"aria-selected":s,"data-ui":"CalendarDay",children:(0,l.jsx)(x.u,{content:(0,l.jsx)(I7,{date:n,schedules:u}),disabled:!m,portal:!0,children:(0,l.jsxs)(h.Zb,{"aria-label":n.toDateString(),"aria-pressed":s,as:"button",__unstable_focusRing:!0,"data-weekday":!0,"data-focused":i?"true":"",role:"button",tabIndex:-1,onClick:p,paddingX:3,paddingY:4,radius:2,selected:s,style:{position:"relative"},tone:t,children:[(0,l.jsx)(h.xv,{size:1,style:{opacity:s||a?1:.35,textAlign:"center"},children:s?(0,l.jsx)(_.Two,{}):n.getDate()}),(0,l.jsx)(h.xu,{style:{bottom:2,left:2,position:"absolute",right:2},children:(0,l.jsxs)(h.kC,{align:"center",gap:1,justify:"center",children:[f.length>0&&(0,l.jsx)(I8,{selected:s}),y.length>0&&(0,l.jsx)(I8,{selected:s}),g.length>0&&(0,l.jsx)(I8,{mode:"failed",selected:s})]})})]})})})}function I7(e){let{date:t,schedules:n=[]}=e,{formatDateTz:i}=Mk(),a=n.reduce((e,t)=>(e[t.state].push(t),e),{cancelled:[],succeeded:[],scheduled:[]});return(0,l.jsxs)(h.xu,{padding:3,children:[(0,l.jsx)(h.xu,{marginBottom:4,children:(0,l.jsx)(h.xv,{size:1,weight:"medium",children:(0,tI.Z)(t,"d MMMM yyyy")})}),(0,l.jsx)(h.Kq,{space:3,children:Object.keys(a).map(e=>{let t=a[e];return 0===t.length?null:(0,l.jsxs)(h.Kq,{space:2,children:[(0,l.jsx)(h.__,{muted:!0,size:0,children:EK[e].title}),(0,l.jsx)(h.Kq,{space:1,children:t.filter(e=>e.executeAt).map(e=>{let t=Nx(e);return t?(0,l.jsxs)(h.gF,{space:2,children:[(0,l.jsx)(h.xu,{style:{width:"60px"},children:(0,l.jsx)(h.xv,{size:1,weight:"regular",children:i({date:new Date(t),format:"p"})})}),(0,l.jsx)(h.kC,{align:"center",style:{flexShrink:0,opacity:"unpublish"===e.action?1:0},children:(0,l.jsx)(h.Ct,{fontSize:0,mode:"outline",tone:EV[e.action].badgeTone,children:e.action})})]},e.id):null})})]},e)})})]})}let I9=["January","February","March","April","May","June","July","August","September","October","November","December"],ze=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],zt=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],zn=[1,2,3,4,5,6],zi=e=>{let t=(0,tp.Z)(e);return(0,tm.Z)({start:t,end:(0,th.Z)(t)})},za=e=>e.map(e=>[e,...zn.map(t=>(0,tf.Z)(e,t))]),zr=e=>za(zi(e)).map(e=>({number:(0,tg.Z)(e[0]),days:e}));function zo(e){let{getCurrentZoneDate:t}=Mk();return(0,l.jsx)(h.xu,{"aria-hidden":e.hidden||!1,"data-ui":"CalendarMonth",children:(0,l.jsxs)(h.rj,{style:{gridGap:"1px",gridTemplateColumns:"repeat(7, 1fr)"},children:[ze.map(e=>(0,l.jsx)(h.Zb,{paddingY:3,children:(0,l.jsx)(h.__,{size:1,style:{textAlign:"center"},children:e.slice(0,1)})},e)),zr(e.date).map((n,i)=>n.days.map((n,a)=>{let r=e.focused&&(0,tx.Z)(n,e.focused),o=e.selected&&(0,tx.Z)(n,e.selected),s=(0,tx.Z)(n,t()),c=e.focused&&(0,ty.Z)(n,e.focused);return(0,l.jsx)(I6,{date:n,focused:r,isCurrentMonth:c,isToday:s,onSelect:e.onSelect,selected:o},`${i}-${a}`)}))]})})}let zs=(0,l.jsx)("span",{"data-preserve-focus":!0,style:{overflow:"hidden",position:"absolute",outline:"none"},tabIndex:-1}),zl=(0,d.forwardRef)(function(e,t){let{focusedDate:n,onFocusedDateChange:i,onSelect:a,selectedDate:r,...o}=e,{zoneDateToUtc:s}=Mk(),c=(0,d.useCallback)(e=>i(s(e)),[i,s]),u=(0,d.useCallback)(e=>c((0,tj.Z)(n,e)),[n,c]),p=(0,d.useCallback)(e=>{if(e){let t=s((0,tw.Z)((0,tk.Z)(e,e.getHours()),e.getMinutes()));a(t),i(t)}else a(void 0)},[a,s,i]),m=(0,d.useRef)(null);(0,d.useImperativeHandle)(t,()=>m.current);let f=(0,d.useCallback)(()=>{m.current?.querySelector('[data-focused="true"]')?.focus()},[m]),g=(0,d.useCallback)(e=>{if(zt.includes(e.key)){if(e.preventDefault(),e.currentTarget.hasAttribute("data-calendar-grid")){f();return}"ArrowUp"===e.key&&i(s((0,tf.Z)(n,-7))),"ArrowDown"===e.key&&i(s((0,tf.Z)(n,7))),"ArrowLeft"===e.key&&i(s((0,tf.Z)(n,-1))),"ArrowRight"===e.key&&i(s((0,tf.Z)(n,1))),m.current?.querySelector("[data-preserve-focus]")?.focus()}},[m,f,i,n,s]);(0,d.useEffect)(()=>{f()},[f]),(0,d.useEffect)(()=>{document.activeElement?.matches("[data-calendar-grid], [data-calendar-grid] [data-preserve-focus]")&&f()},[m,f,n]);let y=(0,d.useCallback)(()=>{let e=new Date;a(e),i(e)},[a,i]),b=(0,d.useCallback)(()=>u(-1),[u]),v=(0,d.useCallback)(()=>u(1),[u]);return(0,l.jsxs)(h.xu,{"data-ui":"Calendar",...o,ref:m,children:[(0,l.jsx)(h.kC,{align:"center",paddingLeft:4,style:{borderBottom:"1px solid var(--card-border-color)",minHeight:"55px",position:"sticky",top:0},children:(0,l.jsxs)(h.kC,{align:"center",flex:1,justify:"space-between",children:[(0,l.jsxs)(h.xv,{weight:"medium",size:1,children:[I9[n?.getMonth()]," ",n?.getFullYear()]}),(0,l.jsx)(h.kC,{paddingRight:3,gap:2,children:(0,l.jsxs)(x.uE,{children:[(0,l.jsx)(x.zx,{icon:_.wyc,mode:"bleed",onClick:b,tooltipProps:{content:"Previous month"}}),(0,l.jsx)(x.zx,{icon:_.XCv,mode:"bleed",onClick:v,tooltipProps:{content:"Next month"}})]})})]})}),(0,l.jsx)(h.xu,{children:(0,l.jsxs)(h.xu,{"data-calendar-grid":!0,onKeyDown:g,overflow:"hidden",paddingBottom:1,paddingX:1,tabIndex:0,children:[(0,l.jsx)(zo,{date:n,focused:n,onSelect:p,selected:r}),zs]})}),(0,l.jsx)(h.xu,{flex:1,style:{borderBottom:"1px solid var(--card-border-color)"},children:(0,l.jsx)(x.zx,{mode:"bleed",onClick:y,width:"fill",text:"Today"})})]})}),zc=e=>{let{onSelect:t,selectedDate:n}=e,{getCurrentZoneDate:i,utcToCurrentZoneDate:a}=Mk(),[r,o]=(0,d.useState)(n||i()),s=(0,d.useCallback)(e=>{o(a(e))},[a]);return(0,l.jsx)(zl,{focusedDate:r,onFocusedDateChange:s,onSelect:t,selectedDate:n})},zd=(0,j.zo)(h.xu)`
  flex-direction: column;
  &:not(:last-child) {
    border-right: 1px solid var(--card-border-color);
  }
`,zu=[],zp="yyyy-MM-dd";function zm(){let e=(0,ny.tv)(),{sanity:t}=(0,h.Fg)(),{error:n,isInitialLoading:i,schedules:a=zu}=NT(),r=(0,d.useRef)(),o=e.state.state,s=e.state.date?(0,tz.Z)(e.state.date,zp,new Date):void 0;(0,d.useEffect)(()=>{e.state.state&&(r.current=e.state.state)},[e.state.state]),(0,d.useEffect)(()=>{o||s||e.navigate({state:EU[0]},{replace:!0})},[s,e,o]);let{formatDateTz:c}=Mk(),u=(0,d.useMemo)(()=>({schedules:a,scheduleState:o,selectedDate:s}),[a,o,s]);return(0,l.jsx)(N_,{value:u,children:(0,l.jsx)(h.kC,{direction:"column",height:"fill",flex:1,overflow:"hidden",children:(0,l.jsxs)(h.kC,{flex:1,height:"fill",children:[(0,l.jsx)(zd,{display:["none",null,null,"flex"],style:{position:"sticky",top:0,width:"350px"},children:(0,l.jsx)(zc,{onSelect:t=>{t?e.navigate({date:c({date:t,format:zp})}):e.navigate({state:r?.current||EU[0]})},selectedDate:s})}),(0,l.jsxs)(zd,{display:"flex",flex:1,overflow:"hidden",children:[(0,l.jsx)(MM,{style:{background:t.color.card.enabled.bg,position:"sticky",top:0,zIndex:1},children:(0,l.jsx)(h.kC,{align:"center",paddingLeft:4,paddingRight:3,style:{borderBottom:"1px solid var(--card-border-color)",minHeight:"55px"},children:(0,l.jsxs)(h.kC,{align:"center",flex:1,justify:"space-between",children:[(0,l.jsx)(NN,{onClearDate:()=>{e.navigate({state:r?.current||EU[0]})},selectedDate:s}),(0,l.jsxs)(h.kC,{align:"center",gap:1,children:[(0,l.jsx)(ME,{useElementQueries:!0}),(0,l.jsx)(I5,{})]})]})})}),(0,l.jsxs)(h.kC,{direction:"column",flex:1,children:[n&&(0,l.jsx)(h.xu,{paddingTop:4,paddingX:4,children:(0,l.jsx)(EW,{description:"More information in the developer console.",title:"Something went wrong, unable to retrieve schedules."})}),(0,l.jsx)(h.xu,{flex:1,children:i?(0,l.jsx)(h.xu,{padding:4,children:(0,l.jsx)(h.xv,{muted:!0,children:"Loading..."})}):(0,l.jsx)(I4,{})})]})]})]})})})}let zh=e=>{let{buttonText:t="Action",disabled:n,icon:i,onAction:a,onComplete:r,tone:o="positive"}=e;return(0,l.jsxs)(h.kC,{width:"full",gap:3,justify:"flex-end",children:[(0,l.jsx)(x.zx,{mode:"bleed",onClick:r,text:"Cancel"}),a&&(0,l.jsx)(x.zx,{disabled:n,icon:i,onClick:a,text:t,tone:o})]})};function zf({id:e,schemaType:t}){return(0,l.jsxs)(h.Kq,{space:4,children:[(0,l.jsxs)(h.xv,{size:1,children:["Schedule this document to be published at any time in the future.",(0,l.jsx)("br",{}),"Any edits in the meantime will be added to the scheduled document."]}),(0,l.jsx)(h.xv,{size:1,children:"Visit the Schedules page to get an overview of all schedules."}),(0,l.jsx)(zg,{id:e,type:t})]})}function zg({id:e,type:t}){let n=Iz(e),i=function(e){let t=NQ();return(0,d.useMemo)(()=>t.get(e),[e,t])}(t),a=IE(n,t),{hasError:r}=I_(a.validation);return r?(0,l.jsx)(h.Zb,{padding:2,radius:1,shadow:1,tone:"critical",children:(0,l.jsxs)(h.kC,{gap:1,align:"center",children:[(0,l.jsx)(IR,{markers:a.validation,type:i,documentId:n}),(0,l.jsx)(h.xv,{size:1,children:EZ})]})}):null}let zx=e=>{let{schedules:t}=e;return(0,l.jsx)(h.Kq,{space:4,children:0===t.length?(0,l.jsx)(h.xu,{children:(0,l.jsx)(h.xv,{size:1,children:"No schedules"})}):(0,l.jsx)(h.Kq,{space:2,children:t.map(e=>(0,l.jsx)(IY,{schedule:e,type:"document"},e.id))})})},zy=My("ScheduleAction"),zb=e=>{let{draft:t,id:n,liveEdit:i,onComplete:a,published:r,type:o}=e,s=vh(),[c,u]=jz({id:n,type:o,permission:"publish"}),{createSchedule:p}=Nw(),{enabled:m,mode:f}=Ng(),{handleOpenDialog:g}=NU(),[x,y]=(0,d.useState)(!1),{formData:b,onFormChange:v}=N3(),{error:j,isInitialLoading:C,schedules:w}=NT({documentId:n,state:"scheduled"});zy("schedules",w);let k=w&&w.length>0,T=null!==t||null!==r,A=!u&&!c?.granted,S=(0,d.useCallback)(()=>{"upsell"===f?g("document_action"):y(!0)},[f,g]),E=(0,d.useCallback)(()=>{b?.date&&p({date:b.date,documentId:n}).then(a)},[a,p,n,b?.date]),M=k?"Edit Schedule":"Schedule";if(A)return{disabled:!0,icon:_.Que,label:M,title:(0,l.jsx)(IC,{currentUser:s,context:"edit-schedules"})};let N="This document doesn't exist yet";T&&(N=null),C&&(N="Loading schedules"),i&&(N="Live Edit is enabled for this content type and publishing happens automatically as you make changes");let I={content:j?(0,l.jsx)(EW,{description:"More information in the developer console.",title:"Something went wrong, unable to retrieve schedules."}):(0,l.jsx)(N2,{value:e,children:k?(0,l.jsx)(zx,{schedules:w}):(0,l.jsx)(Ix,{onChange:v,value:b,children:(0,l.jsx)(zf,{id:n,schemaType:o})})}),footer:!k&&(0,l.jsx)(zh,{buttonText:"Schedule",disabled:!b?.date,icon:_.T39,onAction:E,onComplete:a,tone:"primary"}),header:(0,l.jsx)(Iy,{title:M}),onClose:a,type:"dialog"};return m?{dialog:x&&I,disabled:C||!T||i,label:M,icon:_.Que,onHandle:S,title:N&&(0,l.jsx)(h.xu,{style:{maxWidth:"315px"},children:N})}:null},zv=My("ScheduledBadge"),zj=e=>{let{schedules:t}=NT({documentId:e.id,state:"scheduled"});zv("schedules",t);let n=t?.[0];if(!n||!n.executeAt)return null;let i=(0,tI.Z)(new Date(n.executeAt),EG.LARGE);return{color:EV[n.action].badgeColor,label:"Scheduled",title:`${EV[n.action].actionName} on ${i} (local time)`}};function zC(e){let{id:t,markers:n}=e,i=Iz(t),{hasError:a}=I_(n),{schedules:r}=NT({documentId:i,state:"scheduled"}),{mode:o}=Ng();return r.length>0?(0,l.jsxs)(h.xu,{marginBottom:4,children:["upsell"===o&&(0,l.jsx)(h.Zb,{tone:"caution",padding:3,radius:3,shadow:1,marginBottom:3,children:(0,l.jsxs)(h.kC,{align:"center",gap:3,padding:1,children:[(0,l.jsx)(h.xv,{muted:!0,size:1,children:(0,l.jsx)(_.foC,{})}),(0,l.jsx)(h.xv,{muted:!0,size:1,weight:"medium",children:"Scheduled publishing is not available on your current plan"})]})}),(0,l.jsx)(h.Zb,{padding:3,radius:1,shadow:1,tone:a?"critical":"primary",style:"upsell"===o?{opacity:.7}:void 0,children:(0,l.jsxs)(h.Kq,{space:2,children:[(0,l.jsxs)(h.kC,{align:"center",gap:3,marginBottom:1,padding:1,children:[(0,l.jsx)(h.xv,{muted:!0,size:1,children:(0,l.jsx)(_.Que,{})}),(0,l.jsxs)(h.xv,{muted:!0,size:1,children:[(0,l.jsx)("span",{style:{fontWeight:600},children:"Upcoming schedule"})," (local time)"]})]}),(0,l.jsx)(h.Kq,{space:2,children:r.map(e=>{if(!e.executeAt)return null;let t=(0,tI.Z)(new Date(e.executeAt),EG.LARGE);return(0,l.jsxs)(h.gF,{space:2,children:[(0,l.jsx)(h.xv,{muted:!0,size:1,children:t}),(0,l.jsx)(h.kC,{style:{opacity:"unpublish"===e.action?1:0},children:(0,l.jsx)(h.Ct,{fontSize:0,mode:"outline",children:e.action})})]},e.id)})}),a&&(0,l.jsx)(h.xu,{marginTop:3,children:(0,l.jsx)(h.xv,{muted:!0,size:1,weight:"regular",children:EZ})})]})})]}):null}function zw(e){let{value:t,validation:n,children:i}=e,a=(0,d.useMemo)(()=>n.map(e=>({level:e.level,path:e.path,item:{message:e.message},message:e.message})),[n]);return(0,l.jsxs)(l.Fragment,{children:[t?._id?(0,l.jsx)(zC,{id:t._id,markers:a}):null,i]})}function zk(e){let{enabled:t,mode:n}=Ng();return t?(0,l.jsx)(x.M2,{condition:"upsell"===n,wrapper:e=>(0,l.jsx)(NK,{children:e}),children:e.renderDefault(e)}):e.renderDefault(e)}let zT="sanity/scheduled-publishing",zA=aU({name:zT,document:{actions:e=>0>e.findIndex(e=>"publish"===e.action)?[zb,...e]:e.flatMap(e=>"publish"===e.action?[e,zb]:e),badges:e=>[...e,zj]},form:{components:{input:e=>{let{schemaType:t}=e;return"document"===function e(t){return t.type?e(t.type):t}(t).name?(0,l.jsx)(zw,{...e,children:e.renderDefault(e)}):e.renderDefault(e)}}},studio:{components:{layout:function(e){return(0,l.jsx)(Nf,{children:(0,l.jsx)(zk,{...e})})}}},tools:e=>[...e,{name:"schedules",title:"Schedules",icon:_.Que,component:zm,router:ny.BC.create("/",[ny.BC.create("/state/:state"),ny.BC.create("/date/:date")])}]}),z_="tasks";function zS({children:e}){let{enabled:t,isLoading:n}=Bm("sanityTasks"),i=dR().tasks?.enabled,a=(0,d.useMemo)(()=>!i||n?{enabled:!1,mode:null}:{enabled:!0,mode:t?"default":"upsell"},[t,n,i]);return(0,l.jsx)(p.IO.Provider,{value:a,children:e})}function zE(){return(0,d.useContext)(p.IO)}function zM({children:e,isLastPane:t}){return(0,l.jsx)(p.Sh.Provider,{value:t,children:e})}function zN(e){let[t,n]=(0,d.useState)(null),i=B_({documentValue:t,permission:"read"}),a=(0,d.useMemo)(()=>({mentionOptions:i,selectedDocument:t,setSelectedDocument:n}),[i,t,n]);return(0,l.jsx)(p.rY.Provider,{value:a,children:e.children})}function zI(){let e=(0,d.useContext)(p.rY);if(!e)throw Error("useMentionUser must be used within a MentionUserProvider");return e}let zz=(0,t4.dS)({name:"Task Created",version:1,description:"A task is created"}),z$=(0,t4.dS)({name:"Task Status Changed",version:1,description:"Task status changed"}),zO=(0,t4.dS)({name:"Task Duplicated",version:1,description:"A task is duplicated"}),zP=(0,t4.dS)({name:"Task Removed",version:1,description:"A task is removed"}),zF=(0,t4.dS)({name:"Task Link Copied",version:1,description:"The link to a task is copied"}),zD=(0,t4.dS)({name:"Task Link Opened",version:1,description:"User visited the studio through a link with a task"}),zR={viewMode:"list",selectedTask:null,activeTabId:"assigned",duplicateTaskValues:null,isOpen:!1};function zL(e,t){switch(t.type){case"TOGGLE_TASKS_VIEW":return!1===t.payload?{...zR,isOpen:t.payload}:{...e,isOpen:t.payload};case"CREATE_TASK":return{...e,viewMode:"create",selectedTask:(0,nm.Z)()};case"EDIT_TASK":return{...e,viewMode:"edit",selectedTask:t.payload.id};case"EDIT_DRAFT":return{...e,viewMode:"draft",selectedTask:t.payload.id};case"DUPLICATE_TASK":return{...e,viewMode:"duplicate",selectedTask:(0,nm.Z)(),duplicateTaskValues:t.payload.duplicateTaskValues};case"SET_ACTIVE_TAB":return{...e,viewMode:"list",activeTabId:t.payload};case"NAVIGATE_TO_LIST":return{...e,viewMode:"list"};default:return e}}let zB=({children:e})=>{let[t,n]=(0,d.useReducer)(zL,zR),i=(0,ny.tv)(),a=(0,h.pm)(),r=(0,na.f1)(),o=(0,d.useCallback)(e=>{switch(e.type){case"list":n({type:"NAVIGATE_TO_LIST"});break;case"create":n({type:"CREATE_TASK"});break;case"edit":n({type:"EDIT_TASK",payload:{id:e.id}});break;case"duplicate":n({type:"DUPLICATE_TASK",payload:{duplicateTaskValues:e.duplicateTaskValues}});break;case"draft":n({type:"EDIT_DRAFT",payload:{id:e.id}})}},[]),s=(0,d.useCallback)(e=>{n({type:"SET_ACTIVE_TAB",payload:e})},[]),c=(0,d.useCallback)(()=>{n({type:"TOGGLE_TASKS_VIEW",payload:!1})},[]),u=(0,d.useCallback)(()=>{n({type:"TOGGLE_TASKS_VIEW",payload:!0})},[]),m=(0,d.useCallback)(()=>{let e=new URL(window.location.href);e.searchParams.set("sidebar","tasks"),e.searchParams.set("viewMode",t.viewMode),t.selectedTask&&e.searchParams.set("selectedTask",t.selectedTask),navigator.clipboard.writeText(e.toString()).then(()=>{a.push({closable:!0,status:"info",title:"Copied link to clipboard"}),r.log(zF)}).catch(()=>{a.push({closable:!0,status:"error",title:"Failed to copy link to clipboard"})})},[t.selectedTask,t.viewMode,r,a]),f=new URLSearchParams(i.state._searchParams).toString();(0,d.useEffect)(()=>{if(f){let e=new URLSearchParams(f);if("tasks"!==e.get("sidebar"))return;n({type:"TOGGLE_TASKS_VIEW",payload:!0});let t=e.get("viewMode"),i=e.get("selectedTask");"edit"===t&&i&&(n({type:"EDIT_TASK",payload:{id:i}}),r.log(zD))}},[f,r]);let g=(0,d.useMemo)(()=>({state:t,setViewMode:o,setActiveTab:s,handleCloseTasks:c,handleOpenTasks:u,handleCopyLinkToTask:m}),[c,m,u,s,o,t]);return(0,l.jsx)(p.EG.Provider,{value:g,children:e})};function zq(){return(0,d.useContext)(p.EG)||zV}let zV={state:{activeTabId:"assigned",viewMode:"list",selectedTask:null,isOpen:!1,duplicateTaskValues:null},setActiveTab:()=>null,setViewMode:()=>null,handleCloseTasks:()=>null,handleCopyLinkToTask:()=>null,handleOpenTasks:()=>null};function zK(e,t){switch(t.type){case"TASKS_SET":{let n=t.tasks.reduce((e,t)=>({...e,[t._id]:t}),{});return{...e,tasks:n}}case"TASK_ADDED":{let n=t.payload,i={[n._id]:{...e.tasks[n._id],...n,_state:n._state||void 0,_createdAt:n._createdAt||new Date().toISOString()}};return{...e,tasks:{...e.tasks,...i}}}case"TASK_RECEIVED":{let n=t.payload;return{...e,tasks:{...e.tasks,[n._id]:n}}}case"TASK_DELETED":{let{[t.id]:n,...i}=e.tasks;return{...e,tasks:i}}case"TASK_UPDATED":{let n=t.payload,i=n._id,a={...e.tasks[i],...n};return{...e,tasks:{...e.tasks,[i]:a}}}default:return e}}let zU={tasks:{}},zZ={events:["welcome","mutation","reconnect"],includeResult:!0,visibility:"query"},zG=`{
  ...,
}`,zH=`*[_type == "tasks.task"] ${zG} | order(_createdAt desc)`,zW=[];function zY(e){let{children:t}=e,[n,i]=(0,d.useState)(null),{data:a=zW,isLoading:r}=function(e){let{client:t}=PT(),{documentId:n}=e,[i,a]=(0,d.useReducer)(zK,zU),[r,o]=(0,d.useState)(null!==t),[s,l]=(0,d.useState)(null),c=(0,d.useMemo)(()=>({documentId:n?iS(n):null}),[n]),u=(0,d.useCallback)(async()=>{if(!t){o(!1);return}try{let e=await t.fetch(zH,c);a({type:"TASKS_SET",tasks:e}),o(!1)}catch(e){l(e)}},[t,c]),p=(0,d.useCallback)(async e=>{if("welcome"===e.type&&(o(!0),await u(),o(!1)),"reconnect"===e.type&&o(!0),"mutation"===e.type){if("appear"===e.transition){let t=e.result;t&&a({type:"TASK_RECEIVED",payload:t})}if("disappear"===e.transition&&a({type:"TASK_DELETED",id:e.documentId}),"update"===e.transition){let t=e.result;t&&a({type:"TASK_UPDATED",payload:t})}}},[u]),m=(0,d.useMemo)(()=>t?t.observable.listen(zH,c,zZ).pipe((0,F.K)(e=>(l(e),(0,N.of)(e)))):(0,N.of)(),[t,c]);return(0,d.useEffect)(()=>{let e=m.subscribe(p);return()=>{e?.unsubscribe()}},[p,m]),{data:(0,d.useMemo)(()=>Object.values(i.tasks),[i.tasks]),dispatch:a,error:s,isLoading:r}}({}),o=(0,d.useMemo)(()=>m(i,1e3),[]),s=(0,d.useMemo)(()=>({activeDocument:n,setActiveDocument:o,isLoading:r,data:a??[]}),[n,a,r,o]);return(0,l.jsx)(p.SG.Provider,{value:s,children:t})}function zJ(){return(0,d.useContext)(p.SG)||{activeDocument:null,setActiveDocument:()=>null,data:[],isLoading:!1}}let zX="tasks",zQ={interpolate:/{{([\s\S]+?)}}/g},z0="www.sanity.io";function z1(e){let[t,n]=(0,d.useState)(!1),[i,a]=(0,d.useState)(null),r=NP(),o=(0,na.f1)(),s=Bi({apiVersion:"2024-04-19"}),c=(0,d.useMemo)(()=>({dialogSecondaryClicked:()=>o.log(NL,{feature:zX,type:"modal"}),dialogPrimaryClicked:()=>o.log(NR,{feature:zX,type:"modal"}),panelViewed:e=>o.log(NF,{feature:zX,type:"inspector",source:e}),panelDismissed:()=>o.log(ND,{feature:zX,type:"inspector"}),panelPrimaryClicked:()=>o.log(NR,{feature:zX,type:"inspector"}),panelSecondaryClicked:()=>o.log(NL,{feature:zX,type:"inspector"})}),[o]),u=(0,d.useCallback)(()=>{c.dialogPrimaryClicked()},[c]),m=(0,d.useCallback)(()=>{c.dialogSecondaryClicked()},[c]),h=(0,d.useCallback)(()=>{n(!1),o.log(ND,{feature:zX,type:"modal"})},[o]);(0,d.useEffect)(()=>{let e=s.observable.request({uri:"/journey/tasks"}).subscribe({next:e=>{if(e)try{let t=nQ(e.ctaButton.url,zQ);e.ctaButton.url=t({baseUrl:z0,projectId:r});let n=nQ(e.secondaryButton.url,zQ);e.secondaryButton.url=n({baseUrl:z0,projectId:r}),a(e)}catch{}},error:()=>{}});return()=>{e.unsubscribe()}},[s,r]);let f=(0,d.useCallback)(e=>{n(!0),o.log(NF,{feature:zX,type:"modal",source:e})},[o]),g=(0,d.useMemo)(()=>({upsellDialogOpen:t,handleOpenDialog:f,upsellData:i,telemetryLogs:c}),[f,t,i,c]);return(0,l.jsxs)(p.Wi.Provider,{value:g,children:[e.children,i&&t&&(0,l.jsx)(Ei,{data:i,onClose:h,onPrimaryClick:u,onSecondaryClick:m})]})}function z2(){return(0,d.useContext)(p.Wi)||z3}let z3={upsellData:null,handleOpenDialog:()=>null,upsellDialogOpen:!1,telemetryLogs:{dialogSecondaryClicked:()=>null,dialogPrimaryClicked:()=>null,panelViewed:()=>null,panelDismissed:()=>null,panelPrimaryClicked:()=>null,panelSecondaryClicked:()=>null}};function z4(){let{handleOpenTasks:e,setViewMode:t}=zq(),{enabled:n,mode:i}=zE(),{handleOpenDialog:a}=z2(),r=(0,d.useCallback)(()=>{"upsell"===i?a("document_action"):(e(),t({type:"create"}))},[e,t,i,a]),{t:o}=i1(z_);return(0,d.useMemo)(()=>n?{icon:_.N$D,label:o("actions.create.text"),title:o("actions.create.text"),group:["paneActions"],onHandle:r}:null,[n,r,o])}function z5(e){let{documentId:t,documentType:n}=e,i=(0,d.useContext)(p.Sh),{setActiveDocument:a}=zJ();return(0,d.useEffect)(()=>(t&&i&&n&&a?.({documentId:iS(t),documentType:n}),()=>{i&&a?.(null)}),[t,n,i,a]),null}function z8(e){let{enabled:t}=zE();return t?(0,l.jsx)(z5,{...e}):null}function z6(e){let t=e.value?._id,n=e.value?._type;return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(z8,{documentId:t,documentType:n}),e.renderDefault(e)]})}z4.displayName="TaskCreateAction";let z7=j.zo.div`
  position: relative;
  [data-ui='Badge'] {
    position: absolute;
    top: -2px;
    right: -2px;
  }
`;function z9({documentId:e,documentType:t,dataset:n,projectId:i}){return{documentType:t,document:{_ref:iS(e),_type:"crossDatasetReference",_dataset:n,_projectId:i,_weak:!0}}}function $e(e){if(!e)return[];let t=[];return e?.forEach(e=>{w.DG(e)&&e.children.forEach(e=>{"mention"!==e._type||"string"!=typeof e.userId||t.includes(e.userId)||t.push(e.userId)})}),t}let $t="2024-03-05",$n=[{value:"open",title:"To Do",icon:(0,l.jsx)(_.J$M,{})},{value:"closed",title:"Done",icon:(0,l.jsx)(_.nSX,{})}],$i=["title","status","assignedTo","dueBy","target","description"];function $a(e){let{documentId:t,documentType:n}=e||{},i=NQ().get(n),a=CI(),r=(0,d.useMemo)(()=>t&&i?vc(a,i,t,""):(0,N.of)(null),[t,a,i]),o=(0,eR.m)(r),s=o?.isLoading??!0,{published:l,draft:c}=o||{},u=c?.title||l?.title,p=c?.subtitle||l?.subtitle,m=c?.description||l?.description;return{isLoading:s,value:{title:u,subtitle:p,media:c?.media||l?.media,description:m}}}function $r(){let{client:e,createAddonDataset:t}=PT(),n=vh(),i=(0,d.useCallback)(async i=>{if(!n)throw Error("No current user found. Unable to create task.");let a={...i,authorId:n.id,_type:"tasks.task"};if(!e)try{let e=await t();if(!e)throw Error("No addon client found. Unable to create task.");return await e.create(a)}catch(e){throw e}try{return await e.create(a)}catch(e){throw e}},[e,t,n]),a=(0,d.useCallback)(async(t,n)=>{try{if(!e)throw Error("No client. Unable to create task.");return await e.patch(t).set(n).commit()}catch(e){throw e}},[e]),r=(0,d.useCallback)(async t=>{try{if(!e)throw Error("No client. Unable to create task.");await e.delete(t)}catch(e){throw e}},[e]);return(0,d.useMemo)(()=>({create:i,edit:a,remove:r}),[i,a,r])}function $o({id:e,onError:t,onRemoved:n}){let[i,a]=(0,d.useState)("idle"),[r,o]=(0,d.useState)(!1),[s,l]=(0,d.useState)(null),c=$r();return{removeStatus:i,showDialog:r,error:s,handleRemove:(0,d.useCallback)(async()=>{try{a("loading"),await c.remove(e),n?.(),a("idle"),await new Promise(e=>setTimeout(e,300)),o(!1)}catch(e){t?.(e.message),l(e.message),a("error")}finally{a("idle")}},[e,c,t,n]),handleOpenDialog:(0,d.useCallback)(()=>{o(!0)},[o]),handleCloseDialog:(0,d.useCallback)(()=>{o(!1)},[o])}}let $s={month:"long",day:"2-digit",minute:"2-digit",hour:"2-digit",second:"2-digit"},$l={minimal:!0,useTemporalPhrase:!0},$c=j.zo.strong`
  font-weight: 600;
`,$d=j.zo.span`
  white-space: nowrap;
`;function $u(e){let t=new Date(e),n=Al($s).format(t);return{timeAgo:Bv(t||"",$l),formattedDate:n}}function $p({userId:e}){let[t,n]=vm(e);return n?(0,l.jsx)(h.Qr,{style:{width:"15ch"}}):(0,l.jsx)($c,{children:t?.displayName})}let $m={month:"short",day:"numeric"};function $h({date:e}){let t=new Date(e),n=Al($m).format(t);return(0,l.jsx)($c,{children:(0,l.jsx)($d,{children:n})})}let $f=j.zo.span`
  > a {
    color: var(--card-fg-muted-color);
    text-decoration: underline;
    text-underline-offset: 1px;
    font-weight: 600;
  }
`;function $g({target:e}){let t=NQ(),n=e.document._ref,i=e.documentType,a=t.get(i),{isLoading:r,value:o}=$a({documentId:n,documentType:i});return r?(0,l.jsx)(h.Qr,{style:{width:"15ch"}}):a?(0,l.jsx)($f,{children:(0,l.jsx)(ny.nR,{intent:"edit",params:{id:n,type:i},children:o?.title})}):null}let $x=(0,d.memo)(function(e){let{activity:t}=e,{formattedDate:n,timeAgo:i}=$u(t.timestamp),{icon:a,text:r,changeTo:o}=function(e){switch(e.field){case"status":{let t=$n.find(t=>t.value===e.to)?.title;return{text:"changed status to",icon:$n.find(t=>t.value===e.to)?.icon||(0,l.jsx)(_.J$M,{}),changeTo:(0,l.jsx)($c,{children:t})}}case"target":return e.to?{text:"set target content to",icon:(0,l.jsx)(_.xPt,{}),changeTo:(0,l.jsx)($g,{target:e.to})}:{text:"removed target content",icon:(0,l.jsx)(_.xPt,{}),changeTo:void 0};case"dueBy":return e.from?e.to?{text:"changed the due date to",icon:(0,l.jsx)(_.Que,{}),changeTo:(0,l.jsx)($h,{date:e.to})}:{text:"removed the due date",icon:(0,l.jsx)(_.Que,{}),changeTo:void 0}:{text:"set the due date to",icon:(0,l.jsx)(_.Que,{}),changeTo:(0,l.jsx)($h,{date:e.to})};case"assignedTo":return e.to?{text:"assigned to",icon:(0,l.jsx)(_.tBG,{}),changeTo:(0,l.jsx)($p,{userId:e.to})}:{text:"unassigned this task",icon:(0,l.jsx)(_.tBG,{}),changeTo:void 0};case"description":return{text:"updated the task description",icon:(0,l.jsx)(_.dY8,{}),changeTo:void 0};case"title":return{text:"updated the task title",icon:(0,l.jsx)(_.dY8,{}),changeTo:void 0};default:return{text:"",icon:(0,l.jsx)(_.J$M,{})}}}(t);return(0,l.jsxs)(h.kC,{gap:1,children:[(0,l.jsx)(h.xu,{marginTop:1,marginLeft:1,marginRight:3,children:(0,l.jsx)(h.xu,{marginRight:1,children:(0,l.jsx)(h.xv,{children:a})})}),(0,l.jsxs)(h.xv,{muted:!0,size:1,children:[(0,l.jsx)($p,{userId:t.author})," ",r," ",o," •"," ",(0,l.jsx)(x.u,{content:n,placement:"top-end",children:(0,l.jsx)($d,{children:(0,l.jsx)("time",{dateTime:n,children:i})})})]})]})},(e,t)=>e.activity.timestamp===t.activity.timestamp),$y=j.zo.div(e=>{let t=(0,b.aQ)(e.theme);return(0,j.iv)`
      min-height: ${t.avatar.sizes[e.$size]?.size}px;
      min-width: ${t.avatar.sizes[e.$size]?.size}px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      ${e.$border?"box-shadow: inset 0 0 0 1px var(--card-border-color);":""};
      ${e.$removeBg?"--card-avatar-gray-bg-color: transparent;":""}
    `}),$b=(0,j.zo)(h.Od)(e=>{let t=(0,b.aQ)(e.theme);return(0,j.iv)`
    height: ${t.avatar.sizes[e.$size]?.size}px;
    width: ${t.avatar.sizes[e.$size]?.size}px;
    border-radius: 50%;
  `});function $v(e){let{user:t,size:n=0,border:i=!0}=e,[a,r]=vm(t?.id||"");return r?(0,l.jsx)($b,{$size:n,animated:!0}):t&&a?(0,l.jsx)(x.u,{content:a.displayName,disabled:!e.withTooltip,portal:!0,fallbackPlacements:["top","top-start"],placement:"top-end",children:(0,l.jsx)($y,{$size:n,$removeBg:!!a?.imageUrl,children:(0,l.jsx)(oP,{user:a,size:n,...a?.imageUrl?{color:void 0}:{},...e.withTooltip?{title:null}:{}})})}):(0,l.jsx)($y,{$size:n,$border:i,children:(0,l.jsx)(h.xv,{size:n,children:(0,l.jsx)(_.tBG,{})})})}let $j=(0,j.zo)(h.kC)`
  height: 100%;
`,$C=j.zo.div`
  width: 100%;
`;function $w({avatarPaddingTop:e=1,userId:t,children:n}){return(0,l.jsxs)(h.kC,{children:[(0,l.jsx)(h.xu,{marginRight:3,paddingTop:e,children:(0,l.jsx)($v,{user:{id:t},size:0})}),(0,l.jsx)($j,{align:"center",flex:1,children:(0,l.jsx)($C,{children:n})})]})}function $k(e){let{mentionOptions:t,currentUser:n,onSubmit:i}=e,{mode:a}=zE(),[r,o]=(0,d.useState)(null),s=(0,d.useRef)(null),c=(0,d.useMemo)(()=>Se(r),[r]),u=(0,d.useCallback)(e=>{o(e)},[]),p=(0,d.useCallback)(()=>{c&&(i(r),o(null))},[c,i,r]),m=(0,d.useCallback)(()=>{s.current?.discardDialogController.close()},[]),f=(0,d.useCallback)(()=>{s.current?.discardDialogController.close(),o(null)},[]),g=(0,d.useCallback)(e=>{"Escape"===e.key&&(e.preventDefault(),e.stopPropagation(),c?s.current?.discardDialogController.open():(s.current?.discardDialogController.close(),o(null)))},[c]),{t:x}=i1(z_);return(0,l.jsx)($w,{userId:n.id,avatarPaddingTop:3,children:(0,l.jsx)(h.Zb,{tone:"transparent",radius:3,padding:2,children:(0,l.jsx)(Vy,{withAvatar:!1,currentUser:n,expandOnFocus:!0,mentionOptions:t,onChange:u,onDiscardConfirm:f,onDiscardCancel:m,onKeyDown:g,onSubmit:p,readOnly:"upsell"===a,placeholder:x("upsell"===a?"panel.comment.placeholder.upsell":"panel.comment.placeholder"),ref:s,value:r})})})}let $T={parentCommentAvatar:!1,threadCommentsAvatar:!0,replyAvatar:!0,avatarSize:0},$A=j.zo.div(e=>{let t=(0,b.aQ)(e.theme);return(0,j.iv)`
    [data-ui='CommentsListItem'] {
      padding-right: ${t.space[2]}px;
    }

    // Increase the padding when the comment input is focused
    [data-ui='CommentInputEditableWrap']:focus-within {
      padding-bottom: ${t.space[2]}px;
    }
  `});function $_(e){let{parentComment:t}=e,{mode:n}=zE();return(0,l.jsx)($w,{userId:t.authorId,avatarPaddingTop:3,children:(0,l.jsx)($A,{children:(0,l.jsx)(Ka,{...e,avatarConfig:$T,canReply:!0,isSelected:!1,mode:n??"default"})})})}let $S=(0,j.zo)(h.Qr)`
  max-width: 15ch;
  width: '100%';
`,$E=(0,d.memo)(function(e){let{createdAt:t,authorId:n}=e,[i,a]=vm(n),{timeAgo:r,formattedDate:o}=$u(t),{t:s}=i1(z_);return(0,l.jsx)($w,{userId:n,children:(0,l.jsx)(h.kC,{align:"center",paddingTop:1,children:(0,l.jsxs)(h.xv,{size:1,muted:!0,children:[(0,l.jsxs)("strong",{style:{fontWeight:600},children:[a?(0,l.jsx)($S,{}):i?.displayName??s("panel.activity.unknown-user")," "]}),s("panel.activity.created-fragment")," •"," ",(0,l.jsx)(x.u,{content:o,placement:"top-end",children:(0,l.jsx)($d,{children:(0,l.jsx)("time",{dateTime:t,children:r})})})]})})})},(e,t)=>e.createdAt===t.createdAt);function $M(e){let{value:t,onChange:n,path:i,currentUserId:a}=e,r=t.subscribers?.includes(a)?"Unsubscribe":"Subscribe",o=(0,d.useCallback)(()=>{let e=t.subscribers||[];e.includes(a)||n(sU(e.concat(a),i)),e.includes(a)&&n(sU(e.filter(e=>e!==a),i))},[t.subscribers,a,n,i]);return(0,l.jsxs)(h.kC,{gap:1,align:"center",children:[(0,l.jsx)(x.zx,{mode:"bleed",text:r,onClick:o}),t.subscribers&&t.subscribers?.length>0&&(0,l.jsx)($I,{subscriberIds:t.subscribers})]})}let $N=[];function $I(e){let{subscriberIds:t}=e,n=(0,d.useMemo)(()=>t?.filter(Boolean)||$N,[t]);return(0,l.jsx)(t8.M,{initial:!1,children:(0,l.jsx)(h.Jh,{maxLength:3,size:0,children:n.map(e=>(0,l.jsx)(t5.E.div,{exit:{opacity:0,translateX:"2px",scale:.9},animate:{opacity:1,translateX:0,scale:1,transition:{type:"just",duration:.2}},initial:{opacity:0,translateX:"2px",scale:.9},children:(0,l.jsx)($v,{user:{id:e},size:0})},e))})})}let $z=[],$$={hidden:{opacity:0,x:0},visible:{opacity:1,x:0}},$O=(0,j.zo)((0,t5.E)(h.Kq))``;function $P(e){let{value:t,onChange:n,path:i,activityData:a=[]}=e,r=vh(),{title:o,basePath:s}=dR(),{comments:c,mentionOptions:u,operation:p,getComment:m}=Sb(),[f,g]=(0,d.useState)(null),[x,y]=(0,d.useState)(null),[b,v]=(0,d.useState)(!1),j=c.loading,C=c.data.open,w=(0,d.useCallback)((e,n)=>{let i=new URL(`${window.location.origin}${s?`${s}/`:""}`);i.searchParams.set("sidebar","tasks"),i.searchParams.set("selectedTask",t?._id),i.searchParams.set("viewMode","edit"),i.searchParams.set("commentId",n);let a=$e(e),r=Array.from(new Set([...t.subscribers||[],...a]));return{documentTitle:t.title||"Sanity task",url:i.toString(),workspaceTitle:o,subscribers:r}},[s,t?._id,t.title,o,t.subscribers]),k=(0,d.useCallback)(e=>{let t=(0,nm.Z)(),i=w(e,t),a={id:t,type:"task",message:e,parentCommentId:void 0,reactions:$z,status:"open",threadId:(0,nm.Z)(),context:{notification:i}};n(sU(i.subscribers,["subscribers"])),p.create(a)},[p,w,n]),T=(0,d.useCallback)(e=>{let t=(0,nm.Z)(),i=w(e.message,t);n(sU(i.subscribers,["subscribers"])),p.create({id:t,type:"task",message:e.message,parentCommentId:e.parentCommentId,reactions:$z,status:"open",threadId:e.threadId,context:{notification:i}})},[p,w,n]),A=(0,d.useCallback)(e=>{let t=m(e);if(!t)return;let i=w(t.message,t._id);n(sU(i.subscribers,["subscribers"])),p.create({type:"task",id:t._id,message:t.message,parentCommentId:t.parentCommentId,reactions:t.reactions||$z,status:t.status,threadId:t.threadId,context:{notification:i}})},[m,p,w,n]),_=(0,d.useCallback)((e,t)=>{p.react(e,t)},[p]),S=(0,d.useCallback)(e=>g(e),[]),E=(0,d.useCallback)(()=>g(null),[]),M=(0,d.useCallback)(async e=>{try{v(!0),y(null),await p.remove(e),g(null)}catch(e){y(e)}finally{v(!1)}},[p]),N=(0,d.useCallback)((e,t)=>{p.update(e,t)},[p]),I=(0,d.useMemo)(()=>{let e=a.map(e=>({_type:"activity",payload:e,timestamp:e.timestamp})),t=C.map(e=>({_type:"comment",payload:e,timestamp:e.parentComment._createdAt}));return e.concat(t).sort((e,t)=>new Date(e.timestamp).getTime()-new Date(t.timestamp).getTime())},[a,C]),{t:z}=i1(z_),$=(0,d.useMemo)(()=>{let e=C.find(e=>e.parentComment?._id===f);return!!(e&&e?.replies?.length>0)},[f,C]);return(0,l.jsxs)(l.Fragment,{children:[f&&(0,l.jsx)(qF,{commentId:f,error:x,isParent:$,loading:b,onClose:E,onConfirm:M}),(0,l.jsxs)(h.Kq,{space:5,children:[(0,l.jsxs)(h.kC,{align:"center",children:[(0,l.jsx)(h.xu,{flex:1,children:(0,l.jsx)(h.xv,{size:2,weight:"semibold",children:z("panel.activity.title")})}),r?.id&&(0,l.jsx)($M,{currentUserId:r.id,value:t,onChange:n,path:i})]}),j&&(0,l.jsx)(aW,{showText:!0,title:"Loading activity"}),(0,l.jsx)(t8.M,{children:!j&&(0,l.jsxs)($O,{animate:"visible",initial:"hidden",space:4,variants:$$,children:[t.createdByUser&&(0,l.jsx)(h.Kq,{paddingBottom:1,children:(0,l.jsx)($E,{createdAt:t.createdByUser,authorId:t.authorId})}),r&&(0,l.jsxs)(h.Kq,{space:4,marginTop:1,children:[I.map(e=>"activity"===e._type?(0,l.jsx)($x,{activity:e.payload},e.timestamp):(0,l.jsx)($_,{currentUser:r,mentionOptions:u,onCreateRetry:A,onDelete:S,onEdit:N,onReactionSelect:_,onReply:T,parentComment:e.payload.parentComment,replies:e.payload.replies},e.payload.parentComment._id)),(0,l.jsx)($k,{currentUser:r,mentionOptions:u,onSubmit:k})]})]})})]})]})}function $F(e){let{user:t,onSelect:n,pressed:i}=e,{t:a}=i1(z_),r=(0,d.useCallback)(()=>n(t.id),[t,n]);return(0,l.jsx)(h.sN,{onClick:r,padding:1,disabled:!t.granted,pressed:i,children:(0,l.jsxs)(h.kC,{align:"center",gap:3,children:[(0,l.jsxs)(h.kC,{align:"center",gap:2,flex:1,children:[(0,l.jsx)($v,{user:t.id?t:void 0,size:1}),(0,l.jsx)(h.xv,{size:1,textOverflow:"ellipsis",title:t.displayName,children:t.displayName})]}),!t.granted&&(0,l.jsx)(h.Ct,{fontSize:1,mode:"outline",children:a("form.input.assignee.unauthorized.text")})]})})}let $D=(0,j.zo)(h.v2)`
  width: 308px;
  border-radius: 3px;
`,$R=["Control","Shift","Alt","Enter","Home","End","PageUp","PageDown","Meta","Tab","CapsLock"],$L={id:"",displayName:"No assignee",granted:!0};function $B({onSelect:e,value:t=""}){let[n,i]=(0,d.useState)(""),{mentionOptions:a}=zI(),r=(0,d.useRef)(null),o=[$L].concat(a.data||[]),s=(0,d.useCallback)(e=>{i(e.currentTarget.value)},[]),c=(0,d.useMemo)(()=>{if(!n)return o||[];let e=t6(n).toLocaleLowerCase();return o?.map(e=>({...e,searchName:t6(e.displayName||"").toLocaleLowerCase()}))?.filter(t=>t?.searchName.includes(e))?.sort((t,n)=>{let i=t.searchName.startsWith(e),a=n.searchName.startsWith(e);return i&&!a?-1:!i&&a?1:0})||[]},[o,n]),u=(0,d.useCallback)(n=>(0,l.jsx)($F,{user:n,onSelect:e,pressed:n.id===t},n.id),[e,t]),p=(0,d.useCallback)(e=>{e.target!==r.current&&($R.includes(e.key)||r.current?.focus())},[]),{t:m}=i1(z_);return a.loading?(0,l.jsx)(h.W2,{width:0,children:(0,l.jsx)(aW,{showText:!0})}):(0,l.jsxs)("div",{onKeyDown:p,children:[(0,l.jsx)(h.oi,{placeholder:m("form.input.assignee.search.placeholder"),autoFocus:!0,border:!1,onChange:s,value:n,fontSize:1,icon:_.tBG,ref:r,name:"assigneeSearch",autoComplete:"off"}),(0,l.jsx)("div",{style:{maxHeight:"320px",overflowY:"scroll",paddingTop:"8px"},children:0===c.length?(0,l.jsx)(h.xu,{padding:3,children:(0,l.jsx)(h.xv,{align:"center",size:1,muted:!0,children:m("form.input.assignee.search.no-users.text")})}):c.map(u)})]})}function $q(e){let{onSelect:t,menuButton:n,value:i}=e;return(0,l.jsx)(x.j2,{button:n,id:"assign-user-menu",menu:(0,l.jsx)($D,{children:(0,l.jsx)($B,{onSelect:t,value:i})}),popover:{placement:"bottom",fallbackPlacements:["bottom"],portal:!0,constrainSize:!0}})}let $V=(0,j.zo)(h.Zb)(e=>{let t=(0,b.aQ)(e.theme);return(0,j.iv)`
    &[data-as='button'] {
      border: 1px solid var(--card-border-color);
      &:focus-within {
        border: 1px solid var(--card-focus-ring-color);
      }
      --card-muted-fg-color: ${t.color.input.default.enabled.placeholder};
    }
  `});function $K(e){let{value:t,onChange:n}=e,{mentionOptions:i}=zI(),a=(0,d.useMemo)(()=>i.data?.find(e=>e.id===t),[i.data,t]),r=(0,d.useCallback)(e=>n(sU(e)),[n]),{t:o}=i1(z_),s=(0,d.useMemo)(()=>{if(t){if(i.loading)return(0,l.jsx)(h.Qr,{animated:!0,style:{width:"10ch"}});if(a)return a.displayName||a.email;if(!a)return o("form.input.assignee.user-not-found.text")}return o("form.input.assignee.search.placeholder")},[i.loading,a,t,o]);return(0,l.jsx)($q,{onSelect:r,value:t,menuButton:(0,l.jsx)($V,{"data-as":"button",padding:1,radius:2,tabIndex:0,children:(0,l.jsxs)(h.kC,{align:"center",gap:3,children:[(0,l.jsxs)(h.kC,{align:"center",gap:1,flex:1,children:[(0,l.jsx)($v,{user:a,size:1,border:!1}),(0,l.jsx)(h.xv,{size:1,textOverflow:"ellipsis",muted:!a,children:s})]}),t&&a&&!a.granted&&(0,l.jsx)(h.Ct,{fontSize:1,mode:"outline",children:o("form.input.assignee.unauthorized.text")})]})})})}let $U=(0,j.zo)(h.zx)`
  padding: 3px 6px;
`;function $Z(e){let{value:t,onChange:n,path:i}=e,a=cW(["subscribers"]),{mentionOptions:r}=zI(),o=(0,d.useMemo)(()=>r.data?.find(e=>e.id===t),[r.data,t]),{t:s}=i1(z_),c=(0,d.useCallback)(e=>{n(sU(e,i)),a&&!a.includes(e)&&e&&n(sU([...a,e],["subscribers"]))},[n,i,a]),u=(0,d.useMemo)(()=>{if(t){if(r.loading)return(0,l.jsx)(h.Qr,{animated:!0,style:{width:"10ch"}});if(o)return o.displayName||o.email;if(!o)return s("form.input.assignee.user-not-found.text")}return s("form.input.assignee.no-user-assigned.text")},[r.loading,o,t,s]);return(0,l.jsx)($q,{onSelect:c,value:t,menuButton:(0,l.jsx)($U,{mode:"ghost",padding:0,children:(0,l.jsx)(x.u,{content:s(t?"form.input.assignee.user-assigned.tooltip":"form.input.assignee.no-user-assigned.tooltip"),children:(0,l.jsxs)(h.kC,{align:"center",gap:3,children:[(0,l.jsxs)(h.kC,{align:"center",gap:2,flex:1,children:[(0,l.jsx)($v,{user:o,size:0}),(0,l.jsx)(h.xu,{children:(0,l.jsx)(h.xv,{size:1,textOverflow:"ellipsis",children:u})})]}),t&&o&&!o.granted&&(0,l.jsx)(h.Ct,{fontSize:1,mode:"outline",children:s("form.input.assignee.unauthorized.text")})]})})})})}let $G=e=>(0,eq.WU)(e,eq.K_),$H=e=>(0,eq.Qc)(e,eq.K_);function $W(e){let{value:t,onChange:n,path:i}=e,{t:a}=i1(),{t:r}=i1(z_),[o,s]=(0,d.useState)(!1),c=(0,d.useRef)(null),u=(0,d.useRef)(null),p=Al({dateStyle:"long"}),m=(0,d.useMemo)(()=>{if(!t)return{short:"----",full:"----"};let e=p.format(new Date(t)),[n]=e.split(",");return{short:n,full:e}},[p,t]);(0,h.Of)(()=>s(!1),()=>[c.current]);let f=(0,d.useCallback)(e=>{"Escape"===e.key&&s(!1)},[]),g=(0,d.useCallback)(()=>s(e=>!e),[]),y=(0,d.useMemo)(()=>hw(a),[a]),b=(0,d.useCallback)(e=>{n(e?sU($G(e),i):sZ(i)),s(!1)},[n,i]),v=$H(t),j=(0,d.useCallback)(()=>{u.current?.focus()},[u]),C=v?.date?.getFullYear()===new Date().getFullYear();return(0,l.jsx)(x.J2,{constrainSize:!0,"data-testid":"date-input-dialog",portal:!0,ref:c,content:(0,l.jsx)(h.xu,{overflow:"auto",children:(0,l.jsxs)(S.ZP,{onDeactivation:j,children:[(0,l.jsx)(hb,{calendarLabels:y,selectTime:!1,timeStep:1,onKeyUp:f,value:v.date,onChange:b}),t&&(0,l.jsx)(h.kC,{justify:"flex-start",padding:3,paddingTop:0,children:(0,l.jsx)(x.zx,{mode:"bleed",text:r("form.input.date.buttons.remove.text"),onClick:()=>b(null),tone:"critical"})})]})}),open:o,placement:"bottom",fallbackPlacements:["bottom-start","bottom-end"],children:(0,l.jsx)(x.zx,{icon:_.Que,mode:"ghost",text:C?m.short:m.full,onClick:g,ref:u,tooltipProps:{content:r(t?"form.input.date.buttons.tooltip":"form.input.date.buttons.empty.tooltip")}})})}let $Y=(0,j.zo)(h.xv)`
  word-break: break-word;
`;function $J(e){let{children:t}=e;return(0,l.jsx)(h.xu,{paddingTop:2,paddingBottom:3,children:(0,l.jsx)($Y,{size:1,children:t})})}let $X=e=>{let{children:t}=e;return(0,l.jsx)($J,{children:t})},$Q=j.zo.div(e=>{let t=(0,b.aQ)(e.theme),n="edit"===e.$mode?t.space[1]:t.space[3],i="edit"===e.$mode?120:200;return(0,j.iv)`
    /* select CommentInputEditableWrap and change the padding */
    [data-ui='CommentInputEditableWrap'] {
      overflow: hidden;
      padding: ${"edit"===e.$mode?`${n}px 0px`:`${n}px ${t.space[2]}px`};
      min-height: ${Math.max(e.$minHeight+n,i)}px !important;
    }
    #comment-input-root {
      box-shadow: ${"edit"===e.$mode?"none":""};
    }
    [data-ui='CommentInputActions'] {
      display: none !important;
    }
  `});function $0(e){let{value:t,mode:n,inputProps:{onChange:i}}=e,a=vh(),{mentionOptions:r}=zI(),o=(0,d.useCallback)(e=>i(sU(e)),[i]),[s,c]=(0,d.useState)(null),[u,p]=(0,d.useState)(200),m=(0,d.useCallback)(e=>{let t=e.querySelector('[role="textbox"]');t&&p(t.scrollHeight)},[]),h=(0,d.useCallback)(e=>{e&&(0,d.startTransition)(()=>{c(e)})},[]),{t:f}=i1(z_);return(0,d.useEffect)(()=>{s&&m(s)},[t,m,s]),a?(0,l.jsx)($Q,{$mode:n,ref:h,$minHeight:u,children:(0,l.jsx)(Vy,{expandOnFocus:!1,currentUser:a,mentionOptions:r,onChange:o,value:t??[],withAvatar:!1,placeholder:f("form.input.description.placeholder"),onDiscardConfirm:()=>null,renderBlock:$X})}):null}let $1=j.zo.div(e=>{let t=(0,b.aQ)(e.theme);return(0,j.iv)`
    // Reset the padding of the field header content box
    [data-ui='fieldHeaderContentBox'] {
      padding: 0;
      label {
        font-weight: ${t.font.text.weights.regular};
      }
    }
  `});function $2(e){return(0,l.jsx)($1,{children:e.renderDefault(e)})}let $3=(0,d.forwardRef)(function(e,t){let{t:n}=i1(z_),{value:i,options:a,...r}=e,o=a.find(e=>e.value===i),s=$n.find(e=>e.value===i)?.icon;return(0,l.jsx)(x.zx,{...r,ref:t,tooltipProps:{content:n("form.input.status.button.tooltip")},icon:s,text:o?.title||i,tone:"default",mode:"ghost"})});function $4(e){let{value:t,onChange:n,options:i,path:a}=e,r=(0,na.f1)(),o=(0,d.useCallback)(e=>{n(sU(e,a)),r.log(z$,{from:t,to:e})},[n,a,r,t]);return(0,l.jsx)(x.j2,{button:(0,l.jsx)($3,{value:t,options:i}),id:"reference-menuButton",menu:(0,l.jsx)(h.v2,{children:i.map(e=>{let n=t===e.value,i=$n.find(t=>t.value===e.value)?.icon;return(0,l.jsx)(x.sN,{icon:"string"==typeof e.value&&i||_.J$M,text:e.title||e.value,pressed:n,iconRight:n&&(0,l.jsx)(_.KML,{}),onClick:()=>o(e.value)},e.title)})})})}function $5(){return(0,l.jsx)("div",{children:"Config errors"})}function $8({children:e}){return(0,l.jsx)(Be,{LoadingComponent:aW,ConfigErrorsComponent:$5,children:e})}let $6=(0,j.zo)(h.Zb)(e=>{let t=(0,b.aQ)(e.theme);return(0,j.iv)`
    &:focus {
      border: 1px solid var(--card-focus-ring-color);
    }
    &:focus-visible {
      outline: none;
      border: 1px solid var(--card-focus-ring-color);
    }
    &:hover {
      border-color: ${t.color.input.default.hovered.border};
    }
  `}),$7=(0,j.zo)(h.xv)(e=>`
      color: ${(0,b.aQ)(e.theme).color.input.default.enabled.placeholder};
      margin-left: 3px;
  `),$9=(0,j.zo)(h.Zb)`
  position: relative;
  [data-ui='show-on-hover'] {
    opacity: 0;
    position: absolute;
    right: 6px;
    top: 4px;
    display: flex;
  }
  &:focus-within,
  &:hover {
    padding-right: 36px;
    /* Hides the preview status dot, the button will take it's position. */
    [data-testid='compact-preview__status'] {
      opacity: 0;
    }
    [data-ui='show-on-hover'] {
      transition: opacity 200ms;
      opacity: 1;
    }
  }
`,Oe=(0,j.zo)(ny.nR)(()=>(0,j.iv)`
    text-decoration: none;
    width: 100%;
    overflow: hidden;
    cursor: pointer;
    &:focus {
      box-shadow: 0 0 0 1px var(--card-focus-ring-color);
    }
    &:focus-visible {
      outline: none;
      box-shadow: 0 0 0 1px var(--card-focus-ring-color);
    }
  `);function Ot(e){let{value:t,handleRemove:n}=e,i=t.document._ref,a=t.documentType,r=NQ().get(t.documentType),o=CP(i),{t:s}=i1(z_),c=(0,d.useMemo)(()=>(0,d.forwardRef)(function(e,t){return(0,l.jsx)(Oe,{...e,intent:"edit",params:{id:i,type:a},ref:t})}),[i,a]);return r?(0,l.jsx)($9,{border:!0,radius:2,children:(0,l.jsxs)(h.kC,{gap:1,align:"center",justify:"space-between",children:[(0,l.jsx)(h.Zb,{as:c,radius:2,"data-as":"button",children:(0,l.jsx)(Ab,{documentId:t.document._ref,layout:"compact",presence:o,schemaType:r,showBadge:!1})}),(0,l.jsx)("div",{"data-ui":"show-on-hover",children:(0,l.jsx)(x.zx,{icon:_.Two,mode:"bleed",onClick:n,tooltipProps:{content:s("form.input.target.buttons.remove.text")}})})]})}):(0,l.jsx)(h.xv,{children:s("form.input.target.error.schema-not-found")})}function On(e){let[t,n]=(0,d.useState)(!1),{dataset:i,projectId:a}=dR(),{mode:r,inputProps:{onChange:o},value:s}=e,c=(0,d.useCallback)(e=>{o(sU(z9({documentId:e._id,documentType:e._type,dataset:i,projectId:a})))},[i,a,o]),u=(0,d.useCallback)(()=>{o(sZ())},[o]),p=(0,d.useCallback)(()=>{n(!0)},[n]),m=(0,d.useCallback)(()=>{n(!1)},[n]),f=(0,d.useCallback)(e=>{("Enter"===e.key||" "===e.key)&&n(!0)},[]),{t:g}=i1(z_);return(0,l.jsx)(h.Zb,{borderBottom:"edit"===r,paddingBottom:"edit"===r?4:0,children:(0,l.jsx)($1,{children:(0,l.jsx)(h.li,{zOffset:100,children:(0,l.jsxs)($8,{children:[(0,l.jsxs)(h.Kq,{space:2,children:["create"===r&&(0,l.jsx)(h.xu,{"data-ui":"fieldHeaderContentBox",children:(0,l.jsx)(sS,{description:e.description,inputId:e.inputId,title:e.title,validation:e.validation,deprecated:void 0})}),s?(0,l.jsx)(Ot,{value:s,handleRemove:u}):(0,l.jsx)($6,{border:!0,radius:2,paddingX:2,paddingY:3,onClick:p,onKeyDown:f,tabIndex:0,children:(0,l.jsxs)(h.kC,{gap:1,justify:"flex-start",align:"center",children:[(0,l.jsx)(h.xu,{paddingX:1,children:(0,l.jsx)(h.xv,{size:1,children:(0,l.jsx)(_.$lS,{})})}),(0,l.jsx)($7,{size:1,children:g("form.input.target.search.placeholder")})]})})]}),(0,l.jsx)(Dp,{children:(0,l.jsx)(Do,{open:t,onClose:m,onItemSelect:c,disableIntentLink:!0})})]})})})})}let Oi=j.zo.div(e=>`
      display: grid;
      grid-template-columns: 1fr;
      padding-top: ${(0,b.aQ)(e.theme).space[3]}px;
    `),Oa=j.zo.textarea(e=>{let{color:t,font:n}=(0,b.aQ)(e.theme);return(0,j.iv)`
    resize: none;
    overflow: hidden;
    appearance: none;
    background: none;
    border: 0;
    padding: 0;
    border-radius: 0;
    outline: none;
    width: 100%;
    box-sizing: border-box;
    font-family: ${n.text.family};
    font-weight: ${n.text.weights.semibold};
    font-size: ${n.text.sizes[3].fontSize}px;
    line-height: ${n.text.sizes[3].lineHeight}px;
    margin: 0;
    position: relative;
    z-index: 1;
    display: block;
    transition: height 500ms;
    /* NOTE: This is a hack to disable Chrome’s autofill styles */
    &:-webkit-autofill,
    &:-webkit-autofill:hover,
    &:-webkit-autofill:focus,
    &:-webkit-autofill:active {
      -webkit-text-fill-color: var(--input-fg-color) !important;
      transition: background-color 5000s;
      transition-delay: 86400s /* 24h */;
    }

    color: ${t.input.default.enabled.fg};

    &::placeholder {
      color: ${t.input.default.enabled.placeholder};
    }
  `});function Or(e){let{value:t,onChange:n,placeholder:i,path:a}=e,r=(0,d.useRef)(null);(0,d.useEffect)(()=>{r.current&&(r.current.style.height="auto",r.current.style.height=`${r.current.scrollHeight}px`)},[t]);let o=(0,d.useCallback)(e=>{let t=e.currentTarget.value;return t||n(sZ(a)),n(sU(t.replace(/\n/g,""),a))},[n,a]);return(0,l.jsx)(Oi,{children:(0,l.jsx)(Oa,{ref:r,autoFocus:!t,value:t,placeholder:i,onChange:o,rows:1})})}function Oo(e){let{value:t,inputProps:n}=e,{onChange:i,schemaType:a}=n;return(0,l.jsx)(Or,{value:t,onChange:i,placeholder:a.placeholder})}let Os=e=>{let t=e.subscribers||[];return $e(e.description).forEach(e=>{t.includes(e)||t.push(e)}),e.assignedTo&&(t.includes(e.assignedTo)||t.push(e.assignedTo)),t};function Ol(e){let[t,n]=(0,d.useState)(!1),{onChange:i}=e,{setViewMode:a,setActiveTab:r}=zq(),o=(0,h.pm)(),s=(0,na.f1)(),[c,u]=(0,d.useState)(!1),p=(0,d.useCallback)(()=>u(e=>!e),[]),m=e.value,f=(0,d.useCallback)(()=>{a({type:"list"})},[a]),{handleRemove:g,removeStatus:y}=$o({id:m._id,onRemoved:f}),{t:b}=i1(z_),{data:v}=zJ(),j=v.find(e=>e._id===m._id);(0,d.useEffect)(()=>{t&&j?.createdByUser&&(s.log(zz),o.push({closable:!0,status:"success",title:b("form.status.success")}),n(!1),c?a({type:"create"}):r("subscribed"))},[t,j?.createdByUser]),(0,d.useEffect)(()=>{let e=null;return t&&(e=setTimeout(()=>{n(!1),o.push({closable:!0,status:"error",title:b("form.status.error.creation-failed")})},1e4)),()=>{e&&clearTimeout(e)}},[t]);let C=(0,d.useCallback)(async()=>{if(n(!0),!m?.title){o.push({closable:!0,status:"error",title:b("form.status.error.title-required")});return}i([sU(Os(m),["subscribers"]),sU(new Date().toISOString(),["createdByUser"])])},[m,i,b,o]);return(0,l.jsxs)(l.Fragment,{children:[e.renderDefault(e),(0,l.jsx)(h.xu,{paddingY:5,children:(0,l.jsxs)(h.kC,{paddingTop:1,gap:4,children:[m._rev&&(0,l.jsx)(x.zx,{onClick:g,mode:"bleed",icon:_.XHJ,tooltipProps:{content:b("buttons.discard.text")},disabled:"loading"===y,loading:"loading"===y}),(0,l.jsxs)(h.kC,{align:"center",gap:2,justify:"flex-end",flex:1,children:[(0,l.jsx)(h.rs,{onChange:p,checked:c}),(0,l.jsx)(h.xv,{size:1,muted:!0,children:b("form.input.create-more.text")})]}),(0,l.jsx)(x.zx,{text:b("buttons.create.text"),onClick:C,disabled:t,loading:t})]})})]})}function Oc(e){let{handleCloseDialog:t,handleRemove:n,removeStatus:i,showDialog:a}=e,{t:r}=i1(z_);return a?(0,l.jsx)(x.Vq,{id:"remove-task",header:r("dialog.remove-task.title"),onClose:t,footer:{cancelButton:{text:r("dialog.remove-task.buttons.cancel.text"),onClick:t},confirmButton:{text:r("dialog.remove-task.buttons.confirm.text"),tone:"critical",onClick:n,loading:"loading"===i}},children:(0,l.jsx)(h.Kq,{space:3,children:(0,l.jsx)(h.xv,{as:"p",children:r("dialog.remove-task.body")})})}):null}let Od=(0,j.zo)(h.kC)(e=>{let t=(0,b.aQ)(e.theme);return(0,j.iv)`
    column-gap: ${t.space[2]}px;
    row-gap: ${t.space[3]}px;
  `});function Ou({id:e,value:t}){let{setViewMode:n,handleCopyLinkToTask:i}=zq(),{mode:a}=zE(),r=(0,na.f1)(),o=$o({id:e,onRemoved:(0,d.useCallback)(()=>{n({type:"list"}),r.log(zP)},[n,r])}),s=(0,d.useCallback)(()=>{n({type:"duplicate",duplicateTaskValues:t}),r.log(zO)},[n,r,t]),{t:c}=i1(z_);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(h.xu,{paddingTop:3,children:(0,l.jsx)(x.j2,{id:"edit-task-menu",button:(0,l.jsx)(aI,{}),popover:{placement:"bottom",fallbackPlacements:["bottom-end","bottom-start"]},menu:(0,l.jsxs)(h.v2,{children:[(0,l.jsx)(x.sN,{text:c("menuitem.duplicate.text"),icon:_.TIy,onClick:s,tooltipProps:"upsell"===a?{content:c("menuitem.duplicate.upsell-tooltip")}:void 0,disabled:"upsell"===a}),(0,l.jsx)(x.sN,{text:c("menuitem.copylink.text"),icon:_.xPt,onClick:i}),(0,l.jsx)(h.R,{}),(0,l.jsx)(x.sN,{text:c("menuitem.delete.text"),icon:_.XHJ,onClick:o.handleOpenDialog,tone:"critical"})]})})}),(0,l.jsx)(Oc,{...o})]})}function Op(e){let t=e.schemaType.fields.find(e=>"status"===e.name),n=e.value,i=vh(),{t:a}=i1(z_),r=function(e){let[t,n]=(0,d.useState)([]),i=Bi({apiVersion:$t}),{dataset:a,token:r}=i.config(),o=iS(e?._id??""),s=i.getUrl(`/data/history/${a}/transactions/${o}?tag=sanity.studio.tasks.history&effectFormat=mendoza&excludeContent=true&includeIdentifiedDocumentsOnly=true&reverse=true`),l=(0,d.useCallback)(async e=>{try{let t;if(!o)return;let i=[],a=(await Cr(s,r)).getReader();for(;!(t=await a.read()).done;){if("error"in t.value)throw Error(t.value.error.description||t.value.error.type);i.push(t.value)}let l=await function(e,t,n){let i=function(e){let{_rev:t,...n}=e;return n}(e),a=[],r=i;for(let e of t){let{timestamp:t,effects:o}=e,s=o[e.documentIDs[0]];s&&s.revert&&(r=(0,n7.a)(i,s.revert),n.forEach(n=>{r?.[n]!==i?.[n]&&a.push({field:n,from:r?.[n],to:i?.[n],timestamp:t,author:e.author})}),i=r)}let o=a.sort((e,t)=>e.timestamp.localeCompare(t.timestamp)),s=o.findIndex(e=>"createdByUser"===e.field);return function(e){let t=[];for(let n of e){let e=t[t.length-1];if(!e||!$i.includes(n.field)){t.push(n);continue}if(e.author===n.author&&e.field===n.field){let t=new Date(e.timestamp),i=new Date(n.timestamp);if(12e4>=Math.abs(t.getTime()-i.getTime())){e.to=n.to,e.timestamp=n.timestamp;continue}}t.push(n)}return t}(o.slice(s+1))}(e,[...i],["createdByUser","title","description","dueBy","assignedTo","status","target"]);n(l)}catch(e){console.error("Failed to fetch and parse activity log",e)}},[s,r,o]);return(0,d.useEffect)(()=>{l(e)},[l,e._rev]),{changes:t}}(n).changes,o=(0,d.useCallback)(t=>{let a=n.subscribers||[];e.onChange(t),i&&(a.includes(i.id)||e.onChange(sU([...a,i.id],["subscribers"])))},[i,e,n.subscribers]);if(!t)throw Error("Status field not found");return e.value?._id?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(h.kC,{align:"flex-start",gap:3,children:[(0,l.jsx)(h.Kq,{flex:1,children:(0,l.jsx)(Or,{onChange:o,value:e.value?.title,path:["title"],placeholder:a("form.input.title.placeholder")})}),(0,l.jsx)(Ou,{id:e.value?._id,value:n})]}),(0,l.jsx)(h.Zb,{borderTop:!0,marginTop:3,children:(0,l.jsx)(Od,{paddingBottom:3,paddingTop:4,align:"flex-start",justify:"flex-start",wrap:"wrap",children:(0,l.jsxs)(x.uE,{children:[(0,l.jsx)($4,{value:e.value?.status,path:["status"],onChange:o,options:t.type.options.list}),(0,l.jsx)($Z,{value:e.value?.assignedTo,onChange:o,path:["assignedTo"]}),(0,l.jsx)($W,{value:e.value?.dueBy,onChange:o,path:["dueBy"]})]})})}),e.renderDefault(e),(0,l.jsx)(Sq,{documentId:n._id,documentType:"tasks.task",sortOrder:"asc",type:"task",children:(0,l.jsx)($8,{children:(0,l.jsx)(h.Zb,{borderTop:!0,paddingTop:4,marginTop:4,paddingBottom:6,children:(0,l.jsx)($P,{value:n,onChange:e.onChange,path:["subscribers"],activityData:r})})})})]}):(0,l.jsx)(aW,{})}function Om(e){let t=e.value,n=vh(),i=(0,d.useCallback)(e=>{if(!n||e.some(e=>"subscribers"===e.path[0])||e.some(e=>"context"===e.path[0]&&"notification"===e.path[1]))return e;let i=t.subscribers||[],a=[...i],r=e.find(e=>"assignedTo"===e.path[0]);r&&"set"===r.type&&"string"==typeof r.value&&!a.includes(r.value)&&a.push(r.value),a.includes(n.id)||a.push(n.id);let o=e.find(e=>"description"===e.path[0]&&"set"===e.type);if(o){let e=$e(t.description);$e("set"===o.type?o.value:void 0).filter(t=>!e.includes(t)).forEach(e=>{a.includes(e)||a.push(e)})}return a.length!==i.length&&e.push(sU(a,["subscribers"])),e},[n,t.subscribers,t.description]);return(0,l.jsx)(_7,{transform:i,children:(0,l.jsx)(Op,{...e})})}function Oh(e){let{inputProps:t}=e,{onChange:n}=t,i=(0,ny.z)((0,d.useCallback)(e=>"string"==typeof e.tool?e.tool:void 0,[])),{target:a,_id:r,context:o,_rev:s}=cW([]),{title:l,basePath:c}=dR(),p=Bi(rz),m=(0,d.useMemo)(()=>eZ(p),[p]),h=a?.document?._ref??"",f=a?.documentType??"",{isLoading:g,value:x}=$a({documentId:h,documentType:f}),y=x?.title||null,b=(0,eU.JZ)(x?.media)?m.image(x.media).width(96).height(96).url():null,v=(0,d.useMemo)(()=>{let e=o?.notification?.url;return{url:e&&lR?e:function(e,t,n=""){let i=window.location.origin;t&&(i+=t),n&&(i+=`/${n}`);let a=new URL(`${i}/`);return a.searchParams.set("sidebar","tasks"),a.searchParams.set("selectedTask",e),a.searchParams.set("viewMode","edit"),a.toString()}(r,c,i),workspaceTitle:l,targetContentImageUrl:b,targetContentTitle:y}},[o?.notification?.url,r,c,i,l,b,y]);return(0,d.useEffect)(()=>{h&&f&&g||s&&(u(o?.notification,v)||n(sU(v,["notification"])))},[s,o,h,f,v,g,n]),null}function Of(e){return(0,l.jsx)($8,{children:(0,l.jsx)(Oh,{...e})})}let Og=e=>(0,w.Z2)({type:"object",name:"target",title:"Target",components:{field:t=>(0,l.jsx)(On,{...t,mode:e})},fields:[{name:"document",type:"crossDatasetReference",dataset:"playground",weak:!0,studioUrl:({id:e,type:t})=>`intent/edit/id=${e};type=${t}/`,to:[{type:"any_document",preview:{select:{title:"title"}}}]},{name:"documentType",type:"string",title:"Document type"}]}),Ox=e=>(0,w.Z2)({type:"array",name:"description",title:"Description",components:{field:t=>(0,l.jsx)($0,{...t,mode:e})},of:[{type:"block",name:"block",of:[{name:"mention",type:"object",fields:[{name:"userId",type:"string"}]}],marks:{annotations:[]},styles:[{title:"Normal",value:"normal"}],lists:[]}]}),Oy=e=>(0,w.fe)({type:"document",name:"tasks.task",liveEdit:!0,components:{input:"edit"===e?Om:Ol},fields:[{type:"string",title:"Title",name:"title",placeholder:"Task title",components:{field:Oo},hidden:"edit"===e},..."edit"===e?[Og(e),Ox(e)]:[Ox(e),Og(e)],{type:"string",name:"assignedTo",title:"Assign to",placeholder:"Select assignee",components:{field:$2,input:$K},hidden:"edit"===e},{type:"date",name:"dueBy",title:"Deadline",placeholder:"yyyy-mm-dd",components:{field:$2},hidden:"edit"===e},{type:"string",name:"authorId",hidden:!0},{type:"string",name:"createdByUser",hidden:!0},{type:"array",of:[{type:"string"}],name:"subscribers",hidden:!0},{type:"string",name:"status",title:"Status",options:{list:$n.map(e=>({value:e.value,title:e.title}))},hidden:!0},{type:"object",name:"context",components:{field:Of},fields:[{type:"object",name:"notification",fields:[{type:"string",name:"url"},{type:"string",name:"workspaceTitle"},{type:"string",name:"targetContentImageUrl"},{type:"string",name:"targetContentTitle"}]}]}]});function Ob({children:e,mode:t,addonDataset:n}){let i=Bi({apiVersion:$t}).config().apiHost,a=AU(),r=(0,d.useMemo)(()=>({basePath:"",dataset:n,name:`addon-dataset-${n}`,projectId:a.projectId,apiHost:i,schema:{types:[Oy(t)]}}),[a.projectId,t,i,n,""]),{workspaces:o}=(0,d.useMemo)(()=>Pm(r,{basePath:""}),[r,""]),s=L7(o[0]);return s?(0,l.jsx)(dD,{workspace:s,children:(0,l.jsx)(AK,{source:s.unstable_sources[0],children:(0,l.jsx)(CA,{children:e})})}):null}function Ov(e){let{client:t,ready:n,createAddonDataset:i}=PT(),a=t?.config().dataset;return(0,d.useEffect)(()=>{!a&&n&&i()},[a,n,i]),a?(0,l.jsx)(Ob,{...e,addonDataset:a}):(0,l.jsx)(aW,{})}let Oj={hidden:{opacity:0},visible:{opacity:1,transition:{duration:.2,delay:.2}}},OC=(0,j.zo)(t5.E.div)(e=>{let t=(0,b.aQ)(e.theme);return`
    // Update spacing for the form builder
    & > [data-ui='Stack'] {
      grid-gap: ${(0,h.hO)(t.space[4])};
    }
`}),Ow=({documentId:e,initialValue:t})=>{let n=function(e){let{documentType:t="tasks.task",documentId:n,initialValue:i={}}=e,a=NQ().get(t);if(!a)throw Error(`Schema type for '${t}' not found`);let{validation:r}=IE(n,t),o=ij(r),[s,l]=(0,d.useState)([]),[c,u]=(0,d.useState)([]),[p,m]=(0,d.useState)(),[h,f]=(0,d.useState)(),[g,x]=(0,d.useState)(),[y]=(0,d.useState)([]),b=(0,d.useCallback)(e=>{l(e)},[l]),v=(0,d.useCallback)(()=>{l([])},[]),j=(0,d.useCallback)((e,t)=>{m(n=>_q(n,e,t))},[]),C=(0,d.useCallback)((e,t)=>{f(n=>_q(n,e,t))},[]),w=(0,d.useCallback)((e,t)=>x(n=>_q(n,e,t)),[]),{patch:k}=Bs(n,t),T=(0,d.useRef)(()=>{throw Error("Nope")});T.current=e=>{k.execute(_4(e.patches),i)};let A=(0,d.useCallback)(e=>T.current(e),[]),_=Br(n,t),S=Bc(n,t),E=S?.draft||S?.published||i,M=_J(a,{value:E,comparisonValue:E,readOnly:!1,changesOpen:!1,presence:y,focusPath:s,openPath:c,collapsedPaths:p,collapsedFieldSets:h,fieldGroupState:g,validation:o}),N=S.ready&&"connected"===_,I=(0,d.useMemo)(()=>sG(),[]);return null!==M&&N?{id:"root",onChange:A,__internal_patchChannel:I,__internal_fieldActions:void 0,onPathFocus:b,onPathOpen:u,onPathBlur:v,onFieldGroupSelect:w,onSetFieldSetCollapsed:C,onSetPathCollapsed:j,collapsedPaths:p,collapsedFieldSets:h,focusPath:M.focusPath,changed:M.changed,focused:M.focused,groups:M.groups,validation:M.validation,members:M.members,presence:M.presence,schemaType:a,value:M.value}:{loading:!0}}({documentType:"tasks.task",documentId:e,initialValue:t}),{setSelectedDocument:i}=zI(),a=n.loading?void 0:n.value?.target,r=a?.document?._ref,o=a?.documentType;return(0,d.useEffect)(()=>{i(r&&o?{_id:r,_type:o}:null)},[r,o,i]),(0,l.jsx)(h.xu,{children:n.loading?(0,l.jsx)(aW,{showText:!0}):(0,l.jsx)(OC,{id:"wrapper",initial:"hidden",animate:"visible",variants:Oj,children:(0,l.jsx)(br,{...n})})})};function Ok(){let e=vh(),{activeDocument:t}=zJ(),{dataset:n,projectId:i}=dR(),{state:{selectedTask:a,viewMode:r,duplicateTaskValues:o}}=zq(),s=(0,d.useMemo)(()=>{if(e&&a){if("duplicate"===r)return{...o,title:`${o?.title} (copy)`,createdByUser:void 0,_id:a,_type:"tasks.task",authorId:e.id,status:"open"};if("create"===r)return{_id:a,_type:"tasks.task",authorId:e.id,status:"open",subscribers:[e.id],target:t?z9({documentId:t.documentId,documentType:t.documentType,dataset:n,projectId:i}):void 0}}},[t,e,n,o,i,a,r]);return e?a?(0,l.jsx)(zN,{children:(0,l.jsx)(Ov,{mode:"edit"===r?"edit":"create",children:(0,l.jsx)(Ow,{documentId:a,currentUser:e,initialValue:s})})}):null:(0,l.jsx)(aW,{showText:!0,title:"Loading current user"})}let OT={open:{assigned:{heading:"empty-state.status.list.open.assigned.heading",text:"empty-state.status.list.open.assigned.text"},document:{heading:"empty-state.status.list.open.document.heading",text:""},subscribed:{heading:"empty-state.status.list.open.subscribed.heading",text:"empty-state.status.list.open.subscribed.text"}},closed:{assigned:{heading:"empty-state.status.list.closed.assigned.heading",text:"empty-state.status.list.closed.assigned.text"},document:{heading:"empty-state.status.list.closed.document.heading",text:""},subscribed:{heading:"empty-state.status.list.closed.subscribed.heading",text:"empty-state.status.list.closed.subscribed.text"}}};function OA({status:e}){let{state:{activeTabId:t}}=zq(),{t:n}=i1(z_),{heading:i,text:a}=OT[e][t];return(0,l.jsxs)(h.Kq,{space:3,children:[(0,l.jsx)(h.xv,{size:1,weight:"semibold",children:n(i)}),(0,l.jsx)(h.xv,{size:1,children:n(a)})]})}let O_={assigned:{heading:"empty-state.list.assigned.heading",text:"empty-state.list.assigned.text"},subscribed:{heading:"empty-state.list.subscribed.heading",text:"empty-state.list.subscribed.text"},document:{heading:"empty-state.list.document.heading",text:"empty-state.list.document.text"},noActiveDocument:{heading:"empty-state.list.no-active-document.heading",text:"empty-state.list.no-active-document.text"}},OS=j.zo.div`
  max-width: 268px;
  margin: 0 auto;
  height: 100%;
  margin-top: 40%;
`,OE=(0,j.zo)(h.xv)`
  @keyframes fadeIn {
    from {
      opacity: 0;
    }
    to {
      opacity: 1;
    }
  }
  animation: fadeIn 0.2s ease-in-out;
`;function OM(){let{activeDocument:e}=zJ(),{mode:t}=zE(),{state:{activeTabId:n},setViewMode:i}=zq(),a=e||"document"!==n?n:"noActiveDocument",{heading:r,text:o}=O_[a],{t:s}=i1(z_),c=(0,d.useCallback)(()=>{i({type:"create"})},[i]);return(0,l.jsx)(OS,{children:(0,l.jsxs)(h.kC,{direction:"column",gap:3,align:"center",flex:1,justify:"center",children:[(0,l.jsx)(OE,{size:1,weight:"semibold",children:s(r)},a),(0,l.jsx)(h.xu,{paddingBottom:6,paddingTop:1,children:(0,l.jsx)(OE,{size:1,align:"center",children:s(o)},a)}),"upsell"!==t&&(0,l.jsx)(x.zx,{icon:_.dtP,text:s("empty-state.list.create-new"),onClick:c})]})})}let ON=(0,j.zo)(ny.nR)(e=>`
  text-decoration: underline;
  text-decoration-color: ${(0,b.aQ)(e.theme).color.input.default.enabled.border};
  text-underline-offset: 2px;
`);function OI({documentId:e,documentType:t}){let n=NQ().get(t),{isLoading:i,value:a}=$a({documentId:e,documentType:t}),r=(0,d.useMemo)(()=>(0,d.forwardRef)(function(n,i){return(0,l.jsx)(ON,{...n,intent:"edit",params:{id:e,type:t},ref:i})}),[e,t]);return n?(0,l.jsxs)(h.kC,{align:"center",gap:2,children:[(0,l.jsx)(h.xv,{size:1,children:(0,l.jsx)(_.$lS,{})}),i?(0,l.jsx)(h.Qr,{size:1,muted:!0}):(0,l.jsx)(h.xv,{size:1,as:r,weight:"medium",style:{maxWidth:"20ch"},textOverflow:"ellipsis",children:a?.title||"Untitled"})]}):null}function Oz(e){let t=$r(),{documentId:n,status:i}=e,[a,r]=(0,d.useState)("closed"===i),[o,s]=(0,d.useState)(!1),c=(0,d.useCallback)(async e=>{let i=e.target.checked;r(i),s(!0);try{i?await t.edit(n,{status:"closed"}):i||await t.edit(n,{status:"open"})}catch(e){console.error("An error occurred while updating the task status",e)}finally{s(!1)}},[n,t]);return(0,l.jsx)(h.kC,{children:o?(0,l.jsx)("div",{style:{height:"17px",width:"17px"},children:(0,l.jsx)(h.$j,{style:{marginLeft:"3.5px",marginRight:"3.5px",marginTop:"3.5px"}})}):(0,l.jsx)(h.XZ,{onChange:c,checked:a,disabled:o})})}let O$=(0,j.zo)(h.zx)`
  width: 100%;
  max-width: 100%;
`,OO=(0,j.zo)(h.kC)`
  /* Checkbox width is 17px and first row gap is 12px. */
  margin-left: 29px;
`;function OP({dueBy:e}){let t=Al({dateStyle:"medium"}),n=Al({month:"short",day:"numeric"}),i=Al({weekday:"long"}),{fullDate:a,monthAndDay:r,day:o,isDueByToday:s,isDueThisWeek:c}=(0,d.useMemo)(()=>{let a=new Date(e);return{fullDate:t.format(a),monthAndDay:n.format(a),day:i.format(a),isDueByToday:(0,tL.Z)(a),isDueThisWeek:(0,tB.Z)(a)}},[i,e,t,n]);return(0,l.jsx)(x.u,{content:a,children:(0,l.jsx)(h.Zb,{tone:s?"critical":"transparent",padding:1,radius:2,children:(0,l.jsx)(h.kC,{align:"center",gap:2,children:(0,l.jsx)(h.xv,{as:"time",size:1,dateTime:e,muted:!0,children:s?"Today":c?o:r})})})})}function OF(e){let{assignedTo:t,title:n,dueBy:i,target:a,onSelect:r,documentId:o,status:s}=e,c=(0,d.useMemo)(()=>(function(e){if(e?.document?._ref)return{_ref:e?.document._ref,_type:e?.documentType}})(a),[a]);return(0,l.jsxs)(h.Kq,{space:3,children:[(0,l.jsxs)(h.kC,{align:"center",gap:1,children:[(0,l.jsx)(h.xu,{children:(0,l.jsx)(Oz,{documentId:o,status:s})}),(0,l.jsx)(h.kC,{flex:1,children:(0,l.jsx)(O$,{onClick:r,mode:"bleed",padding:2,children:(0,l.jsx)(h.xv,{size:1,textOverflow:"ellipsis",weight:"semibold",children:n||"Untitled"})})}),(0,l.jsx)($v,{user:t?{id:t}:void 0,withTooltip:!0})]}),(i||c)&&(0,l.jsxs)(OO,{align:"center",gap:2,paddingX:0,children:[i&&(0,l.jsx)(OP,{dueBy:i}),c&&(0,l.jsx)(h.xu,{marginLeft:1,children:(0,l.jsx)(OI,{documentId:c._ref,documentType:c._type})})]})]})}let OD=[],OR=e=>$n.find(t=>t.value===e)?.title,OL=(0,j.zo)(h.kC)`
  [data-ui='summary-icon'] {
    transition: transform 0.2s;
    transform: rotate(-90deg);
  }
  &[open] [data-ui='summary-icon'] {
    transform: rotate(0);
  }
  > summary::-webkit-details-marker {
    display: none;
  }
`,OB=(0,j.zo)(h.xu)`
  list-style: none;
`;function Oq(e){let{status:t,tasks:n,onTaskSelect:i}=e;return(0,l.jsxs)(OL,{forwardedAs:"details",direction:"column",open:"open"===t,children:[(0,l.jsx)(OB,{forwardedAs:"summary",paddingY:1,children:(0,l.jsxs)(h.kC,{align:"center",gap:1,paddingY:1,children:[(0,l.jsx)(h.xv,{size:1,weight:"medium",muted:!0,children:OR(t)}),(0,l.jsx)(h.xv,{muted:!0,size:1,children:(0,l.jsx)(_.v4q,{"data-ui":"summary-icon"})})]})}),(0,l.jsx)(h.Kq,{space:4,marginTop:3,paddingBottom:5,children:n?.length>0?n.map((e,t)=>{let a=t<n.length-1;return(0,l.jsxs)(d.Fragment,{children:[(0,l.jsx)(OF,{documentId:e._id,title:e.title,dueBy:e.dueBy,assignedTo:e.assignedTo,target:e.target,onSelect:()=>i(e._id),status:e.status}),a&&(0,l.jsx)(h.R,{})]},e._id)}):(0,l.jsx)(OA,{status:t})})]})}function OV(e){let{items:t=OD,onTaskSelect:n}=e,i=(0,d.useMemo)(()=>t.reduce((e,t)=>(e[t.status]||(e[t.status]=[]),e[t.status].push(t),e),{}),[t]),a=i.open?.length>0,r=i.closed?.length>0;return(0,l.jsx)(h.Kq,{space:4,flex:1,children:a||r?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(Oq,{status:"open",tasks:i.open,onTaskSelect:n}),(0,l.jsx)(Oq,{status:"closed",tasks:i.closed,onTaskSelect:n})]}):(0,l.jsx)(OM,{})})}function OK(){let{upsellData:e,telemetryLogs:{panelPrimaryClicked:t,panelSecondaryClicked:n}}=z2();return e?(0,l.jsx)(h.W2,{width:1,children:(0,l.jsx)(h.xu,{marginBottom:6,children:(0,l.jsx)(NO,{data:e,onPrimaryClick:t,onSecondaryClick:n})})}):null}let OU=j.zo.span`
  margin-right: 0.2em;
`,OZ=j.zo.a`
  white-space: nowrap;
  > [data-sanity-icon] {
    --card-icon-color: var(--card-link-color);
  }
`;function OG(e){return(0,l.jsxs)(OZ,{href:"https://snty.link/tasks-feedback",target:"_blank",rel:"noreferrer",children:[(0,l.jsx)(OU,{children:e.children})," ",(0,l.jsx)(_.buG,{})]})}function OH(){let{t:e}=i1(z_);return(0,l.jsx)(h.xu,{padding:4,children:(0,l.jsx)(h.xv,{muted:!0,size:1,children:(0,l.jsx)(rm,{i18nKey:"list.feedback.text",t:e,components:{Link:OG}})})})}let OW={marginLeft:"-0.5em",justifyContent:"space-between",display:"flex"};function OY({activeTabId:e,onChange:t}){let{t:n}=i1(z_),i=(0,d.useMemo)(()=>[{id:"assigned",label:n("tab.assigned.label")},{id:"subscribed",label:n("tab.subscribed.label")},{id:"document",label:n("tab.document.label")}],[n]),a=(0,d.useCallback)(e=>{t(e.id)},[t]);return(0,l.jsx)(h.td,{space:2,style:OW,children:i.map(t=>(0,l.jsx)(x.OK,{"aria-controls":`${t.id}-panel`,id:`${t.id}-tab`,onClick:()=>a(t),selected:t.id===e,children:(0,l.jsx)(h.xv,{size:1,weight:"medium",children:t.label})},`${t.id}-tab`))})}let OJ=j.zo.div(e=>`
    height: 25px;
    width: 1px;
    background-color: ${(0,b.aQ)(e.theme).color.input.default.enabled.border};
  `);function OX(e){let{items:t}=e,{state:n,setViewMode:i}=zq(),{selectedTask:a}=n,r=t.filter(e=>"open"===e.status),o=r.findIndex(e=>e._id===a),s=(0,d.useCallback)(()=>{i({type:"edit",id:o>0?r[o-1]._id:r[r.length-1]._id})},[o,r,i]),c=(0,d.useCallback)(()=>{i({type:"edit",id:o<r.length-1?r[o+1]._id:r[0]._id})},[o,r,i]),{t:u}=i1(z_);return r.length?(0,l.jsx)(x.uE,{children:(0,l.jsxs)(h.kC,{gap:1,align:"center",children:[(0,l.jsx)(x.zx,{tooltipProps:{content:u("buttons.previous.tooltip")},mode:"bleed",icon:_.wyc,onClick:s}),(0,l.jsx)(x.u,{content:u("panel.navigation.tooltip"),children:(0,l.jsx)(h.xu,{paddingY:2,children:(0,l.jsxs)(h.xv,{size:1,children:[o+1," / ",r.length]})})}),(0,l.jsx)(x.zx,{tooltipProps:{content:u("buttons.next.tooltip")},mode:"bleed",icon:_.XCv,onClick:c}),(0,l.jsx)(OJ,{})]})}):null}let OQ={constrainSize:!0,fallbackPlacements:["bottom-end"],placement:"bottom-end",portal:!0},O0=(0,j.zo)(h.v2)`
  width: 220px;
`;function O1(e){let{isSelected:t,item:n,onSelect:i}=e,a=(0,d.useCallback)(()=>{i(n._id)},[n._id,i]),r=t?_.KML:void 0,o=n.title||"Untitled";return(0,l.jsx)(x.sN,{iconRight:r,onClick:a,pressed:t,selected:t,text:o})}function O2(){let{data:e}=zJ(),{state:t,setViewMode:n}=zq(),{viewMode:i,selectedTask:a}=t,r=vh(),o=(0,d.useMemo)(()=>r?.id?e.filter(e=>{let t=e.authorId===r.id,n=!e.createdByUser,o=e._updatedAt!==e._createdAt,s="create"!==i||e._id!==a;return t&&n&&s&&o}):[],[e,a,r?.id,i]),s=(0,d.useCallback)(e=>{n({type:"draft",id:e})},[n]),{t:c}=i1(z_);return o.length?(0,l.jsx)(x.j2,{button:(0,l.jsx)(x.zx,{text:c("buttons.draft.text"),mode:"ghost",iconRight:_.v4q}),id:"edit-task-menu",menu:(0,l.jsxs)(O0,{children:[(0,l.jsx)(h.xu,{padding:3,children:(0,l.jsx)(h.xv,{size:1,weight:"semibold",children:c("panel.drafts.title")})}),(0,l.jsx)(h.R,{}),o?.map(e=>l.jsx(O1,{isSelected:a===e._id,item:e,onSelect:s},e._id))]}),popover:OQ}):null}function O3(e){let{items:t}=e,{mode:n}=zE(),{state:i,setViewMode:a,handleCloseTasks:r}=zq(),{viewMode:o,activeTabId:s}=i,c=(0,d.useCallback)(()=>{a({type:"create"})},[a]),u=(0,d.useCallback)(()=>{a({type:"list"})},[a]),{t:p}=i1(z_);return(0,l.jsxs)(h.kC,{justify:"space-between",align:"center",gap:1,children:[(0,l.jsx)(h.kC,{align:"center",flex:1,children:"list"===o?(0,l.jsx)(h.xu,{padding:2,children:(0,l.jsx)(h.xv,{size:2,weight:"semibold",children:p("panel.title")})}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(h.zx,{mode:"bleed",space:2,padding:2,onClick:u,children:(0,l.jsx)(h.xv,{size:1,children:p("panel.title")})}),(0,l.jsx)(_.XCv,{}),(0,l.jsx)(h.xu,{paddingX:2,children:(0,l.jsx)(h.xv,{size:1,weight:"semibold",style:{textTransform:"capitalize"},children:"create"===o||"draft"===o?p("panel.create.title"):s})})]})}),("create"===o||"draft"===o)&&(0,l.jsx)(O2,{}),"edit"===o&&(0,l.jsx)(OX,{items:t}),(0,l.jsxs)(h.kC,{gap:1,children:["list"===o&&(0,l.jsx)(x.zx,{icon:_.dtP,onClick:c,mode:"bleed",text:p("buttons.new.text"),disabled:"upsell"===n,tooltipProps:"upsell"===n?{content:p("buttons.new.upsell-tooltip")}:void 0}),(0,l.jsx)(x.zx,{tooltipProps:{content:p("panel.close.tooltip")},iconRight:_.Two,mode:"bleed",onClick:r})]})]})}let O4=(0,j.zo)(h.Zb)`
  flex: 1;
  flex-direction: column;
`,O5=(0,j.zo)(h.Kq)`
  border-bottom: 1px solid var(--card-border-color);
`,O8=(0,j.zo)(h.kC)`
  overflow-y: scroll;
  overflow-x: hidden;
`;function O6(){let{mode:e}=zE(),{activeDocument:t,data:n,isLoading:i}=zJ(),{state:a,setActiveTab:r,setViewMode:o}=zq(),{activeTabId:s,viewMode:c,selectedTask:u}=a,p=vh(),m=(0,d.useCallback)(e=>o({type:"edit",id:e}),[o]),f=(0,d.useMemo)(()=>n.filter(e=>!!e.createdByUser&&("assigned"===s?e.assignedTo===p?.id:"subscribed"===s?p?.id&&e.subscribers?.includes(p.id):"document"===s&&t?.documentId&&e.target?.document._ref===t.documentId)),[t?.documentId,s,n,p]),g=(0,d.useMemo)(()=>"list"!==c?(0,l.jsx)(Ok,{},u):i?(0,l.jsx)(h.kC,{align:"center",justify:"center",children:(0,l.jsx)(h.$j,{})}):(0,l.jsxs)(l.Fragment,{children:["upsell"===e&&(0,l.jsx)(OK,{}),(0,l.jsx)(OV,{items:f,onTaskSelect:m})]}),[f,i,m,u,c,e]);return(0,l.jsxs)(O4,{display:"flex",height:"fill",flex:1,overflow:"hidden",children:[(0,l.jsxs)(O5,{space:3,padding:3,sizing:"border",children:[(0,l.jsx)(O3,{items:f}),"list"===c&&!i&&(0,l.jsx)(OY,{activeTabId:s,onChange:r})]}),(0,l.jsx)(O8,{direction:"column",flex:1,overflow:"auto",padding:3,paddingTop:4,paddingX:4,sizing:"border",children:g}),"list"===c&&(0,l.jsx)(OH,{})]})}function O7(){let{enabled:e}=zE();return e?(0,l.jsx)(O6,{}):null}let O9={hidden:{opacity:0},visible:{opacity:1}},Pe={duration:.2},Pt=(0,j.zo)(h.kC)(({theme:e})=>{let t=e.sanity.media;return(0,j.iv)`
    min-height: 100%;

    @media (max-width: ${t[2]}px) {
      position: relative;
    }
  `}),Pn=(0,j.zo)((0,t5.E)(h.mh))(({theme:e})=>{let t=e.sanity.media;return(0,j.iv)`
    display: flex;
    flex-direction: column;
    height: 100%;
    width: 360px;
    border-left: 1px solid var(--card-border-color);
    box-sizing: border-box;
    overflow: hidden;

    box-shadow:
      0px 6px 8px -4px var(--card-shadow-umbra-color),
      0px 12px 17px -1px var(--card-shadow-penumbra-color);

    @media (max-width: ${t[2]}px) {
      bottom: 0;
      position: absolute;
      right: 0;
      top: 0;
    }

    @media (max-width: ${t[1]}px) {
      border-left: 0;
      min-width: 100%;
      left: 0;
    }
  `});function Pi(e){let t=(0,h.d2)(),{state:{isOpen:n}}=zq(),i=t<=1&&n;return(0,l.jsxs)(Pt,{sizing:"border",height:"fill",children:[(0,l.jsx)(h.xu,{flex:1,height:"fill",overflow:i?"hidden":"auto",children:e.renderDefault(e)}),(0,l.jsx)(t8.M,{initial:!1,children:n&&(0,l.jsx)(Pn,{animate:"visible",zOffset:100,height:"fill",initial:"hidden",transition:Pe,variants:O9,children:(0,l.jsx)(O7,{})})})]})}let Pa=e=>{let{enabled:t,mode:n}=zE();return t?(0,l.jsx)(Pk,{children:(0,l.jsx)(x.M2,{condition:"upsell"===n,wrapper:e=>(0,l.jsx)(z1,{children:e}),children:(0,l.jsx)(zY,{children:(0,l.jsx)(zB,{children:e.renderDefault(e)})})})}):e.renderDefault(e)},Pr=[];function Po(e){let{handleOpenTasks:t,handleCloseTasks:n,state:{isOpen:i}}=zq(),{t:a}=i1(z_),r=(0,d.useCallback)(()=>{i?n():t()},[i,t,n]),o=(0,d.useMemo)(()=>[...e?.__internal_actions||Pr,{icon:_.ekf,location:"topbar",name:"tasks-topbar",onAction:r,selected:i,title:a("actions.open.text")},{icon:_.N$D,location:"sidebar",name:"tasks-sidebar",onAction:r,selected:i,title:a("actions.open.text")}],[r,i,e?.__internal_actions,a]);return e.renderDefault({...e,__internal_actions:o})}let Ps="sanity/tasks",Pl=aU({name:Ps,__internal_tasks:{footerAction:(0,l.jsx)(function(){let{data:e,activeDocument:t}=zJ(),{handleOpenTasks:n,setActiveTab:i}=zq(),a=(0,h.d2)(),r=(0,d.useMemo)(()=>t?.documentId?e.filter(e=>e.target?.document._ref===t.documentId&&"open"===e.status&&e.createdByUser):[],[t,e]),o=(0,d.useCallback)(()=>{n(),i("document")},[n,i]),{t:s}=i1(z_);return 0===r.length?null:a<3?(0,l.jsxs)(z7,{children:[(0,l.jsx)(x.zx,{mode:"bleed",icon:_.N$D,size:"large",onClick:o,tooltipProps:{content:s("document.footer.open-tasks.placeholder",{count:r.length})}}),(0,l.jsx)(h.Ct,{tone:"primary",fontSize:0,children:r.length})]}):(0,l.jsx)(x.zx,{mode:"bleed",tooltipProps:{content:s("document.footer.open-tasks.placeholder",{count:r.length})},text:s("document.footer.open-tasks.text",{count:r.length}),onClick:o})},{})},document:{actions:e=>[...e,z4].filter(Boolean)},studio:{components:{layout:function(e){return(0,l.jsx)(zS,{children:(0,l.jsx)(Pa,{...e})})},navbar:function(e){let{enabled:t}=zE();return t?(0,l.jsx)(Po,{...e}):e.renderDefault(e)},activeToolLayout:function(e){let{enabled:t}=zE();return t?(0,l.jsx)(Pi,{...e}):e.renderDefault(e)}}},form:{components:{input:e=>"root"===e.id&&e.schemaType.type?.name==="document"?(0,l.jsx)(z6,{...e}):e.renderDefault(e)}},i18n:{bundles:[{locale:"en-US",namespace:z_,resources:()=>n.e(9960).then(n.bind(n,39960))}]}}),Pc=[EB(),Pl(),zA()];class Pd extends Error{constructor(e){super("SchemaError"),this.schema=e,this.name="SchemaError"}}let Pu=e=>"error"===e.severity,Pp=new WeakMap;function Pm(e,t){if(!Array.isArray(e)&&"missingConfigFile"in e)throw new aq({name:"",type:"configuration file",causes:["No `sanity.config.ts` file found","No `sanity.config.js` file found"]});let n=function(e){let t=e||"";if("string"!=typeof t||t.length>0&&!t.startsWith("/"))throw new aq({name:"",type:"options",causes:["basePath must be a string, and must start with a slash"]});return"/"===t?"":t}(t?.basePath),i=Array.isArray(e)?e:[e];try{!function({workspaces:e}){if(0===e.length)throw new aP("At least one workspace is required.");(function(e){let t=1===e.length,n=new Map;e.forEach((e,i)=>{let{name:a,title:r}=e,o=a$(r,i);if(!a&&!t)throw new aP(`All workspaces must have a \`name\`, unless only a single workspace is defined. Workspace ${o} did not define a \`name\`.`,{workspace:e,index:i});let s=t&&typeof a>"u"?"default":a;if("string"!=typeof s)throw new aP(`Workspace at index ${i} defined an invalid \`name\` - must be a string.`,{workspace:e,index:i});let l=s.toLowerCase(),c=n.get(l);if(c){let t=a$(c.workspace.title,c.index);throw new aP(`\`name\`s must be unique. Workspace ${t} and workspace ${o} both have the \`name\` \`${s}\``,{workspace:e,index:i})}if(n.set(l,{index:i,workspace:e}),!/^[a-z0-9][a-z0-9_-]*$/i.test(s))throw new aP(`All workspace \`name\`s must consist of only a-z, 0-9, underscore and dashes, and cannot begin with an underscore or dash. Workspace ${o} has the invalid name \`${s}\``,{workspace:e,index:i})})})(e),function(e){e.length>1&&e.every(aF),e.every(aD);let[t,...n]=e,i=(t.basePath||"/").slice(1).split("/").filter(Boolean).length;n.forEach((e,n)=>{let a=(e.basePath||"/").slice(1).split("/").length;if(i!==a)throw new aP(`All workspace \`basePath\`s must have the same amount of segments. Workspace \`${az(t,n)}\` had ${i} segment${1===i?"":"s"} \`${t.basePath}\` but workspace \`${az(e,n)}\` had ${a} segment${1===a?"":"s"} \`${e.basePath}\``,{workspace:e,index:n})});let a=new Map;e.forEach((e,t)=>{let n=(e.basePath||"").toLowerCase(),i=a.get(n);if(i)throw new aP(`\`basePath\`s must be unique. Workspaces \`${i}\` and \`${az(e,t)}\` both have the \`basePath\` \`${n}\``,{workspace:e,index:t});a.set(n,az(e,t))})}(e)}({workspaces:i})}catch(e){throw new aq({name:"",type:"workspace",causes:[e.message]})}return{type:"prepared-config",workspaces:i.map(e=>{var t;if(Pp.has(e))return Pp.get(e);let i={tasks:{enabled:!0,...e.unstable_tasks,...e.tasks},scheduledPublishing:{...EH,...e.scheduledPublishing}},{unstable_sources:a=[],...r}=e,o=[r,...a].map(({plugins:e,...t})=>({...t,plugins:[...e??[],...Pc.filter(t=>t.name===zT?i.scheduledPublishing.enabled&&!!e?.length:t.name!==Ps||i.tasks.enabled)]})).map(e=>{let t;let{projectId:n,dataset:i}=e;try{t=function({config:e,context:t}){return Ae({propertyName:"schema.types",config:e,context:t,initialValue:[],reducer:TG})}({config:e,context:{projectId:n,dataset:i}})}catch(t){throw new aq({name:e.name,type:"source",causes:[t]})}let a=function(e){let t=(0,eQ.Fv)(e.types).getTypes(),n=(0,eQ._T)(t),i=n.some(e=>e.problems.some(pS)),a=t3.V.compile({name:e.name,types:i?[]:[...e.types,...pE].filter(Boolean)});return a._validation=n,a.getTypeNames().forEach(e=>{let t=a.get(e);t&&function e(t,n){if(!n.has(t)){if(n.add(t),t.validation=pm(t),"fields"in t)for(let i of t.fields)e(i.type,n);if("of"in t)for(let i of t.of)e(i,n);if(t.annotations)for(let i of t.annotations)e(i,n)}}(t,new Set)}),a}({name:e.name,types:t}),r=a._validation,o=r?.filter(e=>e.problems.some(Pu));if(r&&o?.length)throw new Pd(a);let s=function(e){var t;if(iO(t=e.auth)&&"state"in t&&iO(t.state)&&"subscribe"in t.state&&"function"==typeof t.state.subscribe)return e.auth;let n=e.unstable_clientFactory||eP.eI,{projectId:i,dataset:a,apiHost:r}=e;return rX({apiHost:r,...e.auth,clientFactory:n,dataset:a,projectId:i})}(e),l=function(e){let{projectId:t,dataset:n,name:i}=e,a={projectId:t,dataset:n},r=Ae({config:e,context:a,propertyName:"i18n.locales",reducer:TJ,initialValue:[a1]}),o=Ae({config:e,context:a,propertyName:"i18n.bundles",reducer:TX,initialValue:function(e){let t=[];for(let n of e){if(n.bundles&&!Array.isArray(n.bundles))throw Error(`Resource bundle for locale ${n.id} is not an array`);if(n.bundles)for(let e of n.bundles){if("locale"in e&&e.locale!==n.id)throw Error(`Resource bundle inside locale ${n.id} has mismatching locale id`);if(!e.namespace)throw Error(`Resource bundle for locale ${n.id} is missing namespace`);t.push("locale"in e?e:{...e,locale:n.id})}}return t}(r)});return function({locales:e,bundles:t,projectId:n,sourceName:i}){let a=function(e,t,n,i){let a=a2?localStorage.getItem(a3(e,t))??void 0:void 0,r=n.find(e=>e.id===a),o=n[n.length-1],s=r?.id??o.id??Aa.lng;return{...Aa,ns:Array.from(i),lng:s,supportedLngs:n.map(e=>e.id)}}(n,i,e,new Set(t.map(e=>e.namespace))),r=(0,nn.Fs)().use(function(e){let{bundles:t}=e;return{type:"backend",init:function(){},read:function(e,n,i){let a=t.filter(t=>t.locale===e&&t.namespace===n);if(0===a.length){i(`No translations found for namespace "${n}", language "${e}"`,void 0);return}At(a).then(e=>i(null,e)).catch(e=>i(e,!0))}}}({bundles:t})).use(y.Db);r.init(a).catch(e=>{console.error("Failed to initialize i18n backend: %s",e)});let o=e.map(Ar);return{source:{get currentLocale(){return o.find(e=>e.id===r.language)??a1},loadNamespaces(e){let t=e.filter(e=>!r.hasLoadedNamespace(e));return 0===t.length?Promise.resolve():r.loadNamespaces(t)},locales:o,t:iQ(r.t)},i18next:r}}({locales:r,bundles:o,projectId:t,sourceName:i})}(e),c=s.state.pipe((0,P.U)(({client:t,authenticated:n,currentUser:i})=>(function({config:e,client:t,currentUser:n,schema:i,authenticated:a,auth:r,i18n:o}){let s,l,c;let{dataset:d,projectId:u}=e,p=function(e,t){let{dataset:n,url:i,requestTagPrefix:a="sanity.studio"}=e.withConfig({apiVersion:"2022-06-30"}).config(),r=`${`${i.replace(/\/+$/,"")}/socket/${n}`.replace(/^http/,"ws")}?tag=${a}`,o=t.token?{token$:t.token}:{};return(0,nK.W0)(r,o)}(t,r),m=[],h={},f=e=>{if(!e||!e.apiVersion)throw Error("Missing required `apiVersion` option");return h[e.apiVersion]||(h[e.apiVersion]=t.withConfig(e)),h[e.apiVersion]},g={client:t,getClient:f,currentUser:n,dataset:d,projectId:u,schema:i,i18n:o.source};g.client=[...Object.keys(t),...Object.keys(t.__proto__)].reduce((e,n)=>{let i=Object.hasOwnProperty.call(t,n)?t[n]:t.__proto__[n];return Object.defineProperty(e,n,{get:()=>(console.warn('`configContext.client` is deprecated and will be removed in the next release! Use `context.getClient({apiVersion: "2021-06-07"})` instead'),i)})},{});try{s=Ae({config:e,context:g,propertyName:"schema.templates",reducer:TY,initialValue:i.getTypeNames().filter(e=>!/^sanity\./.test(e)).map(e=>i.get(e)).filter(iw).filter(e=>e.type?.name==="document").map(e=>({id:e.name,schemaType:e.name,title:e.title||e.name,icon:e.icon,value:e.initialValue||{_type:e.name}}))})}catch(t){throw new aq({name:e.name,type:"source",causes:[t]})}try{l=Ae({config:e,context:g,initialValue:[],propertyName:"tools",reducer:TW})}catch(t){throw new aq({name:e.name,type:"source",causes:[t]})}if(l.some(({name:e})=>"tool"===e))throw Error('A tool cannot have the name "tool". Please enter a different name.');let x=s.filter(e=>!e.parameters?.length).map(e=>({templateId:e.id,description:e.description,icon:e.icon,title:e.title})),y=s.reduce((e,t)=>(e.set(t.id,t),e),new Map),b=t=>{let{schemaType:n}=t,a=Ae({config:e,context:{...g,creationContext:t},initialValue:x,propertyName:"document.resolveNewDocumentOptions",reducer:T1}),r=[];if(r.length)throw new aq({name:e.name,type:"source",causes:r});return a.map((e,t)=>{let n=y.get(e.templateId);if(!n)throw Error(`Could not find template with ID \`${e.templateId}\``);let a=i.get(n.schemaType);if(!a)throw Error(`Could not find matching schema type \`${n.schemaType}\` for template \`${n.id}\``);let r=e.title||n.title,o=a?.title===r?void 0:a?.title;return{id:`${e.templateId}-${t}`,templateId:e.templateId,type:"initialValueTemplateItem",title:r,i18n:e.i18n||n.i18n,subtitle:e.subtitle||o,description:e.description||n.description,icon:e.icon||n.icon||a?.icon,initialDocumentId:e.initialDocumentId,parameters:e.parameters,schemaType:n.schemaType}}).filter(e=>!n||"document"===t.type||n===y.get(e.templateId)?.schemaType)};try{c=b({type:"global"})}catch(e){m.push(e)}if(m.length)throw new aq({name:e.name,type:"source",causes:m});return{type:"source",name:e.name,title:e.title||tt(e.name),schema:i,getClient:f,dataset:d,projectId:u,tools:l,currentUser:n,authenticated:a,templates:s,auth:r,i18n:o.source,__internal_tasks:T6({config:e}),document:{actions:t=>Ae({config:e,context:{...g,...t},initialValue:TU,propertyName:"document.actions",reducer:T0}),badges:t=>Ae({config:e,context:{...g,...t},initialValue:TK,propertyName:"document.badges",reducer:TQ}),unstable_fieldActions:t=>Ae({config:e,context:{...g,...t},initialValue:k7,propertyName:"document.unstable_fieldActions",reducer:k6}),inspectors:t=>Ae({config:e,context:{...g,...t},initialValue:iI,propertyName:"document.inspectors",reducer:T5}),resolveProductionUrl:t=>Ae({config:e,context:{...g,...t},initialValue:void 0,propertyName:"resolveProductionUrl",asyncReducer:TH}),resolveNewDocumentOptions:b,unstable_languageFilter:t=>Ae({config:e,context:{...g,...t},initialValue:TZ,propertyName:"document.unstable_languageFilter",reducer:T4}),unstable_comments:{enabled:t=>T8({context:t,config:e,initialValue:!0})},comments:{enabled:t=>T8({context:t,config:e,initialValue:!0})}},form:{file:{assetSources:Ae({config:e,context:g,initialValue:[Tq],propertyName:"formBuilder.file.assetSources",reducer:T2}),directUploads:e.form?.file?.directUploads===void 0||e.form.file.directUploads},image:{assetSources:Ae({config:e,context:g,initialValue:[TV],propertyName:"formBuilder.image.assetSources",reducer:T3}),directUploads:e.form?.image?.directUploads===void 0||e.form.image.directUploads}},search:{filters:As,operators:_P,unstable_partialIndexing:{enabled:T7({config:e,initialValue:e.search?.unstable_partialIndexing?.enabled??!1})},enableLegacySearch:Ae({config:e,context:g,reducer:T9,propertyName:"enableLegacySearch",initialValue:!0})},__internal:{bifur:p,i18next:o.i18next,staticInitialValueTemplateItems:c,options:e},beta:{treeArrayEditing:{enabled:!1}}}})({config:e,client:t,currentUser:i,schema:a,authenticated:n,auth:s,i18n:l})),(0,em.d)(1));return{name:e.name,projectId:e.projectId,dataset:e.dataset,title:e.title||tt(e.name),auth:s,schema:a,i18n:l.source,source:c}}),s=r.title||tt(r.name),c={type:"workspace-summary",auth:o[0].auth,basePath:(t=r.basePath,`/${[n,t||""].map(e=>e.replace(/^\/+/g,"").replace(/\/+$/g,"")).filter(Boolean).join("/")}`),dataset:r.dataset,schema:o[0].schema,i18n:o[0].i18n,customIcon:!!r.icon,icon:function(e,t,n=""){return(0,eV.isValidElementType)(e)?(0,d.createElement)(e):(0,d.isValidElement)(e)?e:function(e,t){let n=_F(`${e} ${t}`),i=M.mE.filter(e=>"gray"!==e),a=i[Math.floor(n*i.length)],r=["300","400","500","600","700"],o=r[Math.floor(_F(n.toString())*r.length)],s=M.VG[a][o].hex,c=e.split(/\s/g).map(e=>e.replace(/\\W/g,"")).filter(Boolean).slice(0,2).map(e=>e.charAt(0).toUpperCase()),d=(0,nb._j)(s,.4),u=(0,nb.$n)(s,.4),p=(0,nb.WC)(s,"readable",d)?(0,nb.WC)(s,"readable",u)?(0,nb.XV)(s):u:d;return(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:[(0,l.jsx)("rect",{width:32,height:32,rx:2,fill:s}),(0,l.jsx)(_D,{x:"50%",y:"50%",textAnchor:"middle",alignmentBaseline:"middle",dominantBaseline:"middle",fill:p,children:c})]})}(t,n)}(r.icon,s,`${r.projectId} ${r.dataset}`),name:r.name||"default",projectId:r.projectId,theme:r.theme||h.Lg,title:s,subtitle:r.subtitle,__internal:{sources:o},__internal_serverDocumentActions:e.__internal_serverDocumentActions,...i};return Pp.set(e,c),c})}}function Ph(e){let{projectId:t,dataset:n,schema:i,currentUser:a,getClient:r,i18n:o}=e;return(0,d.useMemo)(()=>({projectId:t,dataset:n,schema:i,currentUser:a,getClient:r,i18n:o}),[t,n,i,a,r,o])}function Pf(e){let{projectId:t,dataset:n,schema:i,currentUser:a,getClient:r,i18n:o}=e;return{projectId:t,dataset:n,schema:i,currentUser:a,getClient:r,i18n:o}}function Pg({config:e,children:t,basePath:n,LoadingComponent:i}){let[a,r]=(0,d.useState)(null);return(0,d.useEffect)(()=>{r(Pm(e,{basePath:n}).workspaces)},[n,e]),null===a?(0,l.jsx)(i,{}):(0,l.jsx)(p.zZ.Provider,{value:a,children:t})}function Px({children:e,history:t}){return(0,l.jsx)(p.qD.Provider,{value:t,children:e})}let Py=(0,d.memo)(function({children:e,history:t,activeWorkspace:n,setActiveWorkspace:i}){let a=(0,d.useMemo)(()=>({activeWorkspace:n,setActiveWorkspace:i}),[n,i]);return(0,l.jsx)(p.C0.Provider,{value:a,children:(0,l.jsx)(Px,{history:t,children:e})})}),Pb=()=>typeof document>"u"?(0,nB.PP)():(0,nB.lX)();function Pv({children:e,LoadingComponent:t,NotFoundComponent:n,unstable_history:i}){let a=aO(),r=(0,d.useMemo)(()=>i||Pb(),[i]),o=(0,d.useCallback)(e=>{let t=a.find(t=>t.name===e);t&&r.push(t.basePath)},[r,a]),s=(0,d.useCallback)(()=>{o(a[0].name)},[o,a]),c=function(e,t){let n=(0,d.useMemo)(()=>t.map(e=>{let t=e.basePath||"/";return{workspace:e,name:e.name,basePath:t,basePathRegex:RegExp(`^${nV(t)}(\\/|$)`,"i")}}),[t]),i=(0,d.useMemo)(()=>(function(e){let t=e.map(e=>e.basePath.slice(1).split("/")).reduce((e,t)=>{for(let n=0;n<e.length;n++)if(e[n]!==t[n].toLowerCase())return e.slice(0,n);return e});return RegExp(`^${function e([t,...n]){return t?`(\\/${nV(t)}${e(n)}(\\/|$))?`:""}(t)}$`,"i")})(n),[n]),[a]=(0,d.useState)(()=>e.location.pathname),r=(0,d.useMemo)(()=>({subscribe:t=>e.listen(t),getSnapshot:()=>e.location.pathname,getServerSnapshot:()=>a,selector:e=>(function({pathname:e,workspaces:t,basePathRegex:n}){let[i]=t;for(let{workspace:n,basePath:i,basePathRegex:a}of t)if(a.test(e)||"/"===i)return{type:"match",workspace:n};return"/"===e?{type:"redirect",pathname:i.basePath}:n.test(e)?{type:"redirect",pathname:i.basePath}:{type:"not-found"}})({basePathRegex:i,pathname:e,workspaces:n}),isEqual:(e,t)=>{if(e.type!==t.type)return!1;switch(e.type){case"match":return e.workspace===t.workspace;case"redirect":return e.pathname===t.pathname;case"not-found":return!0;default:throw Error(`Unknown type: ${e.type}`)}}}),[i,e,a,n]);return(0,nq.useSyncExternalStoreWithSelector)(r.subscribe,r.getSnapshot,r.getServerSnapshot,r.selector,r.isEqual)}(r,a);switch((0,d.useEffect)(()=>{"redirect"===c.type&&r.replace(c.pathname)},[r,c]),c.type){case"match":return(0,l.jsx)(Py,{activeWorkspace:c.workspace,history:r,setActiveWorkspace:o,children:e});case"redirect":return(0,l.jsx)(t,{});case"not-found":return(0,l.jsx)(n,{onNavigateToDefaultWorkspace:s});default:throw Error(`Unknown type: ${c.type}`)}}function Pj(){let e=(0,d.useContext)(p.C0);if(!e)throw Error("Could not find `ActiveWorkspaceMatcher` context");return e}let PC="v2023-11-13";function Pw(e){let{children:t}=e,{dataset:n,projectId:i}=dR(),a=Bi(rz),[r,o]=(0,d.useState)(null),[s,c]=(0,d.useState)(!1),[u,m]=(0,d.useState)(!1),h=(0,d.useCallback)(async()=>(await a.withConfig({apiVersion:PC}).request({uri:`/projects/${i}/datasets?datasetProfile=comments&addonFor=${n}`,tag:"sanity.studio"}))?.[0]?.name,[n,a,i]),f=(0,d.useCallback)(e=>a.withConfig({apiVersion:PC,dataset:e,projectId:i,requestTagPrefix:"sanity.studio",useCdn:!1,withCredentials:!0}),[a,i]),g=(0,d.useCallback)(async()=>{c(!0);try{let e=await h();if(e){let t=f(e);return o(t),c(!1),t}}catch{}try{let e=(await a.withConfig({apiVersion:PC}).request({uri:`/comments/${n}/setup`,method:"POST"}))?.datasetName;if(!e)return c(!1),null;let t=f(e);return o(t),t}catch(e){throw e}finally{c(!1)}},[n,h,f,a]);(0,d.useEffect)(()=>{h().then(e=>{e&&o(f(e))}).finally(()=>{m(!0)})},[h,f]);let x=(0,d.useMemo)(()=>({client:r,createAddonDataset:g,isCreatingDataset:s,ready:u}),[r,g,s,u]);return(0,l.jsx)(p.Qr.Provider,{value:x,children:t})}function Pk(e){return(0,d.useContext)(p.Qr)?e.children:(0,l.jsx)(Pw,{...e})}function PT(){let e=(0,d.useContext)(p.Qr);if(!e)throw Error("useAddonDataset: missing context value");return e}function PA(){return(0,h.ue)()?"dark":"light"}function P_({children:e,scheme:t}){let n=PA();return(0,l.jsx)(h.f6,{scheme:"system"===t?n:t,theme:h.Lg,children:e})}let PS="sanityStudio:ui:colorScheme";function PE({children:e,onSchemeChange:t,scheme:n}){return n?(0,l.jsx)(PI,{scheme:n,onSchemeChange:t,children:e}):(0,l.jsx)(PM,{onSchemeChange:t,children:e})}function PM({children:e,onSchemeChange:t}){let n=(0,d.useMemo)(()=>{let e;let t=new Set;return{subscribe:n=>(e||(e=PN(localStorage.getItem(PS))||"system"),t.add(n),()=>{t.delete(n)}),getSnapshot:()=>e,setSnapshot:n=>{for(let i of(e=PN(n),t))i()},getServerSnapshot:()=>"system"}},[]),i=(0,d.useSyncExternalStore)(n.subscribe,n.getSnapshot,n.getServerSnapshot);return(0,d.useEffect)(()=>{"function"==typeof t&&t(i),localStorage.setItem(PS,i)},[t,i]),(0,l.jsx)(p.SM.Provider,{value:n.setSnapshot,children:(0,l.jsx)(p.Nt.Provider,{value:i,children:(0,l.jsx)(P_,{scheme:i,children:e})})})}function PN(e){switch(e){case"dark":case"light":return e;default:return"system"}}function PI({children:e,onSchemeChange:t,scheme:n}){return(0,l.jsx)(p.SM.Provider,{value:"function"==typeof t&&t,children:(0,l.jsx)(p.Nt.Provider,{value:n,children:(0,l.jsx)(P_,{scheme:n,children:e})})})}function Pz(){let e=(0,d.useContext)(p.SM);if(null===e)throw Error("Could not find `ColorSchemeSetValueContext` context");return e}function P$(){let e=(0,d.useContext)(p.Nt);if(null===e)throw Error("Could not find `ColorSchemeValueContext` context");return e}function PO(){let e=P$(),t=PA();return"system"===e?t:e}function PP(e,t){let n=P$();return(0,d.useMemo)(()=>[{title:t("user-menu.color-scheme.system-title"),name:"system",label:t("user-menu.color-scheme.system-description"),selected:"system"===n,onSelect:()=>e("system"),icon:_.ugZ},{title:t("user-menu.color-scheme.dark-title"),name:"dark",label:t("user-menu.color-scheme.dark-description"),selected:"dark"===n,onSelect:()=>e("dark"),icon:_.kLh},{title:t("user-menu.color-scheme.light-title"),name:"light",label:t("user-menu.color-scheme.light-description"),selected:"light"===n,onSelect:()=>e("light"),icon:_.NWY}],[n,e,t])}function PF(e){return e.reduce((e,t)=>(e[t.type]=t,e),{})}function PD(e,t){return t?e[t]:void 0}function PR(e,t){return{fieldId:t,filterName:e.name,operatorType:e?.operators.find(e=>"item"===e.type)?.name||""}}function PL({fieldDefinitions:e,filterDefinitions:t,filters:n,operatorDefinitions:i}){return n.filter(n=>PK({filter:n,filterDefinitions:t,fieldDefinitions:e,operatorDefinitions:i})).map(n=>PD(i,n.operatorType)?.groqFilter({fieldPath:function({filter:e,fieldDefinitions:t,filterDefinitions:n}){let i=PB(t,e),a=n[e.filterName];if(a)switch(a.type){case"field":return i?.fieldPath;case"pinned":return a?.fieldPath;default:return}}({filter:n,fieldDefinitions:e,filterDefinitions:t}),value:n?.value})).filter(e=>!te(e)).filter(iw).join(" && ")}function PB(e,t){return t?.fieldId?e[t.fieldId]:void 0}function Pq(e){return[e.filterName,...e.fieldId?[e.fieldId]:[]].join("-")}function PV({fieldDefinitions:e,filters:t,types:n}){let i=n.map(e=>e.name),a=e9(...Object.values(e).filter(e=>t.map(e=>e?.fieldId).includes(e.id)).filter(e=>e.documentTypes.length>0).map(e=>e.documentTypes)),r=[];return i.length>0&&r.push(i),a.length>0&&r.push(a),e9(...r).sort()}function PK({filter:e,filterDefinitions:t,fieldDefinitions:n,operatorDefinitions:i}){let a=t[e.filterName],r=PD(i,e.operatorType),o=PB(n,e);return!(!a||!r||e.fieldId&&!o||"field"===a.type&&(!o?.fieldPath||!e.fieldId||!r.groqFilter({fieldPath:o.fieldPath,value:e.value}))||"pinned"===a.type&&!r.groqFilter({fieldPath:a.fieldPath,value:e.value}))}let PU=(0,eJ.P6)("escape"),PZ=j.zo.div`
  background: transparent;
  height: 100%;
  left: 0;
  position: fixed;
  top: 0;
  width: 100%;
  z-index: -1;
`;function PG({anchorElement:e,children:t,onClose:n}){let{isTopLayer:i}=(0,h.sJ)(),a=(0,d.useCallback)(e=>{PU(e)&&i&&n()},[i,n]);(0,h.qh)(a);let r=function(e){let[t,n]=(0,d.useState)(e&&PH(e)),i=(0,d.useCallback)(()=>{e&&n(PH(e))},[e]);return(0,d.useEffect)(()=>{e&&n(PH(e))},[e]),(0,d.useEffect)(()=>(window.addEventListener("resize",i),()=>window.removeEventListener("resize",i)),[i]),t}(e||null);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(PZ,{onClick:n}),(0,l.jsx)(S.ZP,{autoFocus:!1,returnFocus:!0,children:(0,l.jsx)(h.Zb,{display:"flex",overflow:"hidden",radius:3,style:{maxHeight:`min(calc(100vh - ${r}px - 5px - ${AC}px), 500px`,zIndex:1},children:(0,l.jsx)(h.kC,{children:t})})})]})}function PH(e){let t=e.getBoundingClientRect();return t.y+t.height+5}let PW=(0,j.zo)(h.xu)`
  border-bottom: 1px solid ${({theme:e})=>e.sanity.color.base.border};
  flex-shrink: 0;
`,PY=(0,j.zo)(h.kC)`
  box-sizing: border-box;
`,PJ=(0,d.forwardRef)(function({ariaInputLabel:e,onChange:t,onClear:n,typeFilter:i},a){let{state:{fullscreen:r}}=Ah(),{t:o}=i1();return(0,l.jsx)(PW,{children:(0,l.jsx)(PY,{align:"center",flex:1,padding:1,children:(0,l.jsx)(_f,{__unstable_disableFocusRing:!0,$smallClearButton:!0,"aria-label":e,autoComplete:"off",border:!1,clearButton:!!i,fontSize:r?2:1,icon:_.W1M,muted:!0,onChange:t,onClear:n,placeholder:o("search.filter-placeholder"),ref:a,spellCheck:!1,radius:2,value:i})})})});function PX({fieldDefinitions:e,filterDefinitions:t,filters:n,id:i,headerTitle:a,tone:r}){let o=n.map(n=>({fieldDefinition:PB(e,n),filterDefinition:t[n.filterName],filter:n,group:i,tone:r||"default",type:"filter"}));return o.length>0?[...a?[{title:a||"",tone:r||"default",type:"header"}]:[],...o]:[]}function PQ(e,t){return e.title.toLowerCase().includes(t.toLowerCase())}function P0(e){return"pinned"===e.type&&"u">typeof e?.group}function P1(e){return"pinned"===e.type&&typeof e?.group>"u"}function P2({filter:e,maxLength:t}){let{state:{definitions:n}}=Ah(),i=(0,d.useMemo)(()=>{let t=n.filters[e.filterName];switch(t?.type){case"field":{let t=PB(n.fields,e);return t?.titlePath?t.titlePath[t.titlePath.length-1]:null}case"pinned":return t.title;default:return null}},[n,e]);return i?t&&i.length>t?(0,l.jsxs)("span",{children:[i.slice(0,t),"…"]}):(0,l.jsx)("span",{children:i}):null}function P3({filter:e}){let{state:{definitions:t}}=Ah(),n=t.filters[e.filterName]?.icon;return n?(0,d.createElement)(n):(0,l.jsx)(_.Tzq,{})}function P4({filter:e}){let{state:{definitions:t}}=Ah(),n=PB(t.fields,e);return(0,l.jsxs)(h.Kq,{space:2,children:[n?.titlePath&&n.titlePath?.length>1&&(0,l.jsx)(h.xu,{marginLeft:4,children:(0,l.jsx)(h.xv,{muted:!0,size:0,children:n.titlePath.slice(0,-1).map((e,t)=>(0,l.jsxs)(d.Fragment,{children:[(0,l.jsx)("span",{children:e}),t!==n.titlePath.length-2&&(0,l.jsx)("span",{style:{opacity:.75,paddingLeft:"0.25em",paddingRight:"0.25em"},children:(0,l.jsx)(_.XCv,{})})]},t))})}),(0,l.jsxs)(h.kC,{align:"flex-start",gap:3,children:[(0,l.jsx)(h.xu,{style:{flexShrink:0},children:(0,l.jsx)(h.xv,{size:1,children:(0,l.jsx)(P3,{filter:e})})}),(0,l.jsx)(h.xv,{size:1,weight:"medium",children:(0,l.jsx)(P2,{filter:e})})]})]})}function P5(e){var t;return(0,d.isValidElement)(e)?(t=(0,nW.Dq)(e),new DOMParser().parseFromString(t,"text/html")?.body.textContent||""):"string"==typeof e?e:""}function P8({children:e,fieldDefinition:t,filterDefinition:n,visible:i}){let{state:{documentTypesNarrowed:a}}=Ah(),{t:r}=i1(),o=NQ(),s=(0,d.useMemo)(()=>t?.documentTypes?t.documentTypes.map(e=>{let t=o.get(e);return t?.title||tt(t?.name)}).filter(iw).sort():[],[t?.documentTypes,o]),c=(0,d.useMemo)(()=>{if(t?.documentTypes){let e=e5(t.documentTypes.map(e=>{let n=o.get(e);if(n){let e=Ax(n,t.fieldPath);return e?.type.description&&P5(e?.type.description)}return null}).filter(iw).sort());if(1===e.length)return e[0]}},[t?.documentTypes,t?.fieldPath,o]);return(0,l.jsx)(x.u,{content:(0,l.jsx)(h.Zb,{tone:"default",radius:2,style:{maxWidth:"250px"},children:(0,l.jsxs)(h.Kq,{space:4,children:[t&&(0,l.jsxs)(h.Kq,{space:3,children:[(0,l.jsx)(h.xv,{muted:!0,size:1,weight:"medium",children:r("search.filter-field-tooltip-name")}),(0,l.jsx)(F0,{size:1,style:{fontFamily:"monospace"},tone:"primary",textOverflow:"ellipsis",children:t?.name})]}),c&&(0,l.jsxs)(h.Kq,{space:3,children:[(0,l.jsx)(h.xv,{muted:!0,size:1,weight:"medium",children:r("search.filter-field-tooltip-description")}),(0,l.jsx)(h.xv,{muted:!0,size:1,children:iG(c,256)})]}),n?.description&&(0,l.jsx)(h.xv,{muted:!0,size:1,children:iG(n.description,256)}),!a.length&&s.length>0&&(0,l.jsxs)(h.Kq,{space:2,children:[(0,l.jsxs)(h.kC,{align:"center",gap:1,children:[(0,l.jsx)(h.xv,{muted:!0,size:1,weight:"medium",children:r("search.filter-field-tooltip-used-in-document-types")}),(0,l.jsx)(h.Zb,{padding:1,radius:2,tone:"transparent",children:(0,l.jsx)(h.xv,{size:1,muted:!0,children:s.length})})]}),(0,l.jsxs)(h.xv,{size:1,weight:"regular",muted:!0,children:[s.slice(0,10).join(", "),s?.length>10?` +${s.length-10} more`:""]})]})]})}),disabled:!i,fallbackPlacements:["left"],placement:"right",portal:!0,children:e})}let P6=(0,d.memo)(function({item:e,onClose:t,...n}){let{dispatch:i,state:{filters:a}}=Ah(),r=(0,d.useCallback)(()=>{i({filter:e.filter,type:"TERMS_FILTERS_ADD"}),t?.()},[i,e.filter,t]),o=!!a.find(t=>Pq(t)===Pq(e.filter)),s=!!(e.fieldDefinition||e.filterDefinition.description);return(0,l.jsx)(h.xu,{...n,children:(0,l.jsx)(h.zx,{disabled:o,fontSize:1,justify:"flex-start",mode:"bleed",onClick:o?void 0:r,padding:0,style:{position:"relative",whiteSpace:"normal",width:"100%"},tabIndex:-1,tone:e?.tone,children:(0,l.jsx)(P8,{fieldDefinition:e.fieldDefinition,filterDefinition:e.filterDefinition,visible:s,children:(0,l.jsx)(h.xu,{padding:3,children:(0,l.jsx)(P4,{filter:e.filter})})})})})}),P7=(0,d.memo)(function({item:e}){return(0,l.jsx)(h.xu,{paddingTop:1,children:(0,l.jsx)(h.Zb,{borderBottom:!0,paddingX:2,paddingY:3,tone:e?.tone,children:(0,l.jsx)(h.xv,{muted:!0,size:1,textOverflow:"ellipsis",weight:"medium",children:e.title})})})}),P9={width:"300px"};function Fe({onClose:e}){let[t,n]=(0,d.useState)(null),[i,a]=(0,d.useState)(""),{t:r}=i1(),o=(0,d.useCallback)(e=>a(e.currentTarget.value),[a]),s=(0,d.useCallback)(()=>a(""),[]),c=NQ(),{state:{documentTypesNarrowed:u,definitions:p,filters:m,terms:{types:f}}}=Ah(),g=(0,d.useMemo)(()=>(function({documentTypesNarrowed:e,fieldDefinitions:t,filterDefinitions:n,schema:i,titleFilter:a,types:r,t:o}){let s=Object.values(t).filter(e=>e.titlePath.join("/").toLowerCase().includes(a.toLowerCase())).map(e=>{let t=n[e.filterName];return t?PR(t,e.id):null}).filter(iw),l=function({fieldDefinitions:e,filterDefinitions:t,titleFilter:n}){let i=Object.values(t).filter(P1).filter(e=>PQ(e,n)).map(e=>PR(e)),a=Object.values(t).filter(P0).filter(e=>PQ(e,n)).reduce((e,t)=>(e[t.group]=e[t.group]||[],e[t.group].push(PR(t)),e),{});return[...PX({fieldDefinitions:e,filterDefinitions:t,filters:i,id:"pinned-ungrouped",tone:"primary"}),...Object.entries(a).flatMap(([n,i])=>PX({fieldDefinitions:e,filterDefinitions:t,filters:i,headerTitle:n,id:n,tone:"primary"}))]}({fieldDefinitions:t,filterDefinitions:n,titleFilter:a});return 0===e.length?[...l,...PX({fieldDefinitions:t,filterDefinitions:n,filters:s,headerTitle:o("search.filter-all-fields-header"),id:"field"})]:[...l,...function({documentTypesNarrowed:e,fieldDefinitions:t,filterDefinitions:n,filters:i,schema:a,types:r,t:o}){let s=i.filter(n=>{var i;return i=PB(t,n),0===no(e,i?.documentTypes||[]).length});return[...e.length>1&&r.length>1?PX({fieldDefinitions:t,filterDefinitions:n,filters:s,headerTitle:o("search.filter-shared-fields-header"),id:"shared",tone:"primary"}):[],...e.map(e=>{let t=a.get(e);return{title:t?.title||tt(t?.name)||"(Unknown type)",documentType:e}}).sort((e,t)=>e.title.localeCompare(t.title)).map(({documentType:e,title:a})=>{let r=i.filter(n=>{var i,a;return i=[e],a=PB(t,n),a?.documentTypes.some(e=>i.includes(e))});return PX({fieldDefinitions:t,filterDefinitions:n,filters:r,id:a,headerTitle:a})}).flat()]}({documentTypesNarrowed:e,fieldDefinitions:t,filterDefinitions:n,filters:s,schema:i,types:r,t:o})]})({documentTypesNarrowed:u,fieldDefinitions:p.fields,filterDefinitions:p.filters,schema:c,titleFilter:i,types:f,t:r}),[u,p.fields,p.filters,c,i,f,r]),x=(0,d.useCallback)(t=>"filter"===t.type?(0,l.jsx)(P6,{item:t,onClose:e,paddingBottom:1}):"header"===t.type?(0,l.jsx)(P7,{item:t}):null,[e]),y=(0,d.useCallback)(e=>{let t=g[e];return"filter"!==t.type||!!m.find(e=>Pq(e)===Pq(t.filter))},[g,m]),b=(0,d.useCallback)(e=>{let t=g[e];switch(t.type){case"filter":return[...t.group?[t.group]:[],Pq(t.filter)].join("-");case"header":return`${t.type}-${t.title}`;default:return e}},[g]);return(0,l.jsxs)(h.kC,{direction:"column",style:P9,children:[(0,l.jsx)(PJ,{ariaInputLabel:r("search.filter-by-title-aria-label"),onChange:o,onClear:s,ref:n,typeFilter:i}),(0,l.jsxs)(h.kC,{children:[g.length>0&&(0,l.jsx)(aN,{activeItemDataAttr:"data-hovered",ariaLabel:r("search.filters-aria-label",{count:g.length}),autoFocus:"input",getItemDisabled:y,getItemKey:b,inputElement:t,itemHeight:45,items:g,overscan:20,padding:1,paddingBottom:0,renderItem:x}),0==g.length&&(0,l.jsx)(h.xu,{padding:3,children:(0,l.jsx)(h.xv,{muted:!0,size:1,textOverflow:"ellipsis",children:r("search.filter-no-matches-found",{filter:i})})})]})]})}function Ft(){let[e,t]=(0,d.useState)(!1),[n,i]=(0,d.useState)(null),a=(0,d.useRef)(null),{t:r}=i1(),{state:{fullscreen:o}}=Ah(),s=(0,d.useCallback)(()=>t(!1),[]),c=(0,d.useCallback)(()=>t(!0),[]);return(0,h.Of)(s,()=>[n,a.current]),(0,l.jsx)(x.J2,{__unstable_margins:[5,0,0,0],content:(0,l.jsx)(PG,{anchorElement:n,onClose:s,children:(0,l.jsx)(Fe,{onClose:s})}),open:e,placement:"bottom-start",radius:3,ref:a,portal:!0,children:(0,l.jsx)(x.zx,{icon:_.dtP,mode:"bleed",onClick:c,size:o?"large":"default",ref:i,selected:e,text:r("search.action.add-filter")})})}let Fn=(0,d.memo)(function({selected:e,type:t,...n}){let{dispatch:i}=Ah(),a=(0,d.useCallback)(()=>{i({type:"TERMS_TYPE_ADD",schemaType:t})},[i,t]),r=(0,d.useCallback)(()=>{i({type:"TERMS_TYPE_REMOVE",schemaType:t})},[i,t]),o=(0,d.useCallback)(()=>{e?r():a()},[a,r,e]);return(0,l.jsx)(h.xu,{...n,children:(0,l.jsx)(x.zx,{iconRight:e&&_.KML,justify:"flex-start",mode:"bleed",onClick:o,width:"fill",size:"large",tabIndex:-1,text:t.title??t.name,tone:e?"primary":"default"},t.title??t.name)})}),Fi=(0,j.zo)(h.xu)`
  border-top: 1px solid ${({theme:e})=>e.sanity.color.base.border};
  flex-shrink: 0;
`,Fa={width:"250px"};function Fr(){let[e,t]=(0,d.useState)(null),[n,i]=(0,d.useState)(""),a=(0,d.useRef)(null),{t:r}=i1(),o=NQ(),{dispatch:s,state:{terms:{types:c}}}=Ah(),[u,p]=(0,d.useState)(c),m=(0,d.useMemo)(()=>{let[e,t]=nx(Ak(o).filter(e=>!n||(e.title??e.name).toLowerCase().includes(n?.toLowerCase())).sort(AT),e=>u.includes(e)),i=e.length>0,a=e.length>0,r=[];return i&&r.push({title:"Selected",type:"header"}),e.forEach(e=>r.push({item:e,selected:c.includes(e),type:"item"})),i&&a&&r.push({type:"divider"}),t.forEach(e=>r.push({item:e,selected:c.includes(e),type:"item"})),r},[o,c,u,n]),f=(0,d.useCallback)(e=>i(e.currentTarget.value),[i]),g=(0,d.useCallback)(()=>i(""),[]),x=(0,d.useCallback)(()=>{p([]),s({type:"TERMS_TYPES_CLEAR"}),a?.current?.focusInputElement(),a?.current?.scrollToIndex(0)},[s]),y=(0,d.useCallback)(e=>{let t=m[e];switch(t.type){case"divider":return`${t.type}-${e}`;case"header":return`${t.type}-${t.title}`;case"item":return`${t.type}-${t.item.name}`;default:return e}},[m]),b=(0,d.useCallback)(e=>"divider"===e.type?(0,l.jsx)(h.xu,{paddingY:1,children:(0,l.jsx)(h.R,{})}):"header"===e.type?(0,l.jsx)(h.xu,{margin:2,padding:1,children:(0,l.jsx)(h.xv,{muted:!0,size:1,weight:"medium",children:e.title})}):"item"===e.type?(0,l.jsx)(Fn,{paddingBottom:1,selected:e.selected,type:e.item}):null,[]),v=(0,d.useCallback)(e=>"item"!==m[e].type,[m]),j=(0,d.useCallback)(e=>{let t=m[e];return"item"===t.type&&t.selected},[m]);return(0,l.jsxs)(h.kC,{direction:"column",style:Fa,children:[(0,l.jsx)(PJ,{ariaInputLabel:r("search.action.filter-by-document-type-aria-label"),onChange:f,onClear:g,ref:t,typeFilter:n}),(0,l.jsxs)(h.kC,{children:[m.length>0&&(0,l.jsx)(aN,{activeItemDataAttr:"data-hovered",ariaLabel:r("search.document-types-aria-label"),ariaMultiselectable:!0,autoFocus:"input",getItemDisabled:v,getItemSelected:j,getItemKey:y,inputElement:e,itemHeight:37,items:m,overscan:20,padding:1,paddingBottom:0,ref:a,renderItem:b}),!m.length&&(0,l.jsx)(h.xu,{padding:3,children:(0,l.jsx)(h.xv,{muted:!0,size:1,textOverflow:"ellipsis",children:r("search.document-types-no-matches-found",{filter:n})})})]}),!n&&c.length>0&&(0,l.jsx)(Fo,{onClick:x,selectedTypes:c})]})}function Fo({onClick:e,selectedTypes:t}){let{t:n}=i1();return(0,l.jsx)(Fi,{padding:1,children:(0,l.jsx)(h.Kq,{children:(0,l.jsx)(x.zx,{"aria-label":n("search.action.clear-type-filters-aria-label"),"data-name":"type-filter-button",disabled:0===t.length,mode:"bleed",onClick:e,text:n("search.action.clear-type-filters-label"),tone:"primary"})})})}let Fs=["top-start","bottom-start"];function Fl(){let[e,t]=(0,d.useState)(!1),[n,i]=(0,d.useState)(null),a=(0,d.useRef)(null),{state:{fullscreen:r,terms:{types:o}}}=Ah(),{t:s}=i1(),c=(0,d.useCallback)(()=>t(!1),[]),u=(0,d.useCallback)(()=>t(!0),[]);(0,h.Of)(c,()=>[n,a.current]);let p=(0,d.useMemo)(()=>AN({types:o,t:s}),[o,s]);return(0,l.jsx)(x.J2,{__unstable_margins:[5,0,0,0],content:(0,l.jsx)(PG,{anchorElement:n,onClose:c,children:(0,l.jsx)(Fr,{})}),open:e,placement:"bottom-start",fallbackPlacements:Fs,portal:!0,radius:3,ref:a,children:(0,l.jsx)(x.zx,{iconRight:_.v4q,mode:"ghost",onClick:u,size:r?"large":"default",ref:i,selected:e,text:p,tone:"default"})})}let Fc=(0,j.zo)(h.xu)`
  flex-shrink: ${({$flexShrink:e=0})=>e};
`;function Fd({filter:e,fontSize:t=1,showContent:n=!0}){let{t:i}=i1(),{state:{definitions:a,fullscreen:r}}=Ah(),o=PD(a.operators,e.operatorType),s=o?.buttonValueComponent,c=e.value,u=(0,d.useMemo)(()=>({Field:()=>(0,l.jsx)(Fc,{$flexShrink:r?1:0,children:(0,l.jsx)(F0,{tone:"default",size:t,textOverflow:"ellipsis",weight:"medium",children:(0,l.jsx)(P2,{filter:e,maxLength:r?25:40})})}),Operator:({children:e})=>n?(0,l.jsx)(Fc,{$flexShrink:0,children:(0,l.jsx)(F0,{tone:"default",size:t,textOverflow:"ellipsis",weight:"regular",children:e})}):null,Value:({children:e})=>n?(0,l.jsx)(Fc,{$flexShrink:1,children:(0,l.jsx)(F0,{tone:"default",size:t,textOverflow:"ellipsis",weight:"medium",children:s?(0,l.jsx)(s,{value:c}):e})}):null}),[e,t,r,n,s,c]);if(o?.descriptionKey||console.warn("Missing `descriptionKey` for operator `%s`",e.operatorType),!n||!o?.descriptionKey){let e=u.Field;return(0,l.jsx)(h.kC,{align:"center",gap:1,children:(0,l.jsx)(e,{})})}return(0,l.jsx)(h.kC,{align:"center",gap:1,children:(0,l.jsx)(rm,{t:i,i18nKey:o?.descriptionKey,components:u,values:function(e){let t={};return"number"==typeof e.value&&(t.count=e.value),Fu(e.value)&&(t.value=e.value),iO(e.value)&&"from"in e.value&&Fu(e.value.from)&&(t.from=e.value.from),iO(e.value)&&"to"in e.value&&Fu(e.value.to)&&(t.to=e.value.to),t}(e)})})}function Fu(e){return"string"==typeof e||"number"==typeof e}function Fp(e){let{t}=i1();return(0,l.jsx)(h.xu,{...e,children:(0,l.jsxs)(h.kC,{align:"flex-start",gap:3,children:[(0,l.jsx)(F0,{tone:"critical",children:(0,l.jsx)(_.uIy,{})}),(0,l.jsxs)(h.Kq,{space:4,children:[(0,l.jsx)(F0,{size:1,tone:"critical",weight:"medium",children:t("search.error.display-filter-title")}),(0,l.jsx)(F0,{size:1,tone:"critical",children:t("search.error.display-filter-description")})]})]})})}function Fm({onClick:e,operator:t,selected:n}){let i=(0,d.useCallback)(()=>e(t.type),[e,t.type]),{t:a}=i1();return(0,l.jsx)(x.sN,{onClick:i,pressed:n,tone:"default",text:a(t.nameKey),iconRight:t?.icon})}function Fh({filter:e,operator:t}){let n=(0,d.useId)(),{t:i}=i1(),{dispatch:a,state:r}=Ah(),o=r.definitions.filters[e.filterName]?.operators,s=(0,d.useCallback)(t=>{a({filterKey:Pq(e),operatorType:t,type:"TERMS_FILTERS_SET_OPERATOR"})},[a,e]);return t&&o&&!(o.length<=1)?(0,l.jsx)(h.gF,{children:(0,l.jsx)(x.j2,{button:(0,l.jsx)(x.zx,{mode:"ghost",iconRight:_.v4q,text:i(t.nameKey)}),id:n||"",menu:(0,l.jsx)(h.v2,{children:o.map((e,n)=>{if("item"===e.type){let i=PD(r.definitions.operators,e.name);return i?(0,l.jsx)(Fm,{onClick:s,operator:i,selected:t.type===e.name},n):null}return"divider"===e.type?(0,l.jsx)(h.R,{},n):null})}),placement:"bottom-start",popover:{constrainSize:!0,portal:!1,radius:2}})}):null}function Ff({filter:e}){let[t,n]=(0,d.useState)(null),{dispatch:i,state:{definitions:a,fullscreen:r}}=Ah(),o=a.filters[e.filterName],s=PD(a.operators,e.operatorType),c=PB(a.fields,e),u=Pq(e),p=(0,d.useCallback)(()=>{i({filterKey:Pq(e),type:"TERMS_FILTERS_REMOVE"})},[i,e]),m=(0,d.useCallback)(e=>{i({filterKey:u,type:"TERMS_FILTERS_SET_VALUE",value:e})},[i,u]),f=(0,d.useCallback)(e=>{n(e)},[]),g=s?.inputComponent;return t?(0,l.jsx)(Fp,{padding:4}):(0,l.jsx)(h.SV,{onCatch:f,children:(0,l.jsx)(S.ZP,{autoFocus:!iU,returnFocus:!0,children:(0,l.jsxs)(h.kC,{direction:"column-reverse",children:[g&&(0,l.jsx)(h.Zb,{borderTop:!0,padding:3,children:(0,l.jsx)(g,{fieldDefinition:c,onChange:m,value:e.value},e.operatorType)}),(0,l.jsx)(h.Zb,{padding:3,children:(0,l.jsxs)(h.Kq,{space:3,children:[(0,l.jsxs)(h.kC,{align:"flex-start",gap:3,justify:"space-between",children:[(0,l.jsx)(h.xu,{paddingLeft:1,paddingRight:2,paddingY:1,children:(0,l.jsx)(P4,{filter:e})}),r&&(0,l.jsx)(x.zx,{icon:_.XHJ,mode:"bleed",onClick:p,tone:"critical",tooltipProps:{content:"Remove filter"}})]}),o?.description&&(0,l.jsx)(h.Zb,{border:!0,padding:3,radius:2,tone:"transparent",children:(0,l.jsx)(h.xv,{muted:!0,size:1,children:o.description})}),(0,l.jsx)(Fh,{filter:e,operator:s})]})})]})})})}let Fg=(0,j.zo)(h.kC)`
  max-width: 480px;
  min-width: 150px;
  overflow: hidden;
  overflow: clip;
  width: 100%;
`;function Fx({filter:e}){return(0,l.jsxs)(Fg,{direction:"column",children:[(0,l.jsx)(Ff,{filter:e}),!1]})}let Fy=(0,j.zo)(h.zx)`
  border-radius: ${({theme:e})=>`0 ${(0,h.hO)(e.sanity.radius[2])} ${(0,h.hO)(e.sanity.radius[2])} 0`};
`,Fb=(0,j.zo)(h.Zb)`
  position: absolute;
  right: 0;
`,Fv=j.zo.div`
  align-items: center;
  display: inline-flex;
  max-width: 100%;
  position: relative;
`,Fj=(0,j.zo)(h.zx)`
  border: none;
  width: 100%;
`;function FC({filter:e,initialOpen:t}){let[n,i]=(0,d.useState)(t),[a,r]=(0,d.useState)(null),o=(0,d.useRef)(null),{dispatch:s,state:{definitions:c,fullscreen:u}}=Ah(),{t:p}=i1(),m=(0,d.useCallback)(()=>i(!1),[]),f=(0,d.useCallback)(()=>i(!0),[]),g=(0,d.useCallback)(()=>s({filterKey:Pq(e),type:"TERMS_FILTERS_REMOVE"}),[s,e]),y=(0,d.useCallback)(e=>{["Backspace","Delete"].includes(e.key)&&g()},[g]);(0,h.Of)(m,()=>[a,o.current]);let b=PK({fieldDefinitions:c.fields,filter:e,filterDefinitions:c.filters,operatorDefinitions:c.operators});return(0,l.jsx)(x.J2,{__unstable_margins:[5,0,0,0],content:(0,l.jsx)(PG,{anchorElement:a,onClose:m,children:(0,l.jsx)(Fx,{filter:e})}),constrainSize:!0,open:n,overflow:"auto",placement:"bottom-start",portal:!0,radius:3,ref:o,children:(0,l.jsxs)(Fv,{children:[(0,l.jsx)(h.Zb,{__unstable_focusRing:!0,display:"flex",radius:2,tone:b?"primary":"transparent",children:(0,l.jsx)(Fj,{mode:"bleed",onClick:f,onKeyDown:y,paddingLeft:u?3:2,paddingRight:u?3:5,paddingY:u?3:2,ref:r,children:(0,l.jsx)(Fd,{filter:e,showContent:b})})}),!u&&(0,l.jsx)(Fb,{__unstable_focusRing:!0,display:"flex",radius:2,tone:b?"primary":"transparent",children:(0,l.jsx)(Fy,{"aria-label":p("search.action.remove-filter-aria-label"),fontSize:1,icon:_.Two,mode:"bleed",onClick:g,onKeyDown:y,padding:2,radius:2})})]})})}function Fw({showTypeFilter:e=!0}){let{dispatch:t,state:{filters:n,fullscreen:i,lastAddedFilter:a,terms:{types:r}}}=Ah(),{t:o}=i1(),s=(0,d.useRef)(!1),c=(0,d.useCallback)(()=>{e&&t({type:"TERMS_TYPES_CLEAR"}),t({type:"TERMS_FILTERS_CLEAR"})},[t,e]),u=n.length>0||e&&r.length>0;(0,d.useEffect)(()=>{s.current=!0},[]);let p=a&&Pq(a),m=()=>(0,l.jsx)(x.zx,{mode:"bleed",onClick:c,size:i?"large":"default",text:o("search.action.clear-filters"),tone:"critical"});return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)(h.kC,{align:"flex-start",gap:3,justify:"space-between",padding:2,children:[(0,l.jsxs)(h.kC,{flex:1,gap:2,wrap:"wrap",children:[e&&(0,l.jsx)(Fl,{}),n?.map(e=>{let t=Pq(e);return l.jsx(FC,{filter:e,initialOpen:s.current&&p===t},t)}),!i&&(0,l.jsx)(Ft,{})]}),u&&!i&&(0,l.jsx)(m,{})]}),i&&(0,l.jsxs)(h.kC,{justify:"space-between",paddingBottom:2,paddingX:2,children:[(0,l.jsx)(Ft,{}),u&&(0,l.jsx)(m,{})]}),!1]})}let Fk=(0,j.F4)`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,FT=(0,j.zo)(_.L4p)`
  animation: ${Fk} 500ms linear infinite;
`,FA=j.zo.div`
  line-height: 0;
  position: relative;
`,F_=(0,d.forwardRef)(function({ariaInputLabel:e,onClose:t},n){let i=(0,d.useRef)(!1),{t:a}=i1(),{dispatch:r,state:{filters:o,filtersVisible:s,fullscreen:c,result:{loading:u},terms:p}}=Ah(),{types:m,query:f}=p,g=Aw({terms:p}),y=a(e||g?"search.search-results-aria-label":"search.recent-searches-aria-label"),b=(0,d.useCallback)(()=>r({type:"FILTERS_VISIBLE_SET",visible:!s}),[r,s]),v=(0,d.useCallback)(e=>r({type:"TERMS_QUERY_SET",query:e.currentTarget.value}),[r]),j=(0,d.useCallback)(()=>{r({type:"TERMS_QUERY_SET",query:""})},[r]);(0,d.useEffect)(()=>{c||r({type:"FILTERS_VISIBLE_SET",visible:!0})},[r,c]),(0,d.useEffect)(()=>{i.current=!0},[]);let C=o.length>0||m.length>0;return(0,l.jsx)(h.Zb,{flex:"none",children:(0,l.jsxs)(h.kC,{align:"center",flex:1,gap:c?2:1,padding:c?2:1,children:[c&&(0,l.jsx)(x.zx,{"aria-label":a("search.action.close-search-aria-label"),icon:_.Y4O,mode:"bleed",onClick:t,size:"large",tooltipProps:{content:a("search.action.close-search-aria-label")}}),(0,l.jsx)(h.xu,{flex:1,children:(0,l.jsx)(_f,{__unstable_disableFocusRing:!0,$background:c,$smallClearButton:c,"aria-label":y,autoComplete:"off",border:!1,clearButton:!!f,fontSize:[2,2,1],icon:u?FT:_.W1M,onChange:v,onClear:j,placeholder:a("search.placeholder"),radius:2,ref:n,spellCheck:!1,value:f})}),c&&(0,l.jsx)(FA,{children:(0,l.jsx)(qI,{"aria-expanded":s,"aria-label":a("search.action.toggle-filters-aria-label",{context:s?"hide":"show"}),icon:_.d$S,mode:"bleed",onClick:b,selected:s,size:"large",tone:C?"primary":void 0,tooltipProps:{content:a("search.action.toggle-filters-label",{context:s?"hide":"show"})}})})]})})}),FS=(0,eJ.P6)("mod+k"),FE=(0,eJ.P6)("escape");function FM({children:e,hasValidTerms:t,onClose:n,onOpen:i,open:a}){let r=(0,d.useRef)(!1),{dispatch:o,searchCommandList:s,setOnClose:l,state:{result:c}}=Ah(),u=(0,d.useCallback)(()=>{o({index:s?.getTopIndex()??-1,type:"LAST_ACTIVE_INDEX_SET"}),n()},[o,n,s]);return function({open:e,onClose:t,onOpen:n}){let{isTopLayer:i}=(0,h.sJ)(),a=(0,d.useCallback)(()=>{t?.()},[t]),r=(0,d.useCallback)(t=>{FS(t)&&(t.preventDefault(),e?a():n?.()),FE(t)&&e&&i&&a()},[a,i,e,n]);(0,h.qh)(r)}({onClose:u,onOpen:i,open:a}),(0,d.useEffect)(()=>{l(()=>u)},[u,l]),(0,d.useEffect)(()=>{(!t||c.loaded)&&r.current&&o({index:0,type:"LAST_ACTIVE_INDEX_SET"})},[o,t,c.loaded]),(0,d.useEffect)(()=>{t||!r.current||a||o({type:"ORDERING_RESET"})},[o,t,a]),(0,d.useEffect)(()=>{r?.current||(r.current=!0)},[]),e}function FN(e,t){var n;let i=Ak(e).map(e=>e.name),{documentTypes:a,objectTypes:r}=(e._original?.types||[]).filter(e=>!FO(e)||i.includes(e.name)).filter(e=>"slug"!==e.name).filter(e=>!e.name.startsWith("sanity.")).reduce((e,t)=>(FO(t)&&(e.documentTypes[t.name]=t),FP(t)&&(e.objectTypes[t.name]=t),e),{documentTypes:{},objectTypes:{}})||{documentTypes:{},objectTypes:{}};return n=t.reduce((e,t)=>("field"===t.type&&e.push(t.fieldType),e),[]),Object.values(a).reduce((e,t)=>{let i=t.fields.reduce((e,i)=>((function e({acc:t,defType:i,depth:o=0,documentType:s,prevFieldPath:l,prevTitlePath:c}){let d=i.name.startsWith("_"),u=i?.title?P5(i.title):tt(i.name),p=l?`${l}.${i.name}`:i.name,m=c?[...c,u]:[u];if(!(o<=3))return;let h=r[i.type],f=a[i.type],g=FP(i)?i:null,x=f||h||g;if(x){x?.fields?.forEach(n=>e({acc:t,defType:n,depth:o+1,documentType:s,prevFieldPath:p,prevTitlePath:m}));return}n.includes(i.type)&&t.push({documentTypes:s&&!d?[s]:[],fieldPath:p,filterName:function(e){if("string"===e.type&&e.options?.list&&e.options.list.length>0)return"stringList";if(F$(e)){if(e.of.some(e=>"reference"===e.type))return"arrayReferences";if(e.of.find(e=>"block"===e.type))return"portableText";if(F$(e)&&e.of.every(e=>["boolean","number","string"].includes(e.type))&&e.options?.list&&e.options.list.length>0)return"arrayList"}return e.type}(i),id:"",name:i.name,titlePath:m,title:u,type:i.type})})({acc:e,defType:i,documentType:t.name}),e),[]);return e.push(...i),e},[]).reduce((e,t)=>{let n=e.findIndex(e=>e.fieldPath===t.fieldPath&&e.title===t.title&&e.type===t.type);return n>-1?e[n]={...e[n],documentTypes:[...e[n].documentTypes,...t.documentTypes]}:e.push(t),e},[]).map(Fz).sort(FF)}function FI(e){return e.reduce((e,t)=>(e[t.id]=t,e),{})}function Fz(e){return{...e,id:[e.type,e.fieldPath,e.filterName,e.documentTypes.join(",")].join("-")}}function F$(e){return"array"===e.type}function FO(e){return"document"===e.type}function FP(e){return"object"===e.type}function FF(e,t){let n=e.titlePath.slice(0,-1).join("/"),i=t.titlePath.slice(0,-1).join("/");return e.title.localeCompare(t.title)||n.localeCompare(i)||e.fieldPath.localeCompare(t.fieldPath)}let FD={version:2,recentSearches:[]};function FR(){let[e,t]=function(){let e=CO(),{dataset:t}=Bi(rz).config(),n=(0,d.useMemo)(()=>`studio.search.recent.${t}`,[t]),[i,a]=(0,d.useState)(FD),r=(0,d.useMemo)(()=>e.getKey(n),[e,n]);(0,d.useEffect)(()=>{let t=r.pipe((0,ef.O)(FD),(0,P.U)(t=>t?t?.version!==2?(e.setKey(n,FD),FD):t:FD)).subscribe({next:a});return()=>t?.unsubscribe()},[r,e,n]);let o=(0,d.useCallback)(t=>{a(t),e.setKey(n,t)},[e,n]);return(0,d.useMemo)(()=>[i,o],[o,i])}(),n=NQ(),{search:{operators:i,filters:a}}=AU(),{fieldDefinitions:r,filterDefinitions:o,operatorDefinitions:s}=(0,d.useMemo)(()=>({fieldDefinitions:FI(FN(n,a)),filterDefinitions:Ao(a),operatorDefinitions:PF(i)}),[a,i,n]);return{addSearch:(i,a)=>{let l=(a||[]).map(e=>({fieldId:e.fieldId,filterName:e.filterName,operatorType:e.operatorType,value:e.value})).filter(e=>PK({fieldDefinitions:r,filter:e,filterDefinitions:o,operatorDefinitions:s})),c={created:new Date().toISOString(),filters:l,terms:{query:i.query.trim(),typeNames:i.types.map(e=>e.name)}},d={version:2,recentSearches:[c,...e.recentSearches.filter(e=>!eF(t7(e,"created"),t7(c,"created")))].slice(0,5)};return t(d),FL({fieldDefinitions:r,filterDefinitions:o,operatorDefinitions:s,schema:n,storedSearch:d,setStoredSearch:t})},getRecentSearches:()=>FL({fieldDefinitions:r,filterDefinitions:o,operatorDefinitions:s,schema:n,storedSearch:e,setStoredSearch:t}),removeSearch:()=>{let i={...e,recentSearches:[]};return t(i),FL({fieldDefinitions:r,filterDefinitions:o,operatorDefinitions:s,schema:n,storedSearch:i,setStoredSearch:t})},removeSearchAtIndex:i=>{if(i<0||i>e.recentSearches.length)return FL({fieldDefinitions:r,filterDefinitions:o,operatorDefinitions:s,schema:n,storedSearch:e,setStoredSearch:t});let a={...e,recentSearches:[...e.recentSearches.slice(0,i),...e.recentSearches.slice(i+1)]};return t(a),FL({fieldDefinitions:r,filterDefinitions:o,operatorDefinitions:s,schema:n,storedSearch:a,setStoredSearch:t})}}}function FL({schema:e,fieldDefinitions:t,filterDefinitions:n,operatorDefinitions:i,storedSearch:a,setStoredSearch:r}){return(function({fieldDefinitions:e,filterDefinitions:t,operatorDefinitions:n,studioSchema:i,storedSearch:a,setStoredSearch:r}){let o=Ak(i).map(e=>e.name),s={version:2,recentSearches:a.recentSearches.filter(i=>i.terms.typeNames.every(e=>o.includes(e))&&i.filters.every(i=>PK({fieldDefinitions:e,filter:i,filterDefinitions:t,operatorDefinitions:n})))};return s.recentSearches.length<a.recentSearches.length&&r(s),s})({studioSchema:e,filterDefinitions:n,fieldDefinitions:t,operatorDefinitions:i,storedSearch:a,setStoredSearch:r}).recentSearches.filter(e=>!!e.terms).map((t,n)=>({__recent:{index:n,timestamp:new Date(t.created).getTime()},filters:t.filters,query:t.terms.query,types:t.terms.typeNames.map(t=>e.get(t)).filter(e=>!!(e&&"object"===e.jsonType))}))}function FB(){let{t:e}=i1();return(0,l.jsx)(h.kC,{align:"center",direction:"column",gap:4,paddingX:4,paddingY:5,children:(0,l.jsx)(h.gF,{space:3,children:(0,l.jsx)(h.xv,{muted:!0,children:(0,l.jsx)(rm,{t:e,i18nKey:"search.instructions",components:{ControlsIcon:()=>(0,l.jsx)(_.d$S,{style:{padding:"0 0.25rem"}},0)}})})})})}function Fq({availableCharacters:e,types:t}){let{t:n}=i1(),i=(0,d.useMemo)(()=>AN({availableCharacters:e,types:t,t:n}),[e,t,n]);return(0,l.jsx)(h.Zb,{border:!0,padding:2,radius:2,children:(0,l.jsx)(h.xv,{muted:!0,size:1,children:i})})}let FV=(0,j.zo)(h.Zb)`
  cursor: default;
`;function FK({filter:e}){return(0,l.jsx)(FV,{border:!0,padding:2,radius:2,tone:"primary",children:(0,l.jsx)(Fd,{filter:e})})}let FU=(0,j.zo)(h.zx)`
  border-radius: ${({theme:e})=>(0,h.hO)(e.sanity.radius[2])};
  cursor: default;
  width: 100%;
`,FZ=(0,j.zo)(h.xu)`
  flex-shrink: 3;
`,FG=(0,j.zo)(h.kC)`
  flex-shrink: 2;
`,FH=j.zo.div`
  opacity: 0.8;
  visibility: hidden;

  @media (hover: hover) {
    ${FU}:hover & {
      visibility: visible;
    }
    &:hover {
      opacity: 0.4;
    }
  }
`;function FW({index:e,maxVisibleTypePillChars:t=40,value:n,...i}){let{dispatch:a}=Ah(),r=FR(),o=t-n.query.length,s=(0,d.useCallback)(()=>{a({type:"TERMS_SET",filters:n?.filters,terms:n}),r&&r?.addSearch(n,n?.filters)},[a,r,n]),c=(0,d.useCallback)(t=>{t.stopPropagation(),r&&r?.removeSearchAtIndex(e)},[e,r]);return(0,l.jsx)(h.xu,{...i,children:(0,l.jsx)(FU,{mode:"bleed",onClick:s,paddingLeft:3,paddingRight:1,paddingY:1,tabIndex:-1,children:(0,l.jsxs)(h.kC,{align:"stretch",children:[(0,l.jsxs)(h.gF,{paddingY:2,children:[(0,l.jsx)(h.xv,{muted:!0,size:1,children:(0,l.jsx)(_.T39,{})}),(0,l.jsx)(h.xv,{children:"​"})]}),(0,l.jsxs)(h.kC,{align:"stretch",flex:1,gap:2,justify:"flex-start",marginLeft:3,wrap:"wrap",children:[n.query&&(0,l.jsx)(FG,{align:"center",paddingY:2,children:(0,l.jsx)(h.xv,{muted:!0,size:1,textOverflow:"ellipsis",weight:"medium",children:n.query})}),n.types.length>0&&(0,l.jsx)(FZ,{children:(0,l.jsx)(Fq,{availableCharacters:o,types:n.types})}),n?.filters?.map((e,t)=>l.jsx(FK,{filter:e},t))]}),(0,l.jsx)(h.kC,{align:"center",children:(0,l.jsx)(FH,{onClick:c,children:(0,l.jsx)(h.kC,{padding:2,children:(0,l.jsx)(h.xv,{size:1,children:(0,l.jsx)(_.Two,{})})})})})]})})})}let FY=(0,j.zo)(h.Zb)`
  overflow-x: hidden;
  overflow-y: auto;
  position: relative;
`;function FJ({inputElement:e}){let{dispatch:t,state:{filtersVisible:n,fullscreen:i}}=Ah(),a=FR(),r=(0,d.useMemo)(()=>a?.getRecentSearches(),[a]),o=(0,d.useRef)(null),{t:s}=i1(),c=(0,d.useCallback)(()=>{a&&a.removeSearch(),o?.current?.focusInputElement()},[a]),u=(0,h.d2)(),p=(0,d.useMemo)(()=>u<2?20:40,[u]),m=(0,d.useCallback)((e,{virtualIndex:t})=>(0,l.jsx)(FW,{index:t,maxVisibleTypePillChars:p,paddingBottom:1,value:e}),[p]),f=!!r.length;return(0,l.jsx)(FY,{borderTop:f||!f&&!n&&i,flex:1,children:r.length>0?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(h.xu,{paddingBottom:2,paddingTop:4,paddingX:3,children:(0,l.jsx)(h.xv,{muted:!0,size:1,weight:"medium",children:s("search.recent-searches-label")})}),(0,l.jsx)(h.xu,{children:(0,l.jsx)(aN,{activeItemDataAttr:"data-hovered",ariaLabel:s("search.recent-searches-aria-label"),inputElement:e,initialIndex:0,itemHeight:36,items:r,paddingX:2,paddingY:1,renderItem:m})}),(0,l.jsx)(h.xu,{paddingBottom:2,paddingTop:1,paddingX:2,children:(0,l.jsx)(x.zx,{mode:"bleed",onClick:c,tone:"default",text:s("search.action.clear-recent-searches"),muted:!0})})]}):!n&&i&&(0,l.jsx)(FB,{})})}function FX(){let{t:e}=i1();return(0,l.jsx)(h.W2,{width:0,children:(0,l.jsxs)(h.Kq,{"aria-live":"assertive",space:4,paddingX:4,paddingY:5,children:[(0,l.jsx)(h.xv,{align:"center",muted:!0,size:1,weight:"medium",children:e("search.no-results-title")}),(0,l.jsx)(h.xv,{align:"center",muted:!0,size:1,children:e("search.no-results-help-description")})]})})}let FQ=(0,j.zo)(h.xv)`
  &:not([data-muted]) {
    &[data-tone='default'] {
      --card-fg-color: var(--card-badge-default-fg-color);
    }
    &[data-tone='primary'] {
      --card-fg-color: var(--card-badge-primary-fg-color);
    }
    &[data-tone='positive'] {
      --card-fg-color: var(--card-badge-positive-fg-color);
    }
    &[data-tone='caution'] {
      --card-fg-color: var(--card-badge-caution-fg-color);
    }
    &[data-tone='critical'] {
      --card-fg-color: var(--card-badge-critical-fg-color);
    }
  }

  &[data-dimmed] {
    opacity: 0.3;
  }
`,F0=(0,d.forwardRef)(function(e,t){let{tone:n,dimmed:i,muted:a,...r}=e;return(0,l.jsx)(FQ,{"data-ui":"TextWithTone","data-dimmed":i?"":void 0,"data-muted":a?"":void 0,"data-tone":n,muted:a,ref:t,...r})});function F1(){let{t:e}=i1();return(0,l.jsxs)(h.kC,{align:"center","aria-live":"assertive",direction:"column",flex:1,gap:3,marginY:2,padding:4,children:[(0,l.jsx)(h.xu,{marginBottom:1,children:(0,l.jsx)(F0,{tone:"critical",children:(0,l.jsx)(_.foC,{})})}),(0,l.jsx)(F0,{size:2,tone:"critical",weight:"medium",children:e("search.error.unspecified-error-title")}),(0,l.jsx)(F0,{size:1,tone:"critical",children:e("search.error.unspecified-error-help-description")})]})}let F2=({enableLegacySearch:e})=>({createdAsc:{ignoreScore:!0,sort:{direction:"asc",field:"_createdAt"},titleKey:"search.ordering.created-ascending-label"},createdDesc:{ignoreScore:!0,sort:{direction:"desc",field:"_createdAt"},titleKey:"search.ordering.created-descending-label"},relevance:{customMeasurementLabel:"relevance",...e?{sort:{direction:"desc",field:"_updatedAt"}}:{},titleKey:"search.ordering.best-match-label"},updatedAsc:{ignoreScore:!0,sort:{direction:"asc",field:"_updatedAt"},titleKey:"search.ordering.updated-ascending-label"},updatedDesc:{ignoreScore:!0,sort:{direction:"desc",field:"_updatedAt"},titleKey:"search.ordering.updated-descending-label"}}),F3=(0,j.zo)(h.kC)`
  box-sizing: border-box;
`;function F4(e){return"divider"===e.type}function F5({ordering:e}){let{t}=i1(),{dispatch:n,state:{ordering:i}}=Ah(),a=(0,d.useCallback)(()=>{n({ordering:e,type:"ORDERING_SET"})},[n,e]),r=(0,d.useMemo)(()=>eF(i,e),[i,e]);return(0,l.jsx)(x.sN,{onClick:a,pressed:r,tone:"default",text:t(e.titleKey)})}function F8(){let{t:e}=i1(),{enableLegacySearch:t=!1}=(0,tX.cFj)().search,{state:{ordering:n}}=Ah(),i=(0,d.useId)(),a=(0,d.useMemo)(()=>{let e=F2({enableLegacySearch:t});return[e.relevance,{type:"divider"},e.createdAsc,e.createdDesc,{type:"divider"},e.updatedAsc,e.updatedDesc]},[t]),r=a.find(e=>eF(n,e)&&!F4(e));return r?(0,l.jsx)(h.Zb,{borderBottom:!0,children:(0,l.jsx)(F3,{align:"center",flex:1,padding:2,children:(0,l.jsx)(x.j2,{button:(0,l.jsx)(x.zx,{mode:"bleed",icon:_.fzI,text:e(r.titleKey)}),id:i||"",menu:(0,l.jsx)(h.v2,{children:a.map((e,t)=>F4(e)?(0,l.jsx)(h.R,{},t):(0,l.jsx)(F5,{ordering:e},t))}),placement:"bottom-start",popover:{portal:!0,radius:2}})})}):null}let F6=(0,j.zo)(h.Zb)`
  cursor: help;
  left: 0;
  position: absolute;
  top: 0;
`;function F7({data:e}){let{score:t}=e,n="default";t<=.1?n="critical":t>=.5&&(n="primary");let i=e.stories.filter(e=>e.score>0);return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(x.u,{content:(0,l.jsx)(h.Kq,{space:2,children:i.length?(0,l.jsx)(l.Fragment,{children:i.map(e=>(0,l.jsxs)(h.gF,{space:3,children:[(0,l.jsx)(h.EK,{size:0,weight:"medium",children:e.path}),(0,l.jsx)(h.EK,{size:0,children:e.why})]},e.path))}):(0,l.jsx)(h.EK,{size:0,children:"No matches"})}),placement:"bottom-start",portal:!0,children:(0,l.jsx)(F6,{padding:1,shadow:1,tone:n,children:(0,l.jsxs)(h.EK,{size:0,children:["score: ",t]})})})})}let F9=(0,j.zo)(h.kC)`
  opacity: ${({$loading:e})=>e?.5:1};
  overflow-x: hidden;
  overflow-y: auto;
  position: relative;
  transition: 300ms opacity;
  width: 100%;
`;function De({disableIntentLink:e,inputElement:t,onItemSelect:n}){let{dispatch:i,onClose:a,setSearchCommandList:r,state:{debug:o,filters:s,fullscreen:c,lastActiveIndex:u,result:p,terms:m}}=Ah(),{t:f}=i1(),g=FR(),x=!!p.hits.length,y=!p.hits.length&&p.loaded,b=p.error,v=(0,d.useCallback)(()=>{g&&g.addSearch(m,s),a?.()},[s,a,g,m]),j=(0,d.useCallback)(()=>{i({type:"PAGE_INCREMENT"})},[i]),C=(0,d.useCallback)(t=>(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(Av,{disableIntentLink:e,documentId:iS(t.hit._id)||"",documentType:t.hit._type,onClick:v,onItemSelect:n,paddingY:1}),o&&(0,l.jsx)(F7,{data:t})]}),[o,e,v,n]);return(0,l.jsx)(h.kC,{children:(0,l.jsx)(h.Zb,{borderTop:c||!!(b||x||y),flex:1,children:(0,l.jsxs)(h.kC,{direction:"column",height:"fill",children:[x&&(0,l.jsx)(F8,{}),(0,l.jsx)(F9,{$loading:p.loading,"aria-busy":p.loading,flex:1,children:b?(0,l.jsx)(F1,{}):(0,l.jsxs)(l.Fragment,{children:[x&&(0,l.jsx)(aN,{activeItemDataAttr:"data-hovered",ariaLabel:f("search.search-results-label"),"data-testid":"search-results",fixedHeight:!0,initialIndex:u,inputElement:t,itemHeight:57,items:p.hits,overscan:4,onEndReached:j,paddingX:2,paddingY:1,ref:r,renderItem:C}),y&&(0,l.jsx)(FX,{})]})})]})})})}let Dt={duration:.4,type:"spring"},Dn={open:{opacity:1,scale:1,x:"-50%"},closed:{opacity:0,scale:.99,x:"-50%"}},Di={open:{opacity:1},closed:{opacity:0}},Da=(0,j.zo)((0,t5.E)(h.Zb))`
  background-color: var(--card-backdrop-color);
  bottom: 0;
  left: 0;
  position: absolute;
  right: 0;
  top: 0;
`,Dr=(0,j.zo)((0,t5.E)(h.Zb))`
  display: flex !important;
  flex-direction: column;
  left: 50%;
  max-height: min(
    calc(100vh - ${12}vh - ${AC}px),
    ${735}px
  );
  position: absolute;
  top: ${12}vh;
  width: min(calc(100vw - ${2*AC}px), ${800}px);
`;function Do({disableFocusLock:e,disableIntentLink:t,onClose:n,onItemSelect:i,onOpen:a,open:r}){let[o,s]=(0,d.useState)(null),c=(0,d.useRef)(null),{isTopLayer:u,zIndex:p}=(0,h.sJ)();i1();let{onClose:m,state:{filtersVisible:f,terms:g}}=Ah(),x=Aw({terms:g});return(0,h.Of)(u&&r&&!!m&&m,()=>[c.current]),(0,l.jsx)(FM,{hasValidTerms:x,onClose:n,onOpen:a,open:r,children:(0,l.jsx)(t8.M,{children:r&&(0,l.jsx)(h.h_,{children:(0,l.jsxs)(S.ZP,{autoFocus:!iU,disabled:e,returnFocus:!0,children:[(0,l.jsx)(Da,{animate:"open",exit:"closed",initial:"closed",style:{zIndex:p},transition:Dt,variants:Di}),(0,l.jsxs)(Dr,{animate:"open",exit:"closed",initial:"closed",overflow:"hidden",radius:3,ref:c,shadow:2,style:{zIndex:p},transition:Dt,variants:Dn,children:[(0,l.jsx)(F_,{onClose:n,ref:s}),f&&(0,l.jsx)(h.Zb,{borderTop:!0,flex:"none",children:(0,l.jsx)(Fw,{})}),x?(0,l.jsx)(De,{inputElement:o,onItemSelect:i,disableIntentLink:t}):(0,l.jsx)(FJ,{inputElement:o})]})]})})})})}function Ds(e){return"u">typeof e.__recent}let Dl="core:studio:navbar:search:";ns(Dl);let Dc=function(e){let t=`${Dl}${e}`;return ns&&ns.enabled(t)?ns(t):ns(Dl)}("reducer");function Dd(e,t){let n="\uD83D\uDD0D";switch(t.type.startsWith("SEARCH_REQUEST")&&(n="\uD83D\uDEA8"),t.type.startsWith("RECENT_SEARCHES")&&(n="\uD83D\uDCBE"),Dc(n,t),t.type){case"FILTERS_VISIBLE_SET":return{...e,filtersVisible:t.visible};case"LAST_ACTIVE_INDEX_SET":return{...e,lastActiveIndex:t.index};case"ORDERING_RESET":return{...e,ordering:F2({enableLegacySearch:e.enableLegacySearch}).relevance,terms:Du(e.terms),result:{...e.result,hasLocal:!1}};case"ORDERING_SET":return{...e,ordering:t.ordering,terms:Du(e.terms),result:{...e.result,hasLocal:!1}};case"PAGE_INCREMENT":return{...e,cursor:e.nextCursor??e.cursor,nextCursor:null,terms:Du(e.terms)};case"SEARCH_CLEAR":return{...e,cursor:null,nextCursor:null,result:{...e.result,hasLocal:!1,hits:[]}};case"SEARCH_REQUEST_COMPLETE":return{...e,nextCursor:t.nextCursor??null,result:{...e.result,error:null,hasLocal:!0,hits:e.result.hasLocal?Object.values([...e.result.hits,...t.hits].reduce((e,t)=>{let n=iS(t.hit._id);return{...e,[n]:t}},{})):t.hits,loaded:!0,loading:!1}};case"SEARCH_REQUEST_ERROR":return{...e,result:{...e.result,error:t.error,loaded:!1,loading:!1}};case"SEARCH_REQUEST_START":return{...e,result:{...e.result,loaded:!1,loading:!0}};case"TERMS_FILTERS_ADD":{var i,a;let n={...t.filter,value:(i=e.definitions.operators,a=t.filter.operatorType,PD(i,a)?.initialValue)},r=[...e.filters,n];return{...e,documentTypesNarrowed:PV({fieldDefinitions:e.definitions.fields,filters:r,types:e.terms.types}),filters:r,lastAddedFilter:n,terms:{...e.terms,filter:PL({fieldDefinitions:e.definitions.fields,filterDefinitions:e.definitions.filters,filters:r,operatorDefinitions:e.definitions.operators})},result:{...e.result,hasLocal:!1}}}case"TERMS_FILTERS_CLEAR":{let t=[];return{...e,documentTypesNarrowed:PV({fieldDefinitions:e.definitions.fields,filters:t,types:e.terms.types}),filters:t,terms:{...e.terms,filter:PL({fieldDefinitions:e.definitions.fields,filterDefinitions:e.definitions.filters,filters:t,operatorDefinitions:e.definitions.operators})},result:{...e.result,hasLocal:!1}}}case"TERMS_FILTERS_REMOVE":{let n=e.filters.findIndex(e=>Pq(e)===t.filterKey),i=[...e.filters.slice(0,n),...e.filters.slice(n+1)];return{...e,documentTypesNarrowed:PV({fieldDefinitions:e.definitions.fields,filters:i,types:e.terms.types}),filters:i,terms:{...e.terms,filter:PL({fieldDefinitions:e.definitions.fields,filterDefinitions:e.definitions.filters,filters:i,operatorDefinitions:e.definitions.operators})},result:{...e.result,hasLocal:!1}}}case"TERMS_FILTERS_SET_OPERATOR":{let n=e.filters.find(e=>Pq(e)===t.filterKey),i=PD(e.definitions.operators,n?.operatorType),a=PD(e.definitions.operators,t.operatorType),r=a?.initialValue,o=i?.inputComponent!=a?.inputComponent,s=e.filters.map(e=>Pq(e)===t.filterKey?{...e,operatorType:t.operatorType,...o?{value:r}:{}}:e);return{...e,filters:s,terms:{...e.terms,filter:PL({fieldDefinitions:e.definitions.fields,filterDefinitions:e.definitions.filters,filters:s,operatorDefinitions:e.definitions.operators})},result:{...e.result,hasLocal:!1}}}case"TERMS_FILTERS_SET_VALUE":{let n=e.filters.map(e=>Pq(e)===t.filterKey?{...e,value:t.value}:e);return{...e,filters:n,terms:{...e.terms,filter:PL({fieldDefinitions:e.definitions.fields,filterDefinitions:e.definitions.filters,filters:n,operatorDefinitions:e.definitions.operators})},result:{...e.result,hasLocal:!1}}}case"TERMS_QUERY_SET":return{...e,cursor:null,nextCursor:null,result:{...e.result,loaded:!1,hasLocal:!1},terms:Du({...e.terms,query:t.query})};case"TERMS_SET":{let n=t.filters||[],i=[...e.terms.types||[],...t.terms.types].sort(AT);return{...e,documentTypesNarrowed:PV({fieldDefinitions:e.definitions.fields,filters:n,types:i}),filters:n,lastAddedFilter:null,cursor:null,nextCursor:null,result:{...e.result,loaded:!1,hasLocal:!1},terms:{...t.terms,filter:PL({fieldDefinitions:e.definitions.fields,filterDefinitions:e.definitions.filters,filters:n,operatorDefinitions:e.definitions.operators})}}}case"TERMS_TYPE_ADD":{let n=[...e.terms.types||[],t.schemaType].sort(AT),i=PV({fieldDefinitions:e.definitions.fields,filters:[],types:n}),a=e.filters.filter(t=>{let n=PB(e.definitions.fields,t);return!n||0===n.documentTypes.length||i.every(e=>n.documentTypes.findIndex(t=>t===e)>-1)});return{...e,documentTypesNarrowed:i,filters:a,cursor:null,nextCursor:null,result:{...e.result,loaded:!1,hasLocal:!1},terms:Du({...e.terms,filter:PL({fieldDefinitions:e.definitions.fields,filterDefinitions:e.definitions.filters,operatorDefinitions:e.definitions.operators,filters:a}),types:n})}}case"TERMS_TYPE_REMOVE":{let n=(e.terms.types||[]).filter(e=>e!==t.schemaType);return{...e,documentTypesNarrowed:PV({fieldDefinitions:e.definitions.fields,filters:e.filters,types:n}),cursor:null,nextCursor:null,result:{...e.result,loaded:!1,hasLocal:!1},terms:Du({...e.terms,types:n})}}case"TERMS_TYPES_CLEAR":return{...e,documentTypesNarrowed:PV({fieldDefinitions:e.definitions.fields,filters:e.filters,types:[]}),cursor:null,nextCursor:null,result:{...e.result,loaded:!1,hasLocal:!1},terms:Du({...e.terms,types:[]})};default:return e}}function Du(e){if(Ds(e)){let{__recent:t,...n}=e;return n}return e}function Dp({children:e,fullscreen:t}){let[n,i]=(0,d.useState)(null),[a,r]=(0,d.useState)(null),o=NQ(),s=vh(),{search:{operators:c,filters:u,enableLegacySearch:m}}=AU(),{fieldDefinitions:h,filterDefinitions:f,operatorDefinitions:g}=(0,d.useMemo)(()=>({fieldDefinitions:FI(FN(o,u)),filterDefinitions:Ao(u),operatorDefinitions:PF(c)}),[u,c,o]),x=(0,d.useMemo)(()=>(function({currentUser:e,fullscreen:t,definitions:n,pagination:i,enableLegacySearch:a}){return{currentUser:e,debug:!(typeof window>"u")&&window.location.hash.slice(1).split(";").includes("_debug_search_score"),documentTypesNarrowed:[],filters:[],filtersVisible:!0,fullscreen:t,lastActiveIndex:-1,ordering:F2({enableLegacySearch:a}).relevance,...i,result:{error:null,hasLocal:!1,hits:[],loaded:!1,loading:!1},terms:{query:"",types:[]},definitions:n,enableLegacySearch:a}})({currentUser:s,fullscreen:t,definitions:{fields:h,operators:g,filters:f},pagination:{cursor:null,nextCursor:null},enableLegacySearch:m}),[s,h,f,t,g,m]),[y,b]=(0,d.useReducer)(Dd,x),{documentTypesNarrowed:v,filters:j,ordering:C,cursor:w,result:k,terms:T}=y,A=(0,d.useRef)(!1),_=(0,d.useRef)(x.ordering),S=(0,d.useRef)(x.cursor),E=(0,d.useRef)(x.terms),{handleSearch:M,searchState:N}=AE({initialState:{...k,terms:T},onComplete:e=>b({...e,type:"SEARCH_REQUEST_COMPLETE"}),onError:e=>b({error:e,type:"SEARCH_REQUEST_ERROR"}),onStart:()=>b({type:"SEARCH_REQUEST_START"}),schema:o}),I=Aw({terms:T}),z=v.map(e=>o.get(e)),$=j.filter(e=>PK({fieldDefinitions:h,filter:e,filterDefinitions:f,operatorDefinitions:g}));(0,d.useEffect)(()=>{let e=!eF(C,_.current),t=w!==S.current,n=!eF(T,E.current);if(e||t||n){let e="findability-sort:";(C?.customMeasurementLabel||C.sort)&&(e+=C?.customMeasurementLabel||`${C.sort?.field} ${C.sort?.direction}`),M({options:{comments:[...Ds(T)?[`findability-recent-search:${T.__recent.index}`]:[],`findability-selected-types:${T.types.length}`,e,"findability-source: global",`findability-filter-count:${$.length}`],limit:1e3,skipSortByScore:C.ignoreScore,...C.sort?{sort:[C.sort]}:{},cursor:w||void 0},terms:{...T,...z?{types:z}:{}}}),S.current=w}_.current=C,E.current=T},[$.length,j,z,M,I,C,N.terms,T,w]),(0,d.useEffect)(()=>{!I&&A?.current&&k.hits.length>0&&b({type:"SEARCH_CLEAR"}),A.current=!0},[b,I,k.hits,T.query,T.types]);let O=(0,d.useMemo)(()=>({dispatch:b,onClose:n,searchCommandList:a,setSearchCommandList:r,setOnClose:i,state:{...y,fullscreen:t}}),[t,n,a,y]);return(0,l.jsx)(p.ci.Provider,{value:O,children:e})}let Dm=(0,d.forwardRef)(function({onClick:e},t){let{t:n}=i1();return(0,l.jsx)(x.zx,{"aria-label":n("search.action-open-aria-label"),"data-testid":"studio-search",icon:_.W1M,tooltipProps:{content:n("search.button.tooltip"),hotkeys:[Aj,"K"],portal:!0},onClick:e,mode:"bleed",ref:t})}),Dh=(0,j.zo)(h.Zb)`
  flex-direction: column;
  overflow: hidden;
  overflow: clip;
  pointer-events: all;
  position: relative;
`,Df=(0,j.zo)(h.xu)`
  height: 100%;
  left: 0;
  overflow: hidden;
  overflow: clip;
  pointer-events: none;
  position: fixed;
  top: 0;
  width: 100%;
  z-index: 1;
`;function Dg({onClose:e,onOpen:t,open:n}){let[i,a]=(0,d.useState)(null),r=PO(),{state:{filtersVisible:o,terms:s}}=Ah(),c=Aw({terms:s});return(0,l.jsx)(FM,{hasValidTerms:c,onClose:e,onOpen:t,open:n,children:n&&(0,l.jsx)(h.h_,{children:(0,l.jsx)(S.ZP,{autoFocus:!iU,returnFocus:!0,children:(0,l.jsx)(Df,{children:(0,l.jsxs)(Dh,{display:"flex",height:"fill",scheme:r,tone:"default",children:[(0,l.jsx)(F_,{onClose:e,ref:a}),o&&(0,l.jsx)(h.Zb,{borderTop:!0,flex:"none",children:(0,l.jsx)(Fw,{})}),c?(0,l.jsx)(De,{inputElement:i}):(0,l.jsx)(FJ,{inputElement:i})]})})})})})}function Dx(e){let{activeTool:t}=e;return(0,d.createElement)(t.component,{tool:t})}function Dy(){return(0,l.jsx)(h.Zb,{height:"fill",children:(0,l.jsx)(h.kC,{align:"center",height:"fill",justify:"center",padding:4,sizing:"border",children:(0,l.jsx)(h.W2,{width:0,children:(0,l.jsx)(h.Zb,{padding:4,radius:2,shadow:1,tone:"caution",children:(0,l.jsxs)(h.kC,{children:[(0,l.jsx)(h.xu,{children:(0,l.jsx)(h.xv,{size:1,children:(0,l.jsx)(_.foC,{})})}),(0,l.jsxs)(h.Kq,{flex:1,marginLeft:3,space:3,children:[(0,l.jsx)(h.xv,{as:"h1",size:1,weight:"medium",children:"No configured tools"}),(0,l.jsx)(h.xv,{as:"p",muted:!0,size:1,children:"Please configure a tool in your Studio configuration."}),(0,l.jsx)(h.xv,{as:"p",muted:!0,size:1,children:(0,l.jsx)("a",{href:"https://www.sanity.io/docs/studio-tools",rel:"noreferrer",target:"_blank",children:"Learn how to add a tool →"})})]})]})})})})})}function Db(e){let{reason:t="Redirecting…"}=e;return(0,l.jsx)(h.Zb,{height:"fill",children:(0,l.jsx)(h.kC,{align:"center",height:"fill",justify:"center",padding:4,sizing:"border",children:(0,l.jsx)(h.W2,{width:0,children:(0,l.jsx)(h.Zb,{padding:4,radius:2,shadow:1,tone:"primary",children:(0,l.jsxs)(h.kC,{children:[(0,l.jsx)(h.xu,{children:(0,l.jsx)(h.xv,{size:1,children:(0,l.jsx)(_.hZl,{})})}),(0,l.jsx)(h.Kq,{flex:1,marginLeft:3,space:3,children:(0,l.jsx)(h.xv,{as:"h1",size:1,weight:"bold",children:t})})]})})})})})}function Dv(e){let{toolName:t}=e;return(0,l.jsx)(h.Zb,{height:"fill",children:(0,l.jsx)(h.kC,{align:"center",height:"fill",justify:"center",padding:4,sizing:"border",children:(0,l.jsx)(h.W2,{width:0,children:(0,l.jsx)(h.Zb,{padding:4,radius:2,shadow:1,tone:"caution",children:(0,l.jsxs)(h.kC,{children:[(0,l.jsx)(h.xu,{children:(0,l.jsx)(h.xv,{size:1,children:(0,l.jsx)(_.foC,{})})}),(0,l.jsx)(h.Kq,{flex:1,marginLeft:3,space:3,children:(0,l.jsxs)(h.xv,{as:"h1",size:1,weight:"medium",children:["Tool not found: ",(0,l.jsx)("code",{children:t})]})})]})})})})})}let Dj=()=>!(typeof document>"u")&&"querySelectorAll"in document&&Array.from(document.querySelectorAll('script[type="importmap"]')).some(e=>!!e.textContent&&"sanity"in(JSON.parse(e.textContent).imports||{}));function DC(e){let t=[],n,i=(0,nA.f)(e),a=async e=>i.send(e),r=async()=>{await Promise.all(t.map(a)).catch(e=>{console.error("Failed to send buffered events from transport: ",e)})};return{flush:async()=>i.flush(),send:async e=>n?a(e):(typeof n>"u"&&t.push(e),{}),setConsent:async e=>{n=e,e&&await r(),t=[]}}}let Dw="https://8914c8dde7e1ebce191f15af8bf6b7b9@sentry.sanity.io/4507342122123264",Dk=!("__sanityErrorChannel"in iz),DT=a2&&!!localStorage.getItem("SANITY_DEBUG_ERROR_REPORTING"),DA="u">typeof window,D_={dsn:Dw,release:tQ.y,environment:lR?"development":"production",debug:DT,enabled:DA&&(!lR||DT),transport:DC},DS=[(0,n_.S)(),(0,nS.C)(),(0,nE.t)({eventTarget:!1}),(0,nM.f)({console:!1}),(0,nN.k)({onerror:!0,onunhandledrejection:!0}),(0,nI.O)(),(0,nz.R)(),function(){let e=[];return{name:"SanityDedupe",processEvent(t){if(t.type)return t;try{if(function(e,t){for(let n of t){let t=DI(e),i=DI(n);if(t&&i&&t!==i)continue;let a=Math.floor(e.timestamp||0);if(300>Math.abs(a-Math.floor(n.timestamp||0)))return!0}return!1}(t,e))return DT&&console.warn("[sanity/sentry] Dropping error from being reported because it is a duplicate"),null}catch{}return e.length>10&&e.shift(),e.push(t),t}}}(),(0,n$.s)()],DE=Object.prototype.toString;function DM(e){switch(DE.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return function(e,t){try{return e instanceof t}catch{return!1}}(e,Error)}}function DN(e){return function(e){for(let t of e.exception?.values||[])t.mechanism&&(t.mechanism.handled=!1)}(e),e}function DI(e){if(e.message)return e.message;if(e.exception){for(let t of e.exception.values||[])if(t.value)return t.value}}let Dz=function(){let e;function t(e){return!!e&&"setConsent"in e&&"function"==typeof e.setConsent}return{initialize:function(){if(e||!DT&&!Dj()||!DT&&Dk)return;let t=(0,nO.dk)(),n=t&&nP.s3()?.getOptions().dsn===Dw;if(t&&!n){e=(0,nP.s3)(),(0,nP.nZ)();return}if(n){e=new nF.R({...D_,stackParser:nD.Dt,integrations:DS,beforeSend:DN,transport:DC}),new nR.s().setClient(e),e.init();return}(0,nL.S)({...D_,defaultIntegrations:!1,integrations:DS,beforeSend:DN}),e=(0,nP.s3)(),(0,nP.nZ)()},reportError:function(t,n={}){if(!e)return console.warn("[reportError] called before reporter is initialized, skipping"),null;let{reactErrorInfo:i={},errorBoundary:a}=n,{componentStack:r}=i,o={};r&&(o.react={componentStack:r});let s={handled:"no"};a&&(s.errorBoundary=a);let l=null;return(0,nP.$e)(()=>{if(r&&DM(t)){let e=Error(t.message);e.name=`${a||"ErrorBoundary"} ${t.name}`,e.stack=r,function(e,t){let n=new WeakMap;!function e(t,i){if(!n.has(t)){if(DM(t.cause)){n.set(t,!0),e(t.cause,i);return}t.cause=i}}(e,t)}(t,e)}l=(0,nO.Tb)(t,{mechanism:{handled:!1},captureContext:{contexts:o,tags:s}})}),l?{eventId:l}:null},enable:function(){let n=e?.getTransport();t(n)&&n.setConsent(!0)},disable:function(){let n=e?.getTransport();t(n)&&n.setConsent(!1)}}}(),D$=iC(e=>(0,U.a)(e.map(e=>e.auth.state.pipe((0,P.U)(t=>[e.name,t])))).pipe((0,P.U)(e=>Object.fromEntries(e)))),DO={"logged-in":"","logged-out":"Signed out","no-access":""},DP=j.zo.div`
  width: ${e=>"small"===e.$size?"25px":"41px"};
  height: ${e=>"small"===e.$size?"25px":"41px"};

  svg {
    width: 100%;
    height: 100%;
  }
`,DF=({icon:e,size:t="small"})=>{let n=(0,d.useMemo)(()=>DD(e),[e]);return(0,l.jsx)(DP,{$size:t,children:n})},DD=e=>(0,eV.isValidElementType)(e)?(0,d.createElement)(e):(0,d.isValidElement)(e)?e:void 0;function DR(e){let{state:t,subtitle:n,selected:i,title:a,icon:r,iconRight:o}=e,s=(0,d.useMemo)(()=>DD(o),[o]);return(0,l.jsxs)(h.kC,{align:"center",flex:"none",gap:3,children:[(0,l.jsx)(DF,{icon:r,size:"small"}),(0,l.jsxs)(h.Kq,{flex:1,space:2,children:[(0,l.jsx)(h.xv,{size:1,textOverflow:"ellipsis",weight:"medium",children:a}),n&&(0,l.jsx)(h.xv,{muted:!0,size:1,textOverflow:"ellipsis",children:n})]}),t&&DO[t]&&(0,l.jsx)(h.xu,{paddingLeft:1,children:(0,l.jsx)(h.xv,{size:1,muted:!0,textOverflow:"ellipsis",children:DO[t]})}),(i||s)&&(0,l.jsxs)(h.kC,{align:"center",gap:4,paddingLeft:3,paddingRight:2,children:[i&&(0,l.jsx)(h.xv,{children:(0,l.jsx)(_.KML,{})}),s&&(0,l.jsx)(h.xv,{muted:!0,children:s})]})]})}let DL=[{url:"https://slack.sanity.io/",i18nKey:"workspaces.community-title",title:"Community"},{url:"https://www.sanity.io/docs",i18nKey:"workspaces.docs-title",title:"Docs"},{url:"https://www.sanity.io/legal/privacy",i18nKey:"workspaces.privacy-title",title:"Privacy"},{url:"https://www.sanity.io",i18nKey:"workspaces.sanity-io-title",title:"sanity.io"}],DB=(0,j.zo)(h.xv)`
  a {
    color: inherit;
  }
`;function Dq(e){let{children:t,footer:n,header:i}=e;return i1(),(0,l.jsxs)(h.Kq,{space:6,children:[(0,l.jsx)(h.Zb,{border:!0,radius:3,overflow:"auto",children:(0,l.jsxs)(h.Kq,{children:["object"==typeof i&&(0,l.jsx)(h.xu,{children:i}),"string"==typeof i&&(0,l.jsx)(h.xu,{paddingY:4,children:(0,l.jsx)(h.X6,{align:"center",size:1,children:i})}),(0,l.jsx)(h.xu,{paddingX:1,children:(0,l.jsx)(h.Zb,{borderTop:!!i,borderBottom:!!n,children:t})}),n&&(0,l.jsx)(h.xu,{children:n})]})}),(0,l.jsxs)(h.kC,{direction:"column",gap:4,justify:"center",align:"center",paddingBottom:4,children:[(0,l.jsx)(h.xv,{size:3,children:(0,l.jsx)(nZ.hn,{})}),(0,l.jsx)(h.kC,{align:"center",gap:2,children:DL.map((e,t)=>(0,l.jsxs)(d.Fragment,{children:[(0,l.jsx)(DB,{muted:!0,size:1,children:(0,l.jsx)("a",{href:e.url,target:"_blank",rel:"noopener noreferrer",children:e.title})}),t<DL.length-1&&(0,l.jsx)(h.xv,{size:1,muted:!0,children:"•"})]},e.title))})]})]})}function DV(){let e=aO(),{activeWorkspace:t,setActiveWorkspace:n}=Pj(),[i]=D$(e),[a,r]=(0,d.useState)(t?.name||null),o=1===e.length?e[0]:e.find(e=>e.name===a),s=o?.auth?.LoginComponent,c=(0,d.useCallback)(()=>r(null),[]),{t:u}=i1();return i?s&&o?(0,l.jsxs)(h.Kq,{space:2,children:[e.length>1&&(0,l.jsx)(h.kC,{children:(0,l.jsx)(x.zx,{icon:_.Y4O,mode:"bleed",onClick:c,text:u("workspaces.action.choose-another-workspace")})}),(0,l.jsx)(Dq,{header:(0,l.jsx)(h.xu,{padding:3,children:(0,l.jsx)(DR,{icon:o.icon,title:o.title,subtitle:o?.subtitle})}),children:(0,l.jsx)(h.Kq,{padding:2,paddingBottom:3,paddingTop:4,children:(0,l.jsx)(s,{projectId:o.projectId,redirectPath:window.location.pathname.startsWith(o.basePath)?`${window.location.pathname}${window.location.search}`:o.basePath},a)})})]}):(0,l.jsx)(Dq,{header:u("workspaces.choose-your-workspace-label"),footer:(0,l.jsx)(h.Kq,{padding:1,children:(0,l.jsx)(x.zx,{as:"a",href:"https://www.sanity.io/docs/workspaces",icon:_.dtP,mode:"bleed",rel:"noopener noreferrer",size:"large",target:"__blank",text:u("workspaces.action.add-workspace")})}),children:(0,l.jsx)(h.Kq,{space:1,paddingX:1,paddingY:2,children:e.map(e=>{let a=i[e.name].authenticated?"logged-in":e.auth.LoginComponent?"logged-out":"no-access";return(0,l.jsx)(h.Zb,{as:"button",radius:2,padding:2,onClick:()=>{"logged-in"===a&&e.name!==t.name&&n(e.name),"logged-out"===a&&r(e.name)},children:(0,l.jsx)(DR,{icon:e?.icon,iconRight:_.XCv,state:a,subtitle:e?.subtitle,title:e?.title||e.name})},e.name)})})}):(0,l.jsx)(aW,{showText:!0})}let DK=(0,j.zo)(h.v2)`
  max-width: 350px;
  min-width: 250px;
`,DU={constrainSize:!0,fallbackPlacements:["bottom-end","bottom"],placement:"bottom-end"};function DZ(){let e=aO(),{activeWorkspace:t}=Pj(),[n]=D$(e),{t:i}=i1();if(!(e.length>1))return null;let a=!n;return(0,l.jsx)(x.j2,{button:(0,l.jsx)(h.kC,{children:(0,l.jsx)(x.u,{content:i("workspaces.select-workspace-tooltip"),disabled:a,portal:!0,children:(0,l.jsx)(h.zx,{disabled:a,mode:"bleed",padding:2,width:"fill",children:(0,l.jsxs)(h.kC,{align:"center",gap:2,children:[(0,l.jsx)(h.xu,{children:(0,l.jsx)(h.xv,{size:1,textOverflow:"ellipsis",weight:"medium",children:t.title})}),(0,l.jsx)(h.xv,{size:1,children:(0,l.jsx)(_.v4q,{})})]})})})}),id:"workspace-menu",menu:!a&&n?(0,l.jsx)(DK,{children:e.map(e=>{let i=n[e.name].authenticated?"logged-in":e.auth.LoginComponent?"logged-out":"no-access",a=e.name===t.name;return(0,l.jsx)(x.sN,{as:"a",href:e.basePath,badgeText:DO[i],iconRight:a?_.KML:void 0,pressed:a,preview:(0,l.jsx)(DF,{icon:e.icon,size:"small"}),selected:a,__unstable_subtitle:e.subtitle,__unstable_space:1,text:e?.title||e.name},e.name)})}):void 0,popover:DU})}function DG(){return(0,l.jsx)(h.Zb,{height:"fill",overflow:"auto",paddingX:4,children:(0,l.jsx)(h.kC,{height:"fill",direction:"column",align:"center",justify:"center",paddingTop:4,children:(0,l.jsx)(h.W2,{width:0,children:(0,l.jsx)(DV,{})})})})}function DH(){return(0,l.jsx)(l.Fragment,{children:"TODO: implement config errors screen"})}let DW=j.zo.label`
  clip: rect(0 0 0 0);
  clip-path: inset(50%);
  height: 1px;
  overflow: hidden;
  overflow: clip;
  position: absolute;
  white-space: nowrap;
  width: 1px;
`;function DY(e){let{projectId:t}=e,n=window.location.origin,i=(0,d.useMemo)(()=>{let e=new URL(`https://sanity.io/manage/project/${t}/api`);return e.searchParams.set("cors","add"),e.searchParams.set("origin",n),e.searchParams.set("credentials",""),e.toString()},[n,t]);return(0,d.useEffect)(()=>{let e=()=>{window.location.reload()};return window.addEventListener("focus",e),()=>{window.removeEventListener("focus",e)}},[]),(0,l.jsx)(h.Zb,{height:"fill",children:(0,l.jsx)(x.Vq,{id:"cors-error-dialog",header:"Before you continue...",width:1,footer:{confirmButton:{text:"Continue",iconRight:_.buG,as:"a",href:i,target:"_blank",rel:"noopener noreferrer",tone:"primary"}},children:(0,l.jsxs)(h.Kq,{space:4,children:[(0,l.jsxs)(h.xv,{children:["To access your content, you need to ",(0,l.jsx)("b",{children:"add the following URL as a CORS origin"})," to your Sanity project."]}),(0,l.jsx)(DW,{"aria-hidden":"true",children:"CORS URL to be added"}),(0,l.jsx)(h.oi,{value:n,readOnly:!0})]})})})}function DJ(){let[e,t]=(0,d.useState)(null),[n,i]=(0,d.useState)(null);if(n)throw n;let{activeWorkspace:a}=Pj(),r=(0,d.useCallback)(()=>{a.auth.logout?.()},[a]);(0,d.useEffect)(()=>{let e=a.auth.state.subscribe({next:({currentUser:e})=>{t(e)},error:i});return()=>{e.unsubscribe()}},[a]);let o=rQ(e?.provider),s=o?` through ${o}`:"";return(0,l.jsx)(h.Zb,{height:"fill",children:(0,l.jsx)(x.Vq,{id:"not-authorized-dialog",header:"Not authorized",width:1,footer:{confirmButton:{text:"Sign out",onClick:r,tone:"default"}},children:(0,l.jsxs)(h.Kq,{space:4,children:[(0,l.jsx)(h.xv,{children:"You are not authorized to access this studio. Please contact someone with access to invite you to this project."}),(0,l.jsxs)(h.xv,{children:["If you think this is an error, verify that you are signed in with the correct account. You are currently signed in as"," ",(0,l.jsxs)("strong",{children:[e?.name," (",e?.email,")"]}),s,"."]})]})})})}function DX(e){return(0,l.jsx)(h.Zb,{height:"fill",sizing:"border",tone:"caution",display:"flex",children:(0,l.jsx)(h.kC,{direction:"row",justify:"center",flex:1,align:"center",children:(0,l.jsxs)(h.Kq,{space:4,children:[(0,l.jsx)(h.X6,{as:"h1",children:"Workspace not found"}),(0,l.jsx)(h.gF,{children:(0,l.jsx)(x.zx,{text:"Go to default workspace",onClick:e.onNavigateToDefaultWorkspace,mode:"ghost"})})]})})})}function DQ(){let[e,t]=(0,d.useState)(null),[n,i]=(0,d.useState)(),[a,r]=(0,d.useState)(),o=(0,h.pm)(),[s,c]=(0,d.useState)(null),[u,p]=(0,d.useState)(),[m,f]=(0,d.useState)(!0),[g,y]=(0,d.useState)(!1),[b,v]=(0,d.useState)(!1),[j,C]=(0,d.useState)(!1),[w,k]=(0,d.useState)(!1),[T,A]=(0,d.useState)(!1),[_,S]=(0,d.useState)(),[E,M]=(0,d.useState)(0),{activeWorkspace:N}=(0,tX.AJ_)(),I=(0,d.useCallback)(()=>{N.auth.logout?.()},[N]);(0,d.useEffect)(()=>{let e=N.auth.state.subscribe({next:({client:e,currentUser:n})=>{r(e.config().projectId),i(e.withConfig({apiVersion:"2024-07-01"})),t(n)},error:c});return()=>{e.unsubscribe()}},[N]),(0,d.useEffect)(()=>{n&&a&&n.request({url:"/access/requests/me"}).then(e=>{if(e&&e?.length){let t=e.filter(e=>e.resourceId===a);if(t.find(e=>"declined"===e.status)){A(!0);return}if(t.find(e=>"pending"===e.status&&(0,t_.Z)((0,tq.Z)(new Date(e.createdAt),2),new Date))){v(!0);return}t.find(e=>"pending"===e.status&&(0,tS.Z)((0,tq.Z)(new Date(e.createdAt),2),new Date))&&C(!0)}}).catch(e=>{console.error(e),c(!0)}).finally(()=>{f(!1)})},[n,a]);let z=(0,d.useCallback)(()=>{n&&a&&(y(!0),n.request({url:`/access/project/${a}/requests`,method:"post",body:{note:_,requestUrl:window?.location.href}}).then(e=>{e&&v(!0)}).catch(e=>{let t=e?.response?.statusCode,n=e?.response?.body?.message;429===t&&(k(!0),p(n)),409===t?(A(!0),p(n)):o.push({title:"There was a problem submitting your request.",status:n})}).finally(()=>{y(!1)}))},[_,a,n,o]),$=(0,tX.AOL)(e?.provider),O=$?` through ${$}`:"";return m?(0,l.jsx)(tX.Bwn,{}):s?(0,l.jsx)(DJ,{}):(0,l.jsx)(h.Zb,{height:"fill",children:(0,l.jsx)(x.Vq,{id:"not-authorized-dialog",header:"Not authorized",width:1,children:(0,l.jsxs)(h.xu,{children:[(0,l.jsxs)(h.Kq,{space:4,children:[(0,l.jsxs)(h.xv,{children:["You are not authorized to access this studio (currently signed in as"," ",(0,l.jsxs)("strong",{children:[e?.name," (",e?.email,")"]}),O,")."]}),w||b||T?(0,l.jsx)(h.Zb,{tone:b?"transparent":"caution",padding:3,radius:2,shadow:1,children:(0,l.jsxs)(h.xv,{size:1,children:[w&&!b&&(0,l.jsx)(l.Fragment,{children:u??`You've reached the limit for access requests across all projects. Please wait
                      before submitting more requests or contact an admin for assistance.`}),b&&(0,l.jsx)(l.Fragment,{children:"Your request to access this project is pending approval."}),T&&(0,l.jsx)(l.Fragment,{children:u??"Your request to access this project has been declined."})]})}):(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(h.xv,{children:j?(0,l.jsx)(l.Fragment,{children:"Your previous request has expired. You may again request access below with an optional note. The administrator(s) will receive an email letting them know that you are requesting access."}):(0,l.jsx)(l.Fragment,{children:"You can request access below with an optional note. The administrator(s) will receive an email letting them know that you are requesting access."})}),(0,l.jsxs)(h.Kq,{space:3,paddingBottom:0,children:[(0,l.jsx)(h.oi,{maxLength:150,disabled:g,onKeyDown:e=>{"Enter"===e.key&&z()},onChange:e=>{S(e.currentTarget.value),M(e.currentTarget.value.length)},value:_,placeholder:"Add your note…"}),(0,l.jsx)(h.xv,{align:"right",muted:!0,size:1,children:`${E}/150`})]})]})]}),(0,l.jsxs)(h.kC,{align:"center",justify:"space-between",paddingTop:4,children:[(0,l.jsx)(x.zx,{mode:"bleed",text:"Sign out",tone:"default",onClick:I,size:"large"}),!w&&!T&&(0,l.jsx)(x.zx,{mode:"default",text:b?"Request sent":"Request access",disabled:b||g,loading:g,tone:"default",onClick:z,size:"large"})]})]})})})}let D0={error:"critical",warning:"caution"},D1=j.zo.code`
  && {
    background: none;
    color: inherit;
  }
`,D2=(0,j.zo)(h.xv)`
  white-space: pre-line;
`;function D3(e){let{problemGroups:t}=e;i1();let n=(0,d.useMemo)(()=>{let e=[];for(let n of t)for(let t of n.problems)e.push({group:n,problem:t});return e},[t]);return(0,l.jsx)(h.Kq,{as:"ul",space:4,children:n.map(({group:e,problem:t},n)=>{let i="error"===t.severity,a="warning"===t.severity,r=function(e){let t=e.path[0];return"type"===t.kind?{name:t.name||`<anonymous ${t.type}>`,type:t.type}:null}(e);return(0,l.jsxs)(h.Zb,{border:!0,padding:4,radius:2,tone:D0[t.severity],children:[(0,l.jsxs)(h.kC,{children:[(0,l.jsx)(h.xu,{marginRight:3,children:(0,l.jsxs)(h.xv,{muted:!0,size:1,children:[i&&(0,l.jsx)(_.uIy,{}),a&&(0,l.jsx)(_.foC,{})]})}),(0,l.jsx)(h.xu,{flex:1,children:(0,l.jsx)(h.xv,{size:1,weight:"medium",children:r?(0,l.jsxs)(l.Fragment,{children:[ti(r.type),' type "',r.name,'"']}):null})})]}),(0,l.jsx)(h.xu,{marginTop:4,children:(0,l.jsx)(h.Zb,{border:!0,overflow:"auto",padding:2,tone:"inherit",children:(0,l.jsx)(h.Oo,{separator:(0,l.jsx)(h.xv,{muted:!0,size:1,children:"→"}),children:e.path.map((e,t)=>{if("type"===e.kind){var n;let i=`${(n=e.name||`<anonymous ${e.type}>`,n?.startsWith("<unnamed_type_@_index")?`[${n.slice(1,-1).split("_")[4]}]`:n)}:${e.type}`;return(0,l.jsx)(h.xv,{title:i,size:1,textOverflow:"ellipsis",children:(0,l.jsx)(D1,{children:i})},t)}return"property"===e.kind?(0,l.jsx)(h.xv,{title:e.name,size:1,textOverflow:"ellipsis",children:(0,l.jsx)(D1,{children:e.name})},t):null})})})}),(0,l.jsx)(h.xu,{as:"ul",marginTop:4,children:(0,l.jsx)(h.xu,{as:"li",children:(0,l.jsxs)(h.Kq,{space:3,children:[(0,l.jsx)(D2,{muted:!0,size:1,children:t.message}),t.helpId&&(0,l.jsx)(h.xv,{muted:!0,size:1,children:(0,l.jsx)("a",{href:(0,x.h0)(t.helpId),target:"_blank",rel:"noopener noreferrer",children:"View documentation →"})})]})})})]},n)})})}function D4({schema:e}){let t=e._validation?.filter(e=>e.problems.some(e=>"error"===e.severity))||[];return(0,d.useEffect)(()=>(function(e){let t=e._validation?.filter(e=>e.problems.some(e=>"warning"===e.severity));t?.length!==0&&(console.groupCollapsed(`\u26A0\uFE0F Schema has ${t?.length} warnings`),t?.forEach(e=>{let t=e.path.map(e=>"type"===e.kind?`${e.name||"<unnamed>"}(${e.type})`:"property"===e.kind?e.name:null).filter(Boolean).join(" > ");console.group(`%cAt ${t}`,"color: #FF7636"),e.problems.forEach(e=>{console.log(e.message)}),console.groupEnd()}),console.groupEnd())})(e),[e]),(0,l.jsx)(h.Zb,{height:"fill",overflow:"auto",paddingY:[4,5,6,7],paddingX:4,sizing:"border",children:(0,l.jsx)(h.W2,{width:1,children:(0,l.jsxs)(h.Kq,{space:5,children:[(0,l.jsx)(h.X6,{as:"h1",children:"Schema errors"}),(0,l.jsx)(D3,{problemGroups:t})]})})})}let D5={componentStack:null,error:null,eventId:null};function D8({children:e,heading:t="An error occured"}){let[{error:n,eventId:i},a]=(0,d.useState)(D5),r=iO(n)&&"string"==typeof n.message&&n.message,o=iO(n)&&"string"==typeof n.stack&&n.stack,s=(0,d.useCallback)(()=>a(D5),[]),c=(0,d.useCallback)(e=>{let t=Dz.reportError(e.error,{reactErrorInfo:e.info,errorBoundary:"StudioErrorBoundary"});a({error:e.error,componentStack:e.info.componentStack,eventId:t?.eventId||null})},[]);return(0,nG.H)(s),n instanceof r$?(0,l.jsx)(DY,{projectId:n?.projectId}):n instanceof Pd?(0,l.jsx)(D4,{schema:n.schema}):n?(0,l.jsx)(h.Zb,{height:"fill",overflow:"auto",paddingY:[4,5,6,7],paddingX:4,sizing:"border",tone:"critical",children:(0,l.jsx)(h.W2,{width:3,children:(0,l.jsxs)(h.Kq,{space:4,children:[(0,l.jsx)(h.X6,{children:t}),(0,l.jsx)("div",{children:(0,l.jsx)(x.zx,{onClick:s,text:"Retry",tone:"default"})}),(0,l.jsx)(h.Zb,{border:!0,radius:2,overflow:"auto",padding:4,tone:"inherit",children:(0,l.jsxs)(h.Kq,{space:4,children:[r&&(0,l.jsx)(h.EK,{size:1,children:(0,l.jsxs)("strong",{children:["Error: ",r]})}),o&&(0,l.jsx)(h.EK,{size:1,children:o}),i&&(0,l.jsxs)(h.EK,{size:1,children:["Event ID: ",i]})]})})]})})}):(0,l.jsx)(h.SV,{onCatch:c,children:e})}let D6=(0,j.zo)(h.Zb)`
  height: 100%;
  left: 0;
  overflow: hidden;
  overflow: clip;
  position: fixed;
  top: 0;
  width: 100%;
  z-index: 200;
`;function D7(){let e=aL({defaultComponent:D9,pick:Rn});return(0,l.jsx)(e,{})}function D9(){let{name:e,title:t,tools:n}=dR(),i=(0,ny.tv)(),a=(0,ny.z)((0,d.useCallback)(e=>"string"==typeof e.tool?e.tool:void 0,[])),r=(0,d.useMemo)(()=>n.find(e=>e.name===a),[a,n]),[o,s]=(0,d.useState)(!1),[c,u]=(0,d.useState)(null),[m,f]=(0,d.useState)(!1),g=(0,d.useMemo)(()=>{let n=t||tt(e);return a?`${tt(a)} | ${n}`:n},[a,e,t]),x=!!r?.controlsDocumentTitle;(0,d.useEffect)(()=>{x||(document.title=g)},[g,x]);let y=(0,d.useCallback)(e=>{s(e)},[]),b=(0,d.useCallback)(e=>{f(e)},[]),v=(0,d.useMemo)(()=>({searchFullscreenOpen:o,searchFullscreenPortalEl:c,searchOpen:m,onSearchFullscreenOpenChange:y,onSearchOpenChange:b}),[o,c,m,y,b]),j=aL({defaultComponent:Lo,pick:Rt}),C=aL({defaultComponent:Dx,pick:Ri}),w=!r&&("desk"===a||!a)&&"u">typeof window&&/\/desk(\/|$)/.test(window.location.pathname)&&n.some(e=>"structure"===e.name);return(0,d.useEffect)(()=>{w&&i.navigateUrl({path:window.location.pathname.replace(/\/desk/,"/structure"),replace:!0})},[w,i]),(0,l.jsxs)(h.kC,{"data-ui":"ToolScreen",direction:"column",height:"fill","data-testid":"studio-layout",children:[(0,l.jsx)(p.bX.Provider,{value:v,children:(0,l.jsx)(j,{})}),w&&(0,l.jsx)(Db,{}),0===n.length&&(0,l.jsx)(Dy,{}),n.length>0&&!r&&a&&!w&&(0,l.jsx)(Dv,{toolName:a}),o&&(0,l.jsx)(D6,{ref:u,overflow:"auto"}),(0,l.jsx)(D8,{heading:`The ${r?.name} tool crashed`,children:(0,l.jsx)(h.Zb,{flex:1,hidden:o,children:r&&a&&(0,l.jsx)(ny.NZ,{scope:a,__unsafe_disableScopedSearchParams:r.router?.__unsafe_disableScopedSearchParams,children:(0,l.jsx)(d.Suspense,{fallback:(0,l.jsx)(aW,{showText:!0}),children:(0,l.jsx)(C,{activeTool:r})})})})},r?.name)]})}function Re(e){return e.studio?.components?.toolMenu}function Rt(e){return e.studio?.components?.navbar}function Rn(e){return e.studio?.components?.layout}function Ri(e){return e.studio?.components?.activeToolLayout}function Ra(){return aL({defaultComponent:Lh,pick:Re})}function Rr(){let e=NQ()._validation?.filter(e=>e.problems.some(e=>"warning"===e.severity))||[],t=PO(),{t:n}=i1(),i=(0,d.useId)(),[a,r]=(0,d.useState)(!1),[o,s]=(0,d.useState)(null),c=(0,d.useCallback)(()=>r(!0),[]),u=(0,d.useCallback)(()=>{r(!1),o&&o.focus()},[o]);return 0===e.length?null:(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(qI,{icon:_.foC,mode:"bleed",onClick:c,ref:s,selected:a,tone:"caution","aria-label":n("configuration-issues.button.label"),tooltipProps:{scheme:t,content:n("configuration-issues.button.tooltip")}}),a&&(0,l.jsx)(x.Vq,{header:"Configuration issues",width:2,onClickOutside:u,onClose:u,scheme:t,id:i,children:(0,l.jsxs)(h.Kq,{space:4,children:[(0,l.jsxs)(h.Kq,{space:3,children:[(0,l.jsxs)(h.xv,{as:"h2",size:1,weight:"medium",children:["Found ",e.length," schema warnings"]})," ",(0,l.jsx)(h.xv,{muted:!0,size:1,children:"Configuration checks are only performed during development and will not be visible in production builds"})]}),(0,l.jsx)(D3,{problemGroups:e})]})})]})}let Ro=(0,t4.dS)({name:"Trial Dialog Viewed",version:1,description:"User viewed a dialog or popover related to free trial"}),Rs=(0,t4.dS)({name:"Trial Dialog Dismissed",version:1,description:"User dismissed a dialog or popover related to free trial"}),Rl=(0,t4.dS)({name:"Trial Dialog CTA Clicked",version:1,description:"User clicked a CTA in a dialog or popover related to free trial"});function Rc({showOnLoad:e,dialogId:t}){return e&&"free-upgrade-popover"===t.toLowerCase()?"trialStarted":e&&"trial-ending-popover"===t.toLowerCase()?"trialEndingSoon":e&&"project-downgraded-to-free"===t.toLowerCase()?"trialEnded":e||"after-trial-upgrade"!==t.toLowerCase()?"trialActive":"postTrial"}let Rd=(0,j.zo)(x.zx)`
  position: absolute;
  top: 12px;
  right: 12px;
  z-index: 20;
  background: transparent;
  border-radius: 9999px;
  box-shadow: none;
  color: white;
  --card-fg-color: white;
  :hover {
    --card-fg-color: white;
  }
`,Ru=j.zo.img`
  object-fit: cover;
  width: 100%;
  height: 100%;
  height: 196px;
`,Rp=(0,j.zo)(x.Vq)`
  > [data-ui='DialogCard'] {
    max-width: 22.5rem;
  }
`;function Rm({onClose:e,onOpenNext:t,onOpenUrlCallback:n,content:i,open:a}){function r(){e("xClick")}let o=PO();return a?(0,l.jsxs)(Rp,{id:"free-trial-modal",onClose:e,onClickOutside:function(){e("outsideClick")},padding:!1,__unstable_hideCloseButton:!0,scheme:o,footer:{cancelButton:i.secondaryButton?.text?{text:i.secondaryButton.text,mode:"bleed",tone:"default",onClick:r}:void 0,confirmButton:{text:i.ctaButton?.text,mode:"default",tone:"primary",...i.ctaButton?.action==="openUrl"?{href:i.ctaButton.url,target:"_blank",rel:"noopener noreferrer",as:"a",onClick:n}:{onClick:i.ctaButton?.action==="openNext"?t:function(){e("ctaClicked")}}}},children:[(0,l.jsx)(Rd,{icon:_.Two,mode:"bleed",tone:"default",onClick:r,tabIndex:-1,tooltipProps:null}),i.image&&(0,l.jsx)(Ru,{src:i.image.asset.url,alt:i.image.asset.altText??""}),(0,l.jsxs)(h.kC,{padding:3,direction:"column",children:[(0,l.jsx)(h.xu,{paddingX:2,marginTop:3,children:(0,l.jsx)(h.X6,{size:2,children:i.headingText})}),(0,l.jsx)(h.xu,{marginTop:4,paddingBottom:3,children:(0,l.jsx)(Ee,{blocks:i.descriptionText})})]})]}):null}let Rh=j.zo.div`
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
`,Rf=({daysLeft:e,totalDays:t})=>{let n=Math.round((t-e)/t*100),i=2*Math.PI*10;return(0,l.jsx)(h.Zb,{children:(0,l.jsx)(Rh,{children:(0,l.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",width:21.2,height:21.2,viewBox:"0 0 21.2 21.2",style:{transform:"rotate(-90deg)"},children:[(0,l.jsx)("circle",{r:10,cx:10.6,cy:10.6,fill:"transparent",strokeWidth:1.2,stroke:n>75?M.er[600].hex:M.jk[400].hex}),(0,l.jsx)("circle",{r:10,cx:10.6,cy:10.6,fill:"transparent",strokeWidth:1.2,stroke:"var(--card-border-color)",strokeDasharray:i,strokeDashoffset:(100-n)/100*i})]})})})},Rg=(0,d.forwardRef)(function({toggleShowContent:e,daysLeft:t,totalDays:n},i){let{t:a}=i1();return(0,l.jsxs)(x.zx,{mode:"bleed",onClick:e,ref:i,tooltipProps:{content:t?a("free-trial.tooltip.days-count",{count:t}):a("free-trial.tooltip.trial-finished")},children:[(0,l.jsx)(h.xv,{size:0,children:(0,l.jsx)(_.jrq,{})}),t>0&&(0,l.jsx)(Rf,{daysLeft:t,totalDays:n})]})}),Rx=(0,d.forwardRef)(function({toggleShowContent:e,daysLeft:t},n){let{t:i}=i1();return(0,l.jsx)(x.zx,{ref:n,icon:_.jrq,justify:"flex-start",mode:"bleed",size:"large",onClick:e,text:t?i("user-menu.action.free-trial",{count:t}):i("user-menu.action.free-trial-finished")})}),Ry=()=>{let e=(0,d.useContext)(p.c$);if(!e)throw Error("useFreeTrial must be used within a FreeTrialProvider");return e},Rb=j.zo.img`
  object-fit: cover;
  width: 100%;
  height: 100%;
  height: 180px;
`;function Rv({content:e,handleClose:t,handleOpenNext:n}){return(0,l.jsx)(h.Zb,{radius:3,overflow:"hidden",width:0,children:(0,l.jsxs)(h.W2,{width:0,children:[e.image&&(0,l.jsx)(Rb,{src:e.image.asset.url,alt:e.image.asset.altText??""}),(0,l.jsxs)(h.kC,{padding:3,direction:"column",children:[(0,l.jsx)(h.xu,{paddingX:2,marginTop:3,children:(0,l.jsx)(h.X6,{size:1,children:e.headingText})}),(0,l.jsx)(h.xu,{marginTop:4,children:(0,l.jsx)(Ee,{blocks:e.descriptionText})})]}),(0,l.jsxs)(h.kC,{width:"full",gap:3,justify:"flex-end",padding:3,children:[e.secondaryButton?.text&&(0,l.jsx)(x.zx,{mode:"bleed",text:e.secondaryButton.text,tone:"default",onClick:()=>t("xClick")}),(0,l.jsx)(x.zx,{mode:"default",tooltipProps:null,text:e.ctaButton?.text,autoFocus:!0,tone:"primary",...e.ctaButton?.action==="openUrl"?{href:e.ctaButton.url,target:"_blank",rel:"noopener noreferrer",as:"a"}:{onClick:e.ctaButton?.action==="openNext"?n:()=>t("ctaClicked")}})]})]})})}function Rj({type:e}){let{data:t,showDialog:n,showOnLoad:i,toggleShowContent:a}=Ry(),r=PO(),o=(0,na.f1)(),[s,c]=(0,d.useState)(null),[u,p]=(0,d.useState)(!1);(0,d.useEffect)(()=>{s&&p(!0)},[s]);let m=(0,d.useCallback)(()=>a(!0),[a]),h=(0,d.useCallback)(()=>{s?.focus(),a(!1)},[a,s]),f=(0,d.useCallback)(e=>n=>{let a=t?.showOnLoad||t?.showOnClick;a&&o.log(Rs,{dialogId:a.id,dialogRevision:a._rev,dialogType:e,source:"studio",trialDaysLeft:t.daysLeft,dialogTrialStage:Rc({showOnLoad:i,dialogId:a.id}),dialogDismissAction:n}),h()},[t,h,i,o]),g=(0,d.useCallback)(e=>()=>{let n=t?.showOnLoad||t?.showOnClick;n&&o.log(Rl,{dialogId:n.id,dialogRevision:n._rev,dialogType:"modal",source:"studio",trialDaysLeft:t.daysLeft,dialogTrialStage:Rc({showOnLoad:i,dialogId:n.id}),dialogCtaType:"openURL"===e?"upgrade":"learnMore"}),m()},[t,m,o,i]),y=(0,d.useCallback)(()=>{t?.showOnLoad&&o.log(Rl,{dialogId:t.showOnLoad.id,dialogRevision:t.showOnLoad._rev,dialogType:"popover",source:"studio",trialDaysLeft:t.daysLeft,dialogTrialStage:Rc({showOnLoad:!0,dialogId:t.showOnLoad.id}),dialogCtaType:"learnMore"}),m()},[t?.showOnLoad,t?.daysLeft,m,o]),b=(0,d.useCallback)(()=>{t?.showOnClick&&o.log(Ro,{dialogId:t.showOnClick.id,dialogRevision:t.showOnClick._rev,dialogTrigger:"fromClick",dialogType:"modal",source:"studio",trialDaysLeft:t.daysLeft,dialogTrialStage:Rc({showOnLoad:!0,dialogId:t.showOnClick.id})}),m()},[t?.showOnClick,t?.daysLeft,o,m]);if(!t?.id)return null;let v=i?t.showOnLoad:t.showOnClick;if(!v)return null;let j="sidebar"===e?(0,l.jsx)(Rx,{toggleShowContent:b,daysLeft:t.daysLeft,ref:c}):(0,l.jsx)(Rg,{toggleShowContent:b,daysLeft:t.daysLeft,totalDays:t.totalDays,ref:c});return v?.dialogType==="popover"?(0,l.jsx)(x.J2,{open:n&&u,size:0,scheme:r,radius:3,portal:!0,placement:"sidebar"===e?"top":"bottom-end",content:(0,l.jsx)(Rv,{content:v,handleClose:f("popover"),handleOpenNext:y}),children:j}):(0,l.jsxs)(l.Fragment,{children:[j,(0,l.jsx)(Rm,{content:v,onClose:f("modal"),onOpenNext:g("openNext"),onOpenUrlCallback:g("openURL"),open:n})]})}let RC=({children:e})=>{let t=(0,ny.tv)(),[n,i]=(0,d.useState)(null),[a,r]=(0,d.useState)(!1),[o,s]=(0,d.useState)(!1),c=Bi({apiVersion:"2023-12-11"}),u=(0,na.f1)();(0,d.useEffect)(()=>{let e=n?.showOnLoad;a&&o&&e&&u.log(Ro,{dialogId:e.id,dialogRevision:e._rev,dialogTrialStage:Rc({showOnLoad:o,dialogId:e.id}),dialogTrigger:o?"auto":"fromClick",dialogType:e.dialogType,source:"studio",trialDaysLeft:n.daysLeft})},[a,n,o,u]);let m=new URLSearchParams(t.state._searchParams).toString();(0,d.useEffect)(()=>{let e=new URLSearchParams(m),t=new URLSearchParams;t.append("studioVersion",tQ.y);let n=e.get("trialState");n&&t.append("trialState",n);let a=e.get("seenBefore");a&&t.append("seenBefore",a);let o=t.get("trialState")?"/journey/trial/override":"/journey/trial",l=c.observable.request({url:`${o}?${t.toString()}`}).subscribe(e=>{i(e),e?.showOnLoad&&(s(!0),r(!0))},()=>{});return()=>{l.unsubscribe()}},[c,m]);let h=(0,d.useCallback)((e=!1)=>{o?(s(!1),r(e),n?.showOnLoad?.id&&c.request({url:`/journey/trial/${n?.showOnLoad.id}`,method:"POST"})):r(e=>!e)},[c,o,n?.showOnLoad?.id]),f=(0,d.useMemo)(()=>({data:n,showDialog:a,toggleShowContent:h,showOnLoad:o}),[n,a,o,h]);return(0,l.jsx)(p.c$.Provider,{value:f,children:e})};function Rw(){return(0,l.jsxs)("svg",{width:"100%",height:"100%",viewBox:"0 0 33 33",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,l.jsx)("rect",{width:"100%",height:"100%",fill:"#EC5446"}),(0,l.jsx)("path",{d:"M10.1637 8.5498C10.1637 11.3854 11.9461 13.0725 15.5143 13.9622L19.2955 14.8235C22.6725 15.5855 24.729 17.4783 24.729 20.5619C24.7553 21.9053 24.3107 23.2168 23.4698 24.2765C23.4698 21.1999 21.8499 19.5376 17.9425 18.538L14.2299 17.7086C11.257 17.0423 8.9623 15.4863 8.9623 12.1368C8.94666 10.8433 9.36932 9.58143 10.1637 8.5498Z",fill:"white"}),(0,l.jsx)("path",{d:"M21.1463 19.8069C22.7591 20.8206 23.4662 22.2384 23.4662 24.2729C22.1313 25.953 19.7861 26.8958 17.0297 26.8958C12.3899 26.8958 9.1427 24.6521 8.42111 20.7533H12.8769C13.4506 22.5432 14.9695 23.3726 16.9972 23.3726C19.4722 23.3726 21.1175 22.0753 21.1499 19.7998",fill:"#F8B1AA"}),(0,l.jsx)("path",{d:"M12.4801 12.7536C11.7436 12.3236 11.1394 11.7057 10.7316 10.9656C10.3238 10.2255 10.1276 9.3907 10.1638 8.54984C11.4518 6.88396 13.6923 5.8667 16.4235 5.8667C21.1499 5.8667 23.8848 8.31945 24.5595 11.7717H20.2732C19.8006 10.4107 18.6172 9.35089 16.4596 9.35089C14.1541 9.35089 12.5811 10.6694 12.4909 12.7536",fill:"#F8B1AA"})]})}let Rk=(0,j.zo)(h.Zb).attrs({overflow:"hidden",radius:2})`
  height: ${25}px;
  width: ${25}px;
`,RT=(0,j.zo)(h.Zb)`
  border-radius: ${({theme:e})=>(0,h.hO)(e.sanity.radius[2])};
  display: flex;
  outline: none;
  text-decoration: none;
  &:focus-visible {
    box-shadow: ${({theme:e})=>uc({base:e.sanity.color.base,focusRing:{...e.sanity.focusRing,offset:1}})};
  }
`;function RA(){let e=aO(),{activeWorkspace:t}=Pj(),{href:n,onClick:i}=(0,ny.rJ)({state:{}}),a=e.length>1;return(0,l.jsx)(RT,{as:"a",href:n,onClick:i,children:(0,l.jsxs)(h.kC,{align:"center",children:[(0,l.jsx)(Rk,{children:(0,l.jsx)(h.kC,{align:"center",height:"fill",justify:"center",children:a||t.customIcon?(0,l.jsx)(DF,{icon:t.icon,size:"small"}):(0,l.jsx)(Rw,{})})}),!a&&(0,l.jsx)(h.xu,{paddingX:2,children:(0,l.jsx)(h.xv,{size:1,weight:"medium",children:t.title})})]})})}function R_({setScheme:e}){let{t}=i1(),n=PP(e,t);return(0,l.jsx)(h.Zb,{borderTop:!0,flex:"none",padding:2,overflow:"auto",children:(0,l.jsx)(h.Kq,{as:"ul",space:1,children:n.map(({icon:e,label:t,name:n,onSelect:i,selected:a,title:r})=>(0,l.jsx)(h.Kq,{as:"li",children:(0,l.jsx)(x.zx,{"aria-label":t,icon:e,iconRight:a&&(0,l.jsx)(_.KML,{}),justify:"flex-start",mode:"bleed",onClick:i,selected:a,size:"large",text:r})},n))})})}function RS(){return a9(),null}function RE(){let{currentUser:e,projectId:t}=dR(),n=!!(e&&iY(e,"administrator")),{t:i}=i1();return(0,l.jsx)(h.Zb,{borderTop:!0,flex:"none",padding:2,children:(0,l.jsxs)(h.Kq,{as:"ul",space:1,children:[(0,l.jsx)(h.Kq,{as:"li",children:(0,l.jsx)(Rj,{type:"sidebar"})}),(0,l.jsx)(h.Kq,{as:"li",children:(0,l.jsx)(x.zx,{"aria-label":i("user-menu.action.manage-project-aria-label"),as:"a",href:`https://sanity.io/manage/project/${t}`,icon:_.IEm,justify:"flex-start",mode:"bleed",size:"large",target:"_blank",text:i("user-menu.action.manage-project")})}),n&&(0,l.jsx)(h.Kq,{as:"li",children:(0,l.jsx)(x.zx,{"aria-label":i("user-menu.action.invite-members-aria-label"),as:"a",href:`https://www.sanity.io/manage/project/${t}/members?invite=true`,icon:_.e5z,justify:"flex-start",mode:"bleed",size:"large",target:"_blank",text:i("user-menu.action.invite-members")})})]})})}let RM={bounce:0,damping:20,mass:.5,stiffness:200,type:"spring"},RN={open:{opacity:1},closed:{opacity:0}},RI={open:{x:"0%"},closed:{x:"-100%"}},Rz=(0,j.zo)(h.mh)`
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
`,R$=(0,j.zo)((0,t5.E)(h.Zb))`
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: var(--card-shadow-penumbra-color);
`,RO=(0,j.zo)((0,t5.E)(h.Zb))`
  position: relative;
  pointer-events: all;
  flex-direction: column;
  height: 100%;
  min-width: 200px;
  max-width: 280px;
  overflow: auto;
`,RP=(0,d.memo)(function(e){let{__internal_actions:t,activeToolName:n,isOpen:i,onClose:a,tools:r}=e,o=Pz(),{auth:s,currentUser:c}=dR(),u=aO(),p=Ra(),{t:m}=i1(),f=(0,d.useCallback)(e=>{"Escape"===e.key&&a()},[a]),g=(0,d.useCallback)(e=>{e?.(),a()},[a]),y=(0,d.useMemo)(()=>t?.filter(e=>"sidebar"===e.location)?.map(e=>l.jsx(x.zx,{icon:e?.icon,justify:"flex-start",mode:"bleed",onClick:()=>g(e.onAction),selected:e.selected,size:"large",text:e.title,width:"fill"},e.name)),[t,g]);return(0,l.jsx)(t8.M,{children:i&&(0,l.jsx)(S.ZP,{returnFocus:!0,children:(0,l.jsxs)(Rz,{onKeyDown:f,children:[(0,l.jsx)(R$,{animate:"open","data-open":i,exit:"closed",initial:"closed",onClick:a,transition:RM,variants:RN}),(0,l.jsxs)(RO,{animate:"open","data-open":i,display:"flex",exit:"closed",height:"fill",initial:"closed",shadow:1,transition:RM,variants:RI,children:[(0,l.jsx)(h.Zb,{borderBottom:!0,children:(0,l.jsxs)(h.Kq,{space:3,padding:3,children:[(0,l.jsxs)(h.kC,{align:"center",children:[(0,l.jsx)(h.kC,{flex:1,align:"center",paddingRight:2,children:(0,l.jsxs)(h.kC,{flex:1,align:"center",children:[(0,l.jsx)(oP,{size:1,user:"me"}),(0,l.jsx)(h.xu,{flex:1,marginLeft:3,title:c?.name||c?.email,children:(0,l.jsx)(h.xv,{size:1,textOverflow:"ellipsis",weight:"medium",children:c?.name||c?.email})})]})}),(0,l.jsx)(x.zx,{icon:_.Two,mode:"bleed",onClick:a,tooltipProps:{content:m("user-menu.close-menu")}})]}),u.length>1&&(0,l.jsxs)(h.kC,{flex:1,gap:1,children:[(0,l.jsx)(RA,{}),(0,l.jsx)(DZ,{})]})]})}),(0,l.jsxs)(h.kC,{direction:"column",flex:1,justify:"space-between",overflow:"auto",children:[(0,l.jsx)(h.Zb,{flex:"none",padding:2,children:(0,l.jsx)(p,{activeToolName:n,closeSidebar:a,context:"sidebar",isSidebarOpen:i,tools:r})}),(0,l.jsxs)(h.kC,{direction:"column",children:[y&&(0,l.jsx)(h.Zb,{flex:"none",padding:2,children:(0,l.jsx)(h.Kq,{space:1,children:y})}),o&&(0,l.jsx)(R_,{setScheme:o}),(0,l.jsx)(RS,{}),(0,l.jsx)(RE,{})]})]}),s.logout&&(0,l.jsx)(h.Zb,{flex:"none",padding:2,borderTop:!0,children:(0,l.jsx)(h.Kq,{children:(0,l.jsx)(x.zx,{iconRight:_.Ow9,justify:"flex-start",mode:"bleed",onClick:s.logout,size:"large",text:m("user-menu.action.sign-out")})})})]})]})})})}),RF=(0,j.zo)(x.J2)(()=>(0,j.iv)`
    [data-ui='Popover__wrapper'] {
      width: 320px;
      display: flex;
      flex-direction: column;
      border-radius: ${({theme:e})=>e.sanity.radius[3]}px;
      position: relative;
      overflow: hidden;
      overflow: clip;
    }
  `),RD=(0,j.zo)(x.Vq)(()=>(0,j.iv)`
    [data-ui='DialogCard'] {
      justify-content: flex-start;
    }
  `),RR=(0,j.zo)(h.kC)``,RL=(0,j.zo)(h.Zb)`
  min-height: max-content;
`,RB=(0,j.zo)(h.Zb)`
  min-height: max-content;
`,Rq=(0,j.zo)(h.kC)(e=>{let{$maxDisplayedItems:t,$itemHeight:n}=e;return(0,j.iv)`
    --item-height: ${n}px;
    --max-items: ${t};
    --list-padding: 0.5rem;

    position: relative;
    max-height: calc(var(--item-height) * var(--max-items) + var(--list-padding));
    min-height: calc((var(--item-height) * 1));
  `});function RV(e){let{option:t,currentUser:n,onClick:i,preview:a}=e,r=(0,d.useMemo)(()=>({template:t.templateId,type:t.schemaType}),[t.schemaType,t.templateId]),{onClick:o,href:s}=(0,ny.PM)({intent:"create",params:r}),c=(0,d.useCallback)(e=>{o(e),i(t)},[o,i,t]),{title:u}=a6(t);return(0,l.jsx)(x.u,{disabled:t.hasPermission,portal:!0,content:(0,l.jsx)(IC,{currentUser:n,context:"create-document"}),children:(0,l.jsx)("div",{children:(0,l.jsx)(h.Zb,{as:t.hasPermission?"a":"button","data-testid":`create-new-${t.templateId}`,disabled:!t.hasPermission,href:s,marginBottom:1,onClick:c,padding:"inline"===a?3:4,radius:2,children:(0,l.jsx)(h.xv,{size:"inline"===a?1:void 0,children:u})})})},t.id)}let RK=(0,j.zo)(h.kC)`
  min-height: 100px;
`;function RU(e){let{currentUser:t,loading:n,onDocumentClick:i,options:a,preview:r,searchQuery:o,textInputElement:s}=e,{t:c}=i1(),u=a.length>0&&!n,p=(0,d.useCallback)(()=>{i()},[i]),m=(0,d.useCallback)(e=>a[e]?.hasPermission===!1,[a]),f=(0,d.useCallback)(e=>(0,l.jsx)(RV,{currentUser:t,onClick:p,option:e,preview:r},e.id),[t,p,r]);return n?(0,l.jsx)(aW,{showText:!0}):!u&&o?(0,l.jsx)(RK,{align:"center",flex:1,height:"fill",justify:"center",padding:4,sizing:"border",children:(0,l.jsx)(h.xv,{align:"center",muted:!0,size:1,children:(0,l.jsx)(rm,{t:c,i18nKey:"new-document.no-results",values:{searchQuery:o}})})}):u?(0,l.jsx)(aN,{activeItemDataAttr:"data-hovered",ariaLabel:c("new-document.new-document"),autoFocus:iU?void 0:"input",getItemDisabled:m,inputElement:s,itemHeight:33,items:a,overscan:5,padding:"inline"===r?1:2,paddingBottom:0,renderItem:f}):(0,l.jsx)(RK,{align:"center",flex:1,height:"fill",justify:"center",padding:4,sizing:"border",children:(0,l.jsx)(h.xv,{align:"center",muted:!0,size:1,children:c("new-document.no-document-types-found")})})}function RZ(e){let{canCreateDocument:t,modal:n="popover",loading:i,options:a}=e,[r,o]=(0,d.useState)(!1),[s,c]=(0,d.useState)(""),u=(0,d.useRef)(null),p=(0,d.useRef)(null),[m,f]=(0,d.useState)(null),[g,y]=(0,d.useState)(null),{t:b}=i1(),v=a8(a),j=PO(),C=vh(),k=NQ(),T=a.length>0,A=!t||!T,E=b("new-document.filter-placeholder"),M=b("new-document.title"),N=b("new-document.open-dialog-aria-label"),I=(0,d.useMemo)(()=>a.filter(e=>{let t=k.get(e.schemaType);return t&&!(0,w.Ax)(t)}),[a,k]),z=(0,d.useMemo)(()=>I.map(e=>({...e,title:v({...e,title:e?.title||e.id}).title})).sort((e,t)=>e.title.localeCompare(t.title)).filter(e=>(function(e,t){let n=t.title.toLowerCase();return e.trim().toLowerCase().split(/[\s\-_]+/).every(e=>n.includes(e))})(s,e)).sort((e,t)=>(function(e,t,n){let i=t.title.toLowerCase(),a=n.title.toLowerCase(),r=e.trim().toLowerCase();return i.startsWith(r)&&!a.startsWith(r)?-1:a.startsWith(r)&&!i.startsWith(r)?1:i.includes(r)&&!a.includes(r)?-1:a.includes(r)&&!i.includes(r)?1:0})(s,e,t)),[I,s,v]),$=(0,d.useCallback)(e=>{c(e.currentTarget.value)},[]),O=(0,d.useCallback)(()=>o(e=>!e),[]),P=(0,d.useCallback)(()=>{o(!1),c(""),m?.focus()},[m]),F=(0,d.useCallback)(e=>{"ArrowDown"!==e.key||r||o(!0)},[r]),D=(0,d.useCallback)(e=>{("Escape"===e.key||"Tab"===e.key)&&r&&P()},[P,r]);(0,h.Of)(r&&P,()=>[m,p.current,u.current]);let R=(0,d.useMemo)(()=>({currentUser:C,loading:i,onDocumentClick:O,options:z,searchQuery:s,preview:"popover"===n?"inline":"default",textInputElement:g}),[C,z,O,i,n,g,s]),L=(0,d.useMemo)(()=>({__unstable_disableFocusRing:!0,border:!1,"data-testid":"new-document-button-search-input",defaultValue:s,disabled:i,icon:_.W1M,onChange:$,placeholder:E,ref:y}),[$,i,E,s]),B=(0,d.useMemo)(()=>({"aria-label":N,"data-testid":"new-document-button",disabled:A||i,icon:_.dtP,text:b("new-document.button"),mode:"ghost",onClick:O,ref:f,selected:r}),[A,O,i,r,N,b]),q=(0,d.useMemo)(()=>T?t?(0,l.jsx)(h.xv,{size:1,children:b("new-document.create-new-document-label")}):(0,l.jsx)(IC,{currentUser:C,context:"create-any-document"}):(0,l.jsx)(h.xv,{size:1,children:b("new-document.no-document-types-label")}),[t,C,T,b]),V=(0,d.useMemo)(()=>({content:q,disabled:i||r,scheme:j}),[i,r,j,q]);return"dialog"===n?(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(x.u,{...V,children:(0,l.jsx)("div",{children:(0,l.jsx)(x.zx,{...B})})}),r&&(0,l.jsx)(RD,{header:M,id:"create-new-document-dialog",onClickOutside:P,onClose:P,ref:p,scheme:j,width:1,children:(0,l.jsxs)(RR,{direction:"column",flex:1,height:"fill",children:[(0,l.jsx)(RB,{padding:2,borderBottom:!0,children:(0,l.jsx)(h.oi,{"data-testid":"new-document-button-search-input",...L})}),(0,l.jsx)(h.kC,{direction:"column",overflow:"hidden",children:(0,l.jsx)(RU,{...R})})]})})]}):(0,l.jsx)(RF,{constrainSize:!0,onKeyDown:D,open:r,portal:!0,radius:3,ref:u,scheme:j,content:(0,l.jsxs)(RR,{direction:"column",flex:1,forwardedAs:S.ZP,height:"fill",returnFocus:!0,children:[(0,l.jsx)(RL,{sizing:"border",children:(0,l.jsx)(h.Kq,{children:(0,l.jsx)(h.Zb,{borderBottom:!0,padding:1,children:(0,l.jsx)(h.oi,{...L,fontSize:1,radius:1})})})}),(0,l.jsx)(Rq,{$itemHeight:33,$maxDisplayedItems:10,direction:"column",overflow:"hidden",children:(0,l.jsx)(RU,{...R})})]}),children:(0,l.jsx)("div",{children:(0,l.jsx)(x.u,{...V,children:(0,l.jsx)("div",{children:(0,l.jsx)(x.zx,{...B,"aria-expanded":r,"aria-haspopup":"true",onKeyDown:F})})})})})}let RG=(0,d.memo)(function(e){let{presence:t,focused:n,onFocus:i}=e,[a,r]=(0,d.useState)(null),{t:o}=i1(),s=eW(t.locations||[],["lastActiveAt"],["desc"]).find(e=>e.documentId),u=!!s?.documentId;(0,d.useEffect)(()=>{n&&a&&(a.focus(),a.setAttribute("data-selected","")),n||a?.removeAttribute("data-selected")},[a,n]);let p=(0,d.useCallback)(()=>{i(t.user.id)},[i,t.user.id]),m=(0,d.useMemo)(()=>(0,d.forwardRef)(function(e,t){return s?.path?(0,l.jsx)(ny.nR,{...e,intent:"edit",params:{id:s?.documentId,path:c.BB(s?.path)},ref:t}):null}),[s]);return(0,l.jsx)(x.sN,{as:s?m:"div","data-as":"a",disabled:!u,onFocus:p,preview:(0,l.jsx)(oP,{size:1,user:t.user},t.user.id),ref:r,text:t.user.displayName,tooltipProps:u?void 0:{content:o("presence.not-in-a-document"),placement:"left"}})}),RH=(0,j.zo)(h.v2)`
  max-width: 260px;
`,RW=(0,j.zo)(h.Kq)`
  position: sticky;
  bottom: 0;
  background-color: var(--card-bg-color);
`;function RY(){let e=function(){let[e,t]=(0,d.useState)([]),n=C$();return(0,d.useEffect)(()=>{let e=n.globalPresence$.subscribe(t);return()=>{e.unsubscribe()}},[n]),e}(),{projectId:t}=dR(),n=PO(),{t:i}=i1(),a=e.length>0,[r,o]=(0,d.useState)(),s=(0,d.useCallback)(e=>{o(e)},[]),c=(0,d.useCallback)(()=>{o("")},[]),u=(0,d.useCallback)(()=>{o("")},[]),p=(0,d.useMemo)(()=>(0,l.jsx)(qI,{icon:_.oyc,"aria-label":i("presence.aria-label"),mode:"bleed",tone:a?"positive":void 0,tooltipProps:{content:i("presence.tooltip-content")}}),[a,i]),m=(0,d.useMemo)(()=>({constrainSize:!0,fallbackPlacements:["bottom"],placement:"bottom",portal:!0,scheme:n}),[n]);return(0,l.jsx)(x.j2,{button:p,"aria-label":i("presence.aria-label"),id:"global-presence-menu",menu:(0,l.jsxs)(RH,{children:[a&&e.map(e=>(0,l.jsx)(RG,{focused:r===e.user.id,onFocus:s,presence:e},e.user.id)),!a&&(0,l.jsx)(h.xu,{padding:3,children:(0,l.jsxs)(h.Kq,{space:3,children:[(0,l.jsx)(h.xv,{weight:"medium",size:1,children:i("presence.no-one-else-title")}),(0,l.jsx)(h.xv,{size:1,muted:!0,children:i("presence.no-one-else-description")})]})}),(0,l.jsxs)(RW,{space:1,children:[(0,l.jsx)(h.R,{}),(0,l.jsx)(x.sN,{as:"a",href:`https://www.sanity.io/manage/project/${t}/members?invite=true`,icon:_.e5z,onFocus:c,rel:"noopener noreferrer",target:"_blank",text:i("presence.action.manage-members")})]})]}),onClose:u,popover:m})}function RJ({error:e,isLoading:t,value:n}){let i=n?.resources?.sectionArray,a=n?.latestVersion,r=Dj(),{t:o}=i1();if(t)return(0,l.jsx)(aW,{showText:!0});let s=(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(x.sN,{as:"a",text:o("help-resources.action.join-our-community"),href:"https://www.sanity.io/exchange/community",target:"_blank"}),(0,l.jsx)(x.sN,{as:"a",text:o("help-resources.action.help-and-support"),href:"https://www.sanity.io/contact/support",target:"_blank"}),(0,l.jsx)(x.sN,{as:"a",text:o("help-resources.action.contact-sales"),href:"https://www.sanity.io/contact/sales?ref=studio",target:"_blank"}),(0,l.jsx)(h.R,{})]});return(0,l.jsxs)(l.Fragment,{children:[(void 0===n||e)&&(0,l.jsx)("div",{children:s}),!e&&i?.map(e=>e?l.jsx(RX,{subSection:e},e._key):null),(0,l.jsxs)(h.xu,{padding:3,children:[(0,l.jsx)(h.xv,{size:1,muted:!0,weight:"medium",textOverflow:"ellipsis",children:o("help-resources.studio-version",{studioVersion:tQ.y})}),!e&&a&&!r&&(0,l.jsx)(h.xu,{paddingTop:2,children:(0,l.jsx)(h.xv,{size:1,muted:!0,textOverflow:"ellipsis",children:o("help-resources.latest-sanity-version",{latestVersion:a})})})]})]})}function RX({subSection:e}){return(0,l.jsxs)(l.Fragment,{children:[e?.items?.map(e=>{if(!e||!e.title)return null;switch(e._type){case"externalLink":return e.url?l.jsx(x.sN,{as:"a",tone:"default",text:e.title,href:e.url,target:"_blank"},e._key):null;case"internalAction":return e.type?"show-welcome-modal"===e.type&&l.jsx(x.sN,{text:e.title},e._key):null;default:return null}}),(0,l.jsx)(h.R,{})]})}let RQ=(0,j.zo)(h.v2)`
  max-width: 300px;
  min-width: 200px;
`;function R0(){let{t:e}=i1(),{value:t,error:n,isLoading:i}=function(){let e=Bi({apiVersion:"1"}),t=a7().id;return iW((0,d.useMemo)(()=>e.withConfig({apiVersion:"1"}).observable.request({url:"/help",query:{m:[`sanity@${tQ.y}`],locale:t},tag:"module.version-check",json:!0}),[e,t]))}();return(0,l.jsx)(x.j2,{button:(0,l.jsx)(x.zx,{"aria-label":e("help-resources.title"),icon:_.BHU,mode:"bleed",tooltipProps:{content:e("help-resources.title")}}),id:"menu-button-resources",menu:(0,l.jsx)(RQ,{"data-testid":"menu-button-resources",children:(0,l.jsx)(RJ,{error:n,isLoading:i,value:t})}),popover:{constrainSize:!0}})}function R1(){return a9(),null}function R2({setScheme:e}){let{t}=i1(),n=PP(e,t);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(h.R,{}),n.map(({icon:e,label:t,name:n,onSelect:i,selected:a,title:r})=>(0,l.jsx)(x.sN,{"aria-label":t,icon:e,onClick:i,pressed:a,text:r,iconRight:a&&(0,l.jsx)(_.KML,{}),"data-testid":`color-scheme-${n}`},n))]})}let R3=j.zo.div`
  position: absolute;
  width: 18px;
  height: 18px;
  background: var(--card-bg-color);
  bottom: -4px;
  right: -4px;
  border-radius: 50%;
  display: flex;
  justify-content: center;
  align-items: center;
  border: 1px solid var(--card-bg-color);
  box-sizing: content-box;

  svg {
    box-sizing: content-box;
    border: 1px solid var(--card-hairline-soft-color);
    border-radius: 50%;
    padding: 2px;
    width: 12px;
    height: 12px;
  }

  &[data-logo='github'] {
    svg {
      path {
        fill: var(--card-fg-color);
      }
    }
  }

  &[data-logo='saml'] {
    svg {
      path {
        fill: var(--card-fg-color);
      }
    }
  }
`,R4=(0,l.jsxs)("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,l.jsxs)("g",{clipPath:"url(#clip0)",children:[(0,l.jsx)("path",{d:"M12 6.13764C12 5.72977 11.9663 5.31971 11.8943 4.91846H6.12036V7.22895H9.42684C9.28963 7.97412 8.84876 8.63332 8.20322 9.05221V10.5514H10.1759C11.3342 9.50637 12 7.9631 12 6.13764Z",fill:"#4285F4"}),(0,l.jsx)("path",{d:"M6.12019 12.0002C7.77118 12.0002 9.16349 11.4688 10.1779 10.5517L8.20529 9.05253C7.65646 9.41851 6.94793 9.62574 6.12244 9.62574C4.52544 9.62574 3.17136 8.56971 2.68552 7.1499H0.649902V8.69537C1.68908 10.7215 3.80567 12.0002 6.12019 12.0002V12.0002Z",fill:"#34A853"}),(0,l.jsx)("path",{d:"M2.68332 7.14986C2.4269 6.40469 2.4269 5.59778 2.68332 4.8526V3.30713H0.649951C-0.218278 5.00252 -0.218278 6.99995 0.649951 8.69533L2.68332 7.14986V7.14986Z",fill:"#FBBC04"}),(0,l.jsx)("path",{d:"M6.12019 2.37483C6.99291 2.3616 7.8364 2.68348 8.46845 3.27433L10.2161 1.56131C9.1095 0.542752 7.64071 -0.017233 6.12019 0.000404333C3.80566 0.000404333 1.68908 1.27911 0.649902 3.3074L2.68326 4.85288C3.16686 3.43087 4.52319 2.37483 6.12019 2.37483V2.37483Z",fill:"#EA4335"})]}),(0,l.jsx)("defs",{children:(0,l.jsx)("clipPath",{id:"clip0",children:(0,l.jsx)("rect",{width:"12",height:"12",fill:"white"})})})]}),R5=(0,l.jsxs)("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,l.jsx)("g",{clipPath:"url(#clip0)",children:(0,l.jsx)("path",{d:"M11.195 3.13503C10.6711 2.22838 9.91808 1.47537 9.01144 0.951471C8.09222 0.414976 7.08837 0.146729 5.99987 0.146729C4.91137 0.146729 3.90752 0.414976 2.98831 0.951471C2.08163 1.47534 1.32862 2.22836 0.804744 3.13503C0.268248 4.05497 0 5.05883 0 6.14659C0 7.45399 0.381531 8.62978 1.14459 9.67394C1.90765 10.7181 2.89327 11.4408 4.10143 11.8419C4.24208 11.868 4.34624 11.8497 4.41392 11.7872C4.44666 11.7577 4.47263 11.7215 4.49006 11.681C4.50749 11.6405 4.51595 11.5967 4.51488 11.5527C4.51488 11.537 4.51361 11.3963 4.51105 11.1307C4.5085 10.8651 4.50722 10.6334 4.50722 10.4355L4.32745 10.4666C4.18407 10.4895 4.03885 10.4986 3.89375 10.494C3.71159 10.4908 3.53001 10.4725 3.35087 10.4393C3.16049 10.4045 2.98119 10.3246 2.82796 10.2064C2.66705 10.0846 2.54715 9.91661 2.48428 9.72484L2.40602 9.54506C2.34022 9.40286 2.25754 9.2691 2.15976 9.14666C2.04775 9.00072 1.93447 8.90176 1.81991 8.84977L1.76518 8.81064C1.72769 8.78356 1.6936 8.75205 1.66367 8.71679C1.63479 8.6841 1.61108 8.64719 1.59334 8.60734C1.57766 8.57085 1.5907 8.54085 1.63247 8.51731C1.67461 8.49405 1.75123 8.48256 1.86068 8.48256L2.01692 8.50582C2.12108 8.52662 2.24996 8.5891 2.40356 8.69326C2.5585 8.79876 2.68797 8.93748 2.78254 9.09932C2.90239 9.31294 3.04695 9.47575 3.21624 9.58775C3.38552 9.69976 3.55609 9.75576 3.72793 9.75576C3.87725 9.7578 4.02641 9.74479 4.17312 9.7169C4.29459 9.69195 4.41264 9.65254 4.52473 9.59952C4.57162 9.25037 4.69931 8.98212 4.90782 8.79477C4.63684 8.76849 4.36827 8.72157 4.10444 8.6544C3.84797 8.58382 3.60133 8.48141 3.37029 8.34958C3.12825 8.218 2.91442 8.04015 2.74095 7.82613C2.57421 7.6178 2.4374 7.34417 2.3305 7.00524C2.2236 6.6663 2.1707 6.27584 2.1718 5.83383C2.1718 5.20357 2.37757 4.66708 2.7891 4.22435C2.59629 3.75006 2.61453 3.21885 2.84383 2.63073C2.99487 2.58385 3.21879 2.61897 3.51559 2.73608C3.81239 2.85319 4.02983 2.95352 4.16792 3.03707C4.30601 3.12025 4.41665 3.19058 4.49983 3.24804C5.48153 2.9773 6.51821 2.9773 7.49991 3.24804L7.79679 3.0606C8.0249 2.92356 8.26549 2.80849 8.51535 2.71693C8.79135 2.61276 9.00231 2.58412 9.14825 2.63101C9.38248 3.21949 9.40327 3.7507 9.21064 4.22462C9.62199 4.66735 9.82776 5.20385 9.82795 5.83411C9.82795 6.27684 9.77459 6.66904 9.66787 7.01071C9.56116 7.35238 9.42325 7.62601 9.25415 7.8316C9.07785 8.04326 8.86311 8.21966 8.62124 8.35149C8.39008 8.48329 8.14337 8.5857 7.88682 8.65632C7.62412 8.72277 7.35674 8.76915 7.087 8.79505C7.35698 9.02927 7.49206 9.3994 7.49225 9.90543V11.5527C7.49115 11.5964 7.49929 11.6398 7.51612 11.6802C7.53295 11.7206 7.5581 11.7569 7.58993 11.7869C7.65505 11.8493 7.75794 11.8675 7.89858 11.8416C9.10693 11.4403 10.0926 10.7177 10.8557 9.67367C11.6188 8.62968 12.0003 7.4539 12.0003 6.14632C11.9997 5.05873 11.7313 4.05497 11.195 3.13503V3.13503Z",fill:"black"})}),(0,l.jsx)("defs",{children:(0,l.jsx)("clipPath",{id:"clip0",children:(0,l.jsx)("rect",{width:"12",height:"12",fill:"white"})})})]}),R8=(0,l.jsxs)("svg",{width:"17",height:"9",viewBox:"0 0 17 9",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,l.jsx)("path",{d:"M0.0691681 5.98162C0.115833 7.24157 1.07247 8.00221 2.59841 8.00221C4.17102 8.00221 5.12299 7.19957 5.12299 5.86962C5.12299 4.83832 4.55367 4.25501 3.25172 3.96569L2.56108 3.80703C1.8331 3.64837 1.53445 3.38704 1.53445 2.91106C1.53445 2.40708 1.94977 2.09442 2.61708 2.09442C3.27505 2.09442 3.6997 2.43508 3.75103 2.99039H5.00166C4.95966 1.78643 4.01236 0.997795 2.60308 0.997795C1.14713 0.997795 0.218496 1.79577 0.218496 3.05105C0.218496 4.04968 0.815808 4.69366 2.03376 4.96898L2.73374 5.13231C3.51304 5.30497 3.8117 5.54763 3.8117 6.00495C3.8117 6.55093 3.34972 6.90092 2.62174 6.90092C1.85644 6.90092 1.38045 6.56493 1.31979 5.98162H0.0691681Z"}),(0,l.jsx)("path",{d:"M5.97695 5.98162C6.02362 7.24157 6.98025 8.00221 8.5062 8.00221C10.0788 8.00221 11.0308 7.19957 11.0308 5.86962C11.0308 4.83832 10.4615 4.25501 9.15951 3.96569L8.46886 3.80703C7.74089 3.64837 7.44223 3.38704 7.44223 2.91106C7.44223 2.40708 7.85755 2.09442 8.52486 2.09442C9.18284 2.09442 9.60749 2.43508 9.65882 2.99039H10.9094C10.8674 1.78643 9.92015 0.997795 8.51086 0.997795C7.05492 0.997795 6.12628 1.79577 6.12628 3.05105C6.12628 4.04968 6.72359 4.69366 7.94155 4.96898L8.64153 5.13231C9.42083 5.30497 9.71949 5.54763 9.71949 6.00495C9.71949 6.55093 9.2575 6.90092 8.52953 6.90092C7.76422 6.90092 7.28824 6.56493 7.22758 5.98162H5.97695Z"}),(0,l.jsx)("path",{d:"M16.9852 5.01565V3.98435C16.9852 2.11309 16.0099 0.997795 14.3953 0.997795C12.7807 0.997795 11.8054 2.11309 11.8054 3.98435V5.01565C11.8054 6.88692 12.7807 8.00221 14.3953 8.00221C16.0099 8.00221 16.9852 6.88692 16.9852 5.01565ZM14.3953 6.82625C13.5833 6.82625 13.154 6.21494 13.154 5.00165V3.99835C13.154 2.78506 13.5833 2.17375 14.3953 2.17375C15.2073 2.17375 15.6366 2.78506 15.6366 3.99835V5.00165C15.6366 6.21494 15.2073 6.82625 14.3953 6.82625Z"})]}),R6=({provider:e})=>{let t=e?.startsWith("saml-");return(0,l.jsxs)(R3,{"data-logo":t?"saml":e,children:["google"===e&&R4,"github"===e&&R5,"sanity"===e&&(0,l.jsx)(nZ.xN,{}),t&&R8]})};function R7(){let{currentUser:e,projectId:t}=dR(),n=!!(e&&iY(e,"administrator")),{t:i}=i1();return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(h.R,{}),(0,l.jsx)(x.sN,{as:"a","aria-label":i("user-menu.action.manage-project-aria-label"),href:`https://sanity.io/manage/project/${t}`,target:"_blank",text:i("user-menu.action.manage-project"),icon:_.IEm}),n&&(0,l.jsx)(x.sN,{as:"a","aria-label":i("user-menu.action.invite-members-aria-label"),href:`https://www.sanity.io/manage/project/${t}/members?invite=true`,target:"_blank",text:i("user-menu.action.invite-members"),icon:_.e5z})]})}let R9=(0,j.zo)(h.v2)`
  min-width: 200px;
  max-width: 300px;
`,Le=(0,j.zo)(h.xu)`
  position: relative;
  min-width: ${({theme:e})=>e.sanity.avatar.sizes[2].size}px;
  min-height: ${({theme:e})=>e.sanity.avatar.sizes[2].size}px;
`;function Lt(){let{currentUser:e,auth:t}=dR(),n=PO(),i=Pz(),a=rQ(e?.provider),{t:r}=i1(),o=(0,d.useMemo)(()=>({placement:"bottom",portal:!0,preventOverflow:!0,scheme:n,constrainSize:!0}),[n]);return(0,l.jsx)(x.j2,{button:(0,l.jsx)(h.zx,{mode:"bleed",padding:0,radius:"full",children:(0,l.jsx)(oP,{size:1,user:"me"})}),id:"user-menu",menu:(0,l.jsxs)(R9,{"data-testid":"user-menu",children:[(0,l.jsx)(h.Zb,{padding:2,children:(0,l.jsxs)(h.kC,{align:"center",children:[(0,l.jsx)(x.u,{disabled:!a,portal:!0,content:r("user-menu.login-provider",{providerTitle:a}),children:(0,l.jsxs)(Le,{marginRight:3,children:[(0,l.jsx)(oP,{size:2,user:"me"}),e?.provider&&(0,l.jsx)(R6,{provider:e.provider})]})}),(0,l.jsxs)(h.Kq,{space:2,flex:1,children:[(0,l.jsx)(h.xv,{size:1,weight:"medium",textOverflow:"ellipsis",children:e?.name}),(0,l.jsx)(h.xv,{size:1,muted:!0,textOverflow:"ellipsis",children:e?.email})]})]})}),i&&(0,l.jsx)(R2,{setScheme:i}),(0,l.jsx)(R1,{}),(0,l.jsx)(R7,{}),t.logout&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(h.R,{}),(0,l.jsx)(x.sN,{iconRight:_.Ow9,text:r("user-menu.action.sign-out"),disabled:!t.logout,...t.logout&&{onClick:t.logout}})]})]}),popover:o})}let Ln=[],Li=(0,j.zo)(h.mh)`
  min-height: auto;
  position: relative;

  &[data-search-open='true'] {
    top: 0;
    position: sticky;
  }
`,La=(0,j.zo)(h.Zb)`
  line-height: 0;
`,Lr=(0,j.zo)(h.rj)`
  grid-template-columns: auto auto auto;
  @media screen and (min-width: ${({theme:e})=>`${e.sanity.media[3]}px`}) {
    grid-template-columns: 1fr auto 1fr;
  }
`;function Lo(e){let{__internal_actions:t=Ln}=e,{name:n,tools:i}=dR(),a=(0,ny.z)(),r=(0,h.d2)(),o="string"==typeof a.tool?a.tool:void 0,s=function(){let{__internal:{staticInitialValueTemplateItems:e}}=AU(),[t,n]=jY({templateItems:e});return{canCreateDocument:t?.some(t=>e.some(e=>e.id===t.id))||!1,loading:n,options:(0,d.useMemo)(()=>e.map(e=>({...e,title:e?.title||e.id,hasPermission:t?.find(t=>t.id===e.id)?.granted||!1})),[t,e])}}(),{t:c}=i1(),{onSearchFullscreenOpenChange:u,onSearchOpenChange:m,searchFullscreenOpen:f,searchFullscreenPortalEl:g,searchOpen:y}=(0,d.useContext)(p.bX),b=Ra(),[v,j]=(0,d.useState)(!1),C=(0,d.useRef)(a),w=(0,d.useRef)(n);(0,d.useEffect)(()=>{(C.current.tool!==a.tool||n!==w.current)&&j(!1),C.current=a,w.current=n},[n,a]);let[k,T]=(0,d.useState)(null),[A,S]=(0,d.useState)(null),E=(0,d.useMemo)(()=>({resources:r>1,collapsedPresenceMenu:r<=1,loginStatus:r>1,searchFullscreen:r<=1,configIssues:r>1&&lR,newDocumentFullscreen:r<=1,tools:r>=3}),[r]);(0,d.useEffect)(()=>{u(f)},[f,u]),(0,d.useEffect)(()=>{E.searchFullscreen?m(!1):u(!1)},[u,m,E.searchFullscreen]);let M=(0,d.useCallback)(()=>{m(!0)},[m]),N=(0,d.useCallback)(()=>{u(!0)},[u]),I=(0,d.useCallback)(()=>{m(!1)},[m]),z=(0,d.useCallback)(()=>{u(!1),A?.focus()},[u,A]),$=(0,d.useCallback)(()=>{j(!1),k?.focus()},[k]),O=(0,d.useCallback)(()=>{j(!0)},[]),P=(0,d.useMemo)(()=>E.tools?t?.filter(e=>"topbar"===e.location)?.map(e=>l.jsx(x.zx,{iconRight:e?.icon,mode:"bleed",onClick:e?.onAction,selected:e.selected,text:e.title},e.name)):null,[t,E.tools]);return(0,l.jsx)(RC,{children:(0,l.jsxs)(Li,{zOffset:100,"data-search-open":f,children:[(0,l.jsx)(La,{borderBottom:!0,"data-testid":"studio-navbar","data-ui":"Navbar",padding:3,sizing:"border",children:(0,l.jsxs)(Lr,{gap:1,children:[(0,l.jsx)(x.uE,{children:(0,l.jsxs)(h.kC,{align:"center",gap:2,justify:"flex-start",children:[(0,l.jsxs)(h.kC,{align:"center",gap:2,children:[!E.tools&&(0,l.jsx)(x.zx,{mode:"bleed",icon:_.Oqj,onClick:O,ref:T,tooltipProps:{content:c("user-menu.open-menu"),placement:"bottom"}}),(0,l.jsxs)(h.kC,{gap:1,children:[(0,l.jsx)(RA,{}),(0,l.jsx)(DZ,{})]})]}),(0,l.jsx)(RZ,{...s,modal:E.newDocumentFullscreen?"dialog":"popover"}),!E.searchFullscreen&&(0,l.jsx)(Dm,{onClick:M,ref:S})]})}),(0,l.jsx)(h.kC,{align:"center",justify:"center",children:E.tools&&(0,l.jsx)(b,{activeToolName:o,closeSidebar:$,context:"topbar",isSidebarOpen:!1,tools:i})}),(0,l.jsx)(x.uE,{children:(0,l.jsxs)(h.kC,{align:"center",gap:1,justify:"flex-end",children:[(0,l.jsxs)(h.kC,{gap:1,children:[(0,l.jsx)(h.li,{children:(0,l.jsx)(Dp,{fullscreen:E.searchFullscreen,children:(0,l.jsx)(h.NM,{element:document.body,children:E.searchFullscreen?(0,l.jsx)(h.Xp,{element:g,children:(0,l.jsx)(Dg,{onClose:z,onOpen:N,open:f})}):(0,l.jsx)(Do,{onClose:I,onOpen:M,open:y})})})}),E.tools&&(0,l.jsx)(Rj,{type:"topbar"}),E.configIssues&&(0,l.jsx)(Rr,{}),E.resources&&(0,l.jsx)(R0,{}),(0,l.jsx)(RY,{}),E.searchFullscreen&&(0,l.jsx)(Dm,{onClick:N,ref:S}),P]}),E.tools&&(0,l.jsx)(h.xu,{flex:"none",marginLeft:1,children:(0,l.jsx)(Lt,{})})]})})]})}),!E.tools&&(0,l.jsx)(RP,{__internal_actions:t,activeToolName:o,isOpen:v,onClose:$,tools:i})]})})}function Ls(e){return!!e}let Ll=(0,j.zo)(xS)`
  list-style: none;
  white-space: nowrap;
  flex-shrink: 0;
  opacity: 0;
  visibility: hidden;
`,Lc=(0,j.zo)(h.kC)`
  opacity: 0;
  height: 0.1px;
  overflow: hidden;
`,Ld=(0,d.forwardRef)(function(e,t){let{children:n,gap:i,menuButtonProps:a,disableRestoreFocusOnClose:r,onMenuClose:o,collapsed:s,...c}=e,[u,p]=(0,d.useState)(null),[m,f]=(0,d.useState)([]),[g,x]=(0,d.useState)(!1),y=(0,d.useMemo)(()=>d.Children.toArray(n).filter(Ls),[n]),b=(0,d.useMemo)(()=>s||!g?null:y.filter(e=>!m.some(t=>t.key===e.key)),[y,s,m,g]),v=(0,d.useMemo)(()=>({root:u,threshold:1,rootMargin:"1px"}),[u]),j=(0,d.useMemo)(()=>a?.button||(0,l.jsx)(aI,{}),[a]),C=(0,d.useMemo)(()=>s?y:y.filter(({key:e})=>m.find(t=>t.key===e)),[y,m,s]),w=(0,d.useCallback)((e,t)=>{let n=m.some(e=>e.key===t.key);g||x(!0);let i=e.isIntersecting;n||i||f(e=>[...e,t]),n&&i&&f(e=>e.filter(e=>e.key!==t.key))},[m,g,x,f]);return(0,l.jsxs)(h.kC,{direction:"column",ref:t,sizing:"border",style:{position:"relative"},...c,children:[(0,l.jsxs)(h.kC,{justify:"center",gap:i,flex:1,children:[b,(m.length>0||s)&&(0,l.jsx)(x_,{disableRestoreFocusOnClose:r,menuButton:j,menuButtonProps:a,menuOptions:C,onMenuClose:o})]}),(0,l.jsxs)(Lc,{justify:"flex-start",gap:i,ref:p,"data-hidden":!0,"aria-hidden":"true",children:[(0,d.cloneElement)(j,{disabled:!0,"aria-hidden":!0}),y?.map(e=>l.jsx(Ll,{options:v,onIntersectionChange:t=>w(t[0],e),children:d.cloneElement(e,{disabled:!0,"aria-hidden":!0,tabIndex:-1})},`${e.key}_observer`))]})]})}),Lu=(0,d.forwardRef)(function(e,t){let{name:n,...i}=e,a=(0,ny.z)((0,d.useCallback)(()=>({tool:n,[n]:void 0}),[n]));return(0,l.jsx)(ny.Px,{state:a,...i,ref:t})});function Lp(e){let{activeToolName:t,tools:n}=e,i=PO(),[a,r]=(0,d.useState)(null);qE({rootElement:a,navigation:["arrows"]});let o=(0,d.useMemo)(()=>({popover:{constrainSize:!0,portal:!0,scheme:i}}),[i]),s=(0,d.useMemo)(()=>n.map((e,n)=>{let i=e?.title||tt(e.name),a=(0,d.forwardRef)(function(t,n){return(0,l.jsx)(Lu,{...t,ref:n,name:e.name,children:t.children})});return(0,l.jsx)(x.zx,{as:a,"data-as":"a",mode:"bleed",selected:t===e.name,text:i},`${e.name}-${n}`)}),[t,n]);return(0,l.jsx)(h.kC,{justify:"center",marginX:4,children:(0,l.jsx)(Ld,{"data-testid":"tool-collapse-menu",gap:1,menuButtonProps:o,ref:r,children:s})})}function Lm(e){let{activeToolName:t,isVisible:n,tools:i}=e;return(0,d.useMemo)(()=>(0,l.jsx)(h.Kq,{as:"ul",space:1,children:i.map(e=>{let i=e?.title||tt(e.name),a=(0,d.forwardRef)(function(t,n){return(0,l.jsx)(Lu,{...t,ref:n,name:e.name,children:t.children})});return(0,l.jsx)(h.Kq,{as:"li",children:(0,l.jsx)(x.zx,{as:a,justify:"flex-start",mode:"bleed",selected:t===e.name,size:"large",tabIndex:n?0:-1,text:i})},e.name)})}),[t,n,i])}function Lh(e){let{context:t,isSidebarOpen:n,tools:i,...a}=e;return i.length<=1?null:"sidebar"===t?(0,l.jsx)(Lm,{isVisible:n,tools:i,...a}):(0,l.jsx)(Lp,{tools:i,...a})}let Lf=(0,t4.dS)({name:"Field Copied",version:1,description:'User clicked the "Copy field" button in the field action menu or used the Ctrl+C shortcut'}),Lg=(0,t4.dS)({name:"Field Pasted",version:1,description:'User clicked the "Paste field" button in the field action menu or used the Ctrl+V shortcut'});function Lx(e,t,n){if(!e)return;let i=e;return t.forEach((e,a)=>{let r=t.slice(0,a+1);if((0,w.Fd)(e)||(0,w.dw)(e)){let e=mj(i,(0,tX.PtK)(n,r));if(e){i=e;return}}let o=function e(t,n){if(!n)return;let i=(0,c.mL)(n),a=i[0];if(a&&(0,w.m$)(t)){let n=t?.fields?.find(e=>e.name===a);if(n){let t=(0,c.BB)(i.slice(1));return t?e(n.type,t):n}}}(i,(0,c.BB)(r.length>1?r.slice(-1):r));o?.type&&(i=o.type)}),i}let Ly="web application/vnd.sanity-clipboard-item+json",Lb="text/html",Lv="text/plain",Lj="u">typeof ClipboardItem&&"supports"in ClipboardItem&&ClipboardItem.supports(Ly),LC="sanity-clipboard-base64";async function Lw(){for(let e of(await navigator.clipboard.read())){let t=await LT(e);if(t)return t}return null}async function Lk(e){let t=function e(t){return t?(0,tX.HD0)(t)?t:Number.isFinite(t)?t.toString():Array.isArray(t)?t.map(e).filter(Boolean).join(", "):"object"==typeof t?Object.entries(t).map(([t,n])=>t.startsWith("_")?"":e(n)).filter(Boolean).join(", "):"":""}(e.value),n=new DOMParser().parseFromString(t,"text/html").documentElement.textContent,i=function(e){let t=new TextEncoder().encode(e),n="";for(let e=0;e<t.byteLength;e++)n+=String.fromCharCode(t[e]);return btoa(n)}(JSON.stringify(e)),a=new ClipboardItem({...Lj&&{[Ly]:new Blob([JSON.stringify(e)],{type:Ly})},[Lb]:new Blob([`<p data-${LC}="${i}">${n}</p>`],{type:Lb}),[Lv]:new Blob([t],{type:Lv})});try{return await navigator.clipboard.write([a]),!0}catch(e){return console.error(`Failed to write to clipboard: ${e.message}`,e),!1}}async function LT(e){if(e.types.includes(Ly))return JSON.parse(await (await e.getType(Ly)).text());if(!e.types.includes(Lb))return null;let t=await (await e.getType(Lb)).text(),n=new DOMParser().parseFromString(t,"text/html");try{let e=n.querySelector(`[data-${LC}]`);if(!e)return null;let{sanityClipboardBase64:t}=e.dataset;return t?JSON.parse(function(e){let t=atob(e),n=new Uint8Array(t.length);for(let e=0;e<t.length;e++)n[e]=t.charCodeAt(e);return new TextDecoder().decode(n)}(t)):null}catch{return null}}function LA(e){return!!(null==e||Array.isArray(e)&&0===e.length)}function L_(e){return!!(e instanceof HTMLElement&&e.isContentEditable||e instanceof HTMLInputElement||e instanceof HTMLTextAreaElement)}function LS(e){return 0===e.length||1===e.length&&""===e[0]}async function LE(e,t,n,i,a){if(!n.filter)return!0;let r=await d8(n,e,i,a);if(!r.filter)return!0;try{let e=r.params||{},n=`*[${r.filter}]`,i=(0,n6.Qc)(n,e),a=await (await (0,n6.ku)(i,{params:e,dataset:[t]})).get();return!LA(a)}catch(e){return console.error("Error evaluating GROQ filter:",e),!1}}let LM=()=>sQ(12);async function LN({sourceRootSchemaType:e,sourcePath:t,sourceValue:n,sourceRootPath:i=[],targetRootSchemaType:a,targetRootValue:r,targetRootPath:o,targetValue:s,targetPath:l,keyGenerator:c=LM,options:d={validateReferences:!0,validateAssets:!0,client:void 0}}){let u=[];if(!e)throw Error("Source root schema type is not defined");if(!a)throw Error("Target root schema type is not defined");let p=Lx(e,t,n),m=Lx(a,l,s);if(!p)throw Error("Could not find source schema type at path");if(!m)throw Error("Could not find target schema type at path");if(a.readOnly||m.readOnly)return{targetValue:void 0,errors:[{level:"error",sourceValue:n,i18n:{key:"copy-paste.on-paste.validation.read-only-target.description"}}]};if((0,w.eA)(p)&&(0,w.wh)(m)||(0,w.wh)(p)&&(0,w.eA)(m))return{targetValue:void 0,errors:[{level:"error",sourceValue:n,i18n:{key:"copy-paste.on-paste.validation.image-file-incompatible.description",args:{sourceSchemaType:e.name,targetSchemaType:a.name}}}]};let h=p.jsonType,f=m.jsonType,g=tJ(i),x="u">typeof g&&(0,w.dw)(g),y=0===t.length&&"array"===h&&!Array.isArray(n)&&x,b=(["number","string","boolean"].includes(h)||y)&&(0,w.d7)(m),v="object"===h&&(0,w.M1)(m);if(!(h===f||function e(t,n){return(0,tX.Uy$)(t)&&(0,tX.Uy$)(n)&&("number"===t.jsonType&&"string"===n.jsonType||e(t.type,n.type))}(p,m)||function e(t,n){return(0,tX.Uy$)(t)&&(0,tX.Uy$)(n)&&("number"===t.jsonType&&(0,w.d7)(n)&&n.of.map(e=>e.jsonType).includes("string")||e(t.type,n.type))}(p,m)||b||v))return{targetValue:void 0,errors:[{level:"error",sourceValue:n,i18n:{key:"copy-paste.on-paste.validation.schema-type-incompatible.description"}}]};let j=rx(n,t);if("object"===p.jsonType&&"object"===m.jsonType)return LI({sourceValue:j,targetSchemaType:m,targetRootValue:r,targetRootPath:o,targetPath:[],errors:u,keyGenerator:c,options:d});if("array"===p.jsonType&&"array"===m.jsonType)return Lz({sourceValue:y&&!Array.isArray(j)?[j]:j,targetSchemaType:m,targetRootValue:r,targetRootPath:o,errors:u,options:d,keyGenerator:c});if(b||v){let e;e=v&&(0,w.ay)(j)&&"object"===j._type||!(0,w.ay)(j)?function(e){if(0===e.length)return"object";let t=e[e.length-1];return(0,w.Fd)(t)||(0,w.dw)(t)||(0,w.lo)(t)?"object":t}(i):(0,w.ay)(j)?j._type:"object";let t=v&&!Array.isArray(j)?[{...j,_type:e,_key:c()}]:[j];return Lz({sourceValue:Array.isArray(j)?j:t,targetSchemaType:m,targetRootValue:r,targetRootPath:o,errors:u,options:d,keyGenerator:c})}return L$({sourceValue:j,targetSchemaType:m,errors:u})}async function LI({sourceValue:e,targetSchemaType:t,targetPath:n,targetRootValue:i,targetRootPath:a,errors:r,keyGenerator:o,options:s}){if(LA(e))return{targetValue:void 0,errors:r};let l={_type:t.name,...e&&"object"==typeof e&&"_key"in e?{_key:o()}:{}},c=(0,eU.vZ)(e)&&(0,w.Yk)(e.asset)?e.asset._ref:void 0,d=(0,w.ay)(e)?e._type:void 0,u=c&&(0,eU.U3)(c),p=c&&(0,eU._t)(c),m=("image"===d||u)&&!(0,w.wh)(t),h=("file"===d||p)&&!(0,w.eA)(t);if((0,w.ay)(e)&&(m||h))return r.push({level:"error",sourceValue:e,i18n:{key:"copy-paste.on-paste.validation.image-file-incompatible.description",args:{sourceSchemaType:d,targetSchemaType:t.name}}}),{targetValue:void 0,errors:r};if(s?.validateAssets&&s.client&&((0,w.wh)(t)||(0,w.eA)(t))&&t.options?.accept&&(0,eU.vZ)(e)&&(0,w.Yk)(e.asset)){let n=e.asset?._ref;if(!n)return{targetValue:void 0,errors:r};try{let i=(0,w.wh)(t)?"sanity.imageAsset":"sanity.fileAsset",a=await s.client.fetch("*[_type == $type &&_id == $ref][0]{mimeType, originalFilename}",{ref:n,type:i});if(!a)return{targetValue:void 0,errors:r};let o={type:a.mimeType,name:a.originalFilename},l=a.mimeType;if(!lm(o,t.options.accept))return r.push({level:"error",sourceValue:e,i18n:{key:"copy-paste.on-paste.validation.mime-type-incompatible.description",args:{mimeType:l}}}),{targetValue:void 0,errors:r}}catch(t){return console.error("Error fetching asset document:",t),r.push({level:"error",sourceValue:e,i18n:{key:"copy-paste.on-paste.validation.mime-type-validation-failed.description"}}),{targetValue:void 0,errors:r}}}if((0,w.dD)(t)){let n=t.to.map(e=>e.name);if(s?.validateReferences&&s.client&&(0,w.Yk)(e))try{let o=t.options?.filter?"*[_id in $ids]|order(_updatedAt)[0]":"*[_id in $ids]|order(_updatedAt)[0]{_id, _type}",{publishedId:l,draftId:c}=(0,tX.f31)(e._ref),d=await s.client.fetch(o,{ids:[l,c]});if(!d&&!t.weak)return r.push({level:"error",sourceValue:e,i18n:{key:"copy-paste.on-paste.validation.reference-validation-failed.description",args:{ref:e._ref}}}),{targetValue:void 0,errors:r};if(d&&!n.includes(d._type))return r.push({level:"error",sourceValue:e,i18n:{key:"copy-paste.on-paste.validation.reference-type-incompatible.description",args:{sourceReferenceType:d._type,targetReferenceTypes:n.join(", ")}}}),{targetValue:void 0,errors:r};if(s.client&&t.options?.filter&&!await LE(i||{},d,t.options,a,e=>s.client.withConfig(e)))return r.push({level:"error",sourceValue:e,i18n:{key:"copy-paste.on-paste.validation.reference-filter-incompatible.description"}}),{targetValue:void 0,errors:r}}catch(t){return console.error("Error fetching reference document:",t),r.push({level:"error",sourceValue:l,i18n:{key:"copy-paste.on-paste.validation.reference-validation-failed.description",args:{ref:e._ref}}}),{targetValue:void 0,errors:r}}}let f={},g=(0,w.xh)(t)&&(0,w.DG)(e)&&!LA(e.markDefs);if(g){let t=e.markDefs||[];t.filter(e=>e._key).forEach(e=>{f[e._key]=o()}),l.markDefs=t.map(e=>({...e,_key:f[e._key]}))}for(let c of t.fields){let t=c.type,d=(0,w.jB)(t),u=(0,w.m$)(t);if((0,w.jp)(t)){let n=L$({sourceValue:e?e[c.name]:void 0,targetSchemaType:t,errors:r});LA(n.targetValue)||(l[c.name]=n.targetValue)}else if(u){let d=await LI({sourceValue:rx(e,n.concat(c.name)),targetPath:[],targetSchemaType:t,targetRootValue:i,targetRootPath:a,errors:r,options:s,keyGenerator:o});LA(d.targetValue)||(l[c.name]=LO(d.targetValue))}else if(d){let n=e?e[c.name]:void 0,d=await Lz({sourceValue:n,targetSchemaType:t,targetRootValue:i,targetRootPath:a,errors:r,options:s,keyGenerator:o});if(g&&"markDefs"===c.name&&!LA(l.markDefs))continue;LA(d.targetValue)||(l[c.name]=d.targetValue)}}let x=LO(rx(l,n));return Object.keys(f).length>0&&(0,w.DG)(x)&&(x.children=x.children.map(e=>(0,w.NG)(e)&&e.marks?{...e,marks:[...e.marks.map(e=>f[e]||e)]}:e)),(0,w.dD)(t)&&t.weak&&(x._weak=!0),(0,w.dD)(t)&&(0,w.Yk)(e)&&e._strengthenOnPublish&&(x._weak=!0,x._strengthenOnPublish=e._strengthenOnPublish),{targetValue:x,errors:r}}async function Lz({sourceValue:e,targetSchemaType:t,targetRootValue:n,targetRootPath:i,errors:a,options:r,keyGenerator:o}){let s;if(!e||!Array.isArray(e))return{targetValue:void 0,errors:[{level:"error",sourceValue:e,i18n:{key:"copy-paste.on-paste.validation.array-type-incompatible.description",args:{type:typeof e}}}]};let l=(0,w.d7)(t),c=(0,w.M1)(t);if(l){let n=t.of.map(e=>e.jsonType),i=n.includes("number"),r=e.filter(e=>!!("string"==typeof e&&n.includes("string")||"number"==typeof e&&(n.includes("number")||n.includes("string"))||"boolean"==typeof e&&n.includes("boolean"))).map(e=>i||"number"!=typeof e?e:`${e}`),o=e.filter(e=>!r.includes(i||"number"!=typeof e?e:`${e}`));o.length>0&&o.forEach(e=>{a.push({level:r.length>0?"warning":"error",sourceValue:e,i18n:{key:"copy-paste.on-paste.validation.array-value-incompatible.description",args:{type:typeof e}}})}),r.length>0&&(s=r)}if(c){let l=e.filter(e=>t.of.some(t=>t.name===e._type)),c=e.filter(e=>!t.of.some(t=>t.name===e._type));s=0===l.length?void 0:(await Promise.all(l.map(e=>LI({sourceValue:e,targetSchemaType:t.of.find(t=>t.name===e._type),targetPath:[],targetRootValue:n,targetRootPath:i,errors:a,options:r,keyGenerator:o})))).map(e=>e.targetValue).filter(e=>!LA(e)),c.length>0&&c.forEach(e=>{a.push({level:l.length>0?"warning":"error",sourceValue:e,i18n:{key:"copy-paste.on-paste.validation.array-value-incompatible.description",args:{type:e._type||typeof e}}})})}return{targetValue:s,errors:a}}function L$({sourceValue:e,targetSchemaType:t,errors:n}){let i;if(typeof e>"u")return{targetValue:void 0,errors:n};let a=t.jsonType===typeof e,r="number"==typeof e&&"string"===t.jsonType;if(a||r){let a="string"==typeof e||"number"==typeof e;if(((0,w.J1)(t)||(0,w.aj)(t))&&a){let i=t.options?.list?.map(e=>"string"==typeof e||"number"==typeof e?e:e.value)||[];i.length>0&&!i.includes(e)&&n.push({level:"error",sourceValue:e,i18n:{key:"copy-paste.on-paste.validation.string-value-incompatible.description",args:{value:e,allowedStrings:i}}})}i=r?`${e}`:e}else n.push({level:"error",sourceValue:e,i18n:{key:"copy-paste.on-paste.validation.primitive-type-incompatible.description",args:{type:typeof e}}});return{targetValue:i,errors:n}}function LO(e){let t=["_id","_createdAt","_updatedAt","_rev","_weak"];return Object.keys(e).reduce((n,i)=>t.includes(i)?n:{...n,[i]:e[i]},{})}let LP=({children:e})=>{let t=(0,h.pm)(),n=(0,na.f1)(),i=NQ(),{t:a}=i1("copy-paste"),r=Bi(rz),[o,s]=(0,d.useState)(null),u=(0,d.useCallback)(({documentId:e,documentType:t,schemaType:n,onChange:i})=>{let a={documentId:iS(e),documentType:t,schemaType:n,onChange:i};s(e=>eF(e,a)?e:a)},[]),m=(0,d.useCallback)(async(e,i,r)=>{if(!o)return;let{documentId:s,documentType:l,schemaType:d}=o,u=Lx(d,e,i);if(!u){t.push({status:"error",title:a("copy-paste.on-copy.validation.schema-type-incompatible.title",{path:c.BB(e)})});return}let p=u.type?.name==="document",m=rx(i,e);if(LA(m)){t.push({status:"warning",title:a("copy-paste.on-copy.validation.no-value.title")});return}let h=e.length>0?tJ(e):void 0,f=h&&((0,w.Fd)(h)||(0,w.dw)(h)),g="arrayItem"===r.context.source||f||"append"===r.patchType,x=g&&f?e.slice(0,-1):e,y=f&&!Array.isArray(m),b="arrayItem"===r.context.source,v={type:"sanityClipboardItem",documentId:s,documentType:l,isDocument:p,schemaTypeName:u.name,valuePath:x,value:y?[m]:m,patchType:g?"append":"replace"};if(n.log(Lf,{context:r?.context?.source||"unknown",schemaTypes:[u.jsonType]}),!await Lk(v)){t.push({status:"error",title:a("copy-paste.on-copy.validation.clipboard-not-supported.title")});return}let j=u.title||d.name||"unknown",C=b?a("copy-paste.on-copy.validation.copy-item_one-success.title",{typeName:j}):a("copy-paste.on-copy.validation.copy-field_one-success.title",{fieldName:j});t.push({status:"success",title:p?a("copy-paste.on-copy.validation.copy-document-success.title",{fieldNames:j}):C})},[o,n,t,a]),f=(0,d.useCallback)(async(e,s,l)=>{if(!o)return;let{schemaType:d,onChange:u}=o,p=Lx(d,e,s),m=await Lw();if(!m){t.push({status:"info",title:a("copy-paste.on-paste.validation.clipboard-empty.title")});return}if(!m.documentType){t.push({status:"error",title:a("copy-paste.on-paste.validation.clipboard-invalid.title")});return}let h=i.get(m.documentType);if(!h){t.push({status:"error",title:a("copy-paste.on-paste.validation.clipboard-invalid.title")});return}let f=[],g=[],x=Lx(h,m.valuePath,s);if(!x){t.push({status:"error",title:a("copy-paste.on-paste.validation.schema-type-incompatible.title",{path:c.BB(m.valuePath)})});return}if(!d){t.push({status:"error",title:a("copy-paste.on-paste.validation.schema-type-incompatible.title",{path:c.BB(e)})});return}let y=p.title||p.name,b={sourceRootSchemaType:x,sourcePath:[],sourceRootPath:m.valuePath,sourceValue:m.value,targetRootSchemaType:p,targetPath:[],targetRootPath:e,targetRootValue:s,options:{validateAssets:!0,validateReferences:!0,client:r}};g.push(x.jsonType);try{let{targetValue:n,errors:i}=await LN(b),r=i.filter(e=>"warning"!==e.level),o=LA(n);if(r.length>0){let e=a(r[0].i18n.key,r[0].i18n.args);t.push({status:"error",title:a("copy-paste.on-paste.validation.clipboard-invalid.title"),description:e});return}if(i.length>0&&!o){let e=i.map(e=>a(e.i18n.key,e.i18n.args)).join(", ");t.push({status:"warning",title:a("copy-paste.on-paste.validation.partial-warning.title"),description:e})}if(o){t.push({status:"warning",title:a("copy-paste.on-paste.validation.clipboard-empty.title")});return}let s=m?.patchType||"replace",l="array"!==m.schemaTypeName&&"array"===p.jsonType||"append"===s,c=l&&e.length>0&&"array"===p.jsonType,d=l&&e.length>0?[...e.slice(0,-1),`${e.slice(-1)?.[0]}[-1]`]:e,u="array"===p.jsonType?[sV([],e)]:[];f.push({patches:c?[...u,sK(n,"after",d)]:[...u,sU(n,e)],targetSchemaTypeTitle:y})}catch(e){t.push({status:"error",title:e.message});return}if(n.log(Lg,{context:l?.context?.source||"unknown",schemaTypes:g}),f.length){let e=eG(f.map(({patches:e})=>e)),n=f.map(e=>e.targetSchemaTypeTitle).join('", "');if(u(sH.from(e)),m.isDocument){t.push({status:"success",title:a("copy-paste.on-paste.validation.document-paste-success.title",{fieldNames:n})});return}1===f.length&&t.push({status:"success",title:a("copy-paste.on-paste.validation.field_one-paste-success.title",{fieldName:n})})}},[o,i,n,t,r,a]),g=(0,d.useMemo)(()=>({setDocumentMeta:u,onCopy:m,onPaste:f}),[m,f,u]);return(0,l.jsx)(p.Kv.Provider,{value:g,children:e})},LF=()=>{let e=(0,d.useContext)(p.Kv);if(!e)throw Error("useCopyPaste must be used within a CopyPasteProvider");return e},LD=(0,j.vJ)(e=>{let{color:t,font:n}=(0,b.aQ)(e.theme);return(0,j.iv)`
    ::-webkit-resizer {
      background-image: ${function(e){let t=encodeURIComponent(e);return`url("data:image/svg+xml,%3Csvg width='9' height='9' viewBox='0 0 9 9' fill='none' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M1 8L8 1' stroke='${t}' stroke-linecap='round'/%3E%3Cpath d='M5 8L8 5' stroke='${t}' stroke-linecap='round'/%3E%3C/svg%3E%0A")`}(t.icon)};
      background-repeat: no-repeat;
      background-position: bottom right;
    }

    ::-webkit-scrollbar {
      width: ${12}px;
      height: ${12}px;
    }

    ::-webkit-scrollbar-corner {
      background-color: transparent;
    }

    ::-webkit-scrollbar-thumb {
      background-clip: content-box;
      background-color: var(--card-border-color, ${t.border});
      border: ${4}px solid transparent;
    }

    ::-webkit-scrollbar-thumb:hover {
      background-color: var(--card-muted-fg-color, ${t.muted.fg});
    }

    ::-webkit-scrollbar-track {
      background: transparent;
    }

    *::selection {
      background-color: ${(0,v.m4)(t.focusRing,.3)};
    }

    html {
      background-color: ${t.bg};
    }

    body {
      scrollbar-gutter: stable;
    }

    #sanity {
      font-family: ${n.text.family};
    }

    b {
      font-weight: ${n.text.weights.medium};
    }

    strong {
      font-weight: ${n.text.weights.medium};
    }
  `}),LR=iz.__sanityErrorChannel;function LL(){let{push:e}=(0,h.pm)();return(0,d.useEffect)(()=>{if(LR)return LR.subscribe(t=>{var n;t.error&&((n=t.error)instanceof Pd||n instanceof r$||n instanceof aq||(console.error(t.error),e({id:t.error.message,closable:!0,description:t.error.message,duration:5e3,title:"Uncaught error",status:"error"})))})},[e]),null}function LB({children:e,AuthenticateComponent:t=DG,LoadingComponent:n=aW,NotAuthenticatedComponent:i=DJ}){let[a,r]=(0,d.useState)(null);if(a)throw a;let[o,s]=(0,d.useState)("loading"),[c,u]=(0,d.useState)(),{activeWorkspace:p}=Pj();return(0,d.useEffect)(()=>{p.auth.handleCallbackUrl?.().catch(r)},[p.auth]),(0,d.useEffect)(()=>{let e=p.auth.state.subscribe({next:({authenticated:e,currentUser:t})=>{if(t?.roles?.length===0){s("unauthorized"),t?.provider&&u(t.provider);return}s(e?"logged-in":"logged-out")},error:r});return()=>{e.unsubscribe()}},[p]),"loading"===o?(0,l.jsx)(n,{}):"unauthorized"===o?c&&"sanity"!==c?(0,l.jsx)(DQ,{}):(0,l.jsx)(i,{}):"logged-out"===o?(0,l.jsx)(t,{}):(0,l.jsx)(l.Fragment,{children:e})}let Lq=[100,11e3],LV={apiVersion:"2023-12-18"};function LK(e){let{errorReporter:t}=e,n=Bi(LV);return(0,d.useEffect)(()=>{let e=n.observable.request({uri:"/intake/telemetry-status",tag:"telemetry-consent.error-reporting"}).subscribe({next:e=>{e?.status==="granted"?t.enable():t.disable()},error:e=>{console.error("Error fetching telemetry status",e)}});return()=>e.unsubscribe()},[n,t]),null}let LU="u">typeof __SANITY_STAGING__&&!0===__SANITY_STAGING__,LZ=`${LU?"https://sanity-cdn.work":"https://sanity-cdn.com"}/v1/modules/`,LG=async(e,t)=>{try{let n=`t${Math.floor(Date.now()/1e3)}`;return(await fetch(`${LZ}${e}/default/^${t}/${n}`,{headers:{accept:"application/json"}})).json().then(e=>e.packageVersion)}catch(t){console.error("Failed to fetch latest version for package",e,"Error:",t);return}},LH=async e=>Object.fromEntries(await Promise.all(Object.entries(e).map(async([e,t])=>[e,await LG(e,t)]))),LW={sanity:tQ.y};function LY({children:e}){let t=(0,h.pm)(),{t:n}=i1(),i=(0,d.useRef)(null),a=Dj(),r=(0,d.useCallback)(()=>{t.push({id:"new-package-available",title:n("package-version.new-package-available.title"),description:(0,l.jsx)(h.Kq,{space:2,paddingBottom:2,children:(0,l.jsx)(h.xu,{children:(0,l.jsx)(x.zx,{size:"large","aria-label":n("package-version.new-package-available.reload-button"),onClick:()=>{window.location.reload()},text:n("package-version.new-package-available.reload-button"),tone:"primary"})})}),closable:!0,status:"info",duration:20736e5})},[t,n]);return(0,d.useEffect)(()=>{if(!a)return;let e=()=>{i.current&&i.current+18e5>Date.now()||LH(LW).then(e=>{i.current=Date.now(),e&&Object.entries(e).some(([e,t])=>!!t&&!!LW[e]&&ni.gt(t,LW[e]))&&r()})};e();let t=setInterval(e,3e4);return()=>clearInterval(t)},[a,r]),(0,l.jsx)(l.Fragment,{children:e})}let LJ=(0,t4.ql)();function LX(e){let t=Bi({apiVersion:"v2023-12-18"}),n=t.config().projectId,i=(0,d.useMemo)(()=>(0,t4._o)(LJ,{flushInterval:3e4,resolveConsent:()=>t.request({uri:"/intake/telemetry-status",tag:"telemetry-consent.studio"}),sendEvents:e=>t.request({uri:"/intake/batch",method:"POST",json:!0,body:{projectId:n,batch:e}}),sendBeacon:e=>navigator.sendBeacon(t.getUrl("/intake/batch"),JSON.stringify({projectId:n,batch:e}))}),[t,n]);return(0,d.useEffect)(()=>{i.logger.updateUserProperties({userAgent:navigator.userAgent,screen:{density:window.devicePixelRatio,height:window.screen.height,width:window.screen.width,innerHeight:window.innerHeight,innerWidth:window.innerWidth},studioVersion:tQ.y,plugins:nH(e.config).flatMap(e=>e.plugins?.flatMap(e=>({name:e.name||"<unnamed>"}))||[])})},[e.config,i.logger]),(0,l.jsx)(na.Yi,{store:i,children:e.children})}h.Lg.fonts.code.family,h.Lg.fonts.text.family,M.Sn.hex,M.ix.hex,M.iN[500].hex,M.ix.hex,M.Sn.hex,M.MA[500].hex,M.MA[500].hex,M.MA[500].hex,M.Q6[500].hex,M.iN[500].hex,M.ek[500].hex,M.er[500].hex,M.iN[500].hex,M.iN[500].hex,M.ek[500].hex,M.er[500].hex,M.Q6[500].hex,M.Sn.hex,M.ix.hex;let LQ=(0,v.fi)(),L0=e=>!0===e.__themer;function L1(e){return{...LQ,v2:e.v2,fonts:L0(e)?LQ.fonts:e.fonts??LQ.fonts,color:e.color??LQ.color}}function L2({children:e}){let t=Pj().activeWorkspace.theme;if(t.__legacy){let n=t.__dark?"dark":"light";return(0,l.jsx)(p.SM.Provider,{value:!1,children:(0,l.jsx)(p.Nt.Provider,{value:n,children:(0,l.jsx)(h.f6,{scheme:n,theme:L1(t),children:(0,l.jsx)(h.li,{children:e})})})})}return(0,l.jsx)(h.f6,{theme:L1(t),children:(0,l.jsx)(h.li,{children:e})})}function L3(e){let t={}.toolSwitcher||{},n=t.order||[],i=t.hidden||[];if(!n.length&&!i.length)return e;let a=e.reduce((e,t)=>{let i=t.title||"<unknown>";if(!t.name)return console.warn(`Tool "${i}" does not have the required "name" property`),e;if(e[t.name]){let n=e[t.name].tool.title;return console.warn(`Tools with duplicate name "${t.name}" found ("${i}" and "${n}")`),e}let a=n.indexOf(t.name);return e[t.name]={tool:t,index:-1===a?1/0:a},e},{}),r=e.filter(e=>-1===i.indexOf(e.name));return r.sort((e,t)=>{let n=a[e.name],i=a[t.name],r=n?n.index:1/0,o=i?i.index:1/0;return r===o?0:r-o}),r}(0,j.zo)(h.kC)``,(0,j.zo)(h.xu).attrs({padding:4})``;let L4=["template"],L5=["mode"];function L8({children:e,LoadingComponent:t,workspace:n}){let{basePath:i,tools:a}=n,r=function(){let e=(0,d.useContext)(p.qD);if(!e)throw Error("Could not find `RouterHistoryProvider` context");return e}(),o=(0,d.useMemo)(()=>(function(e){let{basePath:t="/",tools:n}=e,i=ny.BC.create("/:tool",e=>{let t=n.find(t=>t.name===e.tool);return t||"desk"!==e.tool||(t=n.find(e=>"structure"===e.name)),t?ny.BC.scope(t.name,"/",t.router):ny.BC.create("/")});return ny.BC.create(t,[ny.BC.intents("/intent"),i])})({basePath:i,tools:a}),[i,a]),[s,c]=function(e,t,n){let i=(0,d.useMemo)(()=>{let n=t.getBasePath(),i=RegExp(`^${nV(n)}(\\/|$)`,"i"),a=e=>"/"===n||i.test(e);return{subscribe:t=>e.listen(t),getSnapshot:()=>`${e.location.pathname}${e.location.search||""}`,getServerSnapshot:()=>null,selector:e=>"string"==typeof e&&a(e)?{type:"state",state:t.decode(e)||{},isNotFound:t.isNotFound(e)}:null}},[e,t]),a=(0,nq.useSyncExternalStoreWithSelector)(i.subscribe,i.getSnapshot,i.getServerSnapshot,i.selector,eF),r=(0,d.useRef)(a);(0,d.useEffect)(()=>{if(a?.type==="state"&&!a.state?.intent){var i;let r=function(e,t){let n=L3(e)[0];return t&&!t.tool&&n?Object.assign({},t,{tool:n.name}):t}(n,(i=a.state)&&(L3(n).find(e=>e.name===i.space)?{...i,tool:i.space,space:void 0}:i));r&&r!==a.state&&e.replace(t.encode(r))}},[a?.state,a?.type,e,t,n]),(0,d.useEffect)(()=>{let i=L6(a,t,n,r);i?e.replace(i):r.current=a},[a,e,t,n]);let o=(0,d.useMemo)(()=>({path:a,replace:o})=>{let s=L6(i.selector(a),t,n,r),l="string"==typeof s?s:a;o?e.replace(l):e.push(l)},[e,t,i,n]);return[a?.state??null,o]}(r,o,a);return s?(0,l.jsx)(ny.pG,{onNavigate:c,router:o,state:s,children:e}):(0,l.jsx)(t,{})}function L6(e,t,n,i){if(e?.type==="state"&&e.state?.intent){let a=function(e,t,n){let{intent:i,params:a,payload:r}=n;if("string"!=typeof i)throw Error("intent must be a string");if(!iO(a))throw Error("intent params must be a string");let o=L3(e),s=t?.tool?o.find(e=>e.name===t.tool):null,l=s?o.filter(e=>e!==s):o,c=[];"create"===i?c=L4:"edit"===i&&(c=L5);let{tool:d}=(s?[s,...l]:o).reduce((e,n)=>{if(!n||"function"!=typeof n.canHandleIntent)return e;let r=n.canHandleIntent(i,a,t&&t[n.name]);if("boolean"==typeof r)return r&&e.score<0?{score:0,tool:n}:e;if(!iO(r))return e;let o=c.reduce((e,t)=>t in a&&!0===r[t]?e+1:e,0);return o>e.score?{score:o,tool:n}:e},{score:-1,tool:null});if(d?.getIntentState){let{_searchParams:e,...o}=d.getIntentState(i,a,t&&t[d.name],r),s={...t,_searchParams:n._searchParams,tool:d.name,[d.name]:o};return d.router?.__unsafe_disableScopedSearchParams?s._searchParams=e:o._searchParams=e,{type:"state",isNotFound:!1,state:s}}return{type:"intent",isNotFound:!0,intent:{name:i,params:a}}}(n,i.current?.type==="state"?i.current.state:{},e.state);if(a?.type==="state")return t.encode(a.state)}return null}function L7(e){let[t,n]=(0,d.useState)(null);if(t)throw t;let[i,a]=(0,d.useState)(null);return(0,d.useEffect)(()=>{let t=(0,U.a)(e.__internal.sources.map(({source:e})=>e.pipe((0,F.K)(e=>{if(e instanceof aq)return(0,N.of)(e);throw e})))).pipe((0,P.U)(t=>{let n=t.filter(e=>e instanceof aq);if(n.length)throw new aq({name:e.name,causes:n,type:"workspace"});return t}),(0,P.U)(([t,...n])=>({...e,...t,unstable_sources:[t,...n],type:"workspace"}))).subscribe({next:a,error:n});return()=>t.unsubscribe()},[e]),i}function L9({children:e,LoadingComponent:t}){let{activeWorkspace:n}=Pj(),i=L7(n);return i?(0,l.jsx)(dD,{workspace:i,children:(0,l.jsx)(AK,{source:i.unstable_sources[0],children:(0,l.jsx)(L8,{LoadingComponent:t,workspace:i,children:e})})}):(0,l.jsx)(t,{})}function Be({ConfigErrorsComponent:e,...t}){let[{error:n},i]=(0,d.useState)({error:null});if(n)throw n;return(0,l.jsx)(h.SV,{onCatch:i,children:(0,l.jsx)(L9,{...t})})}function Bt({children:e,config:t,basePath:n,onSchemeChange:i,scheme:a,unstable_history:r,unstable_noAuthBoundary:o}){Dz.initialize();let s=(0,d.useMemo)(()=>(0,l.jsx)(Be,{LoadingComponent:aW,ConfigErrorsComponent:DH,children:(0,l.jsx)(LX,{config:t,children:(0,l.jsx)(a4,{children:(0,l.jsxs)(LY,{children:[(0,l.jsx)(LK,{errorReporter:Dz}),(0,l.jsx)(CA,{children:e})]})})})}),[e,t]);return(0,l.jsx)(PE,{onSchemeChange:i,scheme:a,children:(0,l.jsxs)(h.VW,{paddingY:7,zOffset:Lq,children:[(0,l.jsx)(LL,{}),(0,l.jsx)(D8,{children:(0,l.jsx)(Pg,{config:t,basePath:n,LoadingComponent:aW,children:(0,l.jsx)(Pv,{unstable_history:r,NotFoundComponent:DX,LoadingComponent:aW,children:(0,l.jsx)(L2,{children:(0,l.jsx)(rN,{children:o?s:(0,l.jsx)(LB,{LoadingComponent:aW,AuthenticateComponent:DG,NotAuthenticatedComponent:DJ,children:s})})})})})})]})})}function Bn(e){let{basePath:t,config:n,onSchemeChange:i,scheme:a,unstable_globalStyles:r,unstable_history:o,unstable_noAuthBoundary:s}=e;return(0,l.jsxs)(Bt,{basePath:t,config:n,onSchemeChange:i,scheme:a,unstable_history:o,unstable_noAuthBoundary:s,children:[r&&(0,l.jsx)(LD,{}),(0,l.jsx)(D7,{})]})}function Bi(e){let t=AU();return e?t.getClient(e):(console.warn('Calling `useClient()` without specifying an API version is deprecated and will stop working in the next dev-preview release - please migrate to use `useClient({apiVersion: "2021-06-07"})`.'),t.getClient({apiVersion:"2021-06-07"}))}nv.registerLanguage(nj),nv.registerLanguage(nC),nv.registerLanguage(nw),nv.registerLanguage(nk),nv.registerLanguage(nT);let Ba="connecting";function Br(e,t){let n=Cz(),i=(0,d.useMemo)(()=>n.pair.documentEvents(e,t).pipe((0,P.U)(e=>e.type),(0,P.U)(e=>"reconnect"!==e),(0,ec.w)(e=>e?(0,N.of)("connected"):(0,V.H)(200).pipe((0,eO.h)("reconnecting"))),(0,ef.O)(Ba),(0,ea.x)()),[t,n.pair,e]);return(0,eR.m)(i,Ba)}function Bo(){return AU().dataset}function Bs(e,t){let n=Cz(),i=(0,d.useMemo)(()=>n.pair.editOperations(e,t),[t,n.pair,e]);return(0,eR.m)(i)}function Bl(e,t){let n=Cz(),i=(0,d.useMemo)(()=>n.pair.operationEvents(e,t),[t,n.pair,e]);return(0,eR.m)(i)}function Bc(e,t,n="default"){let i=Cz(),a=(0,d.useMemo)(()=>{if("low"===n){let n=i.pair.editState(e,t).pipe((0,Y.B)());return(0,R.T)(n.pipe((0,eo.q)(1)),n.pipe((0,es.T)(1),(0,el.D)(()=>(0,V.H)(1e3))))}return i.pair.editState(e,t)},[t,i.pair,n,e]);return(0,eR.m)(a)}let Bd=[],Bu={enabled:!0,error:null,features:Bd,isLoading:!0},Bp=new Map;function Bm(e){let t=Bi(rz),{projectId:n}=AU();if(!Bp.get(n)){let e=(function({versionedClient:e}){return e.observable.request({uri:"/features",tag:"features"})})({versionedClient:t}).pipe((0,em.d)());Bp.set(n,e)}let i=(0,d.useMemo)(()=>(Bp.get(n)||(0,N.of)(Bd)).pipe((0,P.U)((t=[])=>({isLoading:!1,enabled:!!t?.includes(e),features:t,error:null})),(0,ef.O)(Bu),(0,F.K)(e=>(0,N.of)({isLoading:!1,enabled:!1,features:Bd,error:e}))),[e,n]);return(0,eR.m)(i,Bu)}let Bh=(0,eJ.P6)("mod+c"),Bf=(0,eJ.P6)("mod+v");function Bg({value:e,element:t,focusPath:n}){let i=(0,d.useRef)(n||[]),a=(0,d.useRef)(e);a.current=e,(0,d.useEffect)(()=>{i.current=n||[]},[n]);let{onCopy:r,onPaste:o}=LF(),s=(0,d.useCallback)(e=>{let t=e.target;if(Bh(e)){if(L_(t)||function(){if(typeof window>"u"||!window.getSelection)return!1;let e=window.getSelection();return null!==e&&!e.isCollapsed}()||LS(i.current))return;e.preventDefault(),e.stopPropagation(),r(i.current,a.current,{context:{source:"keyboardShortcut"}})}if(Bf(e)){if(L_(t)||LS(i.current)||uf(t))return;e.stopPropagation(),e.preventDefault(),o(i.current,a.current,{context:{source:"keyboardShortcut"}})}},[r,o]);(0,d.useEffect)(()=>(t?.addEventListener("keydown",s),()=>{t?.removeEventListener("keydown",s)}),[t,s,o])}let Bx={month:"short",day:"numeric"},By={...Bx,year:"numeric"},Bb={...By,hour:"numeric",minute:"numeric"};function Bv(e,t={}){let n=function(e,t={}){let{t:n}=i1(),i=a7().id,{timeZone:a,minimal:r}=t,o=e instanceof Date?e:new Date(e),s=!!t.useTemporalPhrase,l=(0,d.useCallback)(function(e,t){let n="day"===t&&1===Math.abs(e),a="week"===t&&1===Math.abs(e);return s||n?re.relativeTimeFormat(i,{style:r&&!a?"short":"long",numeric:"auto"}).format(e,t):re.numberFormat(i,{style:"unit",unit:t,unitDisplay:r?"short":"long"}).format(Math.abs(e))},[i,s,r]);if(!o.getTime())return{timestamp:"",refreshInterval:null};let c=t.relativeTo||Date.now(),u=(0,tV.Z)(c,o),p=(0,tK.Z)(c,o);if(u||p)return t.minimal&&0===p?{timestamp:re.dateTimeFormat(i,{...Bx,timeZone:a}).format(o),refreshInterval:null}:t.minimal?{timestamp:re.dateTimeFormat(i,{...By,timeZone:a}).format(o),refreshInterval:null}:{timestamp:re.dateTimeFormat(i,{...Bb,timeZone:a}).format(o),refreshInterval:null};let m=(0,tU.Z)(o,c);if(m)return{timestamp:l(m,"week"),refreshInterval:36e5};let h=(0,tZ.Z)(o,c);if(h)return{timestamp:l(h,"day"),refreshInterval:36e5};let f=(0,tG.Z)(o,c);if(f)return{timestamp:l(f,"hour"),refreshInterval:6e4};let g=(0,tH.Z)(o,c);if(g)return{timestamp:l(g,"minute"),refreshInterval:2e4};let x=(0,tW.Z)(o,c);return Math.abs(x)>10?{timestamp:l(x,"second"),refreshInterval:5e3}:{timestamp:n("relative-time.just-now"),refreshInterval:5e3}}(e,t),[,i]=(0,d.useReducer)(e=>e+1,0);return(0,d.useEffect)(()=>{let e;return null!==n.refreshInterval&&function t(n){e=window.setTimeout(()=>{i(),e=window.setTimeout(()=>t(n),n)},n)}(n.refreshInterval),()=>{null!==e&&clearTimeout(e)}},[i,n.refreshInterval]),n.timestamp}let Bj={isSyncing:!0},BC={isSyncing:!1};function Bw(e,t){let n=Cz(),i=(0,d.useMemo)(()=>n.pair.consistencyStatus(e,t).pipe((0,P.U)(e=>e?BC:Bj)),[n.pair,t,e]);return(0,eR.m)(i,BC)}function Bk(){return AU().templates}let BT={data:[],error:null,loading:!0},BA=null;function B_(e){let{documentValue:t,permission:n}=e,i=function(){let e=Bi(rz),t=C_();return(0,d.useMemo)(()=>{let n=t.get({namespace:"projectStore",dependencies:[e]})||function(e){let{client:t}=e,n=t.config().projectId,i=t.withConfig({apiVersion:"2021-12-15"});return{get:function(){return i.observable.request({url:`/projects/${n}`})},getDatasets:function(){return i.observable.request({url:`/projects/${n}/datasets`})}}}({client:e});return t.set({namespace:"projectStore",dependencies:[e],value:n}),n},[e,t])}(),a=CE(),r=Bi(rz),[o,s]=(0,d.useState)(BT),l=(0,d.useMemo)(()=>{let e=i.get().pipe((0,P.U)(e=>e.members?.filter(e=>!e.isRobot))).pipe((0,ec.w)(async e=>{let t=e.map(({id:e})=>e);return await a.getUsers(t)}),(0,P.U)(e=>e.map(e=>({displayName:e.displayName,id:e.id,granted:!1})))),o=BA,s=o?(0,N.of)(o):r.observable.fetch('*[_type == "system.group"]');return(0,ed.D)([e,s]).pipe((0,eu.z)(async([e,i])=>{o||(BA=i);let a=e?.map(async e=>{let a=[...i.map(t=>t.members.includes(e.id)?t.grants:[])].flat(),{granted:r}=await jH(e.id,a,n,t);return{...e,granted:r}});return await Promise.all(a||[])})).pipe((0,P.U)(e=>({error:null,loading:!1,data:C(e,"displayName")})))},[r.observable,t,i,a,n]);return(0,d.useEffect)(()=>{let e=(0,N.of)(BT),t=(0,I.z)(e,l).subscribe({next:s,error:e=>{s({data:[],error:e,loading:!1})}});return()=>{t.unsubscribe()}},[l]),o}let BS=(0,j.zo)(h.xv)`
  white-space: nowrap;
`;function BE({absoluteDate:e,draft:t,published:n,singleLine:i}){let{t:a}=i1(),r=t&&"_updatedAt"in t?t._updatedAt:"",o=n&&"_updatedAt"in n?n._updatedAt:"",s=Al({dateStyle:"medium",timeStyle:"short"}),c=r&&s.format(new Date(r)),d=o&&s.format(new Date(o)),u=Bv(r||"",{minimal:!0,useTemporalPhrase:!0}),p=Bv(o||"",{minimal:!0,useTemporalPhrase:!0}),m=e?d:p,f=e?c:u;return(0,l.jsxs)(h.kC,{align:i?"center":"flex-start","data-testid":"pane-footer-document-status",direction:i?"row":"column",gap:2,wrap:"nowrap",children:[!m&&(0,l.jsx)(BS,{size:1,weight:"medium",children:a("document-status.not-published")}),m&&(0,l.jsx)(BS,{size:1,weight:"medium",children:a("document-status.published",{date:m})}),f&&(0,l.jsx)(BS,{muted:!0,size:1,wrap:"nowrap",children:a("document-status.edited",{date:f})})]})}let BM=new WeakMap,BN=0;function BI(e){let t=BM.get(e);if(t)return t;let n=`${e.name||e.displayName||"<anonymous>"}-${BN++}`;return BM.set(e,n),n}let Bz=(0,d.memo)(({hooks:e,keys:t,args:n,handleNext:i,handleReset:a})=>{let r=(0,d.useMemo)(()=>e.map(e=>{let n=BI(e),i=t[n]||0;return[function({hook:e,id:t}){let n=({args:n,handleNext:i,handleReset:a})=>{let r=e({...n,onComplete:()=>{a(t)}});return(0,d.useEffect)(()=>(i(t,r),()=>{i(t,null)}),[i,r]),null},{displayName:i="HookState"}=e;return n.displayName=i,(0,d.memo)(n,(e,t)=>e.args===t.args)}({hook:e,id:n}),`${n}-${i}`]}),[e,t]);return(0,l.jsx)(l.Fragment,{children:r.map(([e,t])=>(0,l.jsx)(e,{args:n,handleNext:i,handleReset:a},t))})});Bz.displayName="Memo(HookCollectionState)";let B$=typeof requestIdleCallback>"u"?e=>{let t=Date.now();return setTimeout(()=>{e({didTimeout:!1,timeRemaining:()=>Math.max(0,Date.now()-t)})},1)}:requestIdleCallback,BO=typeof cancelIdleCallback>"u"?e=>clearTimeout(e):cancelIdleCallback,BP={trailing:!0};function BF(e,{hooks:t}){return t.map(t=>{let n=BI(t);return e.get(n)}).filter(iw)}let BD=(0,d.memo)(e=>{let{hooks:t,args:n,children:i,group:a,onReset:r}=e,{handleReset:o,keys:s}=function(e){let[t,n]=(0,d.useState)({});return{keys:t,handleReset:(0,d.useCallback)(t=>{n(e=>({...e,[t]:(e[t]||0)+1})),e?.()},[e])}}(r),{states:c,handleNext:p}=function({hooks:e,group:t}){var n;let[i]=(0,d.useState)(()=>new Map),[a,r]=(0,d.useState)(()=>BF(i,{hooks:e})),o=(0,d.useRef)(0),s=(n=(0,d.useCallback)(()=>{BO(o.current),o.current=B$(()=>{r(BF(i,{hooks:e}))})},[e,i]),(0,d.useMemo)(()=>A(n,60,BP),[n,BP,60]));return{states:a,handleNext:(0,d.useCallback)((e,n)=>{let a=!0,r=n?.group||["default"];null===n||t&&!r.includes(t)?i.delete(e):(i.has(e)&&(a=!u(i.get(e),n)),i.set(e,n)),a&&s()},[t,s,i])}}({hooks:t,group:a}),m=(0,d.useMemo)(()=>i({states:c}),[i,c]);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(Bz,{hooks:t,keys:s,args:n,handleNext:p,handleReset:o}),m]})});BD.displayName="Memo(GetHookCollectionState)";let BR=BD,BL=(0,j.zo)(h.W2)(e=>{let{theme:t}=e,{container:n,media:i}=t.sanity;return(0,h.Lt)(i,e.$width,e=>({width:"auto"===e?"none":(0,h.hO)(n[e]),maxWidth:"100%"}))}),BB=(0,d.forwardRef)(function(e,t){let{width:n,...i}=e,a=(0,h.Q5)(n);return(0,l.jsx)(BL,{...i,"data-ui":"PopoverContainer",$width:a,ref:t})}),Bq=(0,j.zo)(x.J2)(()=>(0,j.iv)`
    // Make the popover scrollable if it overflows the viewport
    [data-ui='Popover__wrapper'] {
      overflow: auto;
    }
  `),BV=(0,j.zo)(h.mh)(e=>{let t=e.theme.sanity.radius[3];return(0,j.iv)`
    position: sticky;
    top: 0;
    width: 100%;
    background: var(--card-bg-color);
    border-bottom: 1px solid var(--card-border-color);
    border-top-left-radius: ${t}px;
    border-top-right-radius: ${t}px;
  `});function BK(e){let{children:t,header:n,onClose:i,referenceElement:a,containerRef:r,width:o}=e,s=(0,d.useCallback)(()=>{i(),a?.focus()},[i,a]);return(0,l.jsx)(Bq,{portal:!0,constrainSize:!0,content:(0,l.jsx)(BB,{width:o,children:(0,l.jsx)(S.ZP,{autoFocus:!0,children:(0,l.jsxs)(h.Kq,{ref:r,children:[(0,l.jsx)(BV,{children:(0,l.jsx)(h.xu,{padding:2,paddingLeft:4,children:(0,l.jsxs)(h.kC,{align:"center",gap:2,children:[(0,l.jsx)(h.xu,{flex:1,children:(0,l.jsx)(h.xv,{size:1,textOverflow:"ellipsis",weight:"medium",children:n})}),(0,l.jsx)(x.zx,{icon:_.Two,mode:"bleed",onClick:s,tooltipProps:{content:"Close"}})]})})}),(0,l.jsx)(h.xu,{padding:4,children:t})]})})}),open:!0,referenceElement:a})}let BU=(0,j.zo)(h.Zb)(()=>(0,j.iv)`
    /* TextWithTone uses its own logic to set color, and we therefore need */
    /* to override this logic in order to set the correct color in different states */
    &[data-selected],
    &[data-pressed],
    &:active {
      [data-ui='TextWithTone'] {
        color: inherit;
      }
    }
  `),BZ=(0,d.forwardRef)(function(e,t){let{children:n,selected:i,as:a,...r}=e,o=(0,d.useMemo)(()=>({selected:i}),[i]);return(0,l.jsx)(BU,{"data-ui":"PreviewCard",...r,forwardedAs:a,ref:t,selected:i,children:(0,l.jsx)(p.Ik.Provider,{value:o,children:n})})}),BG=(0,j.zo)(BZ)`
  /* this is a hack to avoid layout jumps while previews are loading
there's probably better ways of solving this */
  min-height: 36px;
`,BH={block:{icon:25,media:{width:33,height:33}},blockImage:{icon:25,media:{width:600,height:400}},compact:{icon:21,media:{width:25,height:25}},default:{icon:21,media:{width:33,height:33}},detail:{icon:25,media:{width:73,height:73}},inline:{icon:15,media:{width:15,height:15}},media:{icon:25,media:{width:160,height:160}}},BW=j.zo.span(e=>{let{$dimensions:t,$layout:n,$radius:i,$responsive:a}=e,r=t.width||0,o=t.width||0,s=BH[n].icon;return(0,j.iv)`
    position: relative;
    width: ${a?"100%":(0,h.hO)(r)};
    height: ${a?"100%":(0,h.hO)(o)};
    min-width: ${a?void 0:(0,h.hO)(r)};
    border-radius: ${({theme:e})=>(0,h.hO)(e.sanity.radius[i])};
    display: flex;
    overflow: hidden;
    overflow: clip;
    align-items: center;
    justify-content: center;

    & img {
      position: absolute;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      object-fit: contain;
      border-radius: inherit;
    }

    & svg {
      // Shared styles for SVG icons
      color: var(--card-icon-color);
      display: block;
      flex: 1;

      // Specific styles for non Sanity icons
      &:not([data-sanity-icon]) {
        height: 1em;
        width: 1em;
        max-width: 1em;
        max-height: 1em;
      }

      // Specific styles for Sanity icons
      &[data-sanity-icon] {
        display: block;
        font-size: calc(${s} / 16 * 1em);
      }
    }

    & > span[data-border] {
      display: block;
      position: absolute;
      left: 0;
      top: 0;
      right: 0;
      bottom: 0;
      box-shadow: inset 0 0 0 1px var(--card-fg-color);
      opacity: 0.1;
      border-radius: inherit;
      pointer-events: none;
    }
  `});function BY(e){let{border:t=!0,dimensions:n,layout:i,media:a,radius:r=1,responsive:o=!1,styles:s}=e;return(0,l.jsxs)(BW,{$dimensions:n,$layout:i,$radius:r,$responsive:o,className:s?.media,"data-testid":"Media",children:[function(e){let{dimensions:t,layout:n,media:i,styles:a}=e;return(0,eV.isValidElementType)(i)?(0,d.createElement)(i,{dimensions:t,layout:n}):"string"==typeof i?(0,l.jsx)(h.xv,{as:"span",className:a?.mediaString,size:1,children:i}):(0,d.isValidElement)(i)?i:null}({dimensions:n,layout:i,media:a}),t&&(0,l.jsx)("span",{"data-border":!0})]})}function BJ(e,t,n){return"string"==typeof e?e:(0,eV.isValidElementType)(e)?(0,d.createElement)(e,{layout:t}):e||n}BW.displayName="Styled(MediaWrapper)";let BX={...BH.compact.media,aspect:1,fit:"crop",dpr:(0,E.x)()},BQ=(0,j.zo)(h.kC)`
  height: ${(0,h.hO)(BH.compact.media.height)};
  box-sizing: content-box;
`,B0=(0,j.zo)(h.Qr).attrs({animated:!0,radius:1,size:1})`
  max-width: ${(0,h.hO)(160)};
  width: 80%;
`,B1={...BH.default.media,aspect:1,fit:"crop",dpr:(0,E.x)()},B2=(0,j.zo)(h.kC)`
  height: ${(0,h.hO)(BH.default.media.height)};
  box-sizing: content-box;
`,B3=(0,j.zo)(h.Qr).attrs({animated:!0,radius:1,size:1})`
  max-width: ${(0,h.hO)(160)};
  width: 80%;
`,B4=(0,j.zo)(h.Qr).attrs({animated:!0,radius:1,size:1})`
  max-width: ${(0,h.hO)(120)};
  width: 60%;
`;function B5(e){let{title:t,subtitle:n,media:i,status:a,isPlaceholder:r,children:o,styles:s}=e,{t:c}=i1(),d=eB(s?.root,!!n&&s?.hasSubtitle),u=a&&(0,l.jsx)(h.xu,{className:s?.status,"data-testid":"default-preview__status",children:BJ(a,"default")});return r?(0,l.jsx)(B2,{align:"center",className:s?.placeholder,"data-testid":"default-preview",padding:2,paddingLeft:i?2:3,children:(0,l.jsxs)(h.kC,{align:"center",flex:1,gap:2,children:[i&&(0,l.jsx)(h.xu,{flex:"none",children:(0,l.jsx)(h.Od,{animated:!0,radius:1,style:BH.default.media})}),(0,l.jsxs)(h.Kq,{"data-testid":"default-preview__heading",flex:1,space:2,children:[(0,l.jsx)(B3,{}),(0,l.jsx)(B4,{})]}),(0,l.jsx)(h.xu,{flex:"none",padding:1,children:u})]})}):(0,l.jsx)(B2,{align:"center",className:d,"data-testid":"default-preview",padding:2,paddingLeft:i?2:3,children:(0,l.jsxs)(h.kC,{align:"center",flex:1,gap:2,children:[i&&(0,l.jsx)(h.xu,{flex:"none",children:(0,l.jsx)(BY,{dimensions:B1,layout:"default",media:i,styles:s})}),(0,l.jsxs)(h.Kq,{className:s?.heading,"data-testid":"default-preview__header",flex:1,space:2,children:[(0,l.jsxs)(h.xv,{className:s?.title,size:1,style:{color:"inherit"},textOverflow:"ellipsis",weight:"medium",children:[t&&BJ(t,"default"),!t&&(0,l.jsx)("span",{style:{color:"var(--card-muted-fg-color)"},children:c("preview.default.title-fallback")})]}),n&&(0,l.jsx)(h.xv,{muted:!0,size:1,textOverflow:"ellipsis",className:s?.subtitle,children:BJ(n,"default")})]}),(0,l.jsx)(h.xu,{flex:"none",padding:1,children:u}),o&&(0,l.jsx)("div",{className:s?.children,children:o})]})})}let B8=(0,j.zo)(h.kC).attrs({align:"center"})`
  height: ${(0,h.hO)(BH.detail.media.height)};
`,B6=(0,j.zo)(h.xu)`
  white-space: nowrap;
`,B7=(0,j.zo)(h.Od).attrs({animated:!0,radius:2})`
  width: ${(0,h.hO)(BH.detail.media.width)};
  height: ${(0,h.hO)(BH.detail.media.height)};
`,B9=(0,j.zo)(h.Qr).attrs({animated:!0,radius:1,size:1})`
  max-width: ${(0,h.hO)(160)}; /* 80% of 200px */
  width: 80%;
`,qe=(0,j.zo)(h.Qr).attrs({animated:!0,radius:1,size:1})`
  max-width: ${(0,h.hO)(120)}; /* 60% of 200px */
  width: 60%;
`,qt=(0,j.zo)(h.Qr).attrs({animated:!0,radius:1,size:1})`
  max-width: ${(0,h.hO)(180)}; /* 90% of 200px */
  width: 90%;
`,qn=(0,j.zo)(h.xv)(({theme:e})=>{let{fonts:t}=e.sanity,n=2*t.text.sizes[1].lineHeight;return(0,j.iv)`
    & > span {
      max-height: ${(0,h.hO)(n)};

      /* Multi-line text overflow */
      display: -webkit-box;
      overflow: hidden;
      overflow: clip;
      text-overflow: ellipsis;
      -webkit-line-clamp: ${2};
      -webkit-box-orient: vertical;
    }
  `}),qi={...BH.detail.media,fit:"crop",aspect:1,dpr:(0,E.x)()},qa=j.zo.svg`
  width: ${43}px;
  height: ${43}px;
  transform: rotate(-90deg);
`,qr=j.zo.circle(({theme:e})=>{let{color:t}=e.sanity;return(0,j.iv)`
    fill: none;
    stroke: ${M.VG.gray[t.dark?900:100].hex};
    stroke-width: ${3}px;
  `}),qo=j.zo.circle(({theme:e})=>{let{color:t}=e.sanity;return(0,j.iv)`
    fill: none;
    stroke: ${M.VG.blue[t.dark?400:500].hex};
    stroke-width: ${3}px;
    transition: stroke-dashoffset 75ms;
  `});function qs(e){let{value:t}=e,n=2*Math.PI*20,i=(100-Math.min(Math.max(t,0),100))/100*n;return(0,l.jsxs)(qa,{viewBox:"21.5 21.5 43 43",children:[(0,l.jsx)(qr,{cx:43,cy:43,r:20}),(0,l.jsx)(qo,{cx:43,cy:43,r:20,style:{strokeDasharray:n,strokeDashoffset:`${i}px`}})]})}let ql=(0,j.zo)(h.Zb)`
  overflow: hidden;
  overflow: clip;
`,qc=(0,j.zo)(h.Zb)(({theme:e})=>{let{color:t}=e.sanity;return(0,j.iv)`
    height: ${.5}rem;
    background: ${M.VG.blue[t.dark?400:500].hex};
    transition: transform 75ms;
  `});function qd(e){let{value:t}=e;return(0,l.jsx)(ql,{radius:5,children:(0,l.jsx)(qc,{radius:5,style:{transform:`translate3d(${t-100}%, 0, 0)`}})})}let qu=(0,j.zo)(h.xu)`
  position: relative;
`,qp=(0,j.zo)(h.kC).attrs({align:"center",justify:"center"})`
  position: absolute;
  left: 0;
  top: 0;
  right: 0;
  bottom: 0;
`,qm=(0,j.zo)(h.Od).attrs({animated:!0,radius:2})`
  width: 100%;
  height: 100%;
`,qh=(0,j.zo)(h.kC).attrs({align:"center",justify:"center"})`
  position: absolute;
  left: 0;
  top: 0;
  right: 0;
  bottom: 0;

  &:before {
    background-color: var(--card-bg-color);
    opacity: 0.75;
    content: '';
    display: block;
    position: absolute;
    left: 0;
    top: 0;
    right: 0;
    bottom: 0;
  }

  > svg {
    position: relative;
    z-index: 2;
  }
`,qf=(0,j.zo)(h.Kq).attrs({space:2})`
  max-width: ${(0,h.hO)(200)};
`,qg={...BH.media.media,aspect:1,fit:"crop",dpr:(0,E.x)()},qx=(0,j.zo)(h.kC).attrs({align:"center"})`
  height: ${(0,h.hO)(BH.block.media.height)};
  white-space: nowrap;
  position: relative;
  z-index: 1;
`,qy=(0,j.zo)(h.Zb)`
  overflow: hidden;
  position: relative;
  padding-bottom: ${({$ratio:e})=>e}%;

  & > span {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
  }
`,qb=(0,j.zo)(h.xu).attrs({overflow:"hidden"})`
  border-radius: ${({theme:e})=>e.sanity.radius[1]}px;
`,qv={...BH.blockImage.media,fit:"fillmax",dpr:(0,E.x)()},qj=e=>{let{height:t,width:n}=e;return t&&n?t/n*100:1},qC={...BH.block.media,aspect:1,fit:"crop",dpr:(0,E.x)()},qw=(0,j.zo)(h.kC).attrs({align:"center"})`
  min-height: ${(0,h.hO)(BH.block.media.height)};
`,qk=j.zo.span`
  display: inline-flex;
  align-items: center;
  vertical-align: top;
  height: calc(1em - 1px);
  max-width: 100%;
`,qT=j.zo.span`
  position: relative;
  display: inline-block;
  width: calc(1em - 1px);
  height: calc(1em - 1px);
  min-width: calc(1em - 1px);

  & img {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: ${({theme:e})=>(0,h.hO)(e.sanity.radius[1])};
  }

  & img + span {
    position: absolute;
    left: 0;
    top: 0;
    right: 0;
    bottom: 0;
    box-shadow: inset 0 0 0 1px var(--card-fg-color);
    opacity: 0.2;
    border-radius: ${({theme:e})=>(0,h.hO)(e.sanity.radius[1])};
  }

  & svg {
    display: block;
    font-size: calc(14 / 16 * 1em);
    margin: 1px 0;

    &[data-sanity-icon] {
      font-size: calc(18 / 16 * 1em);
      margin: calc(1px + (2 / 18 * -1em)) 0;
    }
  }
`,qA=(0,j.zo)(h.xv).attrs({forwardedAs:"span"})(({theme:e})=>{let t=e.sanity.fonts.text,n=t.sizes[1];return(0,j.iv)`
    font-size: calc(${n.fontSize} / 16 * 1em);
    font-weight: ${t.weights.medium};
    box-sizing: border-box;
    display: inline-block;
    vertical-align: top;
    line-height: ${n.lineHeight/n.fontSize};
    padding-left: 0.5em;
    padding-right: calc(0.5em - 2px);
    min-width: 0;

    & > span {
      display: block;
      white-space: nowrap;
      text-overflow: ellipsis;
      overflow: hidden;
      overflow: clip;
    }
  `}),q_={...BH.inline.media,fit:"crop",aspect:1,dpr:(0,E.x)()};BH.default.media,(0,E.x)(),(0,j.zo)(h.xu)`
  height: 100%;

  a {
    color: currentColor;
    text-decoration: none;
  }

  svg[data-sanity-icon] {
    margin: 0;
  }
`,(0,j.zo)(h.kC).attrs({align:"center"})`
  height: ${(0,h.hO)(BH.default.media.height)};
`,(0,j.zo)(h.Qr).attrs({animated:!0,radius:1})`
  max-width: ${(0,h.hO)(160)};
  width: 80%;
`,(0,j.zo)(h.Qr).attrs({animated:!0,radius:1,size:1})`
  max-width: ${(0,h.hO)(120)};
  width: 60%;
`;let qS=["aria-hidden","disabled","href"];function qE(e){let{direction:t="horizontal",initialFocus:n,loop:i=!0,navigation:a=["arrows"],pause:r=!1,rootElement:o}=e,[s,l]=(0,d.useState)(-1),[c,u]=(0,d.useState)([]),p=c.length,m=p-1,h="horizontal"===t?"ArrowRight":"ArrowDown",f="horizontal"===t?"ArrowLeft":"ArrowUp",g=(0,d.useCallback)(()=>{o&&u([...o.querySelectorAll('a[href], button, input, textarea, select, details, [tabindex]:not([tabindex="-1"])')].filter(e=>!e.hasAttribute("disabled")&&"true"!==e.getAttribute("aria-hidden")))},[o]),x=(0,d.useCallback)(e=>{l(e)},[]),y=(0,d.useCallback)(e=>{if(r)return;let t=()=>{e.preventDefault(),l(e=>{let t=(e+m)%p;return i||t!==m?t:e})},n=()=>{e.preventDefault(),l(e=>{let t=(e+1)%p;return i||0!==t?t:e})};"Tab"===e.key&&a.includes("tab")&&(e.shiftKey?t():n()),a.includes("arrows")&&(e.key===f&&t(),e.key===h&&n())},[r,f,a,h,m,p,i]);(0,d.useEffect)(()=>{g()},[g,n,t]),(0,d.useEffect)(()=>{let e=new MutationObserver(g);return o&&e.observe(o,{childList:!0,subtree:!0,attributeFilter:qS}),()=>{e.disconnect()}},[c,g,o]),(0,d.useEffect)(()=>{c.forEach((e,t)=>{t===s?(e.setAttribute("tabIndex","0"),e.setAttribute("aria-selected","true"),e.focus(),e.onfocus=()=>x(t),e.onblur=()=>x(-1)):(e.setAttribute("tabIndex","-1"),e.setAttribute("aria-selected","false"),e.onfocus=()=>x(t))}),-1===s&&c&&c["last"===n?m:0]?.setAttribute("tabIndex","0")},[c,s,x,n,m]),(0,d.useEffect)(()=>(o?.addEventListener("keydown",y),()=>{o?.removeEventListener("keydown",y)}),[y,o])}let qM=(0,j.zo)(x.zx)`
  position: relative;
  // The children in button is rendered inside a span, we need to absolutely position it.
  & > span:nth-child(2) {
    position: absolute;
    top: 6px;
    right: 6px;
    padding: 0;
  }
`,qN=j.zo.div({width:4,height:4,borderRadius:3,boxShadow:"0 0 0 1px var(--card-bg-color)"}),qI=(0,d.forwardRef)(function(e,t){let{disabled:n,icon:i,"aria-label":a,mode:r="bleed",text:o,tone:s,...c}=e,u=(0,h.Fg)(),p=s&&u.sanity.color.solid[s],m=(0,d.useMemo)(()=>({backgroundColor:p?.enabled.bg}),[p]);return(0,l.jsx)(qM,{"data-ui":"StatusButton",...c,"aria-label":a,disabled:!!n,mode:r,ref:t,text:o,icon:i,children:s&&(0,l.jsx)(qN,{style:m})})}),qz=(0,d.forwardRef)(function({children:e,content:t,disabled:n,...i},a){return(0,l.jsx)(x.u,{...i,content:t,disabled:n||!t,ref:a,children:(0,l.jsx)("div",{children:e})})}),q$=(0,d.forwardRef)((e,t)=>{let{push:n}=(0,h.pm)();return(0,d.useImperativeHandle)(t,()=>({push:n})),null});function qO(){return(0,d.useContext)(p.$X)}function qP({children:e,zOffset:t}){let n=qO()[t];return(0,l.jsx)(h.li,{zOffset:n,children:e})}function qF(e){let{isParent:t,onClose:n,commentId:i,onConfirm:a,loading:r,error:o}=e,{t:s}=i1(_R),{title:c,body:u,confirmButtonText:p}={thread:{title:s("delete-thread.title"),body:s("delete-thread.body"),confirmButtonText:s("delete-thread.confirm")},comment:{title:s("delete-comment.title"),body:s("delete-comment.body"),confirmButtonText:s("delete-comment.confirm")}}[t?"thread":"comment"],m=(0,d.useCallback)(()=>{a(i)},[i,a]);return(0,l.jsx)(x.Vq,{footer:{cancelButton:{onClick:n},confirmButton:{loading:r,onClick:m,text:p,tone:"critical"}},header:c,id:"delete-comment-dialog",onClose:n,width:0,children:(0,l.jsxs)(h.Kq,{space:4,children:[(0,l.jsx)(h.xv,{size:1,children:u}),o&&(0,l.jsx)(F0,{tone:"critical",children:s("delete-dialog.error")})]})})}q$.displayName="ForwardRef(ImperativeToast)";let qD=(0,d.forwardRef)(function(e,t){return(0,l.jsxs)("svg",{"data-sanity-icon":"comment-disabled",width:"1em",height:"1em",ref:t,viewBox:"0 0 25 25",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,l.jsx)("path",{d:"M5.92627 14.5381H7.92627V18.5381L11.9263 14.5381H15.9263C17.0308 14.5381 17.9263 13.6427 17.9263 12.5381V6.53809C17.9263 5.43352 17.0308 4.53809 15.9263 4.53809H5.92627C4.8217 4.53809 3.92627 5.43352 3.92627 6.53809V12.5381C3.92627 13.6427 4.8217 14.5381 5.92627 14.5381Z",stroke:"currentColor",strokeWidth:"1.2",strokeLinejoin:"round"}),(0,l.jsx)("path",{d:"M2.77256 2.66835C2.54413 2.51319 2.23317 2.57259 2.07802 2.80103L1.40378 3.7937C1.32927 3.9034 1.30139 4.0382 1.32627 4.16845C1.35115 4.29871 1.42676 4.41374 1.53646 4.48825L19.5861 16.7479C19.8146 16.903 20.1255 16.8436 20.2807 16.6152L20.9549 15.6225C21.0294 15.5128 21.0573 15.378 21.0324 15.2478C21.0076 15.1175 20.9319 15.0025 20.8222 14.928L2.77256 2.66835Z",fill:"currentColor",strokeLinejoin:"round"})]})});(0,d.forwardRef)(function(e,t){return(0,l.jsx)("svg",{"data-sanity-icon":"comment",width:"1em",height:"1em",ref:t,viewBox:"0 0 25 25",fill:"none",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,l.jsx)("path",{d:"M7.5 15.5H9.5V19.5L13.5 15.5H17.5C18.6046 15.5 19.5 14.6046 19.5 13.5V7.5C19.5 6.39543 18.6046 5.5 17.5 5.5H7.5C6.39543 5.5 5.5 6.39543 5.5 7.5V13.5C5.5 14.6046 6.39543 15.5 7.5 15.5Z",stroke:"currentColor",strokeLinejoin:"round",strokeWidth:"1.2"})})});let qR=(0,d.forwardRef)(function(e,t){return(0,l.jsxs)("svg",{"data-sanity-icon":"mention",fill:"none",height:"1em",ref:t,viewBox:"0 0 25 25",width:"1em",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,l.jsx)("path",{d:"M16.6633 18.9383C15.539 19.6562 14.2034 20.0723 12.7705 20.0723C8.77022 20.0723 5.52734 16.8294 5.52734 12.8291C5.52734 8.82881 8.77022 5.58594 12.7705 5.58594C16.7708 5.58594 20.0137 8.82881 20.0137 12.8291C20.0137 13.6623 19.8249 14.7093 19.6141 15.2077C19.5578 15.3408 19.479 15.4845 19.3936 15.6238C19.0955 16.1106 18.5507 16.3721 17.9807 16.4018V16.4018C16.8271 16.462 15.8588 15.5428 15.8588 14.3877V9.27302",stroke:"currentColor",strokeWidth:1.2,strokeLinejoin:"round"}),(0,l.jsx)("circle",{cx:"12.5732",cy:"12.8291",r:"3.08691",stroke:"currentColor",strokeWidth:1.2})]})}),qL=(0,d.forwardRef)(function(e,t){return(0,l.jsxs)("svg",{"data-sanity-icon":"add-reaction",fill:"none",height:"1em",ref:t,viewBox:"0 0 25 25",width:"1em",xmlns:"http://www.w3.org/2000/svg",...e,children:[(0,l.jsx)("path",{d:"M10.1044 10.4011L10.1044 10.9972",stroke:"currentColor",strokeWidth:1.2,strokeLinecap:"square"}),(0,l.jsx)("path",{d:"M14.2393 10.4011L14.2393 10.9972",stroke:"currentColor",strokeWidth:1.2,strokeLinecap:"square"}),(0,l.jsx)("path",{d:"M7.12128 14.1151C7.70803 15.0226 9.66113 16.8377 11.7735 16.8377C13.8859 16.8377 15.6713 15.0226 16.4257 14.1151",stroke:"currentColor",strokeWidth:1.2,strokeLinecap:"square"}),(0,l.jsx)("path",{d:"M16.703 6.43905C15.3486 5.36511 13.6357 4.72374 11.773 4.72374C7.38731 4.72374 3.83203 8.27902 3.83203 12.6647C3.83203 17.0503 7.38731 20.6056 11.773 20.6056C16.0995 20.6056 19.618 17.1455 19.712 12.8415",stroke:"currentColor",strokeWidth:1.2}),(0,l.jsx)("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M19.1135 9.03425L19.1135 11.4903L20.3135 11.4903L20.3135 9.03425L22.7693 9.03425L22.7693 7.83425L20.3135 7.83425L20.3135 5.37941L19.1135 5.37941L19.1135 7.83425L16.6584 7.83425L16.6584 9.03425L19.1135 9.03425Z",fill:"currentColor"})]})}),qB=(0,d.forwardRef)(function(e,t){return(0,l.jsx)("svg",{"data-sanity-icon":"send",fill:"none",height:"1em",ref:t,viewBox:"0 0 25 25",width:"1em",xmlns:"http://www.w3.org/2000/svg",...e,children:(0,l.jsx)("path",{clipRule:"evenodd",d:"M21.1602 12.5L7.16016 19.5V14.8765L13.6656 12.4989L7.16016 9.97149L7.16016 5.5L21.1602 12.5Z",stroke:"currentColor",strokeWidth:1.2,strokeLinejoin:"round"})})}),qq=(0,j.zo)(h.qE)`
  svg > ellipse {
    stroke: transparent;
  }
`,qV=/[^\p{Alpha}\p{White_Space}]/gu,qK=RegExp("\\p{White_Space}+","u");function qU(e){let{user:t,...n}=e,i=(0,d.useMemo)(()=>(function(e){let t=e.replace(qV,"").split(qK);return 1===t.length?`${t[0].charAt(0)}`.toUpperCase():`${t[0].charAt(0)}${t[t.length-1].charAt(0)}`})(t?.displayName||""),[t?.displayName]);return t?(0,l.jsx)(qq,{initials:i,src:t?.imageUrl,title:t?.displayName,...n}):(0,l.jsx)(qq,{...n})}let qZ=j.zo.div(e=>{let t=(0,b.aQ)(e.theme),{$size:n=1}=e;return(0,j.iv)`
    min-width: ${t.avatar.sizes[n]?.size}px;
  `}),qG=(0,w.Z2)({name:"mention",type:"object",fields:[{name:"userId",type:"string"}]}),qH=(0,w.Z2)({type:"block",name:"block",of:[qG],marks:{annotations:[]},styles:[{title:"Normal",value:"normal"}],lists:[]}),qW=(0,w.qu)({type:"array",name:"body",of:[qH]}),qY=t3.V.compile({name:"comments",types:[qW]}).get("body"),qJ=j.zo.span(({theme:e})=>{let{regular:t}=e.sanity.fonts?.text.weights||{},{hovered:n}=e.sanity.color?.card||{},{bg:i}=e.sanity.color.selectable?.caution.pressed||{};return(0,j.iv)`
    font-weight: ${t};
    color: var(--card-link-fg-color);
    border-radius: 2px;
    background-color: ${n.bg};
    padding: 1px;
    box-sizing: border-box;

    &[data-active='true'] {
      background-color: ${i};
    }
  `});function qX(e){let{selected:t,userId:n}=e,[i,a]=vm(n),r=vh();return!i||a?(0,l.jsx)(h.Qr,{"data-testid":"comment-mentions-loading-skeleton",style:{width:"10ch"},size:0,muted:!0,radius:1,animated:!0}):(0,l.jsx)(x.u,{portal:!0,content:(0,l.jsxs)(h.kC,{align:"center",gap:2,children:[(0,l.jsx)(h.kC,{children:(0,l.jsx)(qU,{user:i})}),(0,l.jsx)(h.xv,{size:1,children:i.displayName})]}),children:(0,l.jsxs)(qJ,{"data-selected":t,"data-active":r?.id===n,children:["@",i.displayName]})})}let qQ=(0,j.zo)(h.xv)`
  word-break: break-word;
`;function q0(e){let{children:t}=e;return(0,l.jsx)(qQ,{size:1,children:t})}let q1=e=>{let{children:t}=e;return(0,l.jsx)(q0,{children:t})},q2=e=>{let{children:t,value:n,selected:i}=e;return"mention"===n._type&&n.userId?(0,l.jsx)(qX,{selected:i,userId:n?.userId}):t};function q3(e){let{t}=i1(_R),{onClose:n,onConfirm:i}=e,a=(0,d.useCallback)(e=>{e.stopPropagation(),n()},[n]),r=(0,d.useCallback)(e=>{e.stopPropagation(),i()},[i]);return(0,l.jsx)(h.eb,{tone:"default",children:(0,l.jsx)(h.Tu,{zOffset:9999999,children:(0,l.jsx)(x.Vq,{header:t("discard.header"),id:"discard-comment-dialog",onClose:n,width:0,onClickOutside:n,footer:{cancelButton:{onClick:a},confirmButton:{onClick:r,text:t("discard.button-confirm"),tone:"critical"}},children:(0,l.jsx)(h.xv,{size:1,children:t("discard.text")})})})})}let q4=(0,j.zo)(h.kC)``,q5={width:"50%"};function q8(e){let{user:t,onSelect:n}=e,[i]=vm(t.id),{t:a}=i1(_R),r=(0,l.jsx)(qU,{user:i,status:t.granted?void 0:"inactive"}),o=i?(0,l.jsx)(h.xv,{size:1,textOverflow:"ellipsis",title:i.displayName,children:i.displayName}):(0,l.jsx)(h.Qr,{size:1,style:q5}),s=(0,d.useCallback)(()=>{n(t.id)},[n,t.id]);return(0,l.jsx)(h.Zb,{as:"button",disabled:!t.granted,onClick:s,padding:2,radius:2,children:(0,l.jsxs)(h.kC,{align:"center",gap:3,children:[(0,l.jsxs)(q4,{align:"center",gap:2,flex:1,children:[r,(0,l.jsx)(h.xu,{children:o})]}),!t.granted&&(0,l.jsx)(h.Ct,{fontSize:1,mode:"outline",children:a("mentions.unauthorized-user")})]})})}let q6=[],q7=(0,j.zo)(h.Kq)({maxWidth:"220px"}),q9=(0,j.zo)(h.kC)({maxHeight:315.5}),Ve=(0,d.forwardRef)(function(e,t){let{t:n}=i1(_R),{loading:i,onSelect:a,options:r=[],inputElement:o}=e,[s,c]=(0,d.useState)(""),u=(0,d.useRef)(null);(0,d.useImperativeHandle)(t,()=>({setSearchTerm(e){c(e)}}),[]);let p=(0,d.useCallback)(e=>(0,l.jsx)(q8,{user:e,onSelect:a}),[a]),m=(0,d.useCallback)(e=>!r?.[e]?.granted,[r]),f=(0,d.useMemo)(()=>{if(!s)return r||q6;let e=t6(s).toLocaleLowerCase();return r?.map(e=>({...e,displayName:t6(e.displayName||"").toLocaleLowerCase()}))?.filter(t=>t?.displayName?.includes(e))?.sort((t,n)=>{let i=t.displayName?.startsWith(e),a=n.displayName?.startsWith(e);return i&&!a?-1:!i&&a?1:0})||q6},[r,s]);return i?(0,l.jsx)(q7,{children:(0,l.jsx)(aW,{showText:!0})}):(0,l.jsxs)(h.kC,{direction:"column",height:"fill","data-testid":"comments-mentions-menu",children:[0===f.length&&(0,l.jsx)(h.xu,{padding:5,children:(0,l.jsx)(h.xv,{align:"center",size:1,muted:!0,children:n("mentions.no-users-found")})}),f.length>0&&(0,l.jsx)(q9,{direction:"column",flex:1,overflow:"hidden",children:(0,l.jsx)(aN,{activeItemDataAttr:"data-hovered",ariaLabel:n("mentions.user-list-aria-label"),fixedHeight:!0,getItemDisabled:m,inputElement:o||void 0,itemHeight:41,items:f,padding:1,ref:u,renderItem:p})})]})});function Vt(){let e=(0,d.useContext)(p.IU);if(!e)throw Error("useCommentInputContext must be used within a CommentInputProvider");return e}let Vn={passive:!0},Vi=["bottom","top"],Va={outline:"none"},Vr=[],Vo=j.zo.span(e=>{let{color:t}=(0,b.aQ)(e.theme);return(0,j.iv)`
    color: ${t.input.default.enabled.placeholder};
    overflow: hidden;
    text-overflow: ellipsis;
    text-wrap: nowrap;
    display: block;
  `}),Vs=(0,j.zo)(x.J2)(({theme:e})=>{let{space:t,radius:n}=e.sanity;return(0,j.iv)`
    &[data-placement='bottom'] {
      transform: translateY(${t[1]}px);
    }

    &[data-placement='top'] {
      transform: translateY(-${t[1]}px);
    }

    [data-ui='Popover__wrapper'] {
      border-radius: ${n[3]}px;
      display: flex;
      flex-direction: column;
      overflow: clip;
      overflow: hidden;
      position: relative;
      width: 300px; // todo: improve
    }
  `});function Vl(e){let{t}=i1(_R),{focusLock:n,onFocus:i,onBlur:a,onKeyDown:r,onSubmit:o,placeholder:s=t("compose.create-comment-placeholder"),renderBlock:c}=e,u=(0,d.useRef)(null),p=(0,d.useRef)(null),m=(0,d.useRef)(null),f=(0,d.useRef)(null),g=(0,t2.L9)(),{canSubmit:x,closeMentions:y,insertMention:b,mentionOptions:v,mentionsMenuOpen:j,mentionsSearchTerm:C,onBeforeInput:k,value:T}=Vt(),A=function(e){let{disabled:t,rootElement:n}=e,[i,a]=(0,d.useState)(null),r=(0,d.useMemo)(()=>i?{getBoundingClientRect:()=>i}:null,[i]),o=(0,d.useCallback)(()=>{if(t){a(null);return}let e=window.getSelection();if(!e||!e.isCollapsed||0===e.rangeCount)return;let i=e.getRangeAt(0);if(!n?.contains(i.commonAncestorContainer)){a(null);return}let r=i?.getBoundingClientRect();r&&a(r)},[t,n]);return(0,d.useEffect)(()=>(document.addEventListener("selectionchange",o,Vn),()=>{document.removeEventListener("selectionchange",o)}),[o]),r}({disabled:!j,rootElement:p.current}),_=(0,d.useCallback)(()=>(0,l.jsx)(Vo,{children:s}),[s]);(0,h.Of)(j&&y,()=>[u.current]);let S=(0,d.useCallback)(e=>{switch(e.key){case"Enter":if(e.shiftKey)break;if(j){e.preventDefault(),e.stopPropagation(),y();break}o&&x&&(e.preventDefault(),e.stopPropagation(),o());break;case"Escape":case"ArrowLeft":case"ArrowRight":j&&(e.preventDefault(),e.stopPropagation(),y())}r&&r(e)},[x,y,j,r,o]),E=(0,d.useMemo)(()=>{if(g)return;let e=(T||Vr).slice(-1)[0],t=(0,w.DG)(e)?e.children.slice(-1)[0]:void 0;if(!t)return;let n={path:[{_key:e._key},"children",{_key:t._key}],offset:(0,w.NG)(t)?t.text.length:0};return{focus:n,anchor:n}},[T,g]);(0,d.useEffect)(()=>{f.current?.setSearchTerm(C)},[C]),(0,d.useEffect)(()=>{j&&g&&!eF(g.anchor,g.focus)&&y()},[j,y,g]);let M=(0,l.jsx)(Ve,{inputElement:m.current,loading:v.loading,onSelect:b,options:v.data||Vr,ref:f});return(0,l.jsxs)("div",{ref:p,children:[(0,l.jsx)(Vs,{arrow:!1,constrainSize:!0,content:M,disabled:!j,fallbackPlacements:Vi,open:j,placement:"bottom",ref:u,referenceElement:A}),(0,l.jsx)(t2.iV,{"data-testid":"comment-input-editable","data-ui":"EditableElement",onBeforeInput:k,onBlur:a,onFocus:i,onKeyDown:S,ref:m,renderBlock:c,renderChild:q2,renderPlaceholder:_,selection:E,style:Va,tabIndex:n?0:void 0})]})}let Vc=(0,j.zo)(h.xu)`
  max-height: 20vh;
  overflow-y: auto;
`,Vd=(0,j.zo)(h.R)({height:20,width:1});function Vu(e){return`inset 0 0 0 ${e.width}px ${e.color}`}let Vp=(0,j.zo)(h.Zb)(({theme:e})=>{let{color:t,input:n,radius:i}=(0,b.aQ)(e),a=i[2];return(0,j.iv)`
    border-radius: ${a}px;
    box-shadow: var(--input-box-shadow);

    --input-box-shadow: ${Vu({color:t.input.default.enabled.border,width:n.border.width})};

    &:not([data-expand-on-focus='false'], :focus-within) {
      background: transparent;
      box-shadow: unset;
    }

    &[data-focused='true']:focus-within {
      ${Vc} {
        min-height: 1em;
      }

      /* box-shadow: inset 0 0 0 1px var(--card-focus-ring-color); */
      --input-box-shadow: ${Vu({color:"var(--card-focus-ring-color)",width:n.border.width})};
    }

    &:focus-within {
      ${Vc} {
        min-height: 1em;
      }
    }

    &[data-expand-on-focus='false'] {
      ${Vc} {
        min-height: 1em;
      }
    }

    &[data-expand-on-focus='true'] {
      [data-ui='CommentInputActions']:not([hidden]) {
        display: none;
      }

      &:focus-within {
        [data-ui='CommentInputActions'] {
          display: flex;
        }
      }
    }
    &:hover {
      --input-box-shadow: ${Vu({color:t.input.default.hovered.border,width:n.border.width})};
    }
  `}),Vm=j.zo.div(e=>`
    min-height: ${b.aQ(e.theme).avatar.sizes[1]?.size}px;
    display: flex;
    align-items: center;
  `);function Vh(e){let{avatarSize:t=1,currentUser:n,focusLock:i,onBlur:a,onFocus:r,onKeyDown:o,onSubmit:s,placeholder:c,renderBlock:u,withAvatar:p}=e,[m]=vm(n.id),{canSubmit:f,expandOnFocus:g,focused:y,hasChanges:b,insertAtChar:v,openMentions:j,readOnly:C}=Vt(),{t:w}=i1(_R),k=p?(0,l.jsx)(Vm,{children:(0,l.jsx)(qU,{user:m,size:t})}):null,T=(0,d.useCallback)(e=>{e.stopPropagation(),v(),j()},[v,j]);return(0,l.jsxs)(h.kC,{align:"flex-start",gap:2,children:[k,(0,l.jsx)(Vp,{id:"comment-input-root","data-expand-on-focus":g&&!f?"true":"false","data-focused":y?"true":"false",flex:1,sizing:"border",tone:C?"transparent":"default",children:(0,l.jsxs)(h.Kq,{children:[(0,l.jsx)(Vc,{"data-ui":"CommentInputEditableWrap",paddingX:1,paddingY:2,sizing:"border",children:(0,l.jsx)(Vl,{focusLock:i,onBlur:a,onFocus:r,onKeyDown:o,onSubmit:s,placeholder:c,renderBlock:u})}),(0,l.jsx)(h.kC,{align:"center","data-ui":"CommentInputActions",gap:1,justify:"flex-end",padding:1,children:(0,l.jsxs)(x.uE,{children:[(0,l.jsx)(x.zx,{"aria-label":w("compose.mention-user-aria-label"),"data-testid":"comment-input-mention-button",disabled:C,icon:qR,mode:"bleed",type:"button",onClick:T,tooltipProps:{content:w("compose.mention-user-tooltip")}}),s&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(Vd,{}),(0,l.jsx)(x.zx,{"aria-label":w("compose.send-comment-aria-label"),"data-testid":"comment-input-send-button",disabled:!f||!b||C,icon:qB,mode:b&&f?"default":"bleed",onClick:s,tone:b&&f?"primary":"default",tooltipProps:{content:w("compose.send-comment-tooltip")}})]})]})})]})})]})}function Vf(e){let{children:t,expandOnFocus:n=!1,focused:i,focusOnMount:a=!1,mentionOptions:r,onMentionMenuOpenChange:o,value:s,readOnly:c}=e,u=(0,t2._F)(),[m,h]=(0,d.useState)(!1),[f,g]=(0,d.useState)(""),[x,y]=(0,d.useState)(null),b=(0,d.useMemo)(()=>Se(s),[s]),v=_9(s),j=(0,d.useCallback)(()=>{c||t2.q$.focus(u)},[u,c]),C=(0,d.useCallback)(()=>{h(!1),g(""),y(null)},[]),k=(0,d.useCallback)(()=>{h(!0),g(""),h(!0),y(t2.q$.getSelection(u))},[u]),T=(0,d.useCallback)(e=>{let t=t2.q$.getSelection(u),n=t?t.focus.offset:0,i=t2.q$.focusChild(u),a=(0,w.NG)(i)&&i||void 0,r="insertText"===e.inputType,o="deleteContentBackward"===e.inputType,s=r&&"@"===e.data,l=a?.text.slice(0,Math.max(0,n)).lastIndexOf("@")||0,c=a?.text.slice(n-1,n)===" ",d=r&&" "===e.data&&!f;if(s&&(n<1||c)){k();return}if(d||o&&(a?.text.length===1||l===(a?.text.length||0)-1)){C();return}if((0,w.NG)(i)){let t=i.text.slice(l+1,n);r&&(t+=e.data),o&&(t=t.slice(0,Math.max(0,t.length-1))),g(t)}},[C,u,f,k]),A=(0,d.useCallback)(()=>{h(!0),t2.q$.focus(u),t2.q$.insertChild(u,u.schemaTypes.span,{text:"@"}),y(t2.q$.getSelection(u))},[u]);sB(m,()=>o?.(m));let _=(0,d.useCallback)(e=>{let t=u.schemaTypes.inlineObjects.find(e=>"mention"===e.name),[n,i]=x&&t2.q$.findByPath(u,x.focus.path)||[];if(n&&(0,w.NG)(n)&&i&&t){t2.q$.focus(u);let a=t2.q$.getSelection(u)?.focus.offset;"u">typeof a&&(t2.q$.delete(u,{anchor:{path:i,offset:n.text.lastIndexOf("@")},focus:{path:i,offset:a}},{mode:"selected"}),t2.q$.insertChild(u,t,{userId:e}),t2.q$.insertChild(u,u.schemaTypes.span,{text:" "}))}},[u,x]),S=(0,d.useMemo)(()=>({canSubmit:b,closeMentions:C,editor:u,expandOnFocus:n,focused:i,focusEditor:j,focusOnMount:a,hasChanges:v,insertAtChar:A,insertMention:_,mentionOptions:r,mentionsMenuOpen:m,mentionsSearchTerm:f,onBeforeInput:T,openMentions:k,readOnly:!!c,value:s}),[b,C,u,n,i,j,a,v,A,_,r,m,f,T,k,c,s]);return(0,l.jsx)(p.IU.Provider,{value:S,children:t})}let Vg=[],Vx={behavior:"smooth",block:"center",inline:"center"},Vy=(0,d.forwardRef)(function(e,t){let{avatarSize:n,currentUser:i,expandOnFocus:a,focusLock:r=!1,focusOnMount:o,mentionOptions:s,onBlur:c,onChange:u,onDiscardCancel:p,onDiscardConfirm:m,onFocus:f,onKeyDown:g,onMentionMenuOpenChange:x,onSubmit:y,placeholder:b,readOnly:v,renderBlock:j=q1,value:C=Vg,withAvatar:w=!0}=e,[k,T]=(0,d.useState)(!1),A=(0,d.useRef)(null),_=(0,d.useRef)(null),[S,E]=(0,d.useState)(!1),M=(0,d.useRef)(null),N=(0,d.useRef)(null),I=(0,d.useRef)(null),[z,$]=(0,d.useState)((0,t2.YH)()),O=(0,d.useCallback)(()=>{requestAnimationFrame(()=>{A.current&&t2.q$.focus(A.current)})},[]),P=(0,d.useCallback)(()=>{$((0,t2.YH)())},[]),F=(0,d.useCallback)(e=>{"ready"===e.type&&o&&O(),"focus"===e.type&&T(!0),"blur"===e.type&&T(!1),"patch"===e.type&&A.current&&u(t2.q$.getValue(A.current)||Vg)},[o,u,O]),D=(0,d.useCallback)(()=>{_.current?.scrollIntoView(Vx)},[]),R=(0,d.useCallback)(()=>{y?.(),P(),O(),D()},[y,O,P,D]),L=(0,d.useCallback)(()=>{m(),P()},[m,P]),B=(0,d.useMemo)(()=>({open:()=>{E(!0)},close:()=>{E(!1),O()}}),[O]);(0,d.useImperativeHandle)(t,()=>({focus:O,blur(){A.current&&t2.q$.blur(A.current)},scrollTo:D,reset:P,discardDialogController:B}),[B,O,P,D]);let q=(0,d.useCallback)(e=>{if(!r)return;let t=e.target,n=I.current;if(n&&t===M.current){(0,h.bg)(n);return}n&&t===N.current&&(0,h.fo)(n)},[r]);return(0,l.jsxs)(l.Fragment,{children:[S&&p&&(0,l.jsx)(q3,{onClose:p,onConfirm:L}),(0,l.jsx)(h.Kq,{ref:_,"data-testid":"comment-input",onFocus:q,children:(0,l.jsx)(t2.q$,{onChange:F,readOnly:v,ref:A,schemaType:qY,value:C||Vg,children:(0,l.jsxs)(Vf,{expandOnFocus:a,focused:k,focusOnMount:o,mentionOptions:s,onMentionMenuOpenChange:x,readOnly:v,value:C,children:[r&&(0,l.jsx)("div",{ref:M,tabIndex:0}),(0,l.jsx)(h.Kq,{ref:I,children:(0,l.jsx)(Vh,{avatarSize:n,currentUser:i,focusLock:r,onBlur:c,onFocus:f,onKeyDown:g,onSubmit:y&&R,placeholder:b,renderBlock:j,withAvatar:w})}),r&&(0,l.jsx)("div",{ref:N,tabIndex:0})]})},z)})]})}),Vb=j.zo.span(({theme:e})=>{let t=e.sanity.v2?.color._dark,n=M.VG[Ed][t?800:100].hex,i=M.VG[Ed][t?700:300].hex,a=M.VG[Ed][t?700:200].hex,r=M.VG[Ed][t?600:400].hex,o=M.VG[Ed][t?700:200].hex,s=M.VG[Ed][t?600:400].hex;return(0,j.iv)`
    box-sizing: border-box;
    transition:
      background-color 100ms ease,
      border-color 100ms ease;

    // Make sure that child elements appropriately blend with the
    // background of the highlight span
    * {
      mix-blend-mode: ${t?"screen":"multiply"};
    }

    &[data-inline-comment-state='added'][data-inline-comment-nested='false'] {
      background-color: ${n};
      border-bottom: 2px solid ${i};
    }

    &[data-inline-comment-state='added'][data-inline-comment-nested='true'] {
      background-color: ${o};
      border-bottom: 2px solid ${s};
    }

    &[data-inline-comment-state='added'][data-inline-comment-nested='false'][data-hovered='true'] {
      background-color: ${a};
      border-bottom: 2px solid ${r};
    }

    &[data-inline-comment-state='authoring'] {
      background-color: ${n};
      border-bottom: 2px solid ${i};
    }
  `}),Vv=(0,d.forwardRef)(function(e,t){let{children:n,isAdded:i,isAuthoring:a,isHovered:r,isNested:o,...s}=e;return(0,l.jsx)(Vb,{...s,"data-hovered":r?"true":"false","data-inline-comment-nested":o?"true":"false","data-inline-comment-state":i?"added":a?"authoring":void 0,ref:t,children:n})}),Vj=(0,j.zo)(h.Kq)(()=>(0,j.iv)`
    & > [data-ui='Text']:not(:first-child) {
      margin-top: 1em; // todo: improve
    }

    & > [data-ui='Text']:has(> span:empty) {
      display: none;
    }
  `),VC=[];function Vw(e){let t=(0,d.useMemo)(()=>{var t;return Array.isArray(t=e.children)?t.flatMap(e=>{let t=[e];for(let e of Su)t=t.flatMap(e);return t}):t},[e.children]);return(0,l.jsx)(q0,{children:t})}let Vk={block:{normal:Vw,h1:Vw,h2:Vw,h3:Vw,h4:Vw,h5:Vw,h6:Vw,blockquote:Vw,code:Vw},list:{bullet:d.Fragment,number:d.Fragment,checkmarks:d.Fragment},listItem:{bullet:Vw,number:Vw,checkmarks:Vw},marks:{strong:d.Fragment,em:d.Fragment,code:d.Fragment,underline:d.Fragment,strikeThrough:d.Fragment,link:d.Fragment},types:{mention:e=>(0,l.jsx)(qX,{userId:e?.value?.userId,selected:!1})}};function VT(e){let{blocks:t}=e;return(0,l.jsx)(Vj,{children:(0,l.jsx)(t1.YI,{value:t||VC,components:Vk})})}let VA=(0,j.zo)(h.xv)`
  font-family: 'Twemoji Mozilla', 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',
    'Noto Color Emoji', 'EmojiOne Color', 'Android Emoji', sans-serif;
`;function V_(e){let{options:t,onSelect:n}=e,{t:i}=i1(_R),[a,r]=(0,d.useState)([]),[o,s]=(0,d.useState)(null),[c,u]=(0,d.useState)(0),p=(0,d.useCallback)(e=>{let t=a.length;"ArrowRight"===e.key&&u(e=>(e+1)%t),"ArrowLeft"===e.key&&u(e=>(e-1+t)%t)},[a.length]),m=(0,d.useCallback)(e=>{let i=a.indexOf(e.currentTarget);u(i),n(t[i])},[a,n,t]);return(0,d.useEffect)(()=>{o&&r(Array.from(o.querySelectorAll("button")))},[o]),(0,d.useEffect)(()=>{a.length>0&&a[c].focus()},[a,c]),(0,l.jsx)(h.rj,{columns:6,gap:1,onKeyDown:p,ref:s,role:"menu",children:t.map(e=>{let t=Ep[e.shortName];return(0,l.jsx)(h.zx,{"aria-label":i("reactions.react-with-aria-label",{reactionName:e.title||e.shortName}),mode:"bleed",onClick:m,padding:2,role:"menuitem",tabIndex:-1,children:(0,l.jsx)(VA,{align:"center",size:2,children:t})},e.shortName)})})}let VS=["top","bottom"];function VE(e){let{onMenuClose:t,onMenuOpen:n,onSelect:i,options:a,readOnly:r,renderMenuButton:o,mode:s}=e,[c,u]=(0,d.useState)(null),p=(0,d.useRef)(null),[m,f]=(0,d.useState)(!1),{t:g}=i1(_R),y=(0,d.useCallback)(()=>{let e=!m;f(e),e?n?.():t?.()},[t,n,m]),b=(0,d.useCallback)(()=>{m&&(f(!1),t?.())},[m,t]),v=(0,d.useCallback)(()=>{m&&(b(),c?.focus())},[c,b,m]),j=(0,d.useCallback)(e=>{let{key:t,shiftKey:n}=e;(n&&"Tab"===t||"Escape"===t||"Tab"===t)&&v()},[v]);(0,h.Of)(b,()=>[p.current,c]);let C=(0,d.useCallback)(e=>{i(e),b()},[b,i]),w=(0,d.useMemo)(()=>{let e=o({open:m,tooltipContent:g("upsell"===s?"list-item.context-menu-add-reaction-upsell":"list-item.context-menu-add-reaction"),t:g});return(0,d.cloneElement)(e,{"aria-expanded":m,"aria-haspopup":"true",disabled:r||"upsell"===s,id:"reactions-menu-button",onClick:y,ref:u})},[y,m,r,o,g,s]);return(0,l.jsx)(x.J2,{constrainSize:!0,content:(0,l.jsx)(h.Zb,{"aria-labelledby":"reactions-menu-button",onKeyDown:j,padding:1,radius:3,tone:"default",children:(0,l.jsx)(V_,{onSelect:C,options:a})}),fallbackPlacements:VS,open:m,placement:"bottom",portal:!0,ref:p,tone:"default",children:w})}let VM=(0,j.zo)(h.Kq)`
  max-width: 180px;
`,VN=j.zo.div`
  display: inline-block;
`,VI=(0,j.zo)(h.xv).attrs({size:1})`
  display: inline-block !important;

  & > span {
    white-space: break-spaces;
  }
`,Vz=(0,j.zo)(h.xu)`
  line-height: 1;
  text-align: center;
`,V$=/^\S+/;function VO(e){let{currentUserId:t,isFirst:n,userId:i}=e,[a]=vm(i),{t:r}=i1(_R);return t===i?r("reactions.user-list.you",{context:n?"leading":void 0,replace:{name:a?.displayName}}):a?.displayName||r("reactions.user-list.unknown-user-fallback-name")}function VP(e){let{children:t,...n}=e;return(0,l.jsx)(x.u,{content:(0,l.jsx)(VD,{...n}),placement:"bottom",portal:!0,children:(0,l.jsx)("div",{children:t})})}function VF({currentUserId:e,userIds:t}){let n=ri({style:"long",type:"conjunction"});if(0===t.length)return null;let i=n.formatToParts(t),a=[];for(let t=0;t<i.length;t++){let n=i[t];if("literal"===n.type){a.push((0,l.jsx)(VI,{children:n.value},`literal-${t}`));continue}let r=i[t+1];if(r&&"literal"===r.type&&V$.test(r.value)){let[i=""]=r.value.match(V$)||[];a.push((0,l.jsxs)(VN,{children:[(0,l.jsx)(VI,{weight:"medium",children:(0,l.jsx)(VO,{currentUserId:e,isFirst:0===t,userId:n.value})}),(0,l.jsx)(VI,{children:i})]},n.value)),r.value=r.value.slice(i.length);continue}a.push((0,l.jsx)(VI,{weight:"medium",children:(0,l.jsx)(VO,{currentUserId:e,isFirst:0===t,userId:n.value})},n.value))}return a}function VD(e){let{currentUser:t,reactionName:n,userIds:i}=e,{t:a}=i1(_R),r=(0,d.useCallback)(()=>t?(0,l.jsx)(VF,{currentUserId:t.id,userIds:i}):null,[t,i]);return(0,l.jsxs)(VM,{padding:1,children:[(0,l.jsx)(h.kC,{justify:"center",paddingBottom:2,paddingTop:1,children:(0,l.jsx)(VA,{size:4,children:Ep[n]})}),(0,l.jsx)(Vz,{children:(0,l.jsx)(rm,{t:a,i18nKey:"reactions.users-reacted-with-reaction",values:{reactionName:n},components:{UserList:r,ReactionName:()=>(0,l.jsx)(VI,{muted:!0,children:n}),Text:({children:e})=>(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(VI,{muted:!0,children:e})," ",(0,l.jsx)("wbr",{})," "]})}})})]})}let VR=(0,j.zo)(h.Zb)`
  background: none;
`,VL=({open:e,tooltipContent:t})=>(0,l.jsx)(h.zx,{fontSize:1,mode:"ghost",padding:0,radius:"full",selected:e,children:(0,l.jsx)(h.kC,{paddingX:3,paddingY:2,children:(0,l.jsx)(x.u,{animate:!0,content:t,disabled:e,children:(0,l.jsx)(h.xv,{size:1,children:(0,l.jsx)(qL,{})})})})}),VB=(0,d.memo)(function(e){let{currentUser:t,onSelect:n,reactions:i,readOnly:a,mode:r}=e,o=(0,d.useCallback)(e=>{let t=Eu.find(t=>t.shortName===e);t&&n(t)},[n]),s=(0,d.useMemo)(()=>i.filter(e=>e.userId===t?.id).map(e=>e.shortName),[t?.id,i]),c=(0,d.useMemo)(()=>Object.entries(i.reduce((e,t)=>{let{shortName:n}=t;return e[n]||(e[n]=[]),e[n].push(t),e},{})).sort(([e],[t])=>i.findIndex(t=>t.shortName===e)-i.findIndex(e=>e.shortName===t)).filter(([e])=>Ep[e]),[i]),u=(0,d.useRef)(Object.keys(Object.fromEntries(c))),p=(0,d.useMemo)(()=>{let e=c.sort(([e],[t])=>{let n=u.current.indexOf(e),i=u.current.indexOf(t);return -1===n?1:-1===i?-1:n-i});return u.current=e.map(([e])=>e),e},[c]);return(0,l.jsx)(h.kC,{align:"center",gap:1,wrap:"wrap",children:(0,l.jsxs)(x.uE,{children:[p.map(([e,n])=>{let i=s.includes(e),c=n.map(e=>e.userId),d=Ep[e];return(0,l.jsx)(VP,{currentUser:t,reactionName:e,userIds:c,children:(0,l.jsx)(VR,{tone:"default",children:(0,l.jsx)(h.zx,{disabled:a||"upsell"===r,mode:"ghost",onClick:()=>o(e),padding:2,radius:"full",selected:i,tone:i?"primary":"default",children:(0,l.jsxs)(h.kC,{align:"center",gap:1,children:[(0,l.jsx)(VA,{size:1,children:d}),(0,l.jsx)(h.xv,{size:0,weight:i?"semibold":"medium",children:n?.length})]})})})},e)}),(0,l.jsx)(VR,{tone:"default",children:(0,l.jsx)(VE,{mode:r,onSelect:e=>o(e.shortName),options:Eu,readOnly:a,renderMenuButton:VL})})]})})}),Vq=({open:e,tooltipContent:t,t:n})=>(0,l.jsx)(x.zx,{"aria-label":n("list-item.context-menu-add-reaction-aria-label"),icon:qL,mode:"bleed",selected:e,tooltipProps:{content:t}}),VV={placement:"bottom-end"},VK=(0,j.zo)(h.Zb)`
  &:empty {
    display: none;
  }
`;function VU(e){let{canDelete:t,canEdit:n,isParent:i,mode:a,onCopyLink:r,onDeleteStart:o,onEditStart:s,onMenuClose:c,onMenuOpen:d,onReactionSelect:u,onStatusChange:p,readOnly:m,status:f}=e,g=!!(r||o||s),{t:y}=i1(_R),b=!!(t||n||r);return(0,l.jsx)(x.uE,{children:(0,l.jsx)(h.kC,{children:(0,l.jsxs)(VK,{display:"flex",shadow:2,padding:1,radius:2,sizing:"border",children:[u&&(0,l.jsx)(VE,{mode:a,onMenuClose:c,onMenuOpen:d,onSelect:u,options:Eu,readOnly:m,renderMenuButton:Vq}),i&&p&&(0,l.jsx)(x.zx,{"aria-label":y("open"===f?"list-item.resolved-tooltip-aria-label":"list-item.re-open-resolved-aria-label"),"data-testid":"comments-list-item-status-button",disabled:m,icon:"open"===f?_.nSX:_.UEU,mode:"bleed",onClick:p,tooltipProps:{content:y("open"===f?"list-item.resolved-tooltip-content":"list-item.re-open-resolved")}}),b&&(0,l.jsx)(x.j2,{id:"comment-actions-menu",button:(0,l.jsx)(aI,{"aria-label":y("list-item.open-menu-aria-label"),disabled:m,hidden:!g}),onOpen:d,onClose:c,menu:(0,l.jsxs)(h.v2,{children:[(0,l.jsx)(x.sN,{hidden:!n,icon:_.dY8,onClick:s,text:y("list-item.edit-comment"),tooltipProps:"upsell"===a?{content:y("list-item.edit-comment-upsell")}:void 0,disabled:"upsell"===a}),(0,l.jsx)(x.sN,{hidden:!t,icon:_.XHJ,onClick:o,text:y("list-item.delete-comment"),tone:"critical"}),r&&(0,l.jsx)(h.R,{hidden:!t&&!n}),(0,l.jsx)(x.sN,{hidden:!r,icon:_.xPt,onClick:r,text:y("list-item.copy-link")})]}),popover:VV})]})})})}let VZ=(0,j.zo)(h.xu).attrs({marginLeft:1,marginRight:2})`
  &:not([data-hidden]) {
    display: inline;
  }
`,VG=(0,j.zo)(h.Kq)(({theme:e,$hasReferencedValue:t})=>{let n=e.sanity.v2?.color._dark,i=t?Ed:"gray",a=n?M.VG[i][700].hex:M.VG[i][300].hex;return(0,j.iv)`
    border-left: 2px solid ${a};
    word-break: break-word;
  `});function VH(e){let{hasReferencedValue:t,value:n}=e,{t:i}=i1(_R),a=i("list-item.missing-referenced-value-tooltip-content"),r=(0,d.useMemo)(()=>Array.isArray(n)&&n?.filter(w.DG).length>0?function(e,t=250){return e.length<=t?e:`${e.slice(0,t)}...`}(n?.map(t0.Kv).join(" ")):null,[n]);return r?(0,l.jsx)(VG,{$hasReferencedValue:!!t,"data-testid":"comments-list-item-referenced-value",flex:1,forwardedAs:"blockquote",padding:1,paddingLeft:2,sizing:"border",children:(0,l.jsx)(h.kC,{align:"flex-start",children:(0,l.jsxs)(h.xv,{size:1,muted:!0,children:[!t&&(0,l.jsx)(x.u,{content:a,children:(0,l.jsx)(VZ,{children:(0,l.jsx)(_.R$r,{})})}),r]})})}):null}let VW=e=>e.stopPropagation(),VY=(0,j.zo)(h.xu)``,VJ={width:"50%"},VX=[],VQ=(0,j.zo)(h.xv)(({theme:e})=>{let t=e.sanity.color.dark,n=M.VG.gray[t?200:800].hex;return(0,j.iv)`
    min-width: max-content;
    --card-fg-color: ${n};
    color: var(--card-fg-color);
  `}),V0=(0,j.zo)(h.kC)(e=>{let t=(0,b.aQ)(e.theme);return(0,j.iv)`
    min-height: ${t.avatar.sizes[e.$size]?.size}px;
  `}),V1=(0,j.zo)(h.xv)(({theme:e})=>{let t=e.sanity.color.dark,n=M.VG.gray[t?200:800].hex;return(0,j.iv)`
    --card-fg-color: ${n};
    color: var(--card-fg-color);
  `}),V2=(0,j.zo)(h.Kq)`
  transition: opacity 200ms ease;

  &[data-muted='true'] {
    transition: unset;
    opacity: 0.5;
  }
`,V3=(0,j.zo)(h.kC)(e=>{let t=(0,b.aQ)(e.theme);return(0,j.iv)`
    min-height: ${t.avatar.sizes[e.$size]?.size}px;
  `}),V4=(0,j.zo)(h.Zb)`
  // Add not on hover
  &:not(:hover) {
    background-color: transparent;
  }
`,V5=(0,j.zo)(h.Kq)(({theme:e})=>{let{space:t}=e.sanity;return(0,j.iv)`
    position: relative;

    // Only show the floating layer on hover when hover is supported.
    // Else, the layer is always visible.
    @media (hover: hover) {
      ${VY} {
        opacity: 0;
        position: absolute;
        right: 0;
        top: 0;
        transform: translate(${t[1]}px, -${t[1]}px);
      }

      ${VY} {
        &:focus-within {
          opacity: 1;
        }
      }

      &:hover {
        ${VY} {
          opacity: 1;
        }
      }
    }

    &[data-menu-open='true'] {
      ${VY} {
        opacity: 1;
      }
    }
  `}),V8={useTemporalPhrase:!0};function V6(e){let{avatarSize:t=1,canDelete:n,canEdit:i,comment:a,currentUser:r,hasError:o,hasReferencedValue:s,intent:c,isParent:u,isRetrying:p,mentionOptions:m,mode:f,onCopyLink:g,onCreateRetry:x,onDelete:y,onEdit:b,onInputKeyDown:v,onReactionSelect:j,onStatusChange:C,readOnly:w,withAvatar:k=!0}=e,{_createdAt:T,authorId:A,message:_,_id:S,lastEditedAt:E}=a,[M]=vm(A),{t:N}=i1(_R),[I,z]=(0,d.useState)(_),[$,O]=(0,d.useState)(!1),P=(0,d.useRef)(null),F=(0,d.useRef)(_),[D,R]=(0,d.useState)(!1),L=(0,d.useRef)(null),B=_9(I),q=(0,d.useMemo)(()=>Se(I),[I]),V=(0,d.useMemo)(()=>(a?.reactions?.filter(e=>e?._optimisticState!=="removed")||VX).filter(e=>"userId"in e&&"shortName"in e),[a?.reactions]),K=!!V?.length,U=T?new Date(T):new Date,Z=E?new Date(E):null,G=Bv(U,V8),H=Al({dateStyle:"full",timeStyle:"medium"}),W=H.format(U),Y=Z?H.format(Z):null,J=o||p;(0,d.useEffect)(()=>{$||(F.current=_,z(_))},[$,_]);let X=(0,d.useCallback)(()=>R(!0),[]),Q=(0,d.useCallback)(()=>R(!1),[]),ee=(0,d.useCallback)(()=>g?.(S),[S,g]),et=(0,d.useCallback)(e=>{e.stopPropagation(),x?.(S)},[S,x]),en=(0,d.useCallback)(()=>y(S),[S,y]),ei=(0,d.useCallback)(()=>{O(!1),z(F.current)},[]),ea=(0,d.useCallback)(()=>{if(!q||!B){ei();return}L.current?.discardDialogController.open()},[ei,B,q]),er=(0,d.useCallback)(e=>{e.isDefaultPrevented()||("Escape"===e.key&&(e.preventDefault(),e.stopPropagation(),ea()),v&&v(e))},[v,ea]),eo=(0,d.useCallback)(()=>{L.current?.discardDialogController.close()},[]),es=(0,d.useCallback)(()=>{L.current?.discardDialogController.close(),ei()},[ei]),el=(0,d.useCallback)(e=>{j?.(S,e)},[S,j]),ec=(0,d.useCallback)(()=>{b(S,{message:I}),O(!1)},[S,b,I]),ed=(0,d.useCallback)(()=>{C?.(S,"open"===a.status?"resolved":"open")},[S,a.status,C]),eu=(0,d.useCallback)(()=>{O(e=>!e)},[]),ep=(0,d.useCallback)(()=>R(!1),[]),em=(0,d.useCallback)(e=>{"Escape"!==e.key||B||ei()},[ei,B]);sB($,ep),(0,h.Of)(!B&&ei,()=>[P.current]);let eh=M?.displayName?(0,l.jsx)(h.xv,{size:1,weight:"medium",textOverflow:"ellipsis",title:M.displayName,children:M.displayName}):(0,l.jsx)(h.Qr,{size:1,style:VJ});return(0,l.jsxs)(V5,{"data-menu-open":D?"true":"false","data-testid":"comments-list-item-layout",onKeyDown:em,ref:P,space:4,children:[(0,l.jsxs)(V2,{space:1,"data-muted":J,children:[(0,l.jsxs)(V0,{align:"center",gap:3,flex:1,$size:t,children:[k&&(0,l.jsx)(qU,{user:M,size:t}),(0,l.jsxs)(h.kC,{direction:"column",gap:2,paddingY:c?2:0,children:[(0,l.jsx)(h.kC,{align:"center",paddingBottom:a.context?.intent?0:1,sizing:"border",flex:1,children:(0,l.jsxs)(h.kC,{align:"flex-end",gap:2,children:[(0,l.jsx)(h.xu,{flex:1,children:eh}),!J&&(0,l.jsxs)(h.kC,{align:"center",gap:1,children:[(0,l.jsx)(VQ,{muted:!0,size:0,children:(0,l.jsx)("time",{dateTime:U.toISOString(),title:W,children:G})}),Y&&Z&&(0,l.jsx)(VQ,{muted:!0,size:0,title:Y,children:(0,l.jsxs)("time",{dateTime:Z.toISOString(),title:Y,children:["(",N("list-item.layout-edited"),")"]})})]})]})}),c&&(0,l.jsx)(h.xu,{flex:1,children:(0,l.jsx)(V1,{muted:!0,size:0,textOverflow:"ellipsis",children:(0,l.jsx)(rm,{t:N,i18nKey:"list-item.layout-context",values:{title:c.title,intent:"edit"},components:{IntentLink:({children:e})=>c?(0,l.jsx)(ny.nR,{params:c.params,intent:c.name,children:e}):void 0}})})})]}),!$&&!J&&(0,l.jsx)(VY,{"data-root-menu":u?"true":"false",onClick:VW,children:(0,l.jsx)(VU,{canDelete:n,canEdit:i,isParent:u,mode:f,onCopyLink:g?ee:void 0,onDeleteStart:en,onEditStart:eu,onMenuClose:Q,onMenuOpen:X,onReactionSelect:el,onStatusChange:C?ed:void 0,readOnly:w,status:a.status})})]}),St(a)&&!!a?.contentSnapshot&&(0,l.jsxs)(h.kC,{gap:3,marginBottom:3,children:[k&&(0,l.jsx)(qZ,{$size:t}),(0,l.jsx)(VH,{hasReferencedValue:s,value:a?.contentSnapshot})]}),$&&(0,l.jsxs)(h.kC,{align:"flex-start",gap:2,children:[k&&(0,l.jsx)(qZ,{$size:t}),(0,l.jsx)(h.Kq,{flex:1,children:(0,l.jsx)(Vy,{currentUser:r,focusOnMount:!0,mentionOptions:m,onChange:z,onDiscardCancel:eo,onDiscardConfirm:es,onKeyDown:er,onSubmit:ec,readOnly:w,ref:L,value:I,withAvatar:!1})})]}),!$&&(0,l.jsxs)(h.kC,{gap:3,children:[k&&(0,l.jsx)(qZ,{$size:t}),(0,l.jsx)(VT,{blocks:_})]}),K&&(0,l.jsxs)(h.kC,{gap:3,marginTop:2,children:[k&&(0,l.jsx)(qZ,{$size:t}),(0,l.jsx)(h.xu,{onClick:VW,children:(0,l.jsx)(VB,{currentUser:r,mode:f,onSelect:el,reactions:V,readOnly:w})})]})]}),J&&(0,l.jsxs)(V3,{gap:3,$size:t,children:[k&&(0,l.jsx)(qZ,{$size:t}),(0,l.jsxs)(h.kC,{align:"center",gap:1,flex:1,children:[(0,l.jsxs)(h.xv,{muted:!0,size:1,children:[o&&N("list-item.layout-failed-sent"),p&&N("list-item.layout-posting")]}),(0,l.jsx)(h.kC,{hidden:p,children:(0,l.jsx)(V4,{__unstable_focusRing:!0,display:"flex",forwardedAs:"button",onClick:et,padding:1,radius:2,tone:"primary",children:(0,l.jsx)(h.xv,{size:1,muted:!0,children:N("list-item.layout-retry")})})})]})]})]})}let V7=(0,j.zo)(h.Zb).attrs({padding:3,radius:3,sizing:"border"})(e=>{let{theme:t}=e,n=t.sanity.color.dark,i=M.VG[Ed][n?900:50].hex,a=M.VG.gray[n?900:50].hex;return(0,j.iv)`
      background-color: ${a};

      &[data-active='true'] {
        background-color: ${i};
      }
    `}),V9=[],Ke={avatarSize:1,parentCommentAvatar:!0,replyAvatar:!0,threadCommentsAvatar:!0},Kt=(0,j.zo)(V7)(()=>(0,j.iv)`
    position: relative;

    &:has(> [data-ui='GhostButton']:focus:focus-visible) {
      box-shadow:
        inset 0 0 0 1px var(--card-border-color),
        0 0 0 1px var(--card-bg-color),
        0 0 0 2px var(--card-focus-ring-color);
    }

    // The hover styles is managed with the [data-hovered] attribute instead of the :hover pseudo class
    // since we want to show the hover styles when hovering over the menu items in the context menu as well.
    // The context menu is rendered using a portal, so the :hover pseudo class won't work when hovering over
    // the menu items.
    &:not([data-active='true']) {
      @media (hover: hover) {
        &[data-hovered='true'] {
          [data-root-menu='true'] {
            opacity: 1;
          }
        }
      }
    }
  `),Kn=(0,j.zo)(x.zx)(({theme:e})=>{let{medium:t}=e.sanity.fonts.text.weights;return(0,j.iv)`
    font-weight: ${t};
  `}),Ki=j.zo.button`
  opacity: 0;
  position: absolute;
  right: 0;
  top: 0;
  bottom: 0;
  left: 0;
`,Ka=(0,d.memo)(function(e){let{avatarConfig:t=Ke,canReply:n,currentUser:i,hasReferencedValue:a,innerPadding:r,isSelected:o,mentionOptions:s,mode:c,onCopyLink:u,onCreateRetry:p,onDelete:m,onEdit:f,onKeyDown:g,onPathSelect:x,onReactionSelect:y,onReply:b,onStatusChange:v,parentComment:j,readOnly:C,replies:w=V9}=e,{t:k}=i1(_R),[T,A]=(0,d.useState)(V9),[S,E]=(0,d.useState)(!0),M=(0,d.useRef)(!1),N=(0,d.useRef)(null),{isTopLayer:I}=(0,h.sJ)(),z=(0,d.useMemo)(()=>Se(T),[T]),[$,O]=(0,d.useState)(!1),P=(0,d.useCallback)(()=>O(!0),[]),F=(0,d.useCallback)(()=>O(!1),[]),D=(0,d.useCallback)(()=>{let e={message:T,parentCommentId:j._id,status:j?.status||"open",threadId:j.threadId,reactions:V9,payload:{fieldPath:j.target.path?.field||""}};b?.(e),A(V9)},[b,j._id,j?.status,j.target.path?.field,j.threadId,T]),R=(0,d.useCallback)(()=>{if(!z){A(V9);return}N.current?.discardDialogController.open()},[z]),L=(0,d.useCallback)(e=>{e.isDefaultPrevented()||"Escape"===e.key&&(e.preventDefault(),e.stopPropagation(),R())},[R]),B=(0,d.useCallback)(()=>{N.current?.discardDialogController.close()},[]),q=(0,d.useCallback)(()=>{A(V9),N.current?.discardDialogController.close(),N.current?.focus()},[]),V=(0,d.useCallback)(e=>{e.stopPropagation(),I&&x?.({fieldPath:j.target.path?.field||"",origin:"inspector",threadId:j.threadId})},[I,x,j.target.path?.field,j.threadId]),K=(0,d.useCallback)(e=>{e.stopPropagation(),E(!1),M.current=!0},[]),U=(0,d.useMemo)(()=>S?w?.slice(-5):w,[w,S]),Z=(0,d.useMemo)(()=>!!w&&w.length>5,[w]),G=(0,d.useMemo)(()=>`${w?.length-5} more ${w?.length-5==1?"comment":"comments"}`,[w?.length]);(0,d.useEffect)(()=>{w.length>5&&!M.current&&E(!0)},[w]);let H=(0,d.useMemo)(()=>U.map(e=>(0,l.jsx)(h.Kq,{as:"li",...S_(e._id),children:(0,l.jsx)(V6,{avatarSize:t.avatarSize,canDelete:e.authorId===i.id,canEdit:e.authorId===i.id,comment:e,currentUser:i,hasError:e._state?.type==="createError",isRetrying:e._state?.type==="createRetrying",intent:function(e,t){let n=e?.context?.intent,i=t?.context?.intent;if(i&&(!n||"preview"in i.params&&"preview"in n.params&&i.params.preview!==n.params.preview))return i}(j,e),mentionOptions:s,mode:c,onCopyLink:u,onCreateRetry:p,onDelete:m,onEdit:f,onInputKeyDown:L,onReactionSelect:y,readOnly:C,withAvatar:t.threadCommentsAvatar})},e._id)),[t.threadCommentsAvatar,t.avatarSize,i,L,s,u,p,m,f,y,j,C,U,c]);return(0,l.jsxs)(Kt,{"data-active":o?"true":"false","data-hovered":$?"true":"false","data-testid":"comments-list-item","data-ui":"CommentsListItem",onClick:V,onMouseEnter:P,onMouseLeave:F,children:[(0,l.jsx)(Ki,{"data-ui":"GhostButton","aria-label":k("list-item.go-to-field-button.aria-label")}),(0,l.jsxs)(h.Kq,{as:"ul",padding:r,paddingBottom:n?void 0:1,space:4,children:[(0,l.jsx)(h.Kq,{as:"li",...S_(j._id),children:(0,l.jsx)(V6,{avatarSize:t.avatarSize,canDelete:j.authorId===i.id,canEdit:j.authorId===i.id,comment:j,currentUser:i,hasError:j._state?.type==="createError",hasReferencedValue:a,intent:j.context?.intent,isParent:!0,isRetrying:j._state?.type==="createRetrying",mentionOptions:s,mode:c,onCopyLink:u,onCreateRetry:p,onDelete:m,onEdit:f,onInputKeyDown:g,onReactionSelect:y,onStatusChange:v,readOnly:C,withAvatar:t.parentCommentAvatar})}),Z&&!M.current&&(0,l.jsxs)(h.kC,{gap:1,paddingY:1,sizing:"border",children:[(0,l.jsx)(qZ,{}),(0,l.jsx)(Kn,{iconRight:_.v4q,mode:"bleed",onClick:K,text:G})]}),H,n&&(0,l.jsx)(Vy,{avatarSize:t.avatarSize,currentUser:i,expandOnFocus:!0,mentionOptions:s,onChange:A,onDiscardCancel:B,onDiscardConfirm:q,onKeyDown:L,onSubmit:D,placeholder:k("upsell"===c?"compose.reply-placeholder-upsell":"compose.reply-placeholder"),readOnly:C||"upsell"===c,ref:N,value:T,withAvatar:t.replyAvatar})]})]})});function Kr(e){let{status:t,error:n,loading:i,hasNoComments:a}=e,{t:r}=i1(_R),o={open:{title:r("list-status.empty-state-open-title"),message:r("list-status.empty-state-open-text")},resolved:{title:r("list-status.empty-state-resolved-title"),message:r("list-status.empty-state-resolved-text")}};return n?(0,l.jsx)(h.kC,{align:"center",justify:"center",flex:1,padding:4,children:(0,l.jsx)(h.kC,{align:"center",children:(0,l.jsx)(h.xv,{size:1,muted:!0,children:r("list-status.error")})})}):i?(0,l.jsx)(aW,{showText:!0,title:r("list-status.loading")}):a?(0,l.jsx)(h.kC,{align:"center",justify:"center",flex:1,sizing:"border",children:(0,l.jsx)(h.W2,{width:0,padding:4,children:(0,l.jsxs)(h.Kq,{space:3,children:[(0,l.jsx)(h.xv,{align:"center",size:1,muted:!0,weight:"medium",children:o[t].title}),(0,l.jsx)(h.xv,{align:"center",size:1,muted:!0,children:o[t].message})]})})}):null}let Ko=[];function Ks(e){let{currentUser:t,fieldTitle:n,mentionOptions:i,mode:a,onBlur:r,onFocus:o,onKeyDown:s,onNewThreadCreate:c,readOnly:u}=e,{t:p}=i1(_R),[m,h]=(0,d.useState)(Ko),f=(0,d.useRef)(null),g=(0,d.useCallback)(()=>{c?.(m),h(Ko)},[c,m]),x=(0,d.useMemo)(()=>Se(m),[m]),y=(0,d.useCallback)(()=>{x&&f.current?.discardDialogController.open()},[x]),b=(0,d.useCallback)(e=>{e.isDefaultPrevented()||("Escape"===e.key&&(e.preventDefault(),e.stopPropagation(),y()),s&&s(e))},[s,y]),v=(0,d.useCallback)(()=>{h(Ko),f.current?.discardDialogController.close(),f.current?.focus()},[]),j=(0,d.useCallback)(()=>{f.current?.discardDialogController.close()},[]),C="upsell"===a?p("compose.add-comment-input-placeholder-upsell"):(0,l.jsx)(rm,{t:p,i18nKey:"compose.add-comment-input-placeholder",values:{field:n}});return(0,l.jsx)(Vy,{currentUser:t,expandOnFocus:!0,mentionOptions:i,onBlur:r,onChange:h,onDiscardCancel:j,onDiscardConfirm:v,onKeyDown:b,onFocus:o,onSubmit:g,placeholder:C,readOnly:u||"upsell"===a,ref:f,value:m})}let Kl=(0,j.zo)(h.kC)`
  min-height: 25px;
`,Kc=(0,j.zo)(h.zx)(({theme:e})=>{let t=e.sanity.color.base.fg;return(0,j.iv)`
    --card-fg-color: ${t};

    // The width is needed to make the text ellipsis work
    // in the breadcrumbs component
    max-width: 100%;
  `});function Kd(e){let{breadcrumbs:t,canCreateNewThread:n,children:i,currentUser:a,fieldPath:r,isSelected:o,mentionOptions:s,mode:c,onNewThreadCreate:u,onPathSelect:p,readOnly:m}=e,{t:f}=i1(_R),g=(0,d.useCallback)(e=>{let t={message:e,parentCommentId:void 0,status:"open",threadId:(0,nm.Z)(),reactions:[],payload:{fieldPath:r}};u?.(t)},[u,r]),x=(0,d.useCallback)(e=>{e.stopPropagation(),p?.({fieldPath:r,origin:"inspector",threadId:null})},[r,p]),y=(0,d.useCallback)(e=>{e.stopPropagation(),0!==e.detail&&p?.({fieldPath:r,origin:"inspector",threadId:null})},[r,p]),b=(0,d.useMemo)(()=>t?.map(e=>e.title)||[],[t]),v=b[b.length-1];return(0,l.jsxs)(h.Kq,{space:2,children:[(0,l.jsx)(Kl,{align:"center",gap:2,paddingRight:1,sizing:"border",children:(0,l.jsx)(h.Kq,{flex:1,children:(0,l.jsx)(h.kC,{align:"center",children:(0,l.jsx)(Kc,{"aria-label":f("list-item.breadcrumb-button-go-to-field-aria-label",{field:v}),mode:"bleed",onClick:x,padding:2,space:2,children:(0,l.jsx)(aw,{maxLength:3,titlePath:b})})})})}),n&&(0,l.jsx)(V7,{onClick:y,"data-active":o,children:(0,l.jsx)(Ks,{currentUser:a,fieldTitle:v,mentionOptions:s,mode:c,onNewThreadCreate:g,readOnly:m})}),(0,l.jsx)(h.Kq,{space:2,children:i})]})}let Ku=(0,d.forwardRef)(function(e,t){let{beforeListNode:n,comments:i,currentUser:a,error:r,loading:o,mentionOptions:s,mode:c,onCopyLink:u,onCreateRetry:p,onDelete:m,onEdit:f,onNewThreadCreate:g,onPathSelect:x,onReactionSelect:y,onReply:b,onStatusChange:v,readOnly:j,selectedPath:C,status:w}=e,[k,T]=(0,d.useState)(null),A=(0,d.useMemo)(()=>Object.entries(i.reduce((e,t)=>{let n=t.fieldPath;return e[n]||(e[n]=[]),e[n].push(t),e},{})),[i]),_=!o&&!r&&A.length>0;return(0,l.jsxs)(h.kC,{"data-testid":"comments-list",direction:"column",flex:1,height:"fill",overflow:"hidden",ref:T,sizing:"border",children:["upsell"!==c&&(0,l.jsx)(Kr,{error:r,hasNoComments:0===A.length,loading:o,status:w}),(_||n)&&(0,l.jsxs)(h.Kq,{as:"ul",flex:1,overflow:"auto",padding:3,paddingTop:1,paddingBottom:6,sizing:"border",space:1,ref:t,children:[n,(0,l.jsx)(h.NM,{element:k,children:A?.map(([e,t])=>{let n=t[0].breadcrumbs,i=t[0].threadId,r=C?.fieldPath===e&&!C.threadId;return l.jsx(h.Kq,{as:"li",paddingTop:3,...{"data-comments-group-id":SA(i)},children:l.jsx(Kd,{breadcrumbs:n,canCreateNewThread:"open"===w,currentUser:a,fieldPath:e,isSelected:r,mentionOptions:s,mode:c,onNewThreadCreate:g,onPathSelect:x,readOnly:j,children:t.map(e=>{let t=e.replies.slice().reverse(),n="open"===w&&e.parentComment._state?.type!=="createError"&&e.parentComment._state?.type!=="createRetrying",i=C?.threadId===e.parentComment.threadId&&C?.fieldPath===e.parentComment.target.path?.field;return l.jsx(Ka,{canReply:n,currentUser:a,hasReferencedValue:e.hasReferencedValue,isSelected:i,mentionOptions:s,mode:c,onCopyLink:u,onCreateRetry:p,onDelete:m,onEdit:f,onPathSelect:x,onReactionSelect:y,onReply:b,onStatusChange:v,parentComment:e.parentComment,readOnly:j,replies:t},e.parentComment._id)})},e)},e)})})]})]})}),Kp=(0,d.memo)(Ku),Km=(0,j.zo)(h.xu)`
  max-width: 280px;
`,Kh=(0,j.F4)`
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
`,Kf=(0,j.zo)(x.J2)`
  opacity: 0;
  // Fade in the popover after 500ms
  animation: ${Kh} 200ms 500ms forwards;
`;function Kg(e){let{onDismiss:t}=e,{t:n}=i1(_R);return(0,l.jsx)(Kf,{content:(0,l.jsx)(Km,{padding:4,children:(0,l.jsxs)(h.Kq,{space:3,children:[(0,l.jsx)(h.xv,{weight:"medium",size:1,children:n("onboarding.header")}),(0,l.jsx)(h.xv,{size:1,children:n("onboarding.body")}),(0,l.jsx)(h.kC,{justify:"flex-end",marginTop:2,children:(0,l.jsx)(x.zx,{text:n("onboarding.dismiss"),tone:"primary",onClick:t})})]})}),open:!0,portal:!0,...e})}function Kx(e){let{data:t,onPrimaryClick:n,onSecondaryClick:i}=e;return(0,l.jsx)(h.W2,{width:1,children:(0,l.jsx)(h.xu,{marginBottom:6,children:(0,l.jsx)(NO,{data:t,onPrimaryClick:n,onSecondaryClick:i})})})}}}]);