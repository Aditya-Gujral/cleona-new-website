"use client";"use strict";var e=require("@sanity/visual-editing"),t=require("next/navigation.js"),r=require("react");module.exports=function(u){const{zIndex:n}=u,c=t.useRouter(),s=r.useRef(c),[a,i]=r.useState();r.useEffect((()=>{s.current=c}),[c]),r.useEffect((()=>{const t=e.enableVisualEditing({zIndex:n,history:{subscribe:e=>(i((()=>e)),()=>i(void 0)),update:e=>{switch(e.type){case"push":return s.current.push(e.url);case"pop":return s.current.back();case"replace":return s.current.replace(e.url);default:throw new Error("Unknown update type: ".concat(e.type))}}}});return()=>t()}),[n]);const o=t.usePathname(),l=t.useSearchParams();return r.useEffect((()=>{a&&a({type:"push",url:"".concat(o).concat((null==l?void 0:l.size)?"?".concat(l):"")})}),[a,o,l]),null};
//# sourceMappingURL=VisualEditing.cjs.map
