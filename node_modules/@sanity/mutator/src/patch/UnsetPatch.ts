<<<<<<< HEAD
import {targetsToIndicies} from './util'

export default class UnsetPatch {
  id: string
  path: string
  value: any
=======
import {type Expression} from '../jsonpath'
import {type ImmutableAccessor} from './ImmutableAccessor'
import {targetsToIndicies} from './util'

export class UnsetPatch {
  id: string
  path: string
  value: unknown

>>>>>>> origin/main
  constructor(id: string, path: string) {
    this.id = id
    this.path = path
  }
<<<<<<< HEAD
  apply(targets, accessor) {
=======

  // eslint-disable-next-line class-methods-use-this
  apply(targets: Expression[], accessor: ImmutableAccessor): ImmutableAccessor {
>>>>>>> origin/main
    let result = accessor
    switch (accessor.containerType()) {
      case 'array':
        result = result.unsetIndices(targetsToIndicies(targets, accessor))
        break
      case 'object':
        targets.forEach((target) => {
          result = result.unsetAttribute(target.name())
        })
        break
      default:
        throw new Error(
<<<<<<< HEAD
          'Target value is neither indexable or an object. This error should potentially just be silently ignored?'
=======
          'Target value is neither indexable or an object. This error should potentially just be silently ignored?',
>>>>>>> origin/main
        )
    }
    return result
  }
}
